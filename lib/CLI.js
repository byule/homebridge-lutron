var l2=Object.create;var Hi=Object.defineProperty;var f2=Object.getOwnPropertyDescriptor;var h2=Object.getOwnPropertyNames,es=Object.getOwnPropertySymbols,d2=Object.getPrototypeOf,Cu=Object.prototype.hasOwnProperty,Rh=Object.prototype.propertyIsEnumerable;var Su=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var Oh=(e,t,r)=>t in e?Hi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ts=(e,t)=>{for(var r in t||(t={}))Cu.call(t,r)&&Oh(e,r,t[r]);if(es)for(var r of es(t))Rh.call(t,r)&&Oh(e,r,t[r]);return e};var Nh=(e,t)=>{var r={};for(var n in e)Cu.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&es)for(var n of es(e))t.indexOf(n)<0&&Rh.call(e,n)&&(r[n]=e[n]);return r};var ht=(e,t)=>()=>(e&&(t=e(e=0)),t);var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),p2=(e,t)=>{for(var r in t)Hi(e,r,{get:t[r],enumerable:!0})},Dh=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of h2(t))!Cu.call(e,i)&&i!==r&&Hi(e,i,{get:()=>t[i],enumerable:!(n=f2(t,i))||n.enumerable});return e};var Ir=(e,t,r)=>(r=e!=null?l2(d2(e)):{},Dh(t||!e||!e.__esModule?Hi(r,"default",{value:e,enumerable:!0}):r,e)),v2=e=>Dh(Hi({},"__esModule",{value:!0}),e);var rs=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{o(r.next(c))}catch(u){i(u)}},s=c=>{try{o(r.throw(c))}catch(u){i(u)}},o=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,s);o((r=r.apply(e,t)).next())}),ji=function(e,t){this[0]=e,this[1]=t},Ph=(e,t,r)=>{var n=(s,o,c,u)=>{try{var l=r[s](o),f=(o=l.value)instanceof ji,h=l.done;Promise.resolve(f?o[0]:o).then(p=>f?n(s==="return"?s:"next",o[1]?{done:p.done,value:p.value}:p,c,u):c({value:p,done:h})).catch(p=>n("throw",p,c,u))}catch(p){u(p)}},i=s=>a[s]=o=>new Promise((c,u)=>n(s,o,c,u)),a={};return r=r.apply(e,t),a[Su("asyncIterator")]=()=>a,i("next"),i("throw"),i("return"),a};var Lh=(e,t,r)=>(t=e[Su("asyncIterator")])?t.call(e):(e=e[Su("iterator")](),t={},r=(n,i)=>(i=e[n])&&(t[n]=a=>new Promise((s,o,c)=>(a=i.call(e,a),c=a.done,Promise.resolve(a.value).then(u=>s({value:u,done:c}),o)))),r("next"),r("return"),t);var ee=S((NP,kh)=>{kh.exports={options:{usePureJavaScript:!1}}});var Mh=S((DP,qh)=>{var xu={};qh.exports=xu;var Uh={};xu.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=y2(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<o.length;++c)u+=o[c]<<8,o[c]=u%a,u=u/a|0;for(;u>0;)o.push(u%a),u=u/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join(`\r
`)}return n};xu.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=Uh[t];if(!r){r=Uh[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var c=0,u=o;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var l=0;e[l]===a&&l<e.length-1;++l)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function y2(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%n,o=o/n|0;for(;o>0;)a.push(o%n),o=o/n|0}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=a.length-1;r>=0;--r)c+=t[a[r]];return c}});var de=S((PP,Hh)=>{var Fh=ee(),Vh=Mh(),T=Hh.exports=Fh.util=Fh.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){T.nextTick=process.nextTick,typeof setImmediate=="function"?T.setImmediate=setImmediate:T.setImmediate=T.nextTick;return}if(typeof setImmediate=="function"){T.setImmediate=function(){return setImmediate.apply(void 0,arguments)},T.nextTick=function(o){return setImmediate(o)};return}if(T.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var u=t.slice();t.length=0,u.forEach(function(l){l()})}};var s=o,e="forge.setImmediate",t=[];T.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var a=T.setImmediate;T.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),a(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n))}}T.nextTick=T.setImmediate})();T.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;T.globalScope=function(){return T.isNodejs?global:typeof self=="undefined"?window:self}();T.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};T.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};T.isArrayBufferView=function(e){return e&&T.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function $i(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}T.ByteBuffer=bu;function bu(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(T.isArrayBuffer(e)||T.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof bu||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}T.ByteStringBuffer=bu;var g2=4096;T.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>g2&&(this.data.substr(0,1),this._constructedStringLength=0)};T.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};T.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};T.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};T.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};T.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};T.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(T.encodeUtf8(e))};T.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};T.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};T.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};T.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};T.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};T.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};T.ByteStringBuffer.prototype.putInt=function(e,t){$i(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};T.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};T.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};T.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};T.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};T.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};T.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};T.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};T.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};T.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};T.ByteStringBuffer.prototype.getInt=function(e){$i(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};T.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};T.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};T.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};T.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};T.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};T.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};T.ByteStringBuffer.prototype.copy=function(){var e=T.createBuffer(this.data);return e.read=this.read,e};T.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};T.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};T.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};T.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};T.ByteStringBuffer.prototype.toString=function(){return T.decodeUtf8(this.bytes())};function m2(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=T.isArrayBuffer(e),n=T.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}T.DataBuffer=m2;T.DataBuffer.prototype.length=function(){return this.write-this.read};T.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};T.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};T.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};T.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};T.DataBuffer.prototype.putBytes=function(e,t){if(T.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(T.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof T.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&T.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof T.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=T.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=T.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=T.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=T.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=T.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};T.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};T.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};T.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};T.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};T.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};T.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};T.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};T.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};T.DataBuffer.prototype.putInt=function(e,t){$i(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};T.DataBuffer.prototype.putSignedInt=function(e,t){return $i(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};T.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};T.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};T.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};T.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};T.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};T.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};T.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};T.DataBuffer.prototype.getInt=function(e){$i(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};T.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};T.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};T.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};T.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};T.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};T.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};T.DataBuffer.prototype.copy=function(){return new T.DataBuffer(this)};T.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};T.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};T.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};T.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};T.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return T.binary.raw.encode(t);if(e==="hex")return T.binary.hex.encode(t);if(e==="base64")return T.binary.base64.encode(t);if(e==="utf8")return T.text.utf8.decode(t);if(e==="utf16")return T.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};T.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=T.encodeUtf8(e)),new T.ByteBuffer(e)};T.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};T.xorBytes=function(e,t,r){for(var n="",i="",a="",s=0,o=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=a,a="",o=0),a+=String.fromCharCode(i),++o;return n+=a,n};T.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};T.bytesToHex=function(e){return T.createBuffer(e).toHex()};T.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Jr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Zr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],Kh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";T.encode64=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),r+=Jr.charAt(i>>2),r+=Jr.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Jr.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Jr.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};T.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,a,s=0;s<e.length;)r=Zr[e.charCodeAt(s++)-43],n=Zr[e.charCodeAt(s++)-43],i=Zr[e.charCodeAt(s++)-43],a=Zr[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};T.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};T.decodeUtf8=function(e){return decodeURIComponent(escape(e))};T.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:Vh.encode,decode:Vh.decode}};T.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};T.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};T.binary.hex.encode=T.bytesToHex;T.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(e.length&1&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n};T.binary.base64.encode=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],r+=Jr.charAt(i>>2),r+=Jr.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=Jr.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":Jr.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};T.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,o,c=0,u=r;c<e.length;)i=Zr[e.charCodeAt(c++)-43],a=Zr[e.charCodeAt(c++)-43],s=Zr[e.charCodeAt(c++)-43],o=Zr[e.charCodeAt(c++)-43],n[u++]=i<<2|a>>4,s!==64&&(n[u++]=(a&15)<<4|s>>2,o!==64&&(n[u++]=(s&3)<<6|o));return t?u-r:n.subarray(0,u)};T.binary.base58.encode=function(e,t){return T.binary.baseN.encode(e,Kh,t)};T.binary.base58.decode=function(e,t){return T.binary.baseN.decode(e,Kh,t)};T.text={utf8:{},utf16:{}};T.text.utf8.encode=function(e,t,r){e=T.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};T.text.utf8.decode=function(e){return T.decodeUtf8(String.fromCharCode.apply(null,e))};T.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-r:n};T.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};T.deflate=function(e,t,r){if(t=T.decode64(e.deflate(T.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};T.inflate=function(e,t,r){var n=e.inflate(T.encode64(t)).rval;return n===null?null:T.decode64(n)};var Tu=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=T.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Au=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(T.decode64(r))),r},E2=function(e,t,r,n){var i=Au(e,t);i===null&&(i={}),i[r]=n,Tu(e,t,i)},S2=function(e,t,r){var n=Au(e,t);return n!==null&&(n=r in n?n[r]:null),n},C2=function(e,t,r){var n=Au(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),Tu(e,t,n)}},x2=function(e,t){Tu(e,t,null)},ns=function(e,t,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(c){s=c}if(a)break}if(!a)throw s;return n};T.setItem=function(e,t,r,n,i){ns(E2,arguments,i)};T.getItem=function(e,t,r,n){return ns(S2,arguments,n)};T.removeItem=function(e,t,r,n){ns(C2,arguments,n)};T.clearItems=function(e,t,r){ns(x2,arguments,r)};T.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};T.format=function(e){for(var t=/%./g,r,n,i=0,a=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&a.push(n),s=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};T.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,o=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+o:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-u).toFixed(a).slice(2):"")};T.formatSize=function(e){return e>=1073741824?e=T.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=T.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=T.formatNumber(e/1024,0)+" KiB":e=T.formatNumber(e,0)+" bytes",e};T.bytesFromIP=function(e){return e.indexOf(".")!==-1?T.bytesFromIPv4(e):e.indexOf(":")!==-1?T.bytesFromIPv6(e):null};T.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=T.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};T.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=T.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=T.hexToBytes(e[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};T.bytesToIP=function(e){return e.length===4?T.bytesToIPv4(e):e.length===16?T.bytesToIPv6(e):null};T.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};T.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var a=T.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],o=t.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(a)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};T.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in T&&!e.update)return t(null,T.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return T.cores=navigator.hardwareConcurrency,t(null,T.cores);if(typeof Worker=="undefined")return T.cores=1,t(null,T.cores);if(typeof Blob=="undefined")return T.cores=2,t(null,T.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),c=o+4;Date.now()<c;);self.postMessage({st:o,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,o,c){if(o===0){var u=Math.floor(s.reduce(function(l,f){return l+f},0)/s.length);return T.cores=Math.max(1,u),URL.revokeObjectURL(r),t(null,T.cores)}i(c,function(l,f){s.push(a(c,f)),n(s,o-1,c)})}function i(s,o){for(var c=[],u=[],l=0;l<s;++l){var f=new Worker(r);f.addEventListener("message",function(h){if(u.push(h.data),u.length===s){for(var p=0;p<s;++p)c[p].terminate();o(null,u)}}),c.push(f)}for(var l=0;l<s;++l)c[l].postMessage(l)}function a(s,o){for(var c=[],u=0;u<s;++u)for(var l=o[u],f=c[u]=[],h=0;h<s;++h)if(u!==h){var p=o[h];(l.st>p.st&&l.st<p.et||p.st>l.st&&p.st<l.et)&&f.push(h)}return c.reduce(function(d,m){return Math.max(d,m.length)},0)}}});var is=S((LP,jh)=>{var Ue=ee();de();jh.exports=Ue.cipher=Ue.cipher||{};Ue.cipher.algorithms=Ue.cipher.algorithms||{};Ue.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Ue.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Ue.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Ue.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Ue.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Ue.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Ue.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Ue.cipher.algorithms[e]=t};Ue.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Ue.cipher.algorithms?Ue.cipher.algorithms[e]:null};var _u=Ue.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};_u.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Ue.util.createBuffer(),this.output=e.output||Ue.util.createBuffer(),this.mode.start(t)};_u.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};_u.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Iu=S((kP,$h)=>{var qe=ee();de();qe.cipher=qe.cipher||{};var ie=$h.exports=qe.cipher.modes=qe.cipher.modes||{};ie.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.ecb.prototype.start=function(e){};ie.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};ie.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};ie.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};ie.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};ie.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=as(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ie.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};ie.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};ie.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};ie.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};ie.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};ie.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=as(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ie.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ie.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};ie.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=as(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ie.ofb.prototype.decrypt=ie.ofb.prototype.encrypt;ie.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};ie.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=as(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}ss(this._inBlock)};ie.ctr.prototype.decrypt=ie.ctr.prototype.encrypt;ie.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ie.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=qe.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=qe.util.createBuffer(e.additionalData):r=qe.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=qe.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(wu(n*8)))}this._inBlock=this._j0.slice(0),ss(this._inBlock),this._partialBytes=0,r=qe.util.createBuffer(r),this._aDataLength=wu(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};ie.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),ss(this._inBlock)};ie.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),ss(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};ie.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=qe.util.createBuffer();var n=this._aDataLength.concat(wu(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};ie.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};ie.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};ie.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};ie.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};ie.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],c=s/n|0,u=(n-1-s%n)*t;o[c]=1<<t-1<<u,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};ie.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var o=i[a],c=i[s];i[a+s]=[o[0]^c[0],o[1]^c[1],o[2]^c[2],o[3]^c[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var u=i[a^n];i[a]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i};function as(e,t){if(typeof e=="string"&&(e=qe.util.createBuffer(e)),qe.util.isArray(e)&&e.length>4){var r=e;e=qe.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!qe.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function ss(e){e[e.length-1]=e[e.length-1]+1&4294967295}function wu(e){return[e/4294967296|0,e&4294967295]}});var en=S((UP,Qh)=>{var xe=ee();is();Iu();de();Qh.exports=xe.aes=xe.aes||{};xe.aes.startEncrypting=function(e,t,r,n){var i=os({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};xe.aes.createEncryptionCipher=function(e,t){return os({key:e,output:null,decrypt:!1,mode:t})};xe.aes.startDecrypting=function(e,t,r,n){var i=os({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};xe.aes.createDecryptionCipher=function(e,t){return os({key:e,output:null,decrypt:!0,mode:t})};xe.aes.Algorithm=function(e,t){Ru||zh();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Ou(r._w,n,i,!1)},decrypt:function(n,i){return Ou(r._w,n,i,!0)}}}),r._init=!1};xe.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=xe.util.createBuffer(t);else if(xe.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=xe.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!xe.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!xe.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=Wh(t,e.decrypt&&!s),this._init=!0}};xe.aes._expandKey=function(e,t){return Ru||zh(),Wh(e,t)};xe.aes._updateBlock=Ou;ri("AES-ECB",xe.cipher.modes.ecb);ri("AES-CBC",xe.cipher.modes.cbc);ri("AES-CFB",xe.cipher.modes.cfb);ri("AES-OFB",xe.cipher.modes.ofb);ri("AES-CTR",xe.cipher.modes.ctr);ri("AES-GCM",xe.cipher.modes.gcm);function ri(e,t){var r=function(){return new xe.aes.Algorithm(e,t)};xe.cipher.registerAlgorithm(e,r)}var Ru=!1,ti=4,pt,Bu,Gh,On,jt;function zh(){Ru=!0,Gh=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;pt=new Array(256),Bu=new Array(256),On=new Array(4),jt=new Array(4);for(var t=0;t<4;++t)On[t]=new Array(256),jt[t]=new Array(256);for(var r=0,n=0,i,a,s,o,c,u,l,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,pt[r]=o,Bu[o]=r,c=e[o],i=e[r],a=e[i],s=e[a],u=c<<24^o<<16^o<<8^(o^c),l=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var f=0;f<4;++f)On[f][r]=u,jt[f][o]=l,u=u<<24|u>>>8,l=l<<24|l>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function Wh(e,t){for(var r=e.slice(0),n,i=1,a=r.length,s=a+6+1,o=ti*s,c=a;c<o;++c)n=r[c-1],c%a===0?(n=pt[n>>>16&255]<<24^pt[n>>>8&255]<<16^pt[n&255]<<8^pt[n>>>24]^Gh[i]<<24,i++):a>6&&c%a===4&&(n=pt[n>>>24]<<24^pt[n>>>16&255]<<16^pt[n>>>8&255]<<8^pt[n&255]),r[c]=r[c-a]^n;if(t){var u,l=jt[0],f=jt[1],h=jt[2],p=jt[3],d=r.slice(0);o=r.length;for(var c=0,m=o-ti;c<o;c+=ti,m-=ti)if(c===0||c===o-ti)d[c]=r[m],d[c+1]=r[m+3],d[c+2]=r[m+2],d[c+3]=r[m+1];else for(var E=0;E<ti;++E)u=r[m+E],d[c+(3&-E)]=l[pt[u>>>24]]^f[pt[u>>>16&255]]^h[pt[u>>>8&255]]^p[pt[u&255]];r=d}return r}function Ou(e,t,r,n){var i=e.length/4-1,a,s,o,c,u;n?(a=jt[0],s=jt[1],o=jt[2],c=jt[3],u=Bu):(a=On[0],s=On[1],o=On[2],c=On[3],u=pt);var l,f,h,p,d,m,E;l=t[0]^e[0],f=t[n?3:1]^e[1],h=t[2]^e[2],p=t[n?1:3]^e[3];for(var x=3,_=1;_<i;++_)d=a[l>>>24]^s[f>>>16&255]^o[h>>>8&255]^c[p&255]^e[++x],m=a[f>>>24]^s[h>>>16&255]^o[p>>>8&255]^c[l&255]^e[++x],E=a[h>>>24]^s[p>>>16&255]^o[l>>>8&255]^c[f&255]^e[++x],p=a[p>>>24]^s[l>>>16&255]^o[f>>>8&255]^c[h&255]^e[++x],l=d,f=m,h=E;r[0]=u[l>>>24]<<24^u[f>>>16&255]<<16^u[h>>>8&255]<<8^u[p&255]^e[++x],r[n?3:1]=u[f>>>24]<<24^u[h>>>16&255]<<16^u[p>>>8&255]<<8^u[l&255]^e[++x],r[2]=u[h>>>24]<<24^u[p>>>16&255]<<16^u[l>>>8&255]<<8^u[f&255]^e[++x],r[n?1:3]=u[p>>>24]<<24^u[l>>>16&255]<<16^u[f>>>8&255]<<8^u[h&255]^e[++x]}function os(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=xe.cipher.createDecipher(r,e.key):n=xe.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof xe.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var tn=S((qP,Yh)=>{var Gi=ee();Gi.pki=Gi.pki||{};var Nu=Yh.exports=Gi.pki.oids=Gi.oids=Gi.oids||{};function P(e,t){Nu[e]=t,Nu[t]=e}function ge(e,t){Nu[e]=t}P("1.2.840.113549.1.1.1","rsaEncryption");P("1.2.840.113549.1.1.4","md5WithRSAEncryption");P("1.2.840.113549.1.1.5","sha1WithRSAEncryption");P("1.2.840.113549.1.1.7","RSAES-OAEP");P("1.2.840.113549.1.1.8","mgf1");P("1.2.840.113549.1.1.9","pSpecified");P("1.2.840.113549.1.1.10","RSASSA-PSS");P("1.2.840.113549.1.1.11","sha256WithRSAEncryption");P("1.2.840.113549.1.1.12","sha384WithRSAEncryption");P("1.2.840.113549.1.1.13","sha512WithRSAEncryption");P("1.3.101.112","EdDSA25519");P("1.2.840.10040.4.3","dsa-with-sha1");P("1.3.14.3.2.7","desCBC");P("1.3.14.3.2.26","sha1");P("1.3.14.3.2.29","sha1WithRSASignature");P("2.16.840.1.101.3.4.2.1","sha256");P("2.16.840.1.101.3.4.2.2","sha384");P("2.16.840.1.101.3.4.2.3","sha512");P("2.16.840.1.101.3.4.2.4","sha224");P("2.16.840.1.101.3.4.2.5","sha512-224");P("2.16.840.1.101.3.4.2.6","sha512-256");P("1.2.840.113549.2.2","md2");P("1.2.840.113549.2.5","md5");P("1.2.840.113549.1.7.1","data");P("1.2.840.113549.1.7.2","signedData");P("1.2.840.113549.1.7.3","envelopedData");P("1.2.840.113549.1.7.4","signedAndEnvelopedData");P("1.2.840.113549.1.7.5","digestedData");P("1.2.840.113549.1.7.6","encryptedData");P("1.2.840.113549.1.9.1","emailAddress");P("1.2.840.113549.1.9.2","unstructuredName");P("1.2.840.113549.1.9.3","contentType");P("1.2.840.113549.1.9.4","messageDigest");P("1.2.840.113549.1.9.5","signingTime");P("1.2.840.113549.1.9.6","counterSignature");P("1.2.840.113549.1.9.7","challengePassword");P("1.2.840.113549.1.9.8","unstructuredAddress");P("1.2.840.113549.1.9.14","extensionRequest");P("1.2.840.113549.1.9.20","friendlyName");P("1.2.840.113549.1.9.21","localKeyId");P("1.2.840.113549.1.9.22.1","x509Certificate");P("1.2.840.113549.1.12.10.1.1","keyBag");P("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");P("1.2.840.113549.1.12.10.1.3","certBag");P("1.2.840.113549.1.12.10.1.4","crlBag");P("1.2.840.113549.1.12.10.1.5","secretBag");P("1.2.840.113549.1.12.10.1.6","safeContentsBag");P("1.2.840.113549.1.5.13","pkcs5PBES2");P("1.2.840.113549.1.5.12","pkcs5PBKDF2");P("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");P("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");P("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");P("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");P("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");P("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");P("1.2.840.113549.2.7","hmacWithSHA1");P("1.2.840.113549.2.8","hmacWithSHA224");P("1.2.840.113549.2.9","hmacWithSHA256");P("1.2.840.113549.2.10","hmacWithSHA384");P("1.2.840.113549.2.11","hmacWithSHA512");P("1.2.840.113549.3.7","des-EDE3-CBC");P("2.16.840.1.101.3.4.1.2","aes128-CBC");P("2.16.840.1.101.3.4.1.22","aes192-CBC");P("2.16.840.1.101.3.4.1.42","aes256-CBC");P("2.5.4.3","commonName");P("2.5.4.4","surname");P("2.5.4.5","serialNumber");P("2.5.4.6","countryName");P("2.5.4.7","localityName");P("2.5.4.8","stateOrProvinceName");P("2.5.4.9","streetAddress");P("2.5.4.10","organizationName");P("2.5.4.11","organizationalUnitName");P("2.5.4.12","title");P("2.5.4.13","description");P("2.5.4.15","businessCategory");P("2.5.4.17","postalCode");P("2.5.4.42","givenName");P("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");P("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");P("2.16.840.1.113730.1.1","nsCertType");P("2.16.840.1.113730.1.13","nsComment");ge("2.5.29.1","authorityKeyIdentifier");ge("2.5.29.2","keyAttributes");ge("2.5.29.3","certificatePolicies");ge("2.5.29.4","keyUsageRestriction");ge("2.5.29.5","policyMapping");ge("2.5.29.6","subtreesConstraint");ge("2.5.29.7","subjectAltName");ge("2.5.29.8","issuerAltName");ge("2.5.29.9","subjectDirectoryAttributes");ge("2.5.29.10","basicConstraints");ge("2.5.29.11","nameConstraints");ge("2.5.29.12","policyConstraints");ge("2.5.29.13","basicConstraints");P("2.5.29.14","subjectKeyIdentifier");P("2.5.29.15","keyUsage");ge("2.5.29.16","privateKeyUsagePeriod");P("2.5.29.17","subjectAltName");P("2.5.29.18","issuerAltName");P("2.5.29.19","basicConstraints");ge("2.5.29.20","cRLNumber");ge("2.5.29.21","cRLReason");ge("2.5.29.22","expirationDate");ge("2.5.29.23","instructionCode");ge("2.5.29.24","invalidityDate");ge("2.5.29.25","cRLDistributionPoints");ge("2.5.29.26","issuingDistributionPoint");ge("2.5.29.27","deltaCRLIndicator");ge("2.5.29.28","issuingDistributionPoint");ge("2.5.29.29","certificateIssuer");ge("2.5.29.30","nameConstraints");P("2.5.29.31","cRLDistributionPoints");P("2.5.29.32","certificatePolicies");ge("2.5.29.33","policyMappings");ge("2.5.29.34","policyConstraints");P("2.5.29.35","authorityKeyIdentifier");ge("2.5.29.36","policyConstraints");P("2.5.29.37","extKeyUsage");ge("2.5.29.46","freshestCRL");ge("2.5.29.54","inhibitAnyPolicy");P("1.3.6.1.4.1.11129.2.4.2","timestampList");P("1.3.6.1.5.5.7.1.1","authorityInfoAccess");P("1.3.6.1.5.5.7.3.1","serverAuth");P("1.3.6.1.5.5.7.3.2","clientAuth");P("1.3.6.1.5.5.7.3.3","codeSigning");P("1.3.6.1.5.5.7.3.4","emailProtection");P("1.3.6.1.5.5.7.3.8","timeStamping")});var $t=S((MP,Jh)=>{var _e=ee();de();tn();var U=Jh.exports=_e.asn1=_e.asn1||{};U.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};U.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};U.maxDepth=256;U.create=function(e,t,r,n,i){if(_e.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var o={tagClass:e,type:t,constructed:r,composed:r||_e.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=U.copy(o)),o};U.copy=function(e,t){var r;if(_e.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(U.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:U.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};U.equals=function(e,t,r){if(_e.util.isArray(e)){if(!_e.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!U.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&U.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};U.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function zi(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var b2=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;zi(e,t,a),n=e.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};U.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"maxDepth"in t||(t.maxDepth=U.maxDepth),typeof e=="string"&&(e=_e.util.createBuffer(e));var r=e.length(),n=us(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function us(e,t,r,n){if(r>=n.maxDepth)throw new Error("ASN.1 parsing error: Max depth exceeded.");var i;zi(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var c=b2(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=e.length(),u.remaining=t,u.requested=c,u}c=t}var l,f,h=(a&32)===32;if(h)if(l=[],c===void 0)for(;;){if(zi(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),l.push(us(e,t,r+1,n)),t-=i-e.length()}else for(;c>0;)i=e.length(),l.push(us(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(l===void 0&&s===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&(f=e.bytes(c)),l===void 0&&n.decodeBitStrings&&s===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&c>1){var p=e.read,d=t,m=0;if(o===U.Type.BITSTRING&&(zi(e,t,1),m=e.getByte(),t--),m===0)try{i=e.length();var E={strict:!0,decodeBitStrings:!0},x=us(e,t,r+1,E),_=i-e.length();t-=_,o==U.Type.BITSTRING&&_++;var w=x.tagClass;_===c&&(w===U.Class.UNIVERSAL||w===U.Class.CONTEXT_SPECIFIC)&&(l=[x])}catch(O){}l===void 0&&(e.read=p,t=d)}if(l===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(o===U.Type.BMPSTRING)for(l="";c>0;c-=2)zi(e,t,2),l+=String.fromCharCode(e.getInt16()),t-=2;else l=e.getBytes(c),t-=c}var R=f===void 0?null:{bitStringContents:f};return U.create(s,o,h,l,R)}U.toDer=function(e){var t=_e.util.createBuffer(),r=e.tagClass|e.type,n=_e.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=U.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&n.putBuffer(U.toDer(e.value[a]))}else if(e.type===U.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===U.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(n),t};U.oidToDer=function(e){var t=e.split("."),r=_e.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,a,s,o=2;o<t.length;++o){if(n=!0,i=[],a=parseInt(t[o],10),a>4294967295)throw new Error("OID value too large; max is 32-bits.");do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};U.derToOid=function(e){var t;typeof e=="string"&&(e=_e.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;){if(n>70368744177663)throw new Error("OID value too large; max is 53-bits.");r=e.getByte(),n=n*128,r&128?n+=r&127:(t+="."+(n+r),n=0)}return t};U.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var c=e.charAt(10),u=10;c!=="+"&&c!=="-"&&(o=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,0),u&&(c=e.charAt(u),c==="+"||c==="-")){var l=parseInt(e.substr(u+1,2),10),f=parseInt(e.substr(u+4,2),10),h=l*60+f;h*=6e4,c==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};U.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;e.charAt(e.length-1)==="Z"&&(l=!0);var f=e.length-5,h=e.charAt(f);if(h==="+"||h==="-"){var p=parseInt(e.substr(f+1,2),10),d=parseInt(e.substr(f+4,2),10);u=p*60+d,u*=6e4,h==="+"&&(u*=-1),l=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(a,s,o,c)),t};U.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};U.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};U.integerToDer=function(e){var t=_e.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};U.derToInteger=function(e){typeof e=="string"&&(e=_e.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};U.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&_e.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s){var o=t.value[s];i=!!o.optional;var c=e.value[a];if(!c){o.optional||(i=!1,n&&n.push("["+t.name+'] Missing required element. Expected tag class "'+o.tagClass+'", type "'+o.type+'"'));continue}var u=typeof o.tagClass!="undefined"&&typeof o.type!="undefined";if(u&&(c.tagClass!==o.tagClass||c.type!==o.type))if(o.optional){i=!0;continue}else{i=!1,n&&n.push("["+t.name+"] Tag mismatch. Expected ("+o.tagClass+","+o.type+"), got ("+c.tagClass+","+c.type+")");break}var l=U.validate(c,o,r,n);if(l)++a,i=!0;else if(o.optional)i=!0;else{i=!1;break}}if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var f;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var h=e.bitStringContents.charCodeAt(0);if(h!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var Xh=/[^\\u0000-\\u00ff]/;U.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",a=0;a<t*r;++a)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case U.Class.UNIVERSAL:n+="Universal:";break;case U.Class.APPLICATION:n+="Application:";break;case U.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case U.Class.PRIVATE:n+="Private:";break}if(e.tagClass===U.Class.UNIVERSAL)switch(n+=e.type,e.type){case U.Type.NONE:n+=" (None)";break;case U.Type.BOOLEAN:n+=" (Boolean)";break;case U.Type.INTEGER:n+=" (Integer)";break;case U.Type.BITSTRING:n+=" (Bit string)";break;case U.Type.OCTETSTRING:n+=" (Octet string)";break;case U.Type.NULL:n+=" (Null)";break;case U.Type.OID:n+=" (Object Identifier)";break;case U.Type.ODESC:n+=" (Object Descriptor)";break;case U.Type.EXTERNAL:n+=" (External or Instance of)";break;case U.Type.REAL:n+=" (Real)";break;case U.Type.ENUMERATED:n+=" (Enumerated)";break;case U.Type.EMBEDDED:n+=" (Embedded PDV)";break;case U.Type.UTF8:n+=" (UTF8)";break;case U.Type.ROID:n+=" (Relative Object Identifier)";break;case U.Type.SEQUENCE:n+=" (Sequence)";break;case U.Type.SET:n+=" (Set)";break;case U.Type.PRINTABLESTRING:n+=" (Printable String)";break;case U.Type.IA5String:n+=" (IA5String (ASCII))";break;case U.Type.UTCTIME:n+=" (UTC time)";break;case U.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case U.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=U.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(o+=","));n+=i+"Sub values: "+s+o}else{if(n+=i+"Value: ",e.type===U.Type.OID){var c=U.derToOid(e.value);n+=c,_e.pki&&_e.pki.oids&&c in _e.pki.oids&&(n+=" ("+_e.pki.oids[c]+") ")}if(e.type===U.Type.INTEGER)try{n+=U.derToInteger(e.value)}catch(l){n+="0x"+_e.util.bytesToHex(e.value)}else if(e.type===U.Type.BITSTRING){if(e.value.length>1?n+="0x"+_e.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var u=e.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(e.type===U.Type.OCTETSTRING)Xh.test(e.value)||(n+="("+e.value+") "),n+="0x"+_e.util.bytesToHex(e.value);else if(e.type===U.Type.UTF8)try{n+=_e.util.decodeUtf8(e.value)}catch(l){if(l.message==="URI malformed")n+="0x"+_e.util.bytesToHex(e.value)+" (malformed UTF8)";else throw l}else e.type===U.Type.PRINTABLESTRING||e.type===U.Type.IA5String?n+=e.value:Xh.test(e.value)?n+="0x"+_e.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var sr=S((FP,Zh)=>{var cs=ee();Zh.exports=cs.md=cs.md||{};cs.md.algorithms=cs.md.algorithms||{}});var ni=S((VP,e0)=>{var Br=ee();sr();de();var T2=e0.exports=Br.hmac=Br.hmac||{};T2.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in Br.md.algorithms)t=Br.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=Br.util.createBuffer(s);else if(Br.util.isArray(s)){var o=s;s=Br.util.createBuffer();for(var c=0;c<o.length;++c)s.putByte(o[c])}var u=s.length();u>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=Br.util.createBuffer(),n=Br.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var o=s.at(c);r.putByte(54^o),n.putByte(92^o)}if(u<t.blockLength)for(var o=t.blockLength-u,c=0;c<o;++c)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(n),t.update(a),t.digest()},i.digest=i.getMac,i}});var fs=S((KP,i0)=>{var or=ee();sr();de();var r0=i0.exports=or.md5=or.md5||{};or.md.md5=or.md.algorithms.md5=r0;r0.create=function(){n0||A2();var e=null,t=or.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=or.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=or.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),t0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=or.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Du.substr(0,n.blockLength-s));for(var o,c=0,u=n.fullMessageLength.length-1;u>=0;--u)o=n.fullMessageLength[u]*8+c,c=o/4294967296>>>0,i.putInt32Le(o>>>0);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};t0(l,r,i);var f=or.util.createBuffer();return f.putInt32Le(l.h0),f.putInt32Le(l.h1),f.putInt32Le(l.h2),f.putInt32Le(l.h3),f},n};var Du=null,ls=null,Wi=null,ii=null,n0=!1;function A2(){Du="\x80",Du+=or.util.fillString("\0",64),ls=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Wi=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],ii=new Array(64);for(var e=0;e<64;++e)ii[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);n0=!0}function t0(e,t,r){for(var n,i,a,s,o,c,u,l,f=r.length();f>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,l=0;l<16;++l)t[l]=r.getInt32Le(),c=o^a&(s^o),n=i+c+ii[l]+t[l],u=Wi[l],i=o,o=s,s=a,a+=n<<u|n>>>32-u;for(;l<32;++l)c=s^o&(a^s),n=i+c+ii[l]+t[ls[l]],u=Wi[l],i=o,o=s,s=a,a+=n<<u|n>>>32-u;for(;l<48;++l)c=a^s^o,n=i+c+ii[l]+t[ls[l]],u=Wi[l],i=o,o=s,s=a,a+=n<<u|n>>>32-u;for(;l<64;++l)c=s^(a|~o),n=i+c+ii[l]+t[ls[l]],u=Wi[l],i=o,o=s,s=a,a+=n<<u|n>>>32-u;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,f-=64}}});var Rn=S((HP,s0)=>{var ds=ee();de();var a0=s0.exports=ds.pem=ds.pem||{};a0.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=hs(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=hs(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=hs(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=hs(e.headers[i]);return e.procType&&(r+=`\r
`),r+=ds.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};a0.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(e),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var o={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:ds.util.decode64(a[3])};if(t.push(o),!!a[2]){for(var c=a[2].split(i),u=0;a&&u<c.length;){for(var l=c[u].replace(/\s+$/,""),f=u+1;f<c.length;++f){var h=c[f];if(!/\s/.test(h[0]))break;l+=h,u=f}if(a=l.match(n),a){for(var p={name:a[1],values:[]},d=a[2].split(","),m=0;m<d.length;++m)p.values.push(_2(d[m]));if(o.procType)if(!o.contentDomain&&p.name==="Content-Domain")o.contentDomain=d[0]||"";else if(!o.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:d[0],parameters:d[1]||null}}else o.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:d[0],type:d[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function hs(e){for(var t=e.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function _2(e){return e.replace(/^\s+/,"")}});var Qi=S((jP,u0)=>{var Ie=ee();is();Iu();de();u0.exports=Ie.des=Ie.des||{};Ie.des.startEncrypting=function(e,t,r,n){var i=ps({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Ie.des.createEncryptionCipher=function(e,t){return ps({key:e,output:null,decrypt:!1,mode:t})};Ie.des.startDecrypting=function(e,t,r,n){var i=ps({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Ie.des.createDecryptionCipher=function(e,t){return ps({key:e,output:null,decrypt:!0,mode:t})};Ie.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return o0(r._keys,n,i,!1)},decrypt:function(n,i){return o0(r._keys,n,i,!0)}}}),r._init=!1};Ie.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Ie.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=L2(t),this._init=!0}};ur("DES-ECB",Ie.cipher.modes.ecb);ur("DES-CBC",Ie.cipher.modes.cbc);ur("DES-CFB",Ie.cipher.modes.cfb);ur("DES-OFB",Ie.cipher.modes.ofb);ur("DES-CTR",Ie.cipher.modes.ctr);ur("3DES-ECB",Ie.cipher.modes.ecb);ur("3DES-CBC",Ie.cipher.modes.cbc);ur("3DES-CFB",Ie.cipher.modes.cfb);ur("3DES-OFB",Ie.cipher.modes.ofb);ur("3DES-CTR",Ie.cipher.modes.ctr);function ur(e,t){var r=function(){return new Ie.des.Algorithm(e,t)};Ie.cipher.registerAlgorithm(e,r)}var w2=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],I2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],B2=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],O2=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],R2=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],N2=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],D2=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],P2=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function L2(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,E=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],_=0,w,R=0;R<m;R++){var O=e.getInt32(),B=e.getInt32();w=(O>>>4^B)&252645135,B^=w,O^=w<<4,w=(B>>>-16^O)&65535,O^=w,B^=w<<-16,w=(O>>>2^B)&858993459,B^=w,O^=w<<2,w=(B>>>-16^O)&65535,O^=w,B^=w<<-16,w=(O>>>1^B)&1431655765,B^=w,O^=w<<1,w=(B>>>8^O)&16711935,O^=w,B^=w<<8,w=(O>>>1^B)&1431655765,B^=w,O^=w<<1,w=O<<8|B>>>20&240,O=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=w;for(var V=0;V<x.length;++V){x[V]?(O=O<<2|O>>>26,B=B<<2|B>>>26):(O=O<<1|O>>>27,B=B<<1|B>>>27),O&=-15,B&=-15;var K=t[O>>>28]|r[O>>>24&15]|n[O>>>20&15]|i[O>>>16&15]|a[O>>>12&15]|s[O>>>8&15]|o[O>>>4&15],W=c[B>>>28]|u[B>>>24&15]|l[B>>>20&15]|f[B>>>16&15]|h[B>>>12&15]|p[B>>>8&15]|d[B>>>4&15];w=(W>>>16^K)&65535,E[_++]=K^w,E[_++]=W^w<<16}}return E}function o0(e,t,r,n){var i=e.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],c=t[1];s=(o>>>4^c)&252645135,c^=s,o^=s<<4,s=(o>>>16^c)&65535,c^=s,o^=s<<16,s=(c>>>2^o)&858993459,o^=s,c^=s<<2,s=(c>>>8^o)&16711935,o^=s,c^=s<<8,s=(o>>>1^c)&1431655765,c^=s,o^=s<<1,o=o<<1|o>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var l=a[u+1],f=a[u+2],h=a[u];h!=l;h+=f){var p=c^e[h],d=(c>>>4|c<<28)^e[h+1];s=o,o=c,c=s^(I2[p>>>24&63]|O2[p>>>16&63]|N2[p>>>8&63]|P2[p&63]|w2[d>>>24&63]|B2[d>>>16&63]|R2[d>>>8&63]|D2[d&63])}s=o,o=c,c=s}o=o>>>1|o<<31,c=c>>>1|c<<31,s=(o>>>1^c)&1431655765,c^=s,o^=s<<1,s=(c>>>8^o)&16711935,o^=s,c^=s<<8,s=(c>>>2^o)&858993459,o^=s,c^=s<<2,s=(o>>>16^c)&65535,c^=s,o^=s<<16,s=(o>>>4^c)&252645135,c^=s,o^=s<<4,r[0]=o,r[1]=c}function ps(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=Ie.cipher.createDecipher(r,e.key):n=Ie.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof Ie.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var vs=S(($P,c0)=>{var vt=ee();ni();sr();de();var k2=vt.pkcs5=vt.pkcs5||{},Or;vt.util.isNodejs&&!vt.options.usePureJavaScript&&(Or=require("crypto"));c0.exports=vt.pbkdf2=k2.pbkdf2=function(e,t,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),vt.util.isNodejs&&!vt.options.usePureJavaScript&&Or.pbkdf2&&(i===null||typeof i!="object")&&(Or.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?Or.pbkdf2Sync.length===4?Or.pbkdf2(e,t,r,n,function(w,R){if(w)return a(w);a(null,R.toString("binary"))}):Or.pbkdf2(e,t,r,n,i,function(w,R){if(w)return a(w);a(null,R.toString("binary"))}):Or.pbkdf2Sync.length===4?Or.pbkdf2Sync(e,t,r,n).toString("binary"):Or.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in vt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=vt.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var c=Math.ceil(n/s),u=n-(c-1)*s,l=vt.hmac.create();l.start(i,e);var f="",h,p,d;if(!a){for(var m=1;m<=c;++m){l.start(null,null),l.update(t),l.update(vt.util.int32ToBytes(m)),h=d=l.digest().getBytes();for(var E=2;E<=r;++E)l.start(null,null),l.update(d),p=l.digest().getBytes(),h=vt.util.xorBytes(h,p,s),d=p;f+=m<c?h:h.substr(0,u)}return f}var m=1,E;function x(){if(m>c)return a(null,f);l.start(null,null),l.update(t),l.update(vt.util.int32ToBytes(m)),h=d=l.digest().getBytes(),E=2,_()}function _(){if(E<=r)return l.start(null,null),l.update(d),p=l.digest().getBytes(),h=vt.util.xorBytes(h,p,s),d=p,++E,vt.util.setImmediate(_);f+=m<c?h:h.substr(0,u),++m,x()}x()}});var Lu=S((GP,p0)=>{var cr=ee();sr();de();var f0=p0.exports=cr.sha256=cr.sha256||{};cr.md.sha256=cr.md.algorithms.sha256=f0;f0.create=function(){h0||U2();var e=null,t=cr.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=cr.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=cr.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),l0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=cr.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Pu.substr(0,n.blockLength-s));for(var o,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)o=n.fullMessageLength[l+1]*8,c=o/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};l0(f,r,i);var h=cr.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},n};var Pu=null,h0=!1,d0=null;function U2(){Pu="\x80",Pu+=cr.util.fillString("\0",64),d0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h0=!0}function l0(e,t,r){for(var n,i,a,s,o,c,u,l,f,h,p,d,m,E,x,_=r.length();_>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=t[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=n+t[u-7]+i+t[u-16]|0;for(l=e.h0,f=e.h1,h=e.h2,p=e.h3,d=e.h4,m=e.h5,E=e.h6,x=e.h7,u=0;u<64;++u)s=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),o=E^d&(m^E),a=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),c=l&f|h&(l^f),n=x+s+o+d0[u]+t[u],i=a+c,x=E,E=m,m=d,d=p+n>>>0,p=h,h=f,f=l,l=n+i>>>0;e.h0=e.h0+l|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+p|0,e.h4=e.h4+d|0,e.h5=e.h5+m|0,e.h6=e.h6+E|0,e.h7=e.h7+x|0,_-=64}}});var ku=S((zP,v0)=>{var lr=ee();de();var ys=null;lr.util.isNodejs&&!lr.options.usePureJavaScript&&!process.versions["node-webkit"]&&(ys=require("crypto"));var q2=v0.exports=lr.prng=lr.prng||{};q2.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(u,l){if(!l)return t.generateSync(u);var f=t.plugin.cipher,h=t.plugin.increment,p=t.plugin.formatKey,d=t.plugin.formatSeed,m=lr.util.createBuffer();t.key=null,E();function E(x){if(x)return l(x);if(m.length()>=u)return l(null,m.getBytes(u));if(t.generated>1048575&&(t.key=null),t.key===null)return lr.util.nextTick(function(){a(E)});var _=f(t.key,t.seed);t.generated+=_.length,m.putBytes(_),t.key=p(f(t.key,h(t.seed))),t.seed=d(f(t.key,t.seed)),lr.util.setImmediate(E)}},t.generateSync=function(u){var l=t.plugin.cipher,f=t.plugin.increment,h=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var d=lr.util.createBuffer();d.length()<u;){t.generated>1048575&&(t.key=null),t.key===null&&s();var m=l(t.key,t.seed);t.generated+=m.length,d.putBytes(m),t.key=h(l(t.key,f(t.seed))),t.seed=p(l(t.key,t.seed))}return d.getBytes(u)};function a(u){if(t.pools[0].messageLength>=32)return o(),u();var l=32-t.pools[0].messageLength<<5;t.seedFile(l,function(f,h){if(f)return u(f);t.collect(h),o(),u()})}function s(){if(t.pools[0].messageLength>=32)return o();var u=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(u)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var u=t.plugin.md.create();u.update(t.keyBytes);for(var l=1,f=0;f<32;++f)t.reseeds%l===0&&(u.update(t.pools[f].digest().getBytes()),t.pools[f].start()),l=l<<1;t.keyBytes=u.digest().getBytes(),u.start(),u.update(t.keyBytes);var h=u.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function c(u){var l=null,f=lr.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(l=function(O){return h.getRandomValues(O)});var p=lr.util.createBuffer();if(l)for(;p.length()<u;){var d=Math.max(1,Math.min(u-p.length(),65536)/4),m=new Uint32Array(Math.floor(d));try{l(m);for(var E=0;E<m.length;++E)p.putInt32(m[E])}catch(O){if(!(typeof QuotaExceededError!="undefined"&&O instanceof QuotaExceededError))throw O}}if(p.length()<u)for(var x,_,w,R=Math.floor(Math.random()*65536);p.length()<u;){_=16807*(R&65535),x=16807*(R>>16),_+=(x&32767)<<16,_+=x>>15,_=(_&2147483647)+(_>>31),R=_&4294967295;for(var E=0;E<3;++E)w=R>>>(E<<3),w^=Math.floor(Math.random()*256),p.putByte(w&255)}return p.getBytes(u)}return ys?(t.seedFile=function(u,l){ys.randomBytes(u,function(f,h){if(f)return l(f);l(null,h.toString())})},t.seedFileSync=function(u){return ys.randomBytes(u).toString()}):(t.seedFile=function(u,l){try{l(null,c(u))}catch(f){l(f)}},t.seedFileSync=c),t.collect=function(u){for(var l=u.length,f=0;f<l;++f)t.pools[t.pool].update(u.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(u,l){for(var f="",h=0;h<l;h+=8)f+=String.fromCharCode(u>>h&255);t.collect(f)},t.registerWorker=function(u){if(u===self)t.seedFile=function(f,h){function p(d){var m=d.data;m.forge&&m.forge.prng&&(self.removeEventListener("message",p),h(m.forge.prng.err,m.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}})};else{var l=function(f){var h=f.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(p,d){u.postMessage({forge:{prng:{err:p,bytes:d}}})})};u.addEventListener("message",l)}},t}});var Lt=S((WP,Uu)=>{var Me=ee();en();Lu();ku();de();(function(){if(Me.random&&Me.random.getBytes){Uu.exports=Me.random;return}(function(e){var t={},r=new Array(4),n=Me.util.createBuffer();t.formatKey=function(f){var h=Me.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),Me.aes._expandKey(f,!1)},t.formatSeed=function(f){var h=Me.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},t.cipher=function(f,h){return Me.aes._updateBlock(f,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=Me.md.sha256;function i(){var f=Me.prng.create(t);return f.getBytes=function(h,p){return f.generate(h,p)},f.getBytesSync=function(h){return f.generate(h)},f}var a=i(),s=null,o=Me.util.globalScope,c=o.crypto||o.msCrypto;if(c&&c.getRandomValues&&(s=function(f){return c.getRandomValues(f)}),Me.options.usePureJavaScript||!Me.util.isNodejs&&!s){if(typeof window=="undefined"||window.document,a.collectInt(+new Date,32),typeof navigator!="undefined"){var u="";for(var l in navigator)try{typeof navigator[l]=="string"&&(u+=navigator[l])}catch(f){}a.collect(u),u=null}e&&(e().mousemove(function(f){a.collectInt(f.clientX,16),a.collectInt(f.clientY,16)}),e().keypress(function(f){a.collectInt(f.charCode,8)}))}if(!Me.random)Me.random=a;else for(var l in a)Me.random[l]=a[l];Me.random.createInstance=i,Uu.exports=Me.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Mu=S((QP,m0)=>{var Ct=ee();de();var qu=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],y0=[1,2,3,5],M2=function(e,t){return e<<t&65535|(e&65535)>>16-t},F2=function(e,t){return(e&65535)>>t|e<<16-t&65535};m0.exports=Ct.rc2=Ct.rc2||{};Ct.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ct.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(qu[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-a,qu[r.at(128-a)&s]),o=127-a;o>=0;o--)r.setAt(o,qu[r.at(o+1)^r.at(o+a)]);return r};var g0=function(e,t,r){var n=!1,i=null,a=null,s=null,o,c,u,l,f=[];for(e=Ct.rc2.expandKey(e,t),u=0;u<64;u++)f.push(e.getInt16Le());r?(o=function(d){for(u=0;u<4;u++)d[u]+=f[l]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),d[u]=M2(d[u],y0[u]),l++},c=function(d){for(u=0;u<4;u++)d[u]+=f[d[(u+3)%4]&63]}):(o=function(d){for(u=3;u>=0;u--)d[u]=F2(d[u],y0[u]),d[u]-=f[l]+(d[(u+3)%4]&d[(u+2)%4])+(~d[(u+3)%4]&d[(u+1)%4]),l--},c=function(d){for(u=3;u>=0;u--)d[u]-=f[d[(u+3)%4]&63]});var h=function(d){var m=[];for(u=0;u<4;u++){var E=i.getInt16Le();s!==null&&(r?E^=s.getInt16Le():s.putInt16Le(E)),m.push(E&65535)}l=r?0:63;for(var x=0;x<d.length;x++)for(var _=0;_<d[x][0];_++)d[x][1](m);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(m[u]):m[u]^=s.getInt16Le()),a.putInt16Le(m[u])},p=null;return p={start:function(d,m){d&&typeof d=="string"&&(d=Ct.util.createBuffer(d)),n=!1,i=Ct.util.createBuffer(),a=m||new Ct.util.createBuffer,s=d,p.output=a},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,o],[1,c],[6,o],[1,c],[5,o]])},finish:function(d){var m=!0;if(r)if(d)m=d(8,i,!r);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(m&&(n=!0,p.update()),!r&&(m=i.length()===0,m))if(d)m=d(8,a,!r);else{var x=a.length(),_=a.at(x-1);_>x?m=!1:a.truncate(_)}return m}},p};Ct.rc2.startEncrypting=function(e,t,r){var n=Ct.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Ct.rc2.createEncryptionCipher=function(e,t){return g0(e,t,!0)};Ct.rc2.startDecrypting=function(e,t,r){var n=Ct.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Ct.rc2.createDecryptionCipher=function(e,t){return g0(e,t,!1)}});var Xi=S((YP,_0)=>{var Fu=ee();_0.exports=Fu.jsbn=Fu.jsbn||{};var Rr,V2=0xdeadbeefcafe,E0=(V2&16777215)==15715070;function N(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Fu.jsbn.BigInteger=N;function pe(){return new N(null)}function K2(e,t,r,n,i,a){for(;--a>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function H2(e,t,r,n,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var c=this.data[e]&32767,u=this.data[e++]>>15,l=o*c+u*s;c=s*c+((l&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(l>>>15)+o*u+(i>>>30),r.data[n++]=c&1073741823}return i}function S0(e,t,r,n,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var c=this.data[e]&16383,u=this.data[e++]>>14,l=o*c+u*s;c=s*c+((l&16383)<<14)+r.data[n]+i,i=(c>>28)+(l>>14)+o*u,r.data[n++]=c&268435455}return i}typeof navigator=="undefined"?(N.prototype.am=S0,Rr=28):E0&&navigator.appName=="Microsoft Internet Explorer"?(N.prototype.am=H2,Rr=30):E0&&navigator.appName!="Netscape"?(N.prototype.am=K2,Rr=26):(N.prototype.am=S0,Rr=28);N.prototype.DB=Rr;N.prototype.DM=(1<<Rr)-1;N.prototype.DV=1<<Rr;var Vu=52;N.prototype.FV=Math.pow(2,Vu);N.prototype.F1=Vu-Rr;N.prototype.F2=2*Rr-Vu;var j2="0123456789abcdefghijklmnopqrstuvwxyz",gs=new Array,ai,kt;ai=48;for(kt=0;kt<=9;++kt)gs[ai++]=kt;ai=97;for(kt=10;kt<36;++kt)gs[ai++]=kt;ai=65;for(kt=10;kt<36;++kt)gs[ai++]=kt;function C0(e){return j2.charAt(e)}function x0(e,t){var r=gs[e.charCodeAt(t)];return r==null?-1:r}function $2(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function G2(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function rn(e){var t=pe();return t.fromInt(e),t}function z2(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:x0(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&e[0]&128&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&N.ZERO.subTo(this,this)}function W2(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Q2(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(n=this.data[s]>>o)>0&&(i=!0,a=C0(n));s>=0;)o<t?(n=(this.data[s]&(1<<o)-1)<<t-o,n|=this.data[--s]>>(o+=this.DB-t)):(n=this.data[s]>>(o-=t)&r,o<=0&&(o+=this.DB,--s)),n>0&&(i=!0),i&&(a+=C0(n));return i?a:"0"}function Y2(){var e=pe();return N.ZERO.subTo(this,e),e}function X2(){return this.s<0?this.negate():this}function J2(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function ms(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function Z2(){return this.t<=0?0:this.DB*(this.t-1)+ms(this.data[this.t-1]^this.s&this.DM)}function eb(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function tb(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function rb(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>n|s,s=(this.data[o]&i)<<r;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function nb(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function ib(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function ab(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&N.ZERO.subTo(t,t)}function sb(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function ob(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=pe());var a=pe(),s=this.s,o=e.s,c=this.DB-ms(n.data[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var u=a.t,l=a.data[u-1];if(l!=0){var f=l*(1<<this.F1)+(u>1?a.data[u-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,d=1<<this.F2,m=r.t,E=m-u,x=t==null?pe():t;for(a.dlShiftTo(E,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),N.ONE.dlShiftTo(u,x),x.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;--E>=0;){var _=r.data[--m]==l?this.DM:Math.floor(r.data[m]*h+(r.data[m-1]+d)*p);if((r.data[m]+=a.am(0,_,r,E,0,u))<_)for(a.dlShiftTo(E,x),r.subTo(x,r);r.data[m]<--_;)r.subTo(x,r)}t!=null&&(r.drShiftTo(u,t),s!=o&&N.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&N.ZERO.subTo(r,r)}}}function ub(e){var t=pe();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(N.ZERO)>0&&e.subTo(t,t),t}function Nn(e){this.m=e}function cb(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function lb(e){return e}function fb(e){e.divRemTo(this.m,null,e)}function hb(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function db(e,t){e.squareTo(t),this.reduce(t)}Nn.prototype.convert=cb;Nn.prototype.revert=lb;Nn.prototype.reduce=fb;Nn.prototype.mulTo=hb;Nn.prototype.sqrTo=db;function pb(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Dn(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function vb(e){var t=pe();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(N.ZERO)>0&&this.m.subTo(t,t),t}function yb(e){var t=pe();return e.copyTo(t),this.reduce(t),t}function gb(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function mb(e,t){e.squareTo(t),this.reduce(t)}function Eb(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Dn.prototype.convert=vb;Dn.prototype.revert=yb;Dn.prototype.reduce=gb;Dn.prototype.mulTo=Eb;Dn.prototype.sqrTo=mb;function Sb(){return(this.t>0?this.data[0]&1:this.s)==0}function Cb(e,t){if(e>4294967295||e<1)return N.ONE;var r=pe(),n=pe(),i=t.convert(this),a=ms(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function xb(e,t){var r;return e<256||t.isEven()?r=new Nn(t):r=new Dn(t),this.exp(e,r)}N.prototype.copyTo=$2;N.prototype.fromInt=G2;N.prototype.fromString=z2;N.prototype.clamp=W2;N.prototype.dlShiftTo=eb;N.prototype.drShiftTo=tb;N.prototype.lShiftTo=rb;N.prototype.rShiftTo=nb;N.prototype.subTo=ib;N.prototype.multiplyTo=ab;N.prototype.squareTo=sb;N.prototype.divRemTo=ob;N.prototype.invDigit=pb;N.prototype.isEven=Sb;N.prototype.exp=Cb;N.prototype.toString=Q2;N.prototype.negate=Y2;N.prototype.abs=X2;N.prototype.compareTo=J2;N.prototype.bitLength=Z2;N.prototype.mod=ub;N.prototype.modPowInt=xb;N.ZERO=rn(0);N.ONE=rn(1);function bb(){var e=pe();return this.copyTo(e),e}function Tb(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Ab(){return this.t==0?this.s:this.data[0]<<24>>24}function _b(){return this.t==0?this.s:this.data[0]<<16>>16}function wb(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Ib(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Bb(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=rn(r),i=pe(),a=pe(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function Ob(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,o=0;o<e.length;++o){var c=x0(e,o);if(c<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+c,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&N.ZERO.subTo(this,this)}function Rb(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(N.ONE.shiftLeft(e-1),Ku,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(N.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Nb(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function Db(e){return this.compareTo(e)==0}function Pb(e){return this.compareTo(e)<0?this:e}function Lb(e){return this.compareTo(e)>0?this:e}function kb(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function Ub(e,t){return e&t}function qb(e){var t=pe();return this.bitwiseTo(e,Ub,t),t}function Ku(e,t){return e|t}function Mb(e){var t=pe();return this.bitwiseTo(e,Ku,t),t}function b0(e,t){return e^t}function Fb(e){var t=pe();return this.bitwiseTo(e,b0,t),t}function T0(e,t){return e&~t}function Vb(e){var t=pe();return this.bitwiseTo(e,T0,t),t}function Kb(){for(var e=pe(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Hb(e){var t=pe();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function jb(e){var t=pe();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function $b(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function Gb(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+$b(this.data[e]);return this.s<0?this.t*this.DB:-1}function zb(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Wb(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=zb(this.data[r]^t);return e}function Qb(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Yb(e,t){var r=N.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Xb(e){return this.changeBit(e,Ku)}function Jb(e){return this.changeBit(e,T0)}function Zb(e){return this.changeBit(e,b0)}function eT(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function tT(e){var t=pe();return this.addTo(e,t),t}function rT(e){var t=pe();return this.subTo(e,t),t}function nT(e){var t=pe();return this.multiplyTo(e,t),t}function iT(e){var t=pe();return this.divRemTo(e,t,null),t}function aT(e){var t=pe();return this.divRemTo(e,null,t),t}function sT(e){var t=pe(),r=pe();return this.divRemTo(e,t,r),new Array(t,r)}function oT(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function uT(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Yi(){}function A0(e){return e}function cT(e,t,r){e.multiplyTo(t,r)}function lT(e,t){e.squareTo(t)}Yi.prototype.convert=A0;Yi.prototype.revert=A0;Yi.prototype.mulTo=cT;Yi.prototype.sqrTo=lT;function fT(e){return this.exp(e,new Yi)}function hT(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function dT(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function si(e){this.r2=pe(),this.q3=pe(),N.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function pT(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=pe();return e.copyTo(t),this.reduce(t),t}function vT(e){return e}function yT(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function gT(e,t){e.squareTo(t),this.reduce(t)}function mT(e,t,r){e.multiplyTo(t,r),this.reduce(r)}si.prototype.convert=pT;si.prototype.revert=vT;si.prototype.reduce=yT;si.prototype.mulTo=mT;si.prototype.sqrTo=gT;function ET(e,t){var r=e.bitLength(),n,i=rn(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Nn(t):t.isEven()?a=new si(t):a=new Dn(t);var s=new Array,o=3,c=n-1,u=(1<<n)-1;if(s[1]=a.convert(this),n>1){var l=pe();for(a.sqrTo(s[1],l);o<=u;)s[o]=pe(),a.mulTo(l,s[o-2],s[o]),o+=2}var f=e.t-1,h,p=!0,d=pe(),m;for(r=ms(e.data[f])-1;f>=0;){for(r>=c?h=e.data[f]>>r-c&u:(h=(e.data[f]&(1<<r+1)-1)<<c-r,f>0&&(h|=e.data[f-1]>>this.DB+r-c)),o=n;!(h&1);)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),p)s[h].copyTo(i),p=!1;else{for(;o>1;)a.sqrTo(i,d),a.sqrTo(d,i),o-=2;o>0?a.sqrTo(i,d):(m=i,i=d,d=m),a.mulTo(d,s[h],i)}for(;f>=0&&!(e.data[f]&1<<r);)a.sqrTo(i,d),m=i,i=d,d=m,--r<0&&(r=this.DB-1,--f)}return a.revert(i)}function ST(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function CT(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function xT(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return N.ZERO;for(var r=e.clone(),n=this.clone(),i=rn(1),a=rn(0),s=rn(0),o=rn(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(o,a)):(n.subTo(r,n),t&&s.subTo(i,s),o.subTo(a,o))}if(n.compareTo(N.ONE)!=0)return N.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var Gt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],bT=(1<<26)/Gt[Gt.length-1];function TT(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Gt[Gt.length-1]){for(t=0;t<Gt.length;++t)if(r.data[0]==Gt[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Gt.length;){for(var n=Gt[t],i=t+1;i<Gt.length&&n<bT;)n*=Gt[i++];for(n=r.modInt(n);t<i;)if(n%Gt[t++]==0)return!1}return r.millerRabin(e)}function AT(e){var t=this.subtract(N.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=_T(),a,s=0;s<e;++s){do a=new N(this.bitLength(),i);while(a.compareTo(N.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(n,this);if(o.compareTo(N.ONE)!=0&&o.compareTo(t)!=0){for(var c=1;c++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(N.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function _T(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}N.prototype.chunkSize=wb;N.prototype.toRadix=Bb;N.prototype.fromRadix=Ob;N.prototype.fromNumber=Rb;N.prototype.bitwiseTo=kb;N.prototype.changeBit=Yb;N.prototype.addTo=eT;N.prototype.dMultiply=oT;N.prototype.dAddOffset=uT;N.prototype.multiplyLowerTo=hT;N.prototype.multiplyUpperTo=dT;N.prototype.modInt=CT;N.prototype.millerRabin=AT;N.prototype.clone=bb;N.prototype.intValue=Tb;N.prototype.byteValue=Ab;N.prototype.shortValue=_b;N.prototype.signum=Ib;N.prototype.toByteArray=Nb;N.prototype.equals=Db;N.prototype.min=Pb;N.prototype.max=Lb;N.prototype.and=qb;N.prototype.or=Mb;N.prototype.xor=Fb;N.prototype.andNot=Vb;N.prototype.not=Kb;N.prototype.shiftLeft=Hb;N.prototype.shiftRight=jb;N.prototype.getLowestSetBit=Gb;N.prototype.bitCount=Wb;N.prototype.testBit=Qb;N.prototype.setBit=Xb;N.prototype.clearBit=Jb;N.prototype.flipBit=Zb;N.prototype.add=tT;N.prototype.subtract=rT;N.prototype.multiply=nT;N.prototype.divide=iT;N.prototype.remainder=aT;N.prototype.divideAndRemainder=sT;N.prototype.modPow=ET;N.prototype.modInverse=xT;N.prototype.pow=fT;N.prototype.gcd=ST;N.prototype.isProbablePrime=TT});var oi=S((XP,O0)=>{var fr=ee();sr();de();var I0=O0.exports=fr.sha1=fr.sha1||{};fr.md.sha1=fr.md.algorithms.sha1=I0;I0.create=function(){B0||wT();var e=null,t=fr.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=fr.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=fr.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),w0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=fr.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Hu.substr(0,n.blockLength-s));for(var o,c,u=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)o=n.fullMessageLength[l+1]*8,c=o/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=o>>>0;i.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};w0(f,r,i);var h=fr.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},n};var Hu=null,B0=!1;function wT(){Hu="\x80",Hu+=fr.util.fillString("\0",64),B0=!0}function w0(e,t,r){for(var n,i,a,s,o,c,u,l,f=r.length();f>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,c=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,u=o^a&(s^o),n=(i<<5|i>>>27)+u+c+1518500249+n,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<20;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,u=o^a&(s^o),n=(i<<5|i>>>27)+u+c+1518500249+n,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<32;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,u=a^s^o,n=(i<<5|i>>>27)+u+c+1859775393+n,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<40;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,u=a^s^o,n=(i<<5|i>>>27)+u+c+1859775393+n,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<60;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,u=a&s|o&(a^s),n=(i<<5|i>>>27)+u+c+2400959708+n,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<80;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,u=a^s^o,n=(i<<5|i>>>27)+u+c+3395469782+n,c=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+c|0,f-=64}}});var ju=S((JP,N0)=>{var hr=ee();de();Lt();oi();var R0=N0.exports=hr.pkcs1=hr.pkcs1||{};R0.encode_rsa_oaep=function(e,t,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=hr.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),c=o-2*a.digestLength-2;if(t.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=t.length,u.maxLength=c,u}n||(n=""),a.update(n,"raw");for(var l=a.digest(),f="",h=c-t.length,p=0;p<h;p++)f+="\0";var d=l.getBytes()+f+""+t;if(!i)i=hr.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=a.digestLength,u}var m=Es(i,o-a.digestLength-1,s),E=hr.util.xorBytes(d,m,d.length),x=Es(E,a.digestLength,s),_=hr.util.xorBytes(i,x,i.length);return"\0"+_+E};R0.decode_rsa_oaep=function(e,t,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=t.length,E.expectedLength=s,E}if(i===void 0?i=hr.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),c=t.charAt(0),u=t.substring(1,i.digestLength+1),l=t.substring(1+i.digestLength),f=Es(l,i.digestLength,a),h=hr.util.xorBytes(u,f,u.length),p=Es(h,s-i.digestLength-1,a),d=hr.util.xorBytes(l,p,l.length),m=d.substring(0,i.digestLength),E=c!=="\0",x=0;x<i.digestLength;++x)E|=o.charAt(x)!==m.charAt(x);for(var _=1,w=i.digestLength,R=i.digestLength;R<d.length;R++){var O=d.charCodeAt(R),B=O&1^1,V=_?65534:0;E|=O&V,_=_&B,w+=_}if(E||d.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(w+1)};function Es(e,t,r){r||(r=hr.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var Gu=S((ZP,$u)=>{var nn=ee();de();Xi();Lt();(function(){if(nn.prime){$u.exports=nn.prime;return}var e=$u.exports=nn.prime=nn.prime||{},t=nn.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,h){return f|h};e.generateProbablePrime=function(f,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var m=h.prng||nn.random,E={nextBytes:function(x){for(var _=m.getBytesSync(x.length),w=0;w<x.length;++w)x[w]=_.charCodeAt(w)}};if(d.name==="PRIMEINC")return a(f,E,d.options,p);throw new Error("Invalid prime generation algorithm: "+d.name)};function a(f,h,p,d){return"workers"in p?c(f,h,p,d):s(f,h,p,d)}function s(f,h,p,d){var m=u(f,h),E=0,x=l(m.bitLength());"millerRabinTests"in p&&(x=p.millerRabinTests);var _=10;"maxBlockTime"in p&&(_=p.maxBlockTime),o(m,f,h,E,x,_,d)}function o(f,h,p,d,m,E,x){var _=+new Date;do{if(f.bitLength()>h&&(f=u(h,p)),f.isProbablePrime(m))return x(null,f);f.dAddOffset(r[d++%8],0)}while(E<0||+new Date-_<E);nn.util.setImmediate(function(){o(f,h,p,d,m,E,x)})}function c(f,h,p,d){if(typeof Worker=="undefined")return s(f,h,p,d);var m=u(f,h),E=p.workers,x=p.workLoad||100,_=x*30/8,w=p.workerScript||"forge/prime.worker.js";if(E===-1)return nn.util.estimateCores(function(O,B){O&&(B=2),E=B-1,R()});R();function R(){E=Math.max(1,E);for(var O=[],B=0;B<E;++B)O[B]=new Worker(w);for(var V=E,B=0;B<E;++B)O[B].addEventListener("message",W);var K=!1;function W(Z){if(!K){--V;var re=Z.data;if(re.found){for(var le=0;le<O.length;++le)O[le].terminate();return K=!0,d(null,new t(re.prime,16))}m.bitLength()>f&&(m=u(f,h));var ye=m.toString(16);Z.target.postMessage({hex:ye,workLoad:x}),m.dAddOffset(_,0)}}}}function u(f,h){var p=new t(f,h),d=f-1;return p.testBit(d)||p.bitwiseTo(t.ONE.shiftLeft(d),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function l(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})()});var Ji=S((eL,M0)=>{var G=ee();$t();Xi();tn();ju();Gu();Lt();de();typeof fe=="undefined"&&(fe=G.jsbn.BigInteger);var fe,zu=G.util.isNodejs?require("crypto"):null,A=G.asn1,Ut=G.util;G.pki=G.pki||{};M0.exports=G.pki.rsa=G.rsa=G.rsa||{};var X=G.pki,IT=[6,4,2,4,2,4,6,2],BT={name:"PrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},OT={name:"RSAPrivateKey",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},RT={name:"RSAPublicKey",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},NT=G.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:A.Class.UNIVERSAL,type:A.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},DT={name:"DigestInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:A.Class.UNIVERSAL,type:A.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},PT=function(e){var t;if(e.algorithm in X.oids)t=X.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=A.oidToDer(t).getBytes(),i=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[]),a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[]);a.value.push(A.create(A.Class.UNIVERSAL,A.Type.OID,!1,n)),a.value.push(A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,""));var s=A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),A.toDer(i).getBytes()},U0=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(fe.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(fe.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new fe(G.util.bytesToHex(G.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(fe.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};X.rsa.encrypt=function(e,t,r){var n=r,i,a=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=q0(e,t,r)):(i=G.util.createBuffer(),i.putBytes(e));for(var s=new fe(i.toHex(),16),o=U0(s,t,n),c=o.toString(16),u=G.util.createBuffer(),l=a-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(G.util.hexToBytes(c)),u.getBytes()};X.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new fe(G.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=U0(s,t,r),c=o.toString(16),u=G.util.createBuffer(),l=i-Math.ceil(c.length/2);l>0;)u.putByte(0),--l;return u.putBytes(G.util.hexToBytes(c)),n!==!1?Ss(u.getBytes(),t,r):u.getBytes()};X.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||G.random,i={nextBytes:function(o){for(var c=n.getBytesSync(o.length),u=0;u<o.length;++u)o[u]=c.charCodeAt(u)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new fe(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};X.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new fe(null);r.fromInt(30);for(var n=0,i=function(f,h){return f|h},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,u=c-1;e.pqState===0?(e.num=new fe(c,e.rng),e.num.testBit(u)||e.num.bitwiseTo(fe.ONE.shiftLeft(u),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(kT(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(IT[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(fe.ONE).gcd(e.e).compareTo(fe.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(fe.ONE),e.q1=e.q.subtract(fe.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(fe.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var l=e.e.modInverse(e.phi);e.keys={privateKey:X.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:X.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};X.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!G.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(D0("generateKeyPair"))return zu.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,c,u){if(o)return n(o);n(null,{privateKey:X.privateKeyFromPem(u),publicKey:X.publicKeyFromPem(c)})});if(P0("generateKey")&&P0("exportKey"))return Ut.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:k0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Ut.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var c=X.privateKeyFromAsn1(A.fromDer(G.util.createBuffer(o)));n(null,{privateKey:c,publicKey:X.setRsaPublicKey(c.n,c.e)})}});if(L0("generateKey")&&L0("exportKey")){var i=Ut.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:k0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var c=o.target.result,u=Ut.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(l){var f=l.target.result,h=X.privateKeyFromAsn1(A.fromDer(G.util.createBuffer(f)));n(null,{privateKey:h,publicKey:X.setRsaPublicKey(h.n,h.e)})},u.onerror=function(l){n(l)}},i.onerror=function(o){n(o)};return}}else if(D0("generateKeyPairSync")){var a=zu.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:X.privateKeyFromPem(a.privateKey),publicKey:X.publicKeyFromPem(a.publicKey)}}}var s=X.rsa.createKeyPairGenerationState(e,t,r);if(!n)return X.rsa.stepKeyPairGenerationState(s,0),s.keys;LT(s,r,n)};X.setRsaPublicKey=X.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,c,u){return q0(o,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,c){return G.pkcs1.encode_rsa_oaep(c,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return X.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(c,u){u=Ss(u,r,!0);var l=A.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),f={},h=[];if(!A.validate(l,DT,f,h)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=h,p}var d=A.derToOid(f.algorithmIdentifier);if(!(d===G.oids.md2||d===G.oids.md5||d===G.oids.sha1||d===G.oids.sha224||d===G.oids.sha256||d===G.oids.sha384||d===G.oids.sha512||d===G.oids["sha512-224"]||d===G.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=d,p}if((d===G.oids.md2||d===G.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifier NULL parameters.");return c===f.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(c,u){return u=Ss(u,r,!0),c===u}});var o=X.rsa.decrypt(i,r,!0,!1);return a.verify(n,o,r.n.bitLength())},r};X.setRsaPrivateKey=X.rsa.setPrivateKey=function(e,t,r,n,i,a,s,o){var c={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:o};return c.decrypt=function(u,l,f){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var h=X.rsa.decrypt(u,c,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:Ss};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(p,d){return G.pkcs1.decode_rsa_oaep(d,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(h,c,!1)},c.sign=function(u,l){var f=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:PT},f=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return u}},f=1);var h=l.encode(u,c.n.bitLength());return X.rsa.encrypt(h,c,f)},c};X.wrapRsaPrivateKey=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(0).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(X.oids.rsaEncryption).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")]),A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,A.toDer(e).getBytes())])};X.privateKeyFromAsn1=function(e){var t={},r=[];if(A.validate(e,BT,t,r)&&(e=A.fromDer(G.util.createBuffer(t.privateKey))),t={},r=[],!A.validate(e,OT,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,o,c,u,l,f;return i=G.util.createBuffer(t.privateKeyModulus).toHex(),a=G.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=G.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=G.util.createBuffer(t.privateKeyPrime1).toHex(),c=G.util.createBuffer(t.privateKeyPrime2).toHex(),u=G.util.createBuffer(t.privateKeyExponent1).toHex(),l=G.util.createBuffer(t.privateKeyExponent2).toHex(),f=G.util.createBuffer(t.privateKeyCoefficient).toHex(),X.setRsaPrivateKey(new fe(i,16),new fe(a,16),new fe(s,16),new fe(o,16),new fe(c,16),new fe(u,16),new fe(l,16),new fe(f,16))};X.privateKeyToAsn1=X.privateKeyToRSAPrivateKey=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(0).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.n)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.e)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.d)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.p)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.q)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.dP)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.dQ)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.qInv))])};X.publicKeyFromAsn1=function(e){var t={},r=[];if(A.validate(e,NT,t,r)){var n=A.derToOid(t.publicKeyOid);if(n!==X.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!A.validate(e,RT,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=G.util.createBuffer(t.publicKeyModulus).toHex(),s=G.util.createBuffer(t.publicKeyExponent).toHex();return X.setRsaPublicKey(new fe(a,16),new fe(s,16))};X.publicKeyToAsn1=X.publicKeyToSubjectPublicKeyInfo=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(X.oids.rsaEncryption).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")]),A.create(A.Class.UNIVERSAL,A.Type.BITSTRING,!1,[X.publicKeyToRSAPublicKey(e)])])};X.publicKeyToRSAPublicKey=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.n)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,dr(e.e))])};function q0(e,t,r){var n=G.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var c=0;c<s;++c)n.putByte(o)}else for(;s>0;){for(var u=0,l=G.random.getBytes(s),c=0;c<s;++c)o=l.charCodeAt(c),o===0?++u:n.putByte(o);s=u}return n.putByte(0),n.putBytes(e),n}function Ss(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=G.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var c=0;if(o===0){c=i-3-n;for(var u=0;u<c;++u)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(c=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++c}else if(o===2)for(c=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++c}var l=a.getByte();if(l!==0||c!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function LT(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){a(e.pBits,function(o,c){if(o)return r(o);if(e.p=c,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,c){G.prime.generateProbablePrime(o,n,c)}function s(o,c){if(o)return r(o);if(e.q=c,e.p.compareTo(e.q)<0){var u=e.p;e.p=e.q,e.q=u}if(e.p.subtract(fe.ONE).gcd(e.e).compareTo(fe.ONE)!==0){e.p=null,i();return}if(e.q.subtract(fe.ONE).gcd(e.e).compareTo(fe.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(fe.ONE),e.q1=e.q.subtract(fe.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(fe.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var l=e.e.modInverse(e.phi);e.keys={privateKey:X.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:X.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function dr(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=G.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function kT(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function D0(e){return G.util.isNodejs&&typeof zu[e]=="function"}function P0(e){return typeof Ut.globalScope!="undefined"&&typeof Ut.globalScope.crypto=="object"&&typeof Ut.globalScope.crypto.subtle=="object"&&typeof Ut.globalScope.crypto.subtle[e]=="function"}function L0(e){return typeof Ut.globalScope!="undefined"&&typeof Ut.globalScope.msCrypto=="object"&&typeof Ut.globalScope.msCrypto.subtle=="object"&&typeof Ut.globalScope.msCrypto.subtle[e]=="function"}function k0(e){for(var t=G.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var Wu=S((tL,j0)=>{var F=ee();en();$t();Qi();sr();tn();vs();Rn();Lt();Mu();Ji();de();typeof F0=="undefined"&&(F0=F.jsbn.BigInteger);var F0,I=F.asn1,J=F.pki=F.pki||{};j0.exports=J.pbe=F.pbe=F.pbe||{};var Pn=J.oids,UT={name:"EncryptedPrivateKeyInfo",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:I.Class.UNIVERSAL,type:I.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},qT={name:"PBES2Algorithms",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:I.Class.UNIVERSAL,type:I.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:I.Class.UNIVERSAL,type:I.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:I.Class.UNIVERSAL,type:I.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},MT={name:"pkcs-12PbeParams",tagClass:I.Class.UNIVERSAL,type:I.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:I.Class.UNIVERSAL,type:I.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:I.Class.UNIVERSAL,type:I.Type.INTEGER,constructed:!1,capture:"iterations"}]};J.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=F.random.getBytesSync(r.saltSize),i=r.count,a=I.integerToDer(i),s,o,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,l,f;switch(r.algorithm){case"aes128":s=16,u=16,l=Pn["aes128-CBC"],f=F.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,l=Pn["aes192-CBC"],f=F.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,l=Pn["aes256-CBC"],f=F.aes.createEncryptionCipher;break;case"des":s=8,u=8,l=Pn.desCBC,f=F.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),d=H0(p),m=F.pkcs5.pbkdf2(t,n,i,s,d),E=F.random.getBytesSync(u),x=f(m);x.start(E),x.update(I.toDer(e)),x.finish(),c=x.output.getBytes();var _=FT(n,a,s,p);o=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(Pn.pkcs5PBES2).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(Pn.pkcs5PBKDF2).getBytes()),_]),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(l).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,E)])])])}else if(r.algorithm==="3des"){s=24;var w=new F.util.ByteBuffer(n),m=J.pbe.generatePkcs12Key(t,w,1,i,s),E=J.pbe.generatePkcs12Key(t,w,2,i,s),x=F.des.createEncryptionCipher(m);x.start(E),x.update(I.toDer(e)),x.finish(),c=x.output.getBytes(),o=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(Pn["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,n),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,a.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var R=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[o,I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,c)]);return R};J.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!I.validate(e,UT,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=I.derToOid(n.encryptionOid),o=J.pbe.getCipher(s,n.encryptionParams,t),c=F.util.createBuffer(n.encryptedData);return o.update(c),o.finish()&&(r=I.fromDer(o.output)),r};J.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:I.toDer(e).getBytes()};return F.pem.encode(r,{maxline:t})};J.encryptedPrivateKeyFromPem=function(e){var t=F.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return I.fromDer(t.body)};J.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=J.wrapRsaPrivateKey(J.privateKeyToAsn1(e));return n=J.encryptPrivateKeyInfo(n,t,r),J.encryptedPrivateKeyToPem(n)}var i,a,s,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=F.random.getBytesSync(16),o=F.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=F.random.getBytesSync(16),o=F.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=F.random.getBytesSync(16),o=F.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=F.random.getBytesSync(8),o=F.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=F.random.getBytesSync(8),o=F.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=F.pbe.opensslDeriveBytes(t,a.substr(0,8),s),l=o(u);l.start(a),l.update(I.toDer(J.privateKeyToAsn1(e))),l.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:F.util.bytesToHex(a).toUpperCase()},body:l.output.getBytes()};return F.pem.encode(f)};J.decryptRsaPrivateKey=function(e,t){var r=null,n=F.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=F.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=F.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=F.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=F.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=F.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(f){return F.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":a=8,s=function(f){return F.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":a=16,s=function(f){return F.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=F.util.hexToBytes(n.dekInfo.parameters),c=F.pbe.opensslDeriveBytes(t,o.substr(0,8),a),u=s(c);if(u.start(o),u.update(F.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=J.decryptPrivateKeyInfo(I.fromDer(r),t):r=I.fromDer(r),r!==null&&(r=J.privateKeyFromAsn1(r)),r};J.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in F.md))throw new Error('"sha1" hash algorithm unavailable.');a=F.md.sha1.create()}var c=a.digestLength,u=a.blockLength,l=new F.util.ByteBuffer,f=new F.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0)}var h=f.length(),p=t.length(),d=new F.util.ByteBuffer;d.fillWithByte(r,u);var m=u*Math.ceil(p/u),E=new F.util.ByteBuffer;for(o=0;o<m;o++)E.putByte(t.at(o%p));var x=u*Math.ceil(h/u),_=new F.util.ByteBuffer;for(o=0;o<x;o++)_.putByte(f.at(o%h));var w=E;w.putBuffer(_);for(var R=Math.ceil(i/c),O=1;O<=R;O++){var B=new F.util.ByteBuffer;B.putBytes(d.bytes()),B.putBytes(w.bytes());for(var V=0;V<n;V++)a.start(),a.update(B.getBytes()),B=a.digest();var K=new F.util.ByteBuffer;for(o=0;o<u;o++)K.putByte(B.at(o%c));var W=Math.ceil(p/u)+Math.ceil(h/u),Z=new F.util.ByteBuffer;for(s=0;s<W;s++){var re=new F.util.ByteBuffer(w.getBytes(u)),le=511;for(o=K.length()-1;o>=0;o--)le=le>>8,le+=K.at(o)+re.at(o),re.setAt(o,le&255);Z.putBuffer(re)}w=Z,l.putBuffer(B)}return l.truncate(l.length()-i),l};J.pbe.getCipher=function(e,t,r){switch(e){case J.oids.pkcs5PBES2:return J.pbe.getCipherForPBES2(e,t,r);case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case J.oids["pbewithSHAAnd40BitRC2-CBC"]:return J.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};J.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!I.validate(t,qT,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=I.derToOid(n.kdfOid),e!==J.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=I.derToOid(n.encOid),e!==J.oids["aes128-CBC"]&&e!==J.oids["aes192-CBC"]&&e!==J.oids["aes256-CBC"]&&e!==J.oids["des-EDE3-CBC"]&&e!==J.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,o=F.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var c,u;switch(J.oids[e]){case"aes128-CBC":c=16,u=F.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=F.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=F.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=F.des.createDecryptionCipher;break;case"desCBC":c=8,u=F.des.createDecryptionCipher;break}var l=K0(n.prfOid),f=F.pkcs5.pbkdf2(r,s,o,c,l),h=n.encIv,p=u(f);return p.start(h),p};J.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!I.validate(t,MT,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=F.util.createBuffer(n.salt),o=F.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var c,u,l;switch(e){case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,l=F.des.startDecrypting;break;case J.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,l=function(m,E){var x=F.rc2.createDecryptionCipher(m,40);return x.start(E,null),x};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var f=K0(n.prfOid),h=J.pbe.generatePkcs12Key(r,s,1,o,c,f);f.start();var p=J.pbe.generatePkcs12Key(r,s,2,o,u,f);return l(h,p)};J.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in F.md))throw new Error('"md5" hash algorithm unavailable.');n=F.md.md5.create()}t===null&&(t="");for(var i=[V0(n,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(V0(n,i[s-1]+e+t));return i.join("").substr(0,r)};function V0(e,t){return e.start().update(t).digest().getBytes()}function K0(e){var t;if(!e)t="hmacWithSHA1";else if(t=J.oids[I.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return H0(t)}function H0(e){var t=F.md;switch(e){case"hmacWithSHA224":t=F.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function FT(e,t,r,n){var i=I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OCTETSTRING,!1,e),I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(I.create(I.Class.UNIVERSAL,I.Type.INTEGER,!1,F.util.hexToBytes(r.toString(16))),I.create(I.Class.UNIVERSAL,I.Type.SEQUENCE,!0,[I.create(I.Class.UNIVERSAL,I.Type.OID,!1,I.oidToDer(J.oids[n]).getBytes()),I.create(I.Class.UNIVERSAL,I.Type.NULL,!1,"")])),i}});var Qu=S((rL,z0)=>{var ui=ee();$t();de();var q=ui.asn1,ci=z0.exports=ui.pkcs7asn1=ui.pkcs7asn1||{};ui.pkcs7=ui.pkcs7||{};ui.pkcs7.asn1=ci;var $0={name:"ContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ci.contentInfoValidator=$0;var G0={name:"EncryptedContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ci.envelopedDataValidator={name:"EnvelopedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(G0)};ci.encryptedDataValidator={name:"EncryptedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"}].concat(G0)};var VT={name:"SignerInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:q.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ci.signedDataValidator={name:"SignedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},$0,{name:"SignedData.Certificates",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:q.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,capture:"signerInfos",optional:!0,value:[VT]}]};ci.recipientInfoValidator={name:"RecipientInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Yu=S((nL,W0)=>{var Ln=ee();de();Ln.mgf=Ln.mgf||{};var KT=W0.exports=Ln.mgf.mgf1=Ln.mgf1=Ln.mgf1||{};KT.create=function(e){var t={generate:function(r,n){for(var i=new Ln.util.ByteBuffer,a=Math.ceil(n/e.digestLength),s=0;s<a;s++){var o=new Ln.util.ByteBuffer;o.putInt32(s),e.start(),e.update(r+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t}});var Y0=S((iL,Q0)=>{var Cs=ee();Yu();Q0.exports=Cs.mgf=Cs.mgf||{};Cs.mgf.mgf1=Cs.mgf1});var xs=S((aL,X0)=>{var kn=ee();Lt();de();var HT=X0.exports=kn.pss=kn.pss||{};HT.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=kn.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||kn.random,o={};return o.encode=function(c,u){var l,f=u-1,h=Math.ceil(f/8),p=c.digest().getBytes();if(h<n+a+2)throw new Error("Message is too long to encrypt.");var d;i===null?d=s.getBytesSync(a):d=i.bytes();var m=new kn.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(p),m.putBytes(d),t.start(),t.update(m.getBytes());var E=t.digest().getBytes(),x=new kn.util.ByteBuffer;x.fillWithByte(0,h-a-n-2),x.putByte(1),x.putBytes(d);var _=x.getBytes(),w=h-n-1,R=r.generate(E,w),O="";for(l=0;l<w;l++)O+=String.fromCharCode(_.charCodeAt(l)^R.charCodeAt(l));var B=65280>>8*h-f&255;return O=String.fromCharCode(O.charCodeAt(0)&~B)+O.substr(1),O+E+"\xBC"},o.verify=function(c,u,l){var f,h=l-1,p=Math.ceil(h/8);if(u=u.substr(-p),p<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var d=p-n-1,m=u.substr(0,d),E=u.substr(d,n),x=65280>>8*p-h&255;if(m.charCodeAt(0)&x)throw new Error("Bits beyond keysize not zero as expected.");var _=r.generate(E,d),w="";for(f=0;f<d;f++)w+=String.fromCharCode(m.charCodeAt(f)^_.charCodeAt(f));w=String.fromCharCode(w.charCodeAt(0)&~x)+w.substr(1);var R=p-n-a-2;for(f=0;f<R;f++)if(w.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(w.charCodeAt(R)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var O=w.substr(-a),B=new kn.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(c),B.putBytes(O),t.start(),t.update(B.getBytes());var V=t.digest().getBytes();return E===V},o}});var As=S((sL,rd)=>{var z=ee();en();$t();Qi();sr();Y0();tn();Rn();xs();Ji();de();var v=z.asn1,L=rd.exports=z.pki=z.pki||{},he=L.oids,Oe={};Oe.CN=he.commonName;Oe.commonName="CN";Oe.C=he.countryName;Oe.countryName="C";Oe.L=he.localityName;Oe.localityName="L";Oe.ST=he.stateOrProvinceName;Oe.stateOrProvinceName="ST";Oe.O=he.organizationName;Oe.organizationName="O";Oe.OU=he.organizationalUnitName;Oe.organizationalUnitName="OU";Oe.E=he.emailAddress;Oe.emailAddress="E";var Z0=z.pki.rsa.publicKeyValidator,jT={name:"Certificate",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:v.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:v.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:v.Class.UNIVERSAL,type:v.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:v.Class.UNIVERSAL,type:v.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:v.Class.UNIVERSAL,type:v.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:v.Class.UNIVERSAL,type:v.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Z0,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:v.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:v.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:v.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:v.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},$T={name:"rsapss",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:v.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:v.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:v.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:v.Class.UNIVERSAL,type:v.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:v.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:v.Class.UNIVERSAL,type:v.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},GT={name:"CertificationRequestInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Z0,{name:"CertificationRequestInfo.attributes",tagClass:v.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:v.Class.UNIVERSAL,type:v.Type.SET,constructed:!0}]}]}]},zT={name:"CertificationRequest",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[GT,{name:"CertificationRequest.signatureAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};L.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,a,s=0;s<e.value.length;++s){n=e.value[s];for(var o=0;o<n.value.length;++o)a={},i=n.value[o],a.type=v.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in he&&(a.name=he[a.type],a.name in Oe&&(a.shortName=Oe[a.name])),t&&(t.update(a.type),t.update(a.value)),r.push(a)}return r};L.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=v.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var o={};if(o.type=i,o.value=a[s].value,o.valueTagClass=a[s].type,o.type in he&&(o.name=he[o.type],o.name in Oe&&(o.shortName=Oe[o.name])),o.type===he.extensionRequest){o.extensions=[];for(var c=0;c<o.value.length;++c)o.extensions.push(L.certificateExtensionFromAsn1(o.value[c]))}t.push(o)}return t};function an(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var bs=function(e,t,r){var n={};if(e!==he["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:he.sha1},mgf:{algorithmOid:he.mgf1,hash:{algorithmOid:he.sha1}},saltLength:20});var i={},a=[];if(!v.validate(t,$T,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=v.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=v.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=v.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Ts=function(e){switch(he[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return z.md.sha1.create();case"md5WithRSAEncryption":return z.md.md5.create();case"sha256WithRSAEncryption":return z.md.sha256.create();case"sha384WithRSAEncryption":return z.md.sha384.create();case"sha512WithRSAEncryption":return z.md.sha512.create();case"RSASSA-PSS":return z.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},ed=function(e){var t=e.certificate,r;switch(t.signatureOid){case he.sha1WithRSAEncryption:case he.sha1WithRSASignature:break;case he["RSASSA-PSS"]:var n,i;if(n=he[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||z.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=he[t.signatureParameters.mgf.algorithmOid],i===void 0||z.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=z.mgf[i].create(z.md[n].create()),n=he[t.signatureParameters.hash.algorithmOid],n===void 0||z.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=n,a}r=z.pss.create(z.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};L.certificateFromPem=function(e,t,r){var n=z.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=v.fromDer(n.body,r);return L.certificateFromAsn1(a,t)};L.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:v.toDer(L.certificateToAsn1(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.publicKeyFromPem=function(e){var t=z.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=v.fromDer(t.body);return L.publicKeyFromAsn1(n)};L.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:v.toDer(L.publicKeyToAsn1(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:v.toDer(L.publicKeyToRSAPublicKey(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||z.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=v.toDer(L.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=v.toDer(L.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};L.certificationRequestFromPem=function(e,t,r){var n=z.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=v.fromDer(n.body,r);return L.certificationRequestFromAsn1(a,t)};L.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:v.toDer(L.certificationRequestToAsn1(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return an(e.issuer,t)},e.issuer.addField=function(t){qt([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return an(e.subject,t)},e.subject.addField=function(t){qt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){qt(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){qt(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)td(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||z.md.sha1.create();var n=he[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=L.getTBSCertificate(e);var a=v.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=t.md;if(s===null){s=Ts({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||L.getTBSCertificate(t),c=v.toDer(o);s.update(c.getBytes())}return s!==null&&(r=ed({certificate:e,md:s,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,o=0;r&&o<n.attributes.length;++o)a=n.attributes[o],s=i.attributes[o],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return L.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=he.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return z.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};L.certificateFromAsn1=function(e,t){var r={},n=[];if(!v.validate(e,jT,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=v.derToOid(r.publicKeyOid);if(a!==L.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=L.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=z.util.createBuffer(r.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=z.asn1.derToOid(r.certSignatureOid),s.signatureParameters=bs(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=z.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=bs(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(v.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(v.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(v.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(v.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=c[0],s.validity.notAfter=c[1],s.tbsCertificate=r.tbsCertificate,t){s.md=Ts({signatureOid:s.signatureOid,type:"certificate"});var u=v.toDer(s.tbsCertificate);s.md.update(u.getBytes())}var l=z.md.sha1.create(),f=v.toDer(r.certIssuer);l.update(f.getBytes()),s.issuer.getField=function(d){return an(s.issuer,d)},s.issuer.addField=function(d){qt([d]),s.issuer.attributes.push(d)},s.issuer.attributes=L.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var h=z.md.sha1.create(),p=v.toDer(r.certSubject);return h.update(p.getBytes()),s.subject.getField=function(d){return an(s.subject,d)},s.subject.addField=function(d){qt([d]),s.subject.attributes.push(d)},s.subject.attributes=L.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=h.digest().toHex(),r.certExtensions?s.extensions=L.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=L.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};L.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(L.certificateExtensionFromAsn1(n.value[i]));return t};L.certificateExtensionFromAsn1=function(e){var t={};if(t.id=v.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===v.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in he){if(t.name=he[t.id],t.name==="keyUsage"){var r=v.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var r=v.fromDer(t.value);r.value.length>0&&r.value[0].type===v.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;r.value.length>0&&r.value[0].type===v.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(t.pathLenConstraint=v.derToInteger(a))}else if(t.name==="extKeyUsage")for(var r=v.fromDer(t.value),s=0;s<r.value.length;++s){var o=v.derToOid(r.value[s].value);o in he?t[he[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var r=v.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var c,r=v.fromDer(t.value),u=0;u<r.value.length;++u){c=r.value[u];var l={type:c.type,value:c.value};switch(t.altNames.push(l),c.type){case 1:case 2:case 6:break;case 7:l.ip=z.util.bytesToIP(c.value);break;case 8:l.oid=v.derToOid(c.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var r=v.fromDer(t.value);t.subjectKeyIdentifier=z.util.bytesToHex(r.value)}}return t};L.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!v.validate(e,zT,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=v.derToOid(r.publicKeyOid);if(a!==L.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=L.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=z.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=bs(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=z.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=bs(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,t){s.md=Ts({signatureOid:s.signatureOid,type:"certification request"});var o=v.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var c=z.md.sha1.create();return s.subject.getField=function(u){return an(s.subject,u)},s.subject.addField=function(u){qt([u]),s.subject.attributes.push(u)},s.subject.attributes=L.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),s.subject.hash=c.digest().toHex(),s.publicKey=L.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(u){return an(s,u)},s.addAttribute=function(u){qt([u]),s.attributes.push(u)},s.attributes=L.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};L.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return an(e.subject,t)},e.subject.addField=function(t){qt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return an(e,t)},e.addAttribute=function(t){qt([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){qt(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){qt(t),e.attributes=t},e.sign=function(t,r){e.md=r||z.md.sha1.create();var n=he[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=L.getCertificationRequestInfo(e);var a=v.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=Ts({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||L.getCertificationRequestInfo(e),i=v.toDer(n);r.update(i.getBytes())}return r!==null&&(t=ed({certificate:e,md:r,signature:e.signature})),t},e};function li(e){for(var t=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,o=v.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===v.Type.UTF8&&(s=z.util.encodeUtf8(s))),n=v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(r.type).getBytes()),v.create(v.Class.UNIVERSAL,o,!1,s)])]),t.value.push(n)}return t}function qt(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name=="undefined"&&(t.type&&t.type in L.oids?t.name=L.oids[t.type]:t.shortName&&t.shortName in Oe&&(t.name=L.oids[Oe[t.shortName]])),typeof t.type=="undefined")if(t.name&&t.name in L.oids)t.type=L.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName=="undefined"&&t.name&&t.name in Oe&&(t.shortName=Oe[t.name]),t.type===he.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=v.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(L.certificateExtensionToAsn1(td(t.extensions[i])))}if(typeof t.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function td(e,t){if(t=t||{},typeof e.name=="undefined"&&e.id&&e.id in L.oids&&(e.name=L.oids[e.id]),typeof e.id=="undefined")if(e.name&&e.name in L.oids)e.id=L.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value!="undefined")return e;if(e.name==="keyUsage"){var n=0,i=0,a=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),e.value=v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(v.create(v.Class.UNIVERSAL,v.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var c in e)e[c]===!0&&(c in he?o.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(he[c]).getBytes())):c.indexOf(".")!==-1&&o.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(c).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),e.value=v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);for(var u,l=0;l<e.altNames.length;++l){u=e.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=z.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else u.type===8&&(u.oid?s=v.oidToDer(v.oidToDer(u.oid)):s=v.oidToDer(s));e.value.value.push(v.create(v.Class.CONTEXT_SPECIFIC,u.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=v.create(v.Class.UNIVERSAL,v.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var h=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(v.create(v.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var p=[v.create(v.Class.CONTEXT_SPECIFIC,4,!0,[li(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(v.create(v.Class.CONTEXT_SPECIFIC,1,!0,p))}if(e.serialNumber){var d=z.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(v.create(v.Class.CONTEXT_SPECIFIC,2,!1,d))}}else if(e.name==="cRLDistributionPoints"){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);for(var o=e.value.value,m=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),E=v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[]),u,l=0;l<e.altNames.length;++l){u=e.altNames[l];var s=u.value;if(u.type===7&&u.ip){if(s=z.util.bytesFromIP(u.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else u.type===8&&(u.oid?s=v.oidToDer(v.oidToDer(u.oid)):s=v.oidToDer(s));E.value.push(v.create(v.Class.CONTEXT_SPECIFIC,u.type,!1,s))}m.value.push(v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[E])),o.push(m)}if(typeof e.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function Xu(e,t){switch(e){case he["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(t.hash.algorithmOid).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(v.create(v.Class.CONTEXT_SPECIFIC,1,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(t.mgf.algorithmOid).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(t.mgf.hash.algorithmOid).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(v.create(v.Class.CONTEXT_SPECIFIC,2,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(t.saltLength).getBytes())])),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,r);default:return v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")}}function WT(e){var t=v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=v.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===v.Type.UTF8&&(a=z.util.encodeUtf8(a));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var c=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(i.type).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,s,o,a)])]);t.value.push(c)}return t}var QT=new Date("1950-01-01T00:00:00Z"),YT=new Date("2050-01-01T00:00:00Z");function J0(e){return e>=QT&&e<YT?v.create(v.Class.UNIVERSAL,v.Type.UTCTIME,!1,v.dateToUtcTime(e)):v.create(v.Class.UNIVERSAL,v.Type.GENERALIZEDTIME,!1,v.dateToGeneralizedTime(e))}L.getTBSCertificate=function(e){var t=J0(e.validity.notBefore),r=J0(e.validity.notAfter),n=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(e.version).getBytes())]),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,z.util.hexToBytes(e.serialNumber)),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.siginfo.algorithmOid).getBytes()),Xu(e.siginfo.algorithmOid,e.siginfo.parameters)]),li(e.issuer),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[t,r]),li(e.subject),L.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(v.create(v.Class.CONTEXT_SPECIFIC,1,!0,[v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(v.create(v.Class.CONTEXT_SPECIFIC,2,!0,[v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(L.certificateExtensionsToAsn1(e.extensions)),n};L.getCertificationRequestInfo=function(e){var t=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(e.version).getBytes()),li(e.subject),L.publicKeyToAsn1(e.publicKey),WT(e)]);return t};L.distinguishedNameToAsn1=function(e){return li(e)};L.certificateToAsn1=function(e){var t=e.tbsCertificate||L.getTBSCertificate(e);return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[t,v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.signatureOid).getBytes()),Xu(e.signatureOid,e.signatureParameters)]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.signature)])};L.certificateExtensionsToAsn1=function(e){var t=v.create(v.Class.CONTEXT_SPECIFIC,3,!0,[]),r=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(L.certificateExtensionToAsn1(e[n]));return t};L.certificateExtensionToAsn1=function(e){var t=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);t.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.id).getBytes())),e.critical&&t.value.push(v.create(v.Class.UNIVERSAL,v.Type.BOOLEAN,!1,"\xFF"));var r=e.value;return typeof e.value!="string"&&(r=v.toDer(r).getBytes()),t.value.push(v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,r)),t};L.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||L.getCertificationRequestInfo(e);return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[t,v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.signatureOid).getBytes()),Xu(e.signatureOid,e.signatureParameters)]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.signature)])};L.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var o=r(s.issuer);return o},t.addCertificate=function(s){if(typeof s=="string"&&(s=z.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var o=t.certs[s.subject.hash];z.util.isArray(o)||(o=[o]),o.push(s),t.certs[s.subject.hash]=o}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=z.pki.certificateFromPem(s));var o=r(s.subject);if(!o)return!1;z.util.isArray(o)||(o=[o]);for(var c=v.toDer(L.certificateToAsn1(s)).getBytes(),u=0;u<o.length;++u){var l=v.toDer(L.certificateToAsn1(o[u])).getBytes();if(c===l)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var c=t.certs[o];if(!z.util.isArray(c))s.push(c);else for(var u=0;u<c.length;++u)s.push(c[u])}return s},t.removeCertificate=function(s){var o;if(typeof s=="string"&&(s=z.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))return null;var c=r(s.subject);if(!z.util.isArray(c))return o=t.certs[s.subject.hash],delete t.certs[s.subject.hash],o;for(var u=v.toDer(L.certificateToAsn1(s)).getBytes(),l=0;l<c.length;++l){var f=v.toDer(L.certificateToAsn1(c[l])).getBytes();u===f&&(o=c[l],c.splice(l,1))}return c.length===0&&delete t.certs[s.subject.hash],o};function r(s){return n(s),t.certs[s.hash]||null}function n(s){if(!s.hash){var o=z.md.sha1.create();s.attributes=L.RDNAttributesAsArray(li(s),o),s.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};L.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};L.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,o=0;do{var c=t.shift(),u=null,l=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:L.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),s===null){if(u=t[0]||e.getIssuer(c),u===null&&c.isIssuer(c)&&(l=!0,u=c),u){var f=u;z.util.isArray(f)||(f=[f]);for(var h=!1;!h&&f.length>0;){u=f.shift();try{h=u.verify(c)}catch(O){}}h||(s={message:"Certificate signature is invalid.",error:L.certificateError.bad_certificate})}s===null&&(!u||l)&&!e.hasCertificate(c)&&(s={message:"Certificate is not trusted.",error:L.certificateError.unknown_ca})}if(s===null&&u&&!c.isIssuer(u)&&(s={message:"Certificate issuer is invalid.",error:L.certificateError.bad_certificate}),s===null)for(var p={keyUsage:!0,basicConstraints:!0},d=0;s===null&&d<c.extensions.length;++d){var m=c.extensions[d];m.critical&&!(m.name in p)&&(s={message:"Certificate has an unsupported critical extension.",error:L.certificateError.unsupported_certificate})}if(s===null&&(!a||t.length===0&&(!u||l))){var E=c.getExtension("basicConstraints"),x=c.getExtension("keyUsage");if(x!==null&&(!x.keyCertSign||E===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:L.certificateError.bad_certificate}),s===null&&E!==null&&!E.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:L.certificateError.bad_certificate}),s===null&&x!==null&&"pathLenConstraint"in E){var _=o-1;_>E.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:L.certificateError.bad_certificate})}}var w=s===null?!0:s.error,R=r.verify?r.verify(w,o,n):w;if(R===!0)s=null;else throw w===!0&&(s={message:"The application rejected the certificate.",error:L.certificateError.bad_certificate}),(R||R===0)&&(typeof R=="object"&&!z.util.isArray(R)?(R.message&&(s.message=R.message),R.error&&(s.error=R.error)):typeof R=="string"&&(s.error=R)),s;a=!1,++o}while(t.length>0);return!0}});var Zu=S((oL,id)=>{var be=ee();$t();ni();tn();Qu();Wu();Lt();Ji();oi();de();As();var C=be.asn1,ae=be.pki,ea=id.exports=be.pkcs12=be.pkcs12||{},nd={name:"ContentInfo",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:C.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},XT={name:"PFX",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"version"},nd,{name:"PFX.macData",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",optional:!0,tagClass:C.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},JT={name:"SafeBag",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:C.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:C.Class.UNIVERSAL,type:C.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},ZT={name:"Attribute",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:C.Class.UNIVERSAL,type:C.Type.SET,constructed:!0,capture:"values"}]},eA={name:"CertBag",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:C.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:C.Class.UNIVERSAL,type:C.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Zi(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var o=e[a].safeBags[s];if(!(n!==void 0&&o.type!==n)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(r)>=0&&i.push(o)}}return i}ea.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!C.validate(e,XT,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(E){var x={},_;return"localKeyId"in E?_=E.localKeyId:"localKeyIdHex"in E&&(_=be.util.hexToBytes(E.localKeyIdHex)),_===void 0&&!("friendlyName"in E)&&"bagType"in E&&(x[E.bagType]=Zi(s.safeContents,null,null,E.bagType)),_!==void 0&&(x.localKeyId=Zi(s.safeContents,"localKeyId",_,E.bagType)),"friendlyName"in E&&(x.friendlyName=Zi(s.safeContents,"friendlyName",E.friendlyName,E.bagType)),x},getBagsByFriendlyName:function(E,x){return Zi(s.safeContents,"friendlyName",E,x)},getBagsByLocalKeyId:function(E,x){return Zi(s.safeContents,"localKeyId",E,x)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(C.derToOid(n.contentType)!==ae.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=C.derToOid(n.contentType),a}var o=n.content.value[0];if(o.tagClass!==C.Class.UNIVERSAL||o.type!==C.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=Ju(o),n.mac){var c=null,u=0,l=C.derToOid(n.macAlgorithm);switch(l){case ae.oids.sha1:c=be.md.sha1.create(),u=20;break;case ae.oids.sha256:c=be.md.sha256.create(),u=32;break;case ae.oids.sha384:c=be.md.sha384.create(),u=48;break;case ae.oids.sha512:c=be.md.sha512.create(),u=64;break;case ae.oids.md5:c=be.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var f=new be.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(be.util.bytesToHex(n.macIterations),16):1,p=ea.generateKey(r,f,3,h,u,c),d=be.hmac.create();d.start(c,p),d.update(o.value);var m=d.getMac();if(m.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}else if(Array.isArray(e.value)&&e.value.length>2)throw new Error("Invalid PKCS#12. macData field present but MAC was not validated.");return tA(s,o.value,t,r),s};function Ju(e){if(e.composed||e.constructed){for(var t=be.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function tA(e,t,r,n){if(t=C.fromDer(t,r),t.tagClass!==C.Class.UNIVERSAL||t.type!==C.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},o=[];if(!C.validate(a,nd,s,o)){var c=new Error("Cannot read ContentInfo.");throw c.errors=o,c}var u={encrypted:!1},l=null,f=s.content.value[0];switch(C.derToOid(s.contentType)){case ae.oids.data:if(f.tagClass!==C.Class.UNIVERSAL||f.type!==C.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=Ju(f).value;break;case ae.oids.encryptedData:l=rA(f,n),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=C.derToOid(s.contentType),c}u.safeBags=nA(l,r,n),e.safeContents.push(u)}}function rA(e,t){var r={},n=[];if(!C.validate(e,be.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=C.derToOid(r.contentType);if(a!==ae.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=C.derToOid(r.encAlgorithm);var s=ae.pbe.getCipher(a,r.encParameter,t),o=Ju(r.encryptedContentAsn1),c=be.util.createBuffer(o.value);if(s.update(c),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function nA(e,t,r){if(!t&&e.length===0)return[];if(e=C.fromDer(e,t),e.tagClass!==C.Class.UNIVERSAL||e.type!==C.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},o=[];if(!C.validate(a,JT,s,o)){var c=new Error("Cannot read SafeBag.");throw c.errors=o,c}var u={type:C.derToOid(s.bagId),attributes:iA(s.bagAttributes)};n.push(u);var l,f,h=s.bagValue.value[0];switch(u.type){case ae.oids.pkcs8ShroudedKeyBag:if(h=ae.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case ae.oids.keyBag:try{u.key=ae.privateKeyFromAsn1(h)}catch(d){u.key=null,u.asn1=h}continue;case ae.oids.certBag:l=eA,f=function(){if(C.derToOid(s.certId)!==ae.oids.x509Certificate){var d=new Error("Unsupported certificate type, only X.509 supported.");throw d.oid=C.derToOid(s.certId),d}var m=C.fromDer(s.cert,t);try{u.cert=ae.certificateFromAsn1(m,!0)}catch(E){u.cert=null,u.asn1=m}};break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(l!==void 0&&!C.validate(h,l,s,o)){var c=new Error("Cannot read PKCS#12 "+l.name);throw c.errors=o,c}f()}return n}function iA(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!C.validate(e[r],ZT,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=C.derToOid(n.oid);if(ae.oids[s]!==void 0){t[ae.oids[s]]=[];for(var o=0;o<n.values.length;++o)t[ae.oids[s]].push(n.values[o].value)}}return t}ea.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=be.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var s=be.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=ae.certificateFromPem(s));var o=be.md.sha1.create();o.update(C.toDer(ae.certificateToAsn1(s)).getBytes()),i=o.digest().getBytes()}else i=be.random.getBytes(20);var c=[];i!==null&&c.push(C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.localKeyId).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.friendlyName).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,C.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(a=C.create(C.Class.UNIVERSAL,C.Type.SET,!0,c));var u=[],l=[];t!==null&&(be.util.isArray(t)?l=t:l=[t]);for(var f=[],h=0;h<l.length;++h){t=l[h],typeof t=="string"&&(t=ae.certificateFromPem(t));var p=h===0?a:void 0,d=ae.certificateToAsn1(t),m=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.certBag).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.x509Certificate).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(d).getBytes())])])]),p]);f.push(m)}if(f.length>0){var E=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,f),x=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.data).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(E).getBytes())])]);u.push(x)}var _=null;if(e!==null){var w=ae.wrapRsaPrivateKey(ae.privateKeyToAsn1(e));r===null?_=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.keyBag).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[w]),a]):_=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.pkcs8ShroudedKeyBag).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[ae.encryptPrivateKeyInfo(w,r,n)]),a]);var R=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[_]),O=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.data).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(R).getBytes())])]);u.push(O)}var B=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,u),V;if(n.useMac){var o=be.md.sha1.create(),K=new be.util.ByteBuffer(be.random.getBytes(n.saltSize)),W=n.count,e=ea.generateKey(r,K,3,W,20),Z=be.hmac.create();Z.start(o,e),Z.update(C.toDer(B).getBytes());var re=Z.getMac();V=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.sha1).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")]),C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,re.getBytes())]),C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,K.getBytes()),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(W).getBytes())])}return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(3).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ae.oids.data).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(B).getBytes())])]),V])};ea.generateKey=be.pbe.generatePkcs12Key});var tc=S((uL,ad)=>{var sn=ee();$t();tn();Wu();Rn();vs();Zu();xs();Ji();de();As();var ec=sn.asn1,fi=ad.exports=sn.pki=sn.pki||{};fi.pemToDer=function(e){var t=sn.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return sn.util.createBuffer(t.body)};fi.privateKeyFromPem=function(e){var t=sn.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=ec.fromDer(t.body);return fi.privateKeyFromAsn1(n)};fi.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:ec.toDer(fi.privateKeyToAsn1(e)).getBytes()};return sn.pem.encode(r,{maxline:t})};fi.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:ec.toDer(e).getBytes()};return sn.pem.encode(r,{maxline:t})}});var oc=S((cL,dd)=>{var D=ee();$t();ni();fs();Rn();tc();Lt();oi();de();var Bs=function(e,t,r,n){var i=D.util.createBuffer(),a=e.length>>1,s=a+(e.length&1),o=e.substr(0,s),c=e.substr(a,s),u=D.util.createBuffer(),l=D.hmac.create();r=t+r;var f=Math.ceil(n/16),h=Math.ceil(n/20);l.start("MD5",o);var p=D.util.createBuffer();u.putBytes(r);for(var d=0;d<f;++d)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),p.putBuffer(l.digest());l.start("SHA1",c);var m=D.util.createBuffer();u.clear(),u.putBytes(r);for(var d=0;d<h;++d)l.start(null,null),l.update(u.getBytes()),u.putBuffer(l.digest()),l.start(null,null),l.update(u.bytes()+r),m.putBuffer(l.digest());return i.putBytes(D.util.xorBytes(p.getBytes(),m.getBytes(),n)),i},aA=function(e,t,r){var n=D.hmac.create();n.start("SHA1",e);var i=D.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},sA=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=D.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},oA=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=D.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},_t=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return D.util.createBuffer(e.getBytes(r))},Mt=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},g={};g.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};g.SupportedVersions=[g.Versions.TLS_1_1,g.Versions.TLS_1_0];g.Version=g.SupportedVersions[0];g.MaxFragment=15360;g.ConnectionEnd={server:0,client:1};g.PRFAlgorithm={tls_prf_sha256:0};g.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};g.CipherType={stream:0,block:1,aead:2};g.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};g.CompressionMethod={none:0,deflate:1};g.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};g.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};g.Alert={};g.Alert.Level={warning:1,fatal:2};g.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};g.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};g.CipherSuites={};g.getCipherSuite=function(e){var t=null;for(var r in g.CipherSuites){var n=g.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};g.handleUnexpected=function(e,t){var r=!e.open&&e.entity===g.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unexpected_message}})};g.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(g.queue(e,g.createAlert(e,{level:g.Alert.Level.warning,description:g.Alert.Description.no_renegotiation})),g.flush(e)),e.process()};g.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===g.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:D.util.createBuffer(a.getBytes(32)),session_id:_t(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=_t(a,2),n.compression_methods=_t(a,1)),s=r-(s-a.length()),s>0){for(var o=_t(a,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:_t(o,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var u=n.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var l=_t(u.data,2);l.length()>0;){var f=l.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(_t(l,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=g.getCipherSuite(n.cipher_suite);else for(var h=D.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(e.session.cipherSuite=g.getCipherSuite(h.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.handshake_failure},cipherSuite:D.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=g.CompressionMethod.none}return n};g.createSecurityParameters=function(e,t){var r=e.entity===g.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,a=r?n:g.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:g.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};g.handleServerHello=function(e,t,r){var n=g.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=ud,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=cA,e.session.resuming=!1,g.createSecurityParameters(e,n)),e.session.id=i,e.process()}};g.handleClientHello=function(e,t,r){var n=g.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=D.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,o=1;o<g.SupportedVersions.length&&(s=g.SupportedVersions[o],!(s.minor<=n.version.minor));++o);e.version={major:s.major,minor:s.minor},e.session.version=e.version}a!==null?(e.expect=ac,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?yA:ic,e.session.resuming=!1,g.createSecurityParameters(e,n)),e.open=!0,g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createServerHello(e)})),e.session.resuming?(g.queue(e,g.createRecord(e,{type:g.ContentType.change_cipher_spec,data:g.createChangeCipherSpec()})),e.state.pending=g.createConnectionState(e),e.state.current.write=e.state.pending.write,g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createFinished(e)}))):(g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createCertificate(e)})),e.fail||(g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createServerKeyExchange(e)})),e.verifyClient!==!1&&g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createCertificateRequest(e)})),g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createServerHelloDone(e)})))),g.flush(e),e.process()}};g.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:_t(n,3)},a,s,o=[];try{for(;i.certificate_list.length()>0;)a=_t(i.certificate_list,3),s=D.asn1.fromDer(a),a=D.pki.certificateFromAsn1(s,!0),o.push(a)}catch(u){return e.error(e,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.bad_certificate}})}var c=e.entity===g.ConnectionEnd.client;(c||e.verifyClient===!0)&&o.length===0?e.error(e,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}}):o.length===0?e.expect=c?sd:ic:(c?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],g.verifyCertificateChain(e,o)&&(e.expect=c?sd:ic)),e.process()};g.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unsupported_certificate}});e.expect=lA,e.process()};g.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:_t(n,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=D.pki.privateKeyFromPem(a)}catch(c){e.error(e,{message:"Could not get private key.",cause:c,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==s.pre_master_secret.charCodeAt(0)||o.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(c){s.pre_master_secret=D.random.getBytes(48)}e.expect=ac,e.session.clientCertificate!==null&&(e.expect=gA),e.process()};g.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:_t(n,1),certificate_authorities:_t(n,2)};e.session.certificateRequest=i,e.expect=fA,e.process()};g.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:_t(n,2).getBytes()},s=D.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch(c){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.handshake_failure}})}e.expect=ac,e.process()};g.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.insufficient_security}},i=0,a=e.verify(e,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!D.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),e.error(e,n)}e.session.certificateRequest!==null&&(t=g.createRecord(e,{type:g.ContentType.handshake,data:g.createCertificate(e)}),g.queue(e,t)),t=g.createRecord(e,{type:g.ContentType.handshake,data:g.createClientKeyExchange(e)}),g.queue(e,t),e.expect=pA;var s=function(o,c){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&g.queue(o,g.createRecord(o,{type:g.ContentType.handshake,data:g.createCertificateVerify(o,c)})),g.queue(o,g.createRecord(o,{type:g.ContentType.change_cipher_spec,data:g.createChangeCipherSpec()})),o.state.pending=g.createConnectionState(o),o.state.current.write=o.state.pending.write,g.queue(o,g.createRecord(o,{type:g.ContentType.handshake,data:g.createFinished(o)})),o.expect=ud,g.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);g.getClientSignature(e,s)};g.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var r=e.entity===g.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=g.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?hA:mA,e.process()};g.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=t.fragment.getBytes();n=D.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var s=e.entity===g.ConnectionEnd.client,o=s?"server finished":"client finished",c=e.session.sp,u=12,l=Bs;if(n=l(c.master_secret,o,n.getBytes(),u),n.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&s||!e.session.resuming&&!s)&&(g.queue(e,g.createRecord(e,{type:g.ContentType.change_cipher_spec,data:g.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createFinished(e)}))),e.expect=s?dA:EA,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,g.flush(e),e.isConnected=!0,e.connected(e),e.process()};g.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case g.Alert.Description.close_notify:i="Connection closed.";break;case g.Alert.Description.unexpected_message:i="Unexpected message.";break;case g.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case g.Alert.Description.decryption_failed:i="Decryption failed.";break;case g.Alert.Description.record_overflow:i="Record overflow.";break;case g.Alert.Description.decompression_failure:i="Decompression failed.";break;case g.Alert.Description.handshake_failure:i="Handshake failure.";break;case g.Alert.Description.bad_certificate:i="Bad certificate.";break;case g.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case g.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case g.Alert.Description.certificate_expired:i="Certificate expired.";break;case g.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case g.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case g.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case g.Alert.Description.access_denied:i="Access denied.";break;case g.Alert.Description.decode_error:i="Decode error.";break;case g.Alert.Description.decrypt_error:i="Decrypt error.";break;case g.Alert.Description.export_restriction:i="Export restriction.";break;case g.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case g.Alert.Description.insufficient_security:i="Insufficient security.";break;case g.Alert.Description.internal_error:i="Internal error.";break;case g.Alert.Description.user_canceled:i="User canceled.";break;case g.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===g.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===g.ConnectionEnd.client?"server":"client",alert:n}),e.process()};g.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=D.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in Is[e.entity][e.expect]?(e.entity===g.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:D.md.md5.create(),sha1:D.md.sha1.create()}),n!==g.HandshakeType.hello_request&&n!==g.HandshakeType.certificate_verify&&n!==g.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),Is[e.entity][e.expect][n](e,t,i)):g.handleUnexpected(e,t)};g.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};g.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===g.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();g.queue(e,g.createRecord(e,{type:g.ContentType.heartbeat,data:g.createHeartbeat(g.HeartbeatMessageType.heartbeat_response,a)})),g.flush(e)}else if(n===g.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,D.util.createBuffer(a))}e.process()};var uA=0,cA=1,sd=2,lA=3,fA=4,ud=5,hA=6,dA=7,pA=8,vA=0,yA=1,ic=2,gA=3,ac=4,mA=5,EA=6,y=g.handleUnexpected,cd=g.handleChangeCipherSpec,Ge=g.handleAlert,yt=g.handleHandshake,ld=g.handleApplicationData,ze=g.handleHeartbeat,sc=[];sc[g.ConnectionEnd.client]=[[y,Ge,yt,y,ze],[y,Ge,yt,y,ze],[y,Ge,yt,y,ze],[y,Ge,yt,y,ze],[y,Ge,yt,y,ze],[cd,Ge,y,y,ze],[y,Ge,yt,y,ze],[y,Ge,yt,ld,ze],[y,Ge,yt,y,ze]];sc[g.ConnectionEnd.server]=[[y,Ge,yt,y,ze],[y,Ge,yt,y,ze],[y,Ge,yt,y,ze],[y,Ge,yt,y,ze],[cd,Ge,y,y,ze],[y,Ge,yt,y,ze],[y,Ge,yt,ld,ze],[y,Ge,yt,y,ze]];var on=g.handleHelloRequest,SA=g.handleServerHello,fd=g.handleCertificate,od=g.handleServerKeyExchange,rc=g.handleCertificateRequest,_s=g.handleServerHelloDone,hd=g.handleFinished,Is=[];Is[g.ConnectionEnd.client]=[[y,y,SA,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[on,y,y,y,y,y,y,y,y,y,y,fd,od,rc,_s,y,y,y,y,y,y],[on,y,y,y,y,y,y,y,y,y,y,y,od,rc,_s,y,y,y,y,y,y],[on,y,y,y,y,y,y,y,y,y,y,y,y,rc,_s,y,y,y,y,y,y],[on,y,y,y,y,y,y,y,y,y,y,y,y,y,_s,y,y,y,y,y,y],[on,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[on,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,hd],[on,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[on,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y]];var CA=g.handleClientHello,xA=g.handleClientKeyExchange,bA=g.handleCertificateVerify;Is[g.ConnectionEnd.server]=[[y,CA,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,fd,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,xA,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,bA,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,hd],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y]];g.generateKeys=function(e,t){var r=Bs,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===g.Versions.TLS_1_0.major&&e.version.minor===g.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=r(t.master_secret,"key expansion",n,i),o={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(o.client_write_IV=s.getBytes(t.fixed_iv_length),o.server_write_IV=s.getBytes(t.fixed_iv_length)),o};g.createConnectionState=function(e){var t=e.entity===g.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=g.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case g.CompressionMethod.none:break;case g.CompressionMethod.deflate:n.read.compressFunction=oA,n.write.compressFunction=sA;break;default:throw new Error("Unsupported compression algorithm.")}}return n};g.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=D.util.createBuffer();return r.putInt32(t),r.putBytes(D.random.getBytes(28)),r};g.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};g.createAlert=function(e,t){var r=D.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),g.createRecord(e,{type:g.ContentType.alert,data:r})};g.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=D.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),a=D.util.createBuffer();a.putByte(g.CompressionMethod.none);var s=a.length(),o=D.util.createBuffer();if(e.virtualHost){var c=D.util.createBuffer();c.putByte(0),c.putByte(0);var u=D.util.createBuffer();u.putByte(0),Mt(u,2,D.util.createBuffer(e.virtualHost));var l=D.util.createBuffer();Mt(l,2,u),Mt(c,2,l),o.putBuffer(c)}var f=o.length();f>0&&(f+=2);var h=e.session.id,p=h.length+1+2+4+28+2+i+1+s+f,d=D.util.createBuffer();return d.putByte(g.HandshakeType.client_hello),d.putInt24(p),d.putByte(e.version.major),d.putByte(e.version.minor),d.putBytes(e.session.sp.client_random),Mt(d,1,D.util.createBuffer(h)),Mt(d,2,t),Mt(d,1,a),f>0&&Mt(d,2,o),d};g.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=D.util.createBuffer();return n.putByte(g.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),Mt(n,1,D.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};g.createCertificate=function(e){var t=e.entity===g.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=D.util.createBuffer();if(r!==null)try{D.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var o=D.pem.decode(r[s])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=o.type,c}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=D.util.createBuffer(o.body);a===null&&(a=D.asn1.fromDer(u.bytes(),!1));var l=D.util.createBuffer();Mt(l,3,u),i.putBuffer(l)}r=D.pki.certificateFromAsn1(a),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.bad_certificate}})}var f=3+i.length(),h=D.util.createBuffer();return h.putByte(g.HandshakeType.certificate),h.putInt24(f),Mt(h,3,i),h};g.createClientKeyExchange=function(e){var t=D.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(D.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,a=D.util.createBuffer();return a.putByte(g.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};g.createServerKeyExchange=function(e){var t=0,r=D.util.createBuffer();return t>0&&(r.putByte(g.HandshakeType.server_key_exchange),r.putInt24(t)),r};g.getClientSignature=function(e,t){var r=D.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=D.pki.privateKeyFromPem(s)}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},e.getSignature(e,r,t)};g.createCertificateVerify=function(e,t){var r=t.length+2,n=D.util.createBuffer();return n.putByte(g.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};g.createCertificateRequest=function(e){var t=D.util.createBuffer();t.putByte(1);var r=D.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],a=D.pki.distinguishedNameToAsn1(i.subject),s=D.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var o=1+t.length()+2+r.length(),c=D.util.createBuffer();return c.putByte(g.HandshakeType.certificate_request),c.putInt24(o),Mt(c,1,t),Mt(c,2,r),c};g.createServerHelloDone=function(e){var t=D.util.createBuffer();return t.putByte(g.HandshakeType.server_hello_done),t.putInt24(0),t};g.createChangeCipherSpec=function(){var e=D.util.createBuffer();return e.putByte(1),e};g.createFinished=function(e){var t=D.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===g.ConnectionEnd.client,n=e.session.sp,i=12,a=Bs,s=r?"client finished":"server finished";t=a(n.master_secret,s,t.getBytes(),i);var o=D.util.createBuffer();return o.putByte(g.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};g.createHeartbeat=function(e,t,r){typeof r=="undefined"&&(r=t.length);var n=D.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(D.random.getBytes(a)),n};g.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===g.ContentType.handshake||t.type===g.ContentType.alert||t.type===g.ContentType.change_cipher_spec))){if(t.type===g.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=g.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>g.MaxFragment;)n.push(g.createRecord(e,{type:t.type,data:D.util.createBuffer(i.slice(0,g.MaxFragment))})),i=i.slice(g.MaxFragment);i.length>0&&n.push(g.createRecord(e,{type:t.type,data:D.util.createBuffer(i)}))}for(var a=0;a<n.length&&!e.fail;++a){var s=n[a],o=e.state.current.write;o.update(e,s)&&e.records.push(s)}}};g.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var nc=function(e){switch(e){case!0:return!0;case D.pki.certificateError.bad_certificate:return g.Alert.Description.bad_certificate;case D.pki.certificateError.unsupported_certificate:return g.Alert.Description.unsupported_certificate;case D.pki.certificateError.certificate_revoked:return g.Alert.Description.certificate_revoked;case D.pki.certificateError.certificate_expired:return g.Alert.Description.certificate_expired;case D.pki.certificateError.certificate_unknown:return g.Alert.Description.certificate_unknown;case D.pki.certificateError.unknown_ca:return g.Alert.Description.unknown_ca;default:return g.Alert.Description.bad_certificate}},TA=function(e){switch(e){case!0:return!0;case g.Alert.Description.bad_certificate:return D.pki.certificateError.bad_certificate;case g.Alert.Description.unsupported_certificate:return D.pki.certificateError.unsupported_certificate;case g.Alert.Description.certificate_revoked:return D.pki.certificateError.certificate_revoked;case g.Alert.Description.certificate_expired:return D.pki.certificateError.certificate_expired;case g.Alert.Description.certificate_unknown:return D.pki.certificateError.certificate_unknown;case g.Alert.Description.unknown_ca:return D.pki.certificateError.unknown_ca;default:return D.pki.certificateError.bad_certificate}};g.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(a,s,o){var c=nc(a),u=e.verify(e,a,s,o);if(u!==!0){if(typeof u=="object"&&!D.util.isArray(u)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:g.Alert.Level.fatal,description:g.Alert.Description.bad_certificate},u.message&&(l.message=u.message),u.alert&&(l.alert.description=u.alert),l}u!==a&&(u=TA(u))}return u},D.pki.verifyCertificateChain(e.caStore,t,r)}catch(a){var i=a;(typeof i!="object"||D.util.isArray(i))&&(i={send:!0,alert:{level:g.Alert.Level.fatal,description:nc(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:g.Alert.Level.fatal,description:nc(i.error)}),e.error(e,i)}return!e.fail};g.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var a=null,s=null;if(i?s=D.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var o in r.order)if(r.order[o]===s){r.order.splice(o,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=D.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};g.createConnection=function(e){var t=null;e.caStore?D.util.isArray(e.caStore)?t=D.pki.createCaStore(e.caStore):t=e.caStore:t=D.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in g.CipherSuites)r.push(g.CipherSuites[n])}var i=e.server?g.ConnectionEnd.server:g.ConnectionEnd.client,a=e.sessionCache?g.createSessionCache(e.sessionCache):null,s={version:{major:g.Version.major,minor:g.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(l,f,h,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:D.util.createBuffer(),tlsData:D.util.createBuffer(),data:D.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(l,f){f.origin=f.origin||(l.entity===g.ConnectionEnd.client?"client":"server"),f.send&&(g.queue(l,g.createAlert(l,f.alert)),g.flush(l));var h=f.fatal!==!1;h&&(l.fail=!0),e.error(l,f),h&&l.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(l){s.version={major:g.Version.major,minor:g.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===g.ConnectionEnd.client?uA:vA,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=g.createConnectionState(s)},s.reset();var o=function(l,f){var h=f.type-g.ContentType.change_cipher_spec,p=sc[l.entity][l.expect];h in p?p[h](l,f):g.handleUnexpected(l,f)},c=function(l){var f=0,h=l.input,p=h.length();if(p<5)f=5-p;else{l.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:D.util.createBuffer(),ready:!1};var d=l.record.version.major===l.version.major;d&&l.session&&l.session.version&&(d=l.record.version.minor===l.version.minor),d||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.protocol_version}})}return f},u=function(l){var f=0,h=l.input,p=h.length();if(p<l.record.length)f=l.record.length-p;else{l.record.fragment.putBytes(h.getBytes(l.record.length)),h.compact();var d=l.state.current.read;d.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unexpected_message}})),l.record.ready=!0)}return f};return s.handshake=function(l){if(s.entity!==g.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var f=null;l.length>0&&(s.sessionCache&&(f=s.sessionCache.getSession(l)),f===null&&(l="")),l.length===0&&s.sessionCache&&(f=s.sessionCache.getSession(),f!==null&&(l=f.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:D.md.md5.create(),sha1:D.md.sha1.create()},f&&(s.version=f.version,s.session.sp=f.sp),s.session.sp.client_random=g.createRandom().getBytes(),s.open=!0,g.queue(s,g.createRecord(s,{type:g.ContentType.handshake,data:g.createClientHello(s)})),g.flush(s)}},s.process=function(l){var f=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(f=c(s)),!s.fail&&s.record!==null&&!s.record.ready&&(f=u(s)),!s.fail&&s.record!==null&&s.record.ready&&o(s,s.record)),f},s.prepare=function(l){return g.queue(s,g.createRecord(s,{type:g.ContentType.application_data,data:D.util.createBuffer(l)})),g.flush(s)},s.prepareHeartbeatRequest=function(l,f){return l instanceof D.util.ByteBuffer&&(l=l.bytes()),typeof f=="undefined"&&(f=l.length),s.expectedHeartbeatPayload=l,g.queue(s,g.createRecord(s,{type:g.ContentType.heartbeat,data:g.createHeartbeat(g.HeartbeatMessageType.heartbeat_request,l,f)})),g.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var f={id:s.session.id,version:s.session.version,sp:s.session.sp};f.sp.keys=null,s.sessionCache.setSession(f.id,f)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,g.queue(s,g.createAlert(s,{level:g.Alert.Level.warning,description:g.Alert.Description.close_notify})),g.flush(s)),s.closed(s)),s.reset(l)},s};dd.exports=D.tls=D.tls||{};for(ws in g)typeof g[ws]!="function"&&(D.tls[ws]=g[ws]);var ws;D.tls.prf_tls1=Bs;D.tls.hmac_sha1=aA;D.tls.createSessionCache=g.createSessionCache;D.tls.createConnection=g.createConnection});var yd=S((lL,vd)=>{var un=ee();en();oc();var Ft=vd.exports=un.tls;Ft.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Ft.BulkCipherAlgorithm.aes,e.cipher_type=Ft.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Ft.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:pd};Ft.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Ft.BulkCipherAlgorithm.aes,e.cipher_type=Ft.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Ft.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:pd};function pd(e,t,r){var n=t.entity===un.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:un.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:un.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=IA,e.write.cipherFunction=AA,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=Ft.hmac_sha1}function AA(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===Ft.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=un.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=Ft.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(_A)&&(e.fragment=a.output,e.length=e.fragment.length(),r=!0),r}function _A(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function wA(e,t,r){var n=!0;if(r){for(var i=t.length(),a=t.last(),s=i-1-a;s<i-1;++s)n=n&&t.at(s)==a;n&&t.truncate(a+1)}return n}function IA(e,t){var r=!1,n;e.version.minor===Ft.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(wA);var a=t.macLength,s=un.random.getBytesSync(a),o=i.output.length();o>=a?(e.fragment=i.output.getBytes(o-a),s=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=un.util.createBuffer(e.fragment),e.length=e.fragment.length();var c=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=BA(t.macKey,s,c)&&r,r}function BA(e,t,r){var n=un.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var lc=S((fL,Sd)=>{var we=ee();sr();de();var ta=Sd.exports=we.sha512=we.sha512||{};we.md.sha512=we.md.algorithms.sha512=ta;var md=we.sha384=we.sha512.sha384=we.sha512.sha384||{};md.create=function(){return ta.create("SHA-384")};we.md.sha384=we.md.algorithms.sha384=md;we.sha512.sha256=we.sha512.sha256||{create:function(){return ta.create("SHA-512/256")}};we.md["sha512/256"]=we.md.algorithms["sha512/256"]=we.sha512.sha256;we.sha512.sha224=we.sha512.sha224||{create:function(){return ta.create("SHA-512/224")}};we.md["sha512/224"]=we.md.algorithms["sha512/224"]=we.sha512.sha224;ta.create=function(e){if(Ed||OA(),typeof e=="undefined"&&(e="SHA-512"),!(e in Un))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Un[e],r=null,n=we.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var c=o.messageLengthSize/4,u=0;u<c;++u)o.fullMessageLength.push(0);n=we.util.createBuffer(),r=new Array(t.length);for(var u=0;u<t.length;++u)r[u]=t[u].slice(0);return o},o.start(),o.update=function(c,u){u==="utf8"&&(c=we.util.encodeUtf8(c));var l=c.length;o.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=l[1],l[1]=l[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(c),gd(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var c=we.util.createBuffer();c.putBytes(n.bytes());var u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,l=u&o.blockLength-1;c.putBytes(uc.substr(0,o.blockLength-l));for(var f,h,p=o.fullMessageLength[0]*8,d=0;d<o.fullMessageLength.length-1;++d)f=o.fullMessageLength[d+1]*8,h=f/4294967296>>>0,p+=h,c.putInt32(p>>>0),p=f>>>0;c.putInt32(p);for(var m=new Array(r.length),d=0;d<r.length;++d)m[d]=r[d].slice(0);gd(m,i,c);var E=we.util.createBuffer(),x;e==="SHA-512"?x=m.length:e==="SHA-384"?x=m.length-2:x=m.length-4;for(var d=0;d<x;++d)E.putInt32(m[d][0]),(d!==x-1||e!=="SHA-512/224")&&E.putInt32(m[d][1]);return E},o};var uc=null,Ed=!1,cc=null,Un=null;function OA(){uc="\x80",uc+=we.util.fillString("\0",128),cc=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Un={},Un["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Un["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Un["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Un["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Ed=!0}function gd(e,t,r){for(var n,i,a,s,o,c,u,l,f,h,p,d,m,E,x,_,w,R,O,B,V,K,W,Z,re,le,ye,Re,ne,ve,H,Dt,Pt,Ee,Ae,Q=r.length();Q>=128;){for(ne=0;ne<16;++ne)t[ne][0]=r.getInt32()>>>0,t[ne][1]=r.getInt32()>>>0;for(;ne<80;++ne)Dt=t[ne-2],ve=Dt[0],H=Dt[1],n=((ve>>>19|H<<13)^(H>>>29|ve<<3)^ve>>>6)>>>0,i=((ve<<13|H>>>19)^(H<<3|ve>>>29)^(ve<<26|H>>>6))>>>0,Ee=t[ne-15],ve=Ee[0],H=Ee[1],a=((ve>>>1|H<<31)^(ve>>>8|H<<24)^ve>>>7)>>>0,s=((ve<<31|H>>>1)^(ve<<24|H>>>8)^(ve<<25|H>>>7))>>>0,Pt=t[ne-7],Ae=t[ne-16],H=i+Pt[1]+s+Ae[1],t[ne][0]=n+Pt[0]+a+Ae[0]+(H/4294967296>>>0)>>>0,t[ne][1]=H>>>0;for(m=e[0][0],E=e[0][1],x=e[1][0],_=e[1][1],w=e[2][0],R=e[2][1],O=e[3][0],B=e[3][1],V=e[4][0],K=e[4][1],W=e[5][0],Z=e[5][1],re=e[6][0],le=e[6][1],ye=e[7][0],Re=e[7][1],ne=0;ne<80;++ne)u=((V>>>14|K<<18)^(V>>>18|K<<14)^(K>>>9|V<<23))>>>0,l=((V<<18|K>>>14)^(V<<14|K>>>18)^(K<<23|V>>>9))>>>0,f=(re^V&(W^re))>>>0,h=(le^K&(Z^le))>>>0,o=((m>>>28|E<<4)^(E>>>2|m<<30)^(E>>>7|m<<25))>>>0,c=((m<<4|E>>>28)^(E<<30|m>>>2)^(E<<25|m>>>7))>>>0,p=(m&x|w&(m^x))>>>0,d=(E&_|R&(E^_))>>>0,H=Re+l+h+cc[ne][1]+t[ne][1],n=ye+u+f+cc[ne][0]+t[ne][0]+(H/4294967296>>>0)>>>0,i=H>>>0,H=c+d,a=o+p+(H/4294967296>>>0)>>>0,s=H>>>0,ye=re,Re=le,re=W,le=Z,W=V,Z=K,H=B+i,V=O+n+(H/4294967296>>>0)>>>0,K=H>>>0,O=w,B=R,w=x,R=_,x=m,_=E,H=i+s,m=n+a+(H/4294967296>>>0)>>>0,E=H>>>0;H=e[0][1]+E,e[0][0]=e[0][0]+m+(H/4294967296>>>0)>>>0,e[0][1]=H>>>0,H=e[1][1]+_,e[1][0]=e[1][0]+x+(H/4294967296>>>0)>>>0,e[1][1]=H>>>0,H=e[2][1]+R,e[2][0]=e[2][0]+w+(H/4294967296>>>0)>>>0,e[2][1]=H>>>0,H=e[3][1]+B,e[3][0]=e[3][0]+O+(H/4294967296>>>0)>>>0,e[3][1]=H>>>0,H=e[4][1]+K,e[4][0]=e[4][0]+V+(H/4294967296>>>0)>>>0,e[4][1]=H>>>0,H=e[5][1]+Z,e[5][0]=e[5][0]+W+(H/4294967296>>>0)>>>0,e[5][1]=H>>>0,H=e[6][1]+le,e[6][0]=e[6][0]+re+(H/4294967296>>>0)>>>0,e[6][1]=H>>>0,H=e[7][1]+Re,e[7][0]=e[7][0]+ye+(H/4294967296>>>0)>>>0,e[7][1]=H>>>0,Q-=128}}});var Cd=S(fc=>{var RA=ee();$t();var Fe=RA.asn1;fc.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};fc.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var Pd=S((dL,Dd)=>{var We=ee();Xi();Lt();lc();de();var wd=Cd(),NA=wd.publicKeyValidator,DA=wd.privateKeyValidator;typeof xd=="undefined"&&(xd=We.jsbn.BigInteger);var xd,pc=We.util.ByteBuffer,xt=typeof Buffer=="undefined"?Uint8Array:Buffer;We.pki=We.pki||{};Dd.exports=We.pki.ed25519=We.ed25519=We.ed25519||{};var se=We.ed25519;se.constants={};se.constants.PUBLIC_KEY_BYTE_LENGTH=32;se.constants.PRIVATE_KEY_BYTE_LENGTH=64;se.constants.SEED_BYTE_LENGTH=32;se.constants.SIGN_BYTE_LENGTH=64;se.constants.HASH_BYTE_LENGTH=64;se.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=We.random.getBytesSync(se.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==se.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+se.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Nr({message:t,encoding:"binary"});for(var r=new xt(se.constants.PUBLIC_KEY_BYTE_LENGTH),n=new xt(se.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return UA(r,n),{publicKey:r,privateKey:n}};se.privateKeyFromAsn1=function(e){var t={},r=[],n=We.asn1.validate(e,DA,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=We.asn1.derToOid(t.privateKeyOid),s=We.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.privateKey,c=Nr({message:We.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:c}};se.publicKeyFromAsn1=function(e){var t={},r=[],n=We.asn1.validate(e,NA,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=We.asn1.derToOid(t.publicKeyOid),s=We.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==se.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Nr({message:o,encoding:"binary"})};se.publicKeyFromPrivateKey=function(e){e=e||{};var t=Nr({message:e.privateKey,encoding:"binary"});if(t.length!==se.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+se.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new xt(se.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};se.sign=function(e){e=e||{};var t=Nr(e),r=Nr({message:e.privateKey,encoding:"binary"});if(r.length===se.constants.SEED_BYTE_LENGTH){var n=se.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==se.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+se.constants.SEED_BYTE_LENGTH+" or "+se.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new xt(se.constants.SIGN_BYTE_LENGTH+t.length);qA(i,t,t.length,r);for(var a=new xt(se.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};se.verify=function(e){e=e||{};var t=Nr(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Nr({message:e.signature,encoding:"binary"});if(r.length!==se.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+se.constants.SIGN_BYTE_LENGTH);var n=Nr({message:e.publicKey,encoding:"binary"});if(n.length!==se.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+se.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new xt(se.constants.SIGN_BYTE_LENGTH+t.length),a=new xt(se.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<se.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<t.length;++s)i[s+se.constants.SIGN_BYTE_LENGTH]=t[s];return MA(a,i,i.length,n)>=0};function Nr(e){var t=e.message;if(t instanceof Uint8Array||t instanceof xt)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer!="undefined")return Buffer.from(t,r);t=new pc(t,r)}else if(!(t instanceof pc))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new xt(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var vc=Y(),Os=Y([1]),PA=Y([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),LA=Y([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),bd=Y([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Td=Y([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),hc=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),kA=Y([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ra(e,t){var r=We.md.sha512.create(),n=new pc(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new xt(se.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function UA(e,t){var r=[Y(),Y(),Y(),Y()],n,i=ra(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Ec(r,i),mc(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function qA(e,t,r,n){var i,a,s=new Float64Array(64),o=[Y(),Y(),Y(),Y()],c=ra(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=c[32+i];var l=ra(e.subarray(32),r+32);for(yc(l),Ec(o,l),mc(e,o),i=32;i<64;++i)e[i]=n[i];var f=ra(e,r+64);for(yc(f),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=l[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=f[i]*c[a];return Id(e.subarray(32),s),u}function MA(e,t,r,n){var i,a,s=new xt(32),o=[Y(),Y(),Y(),Y()],c=[Y(),Y(),Y(),Y()];if(a=-1,r<64||FA(c,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var u=ra(e,r);if(yc(u),Rd(o,c,u),Ec(c,t.subarray(32)),gc(o,c),mc(s,o),r-=64,Bd(t,0,s,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return a=r,a}function Id(e,t){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)t[i]+=r-16*t[n]*hc[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*hc[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*hc[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function yc(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;Id(e,t)}function gc(e,t){var r=Y(),n=Y(),i=Y(),a=Y(),s=Y(),o=Y(),c=Y(),u=Y(),l=Y();di(r,e[1],e[0]),di(l,t[1],t[0]),Se(r,r,l),hi(n,e[0],e[1]),hi(l,t[0],t[1]),Se(n,n,l),Se(i,e[3],t[3]),Se(i,i,LA),Se(a,e[2],t[2]),hi(a,a,a),di(s,n,r),di(o,a,i),hi(c,a,i),hi(u,n,r),Se(e[0],s,o),Se(e[1],u,c),Se(e[2],c,o),Se(e[3],s,u)}function Ad(e,t,r){for(var n=0;n<4;++n)Nd(e[n],t[n],r)}function mc(e,t){var r=Y(),n=Y(),i=Y();jA(i,t[2]),Se(r,t[0],i),Se(n,t[1],i),Rs(e,n),e[31]^=Od(r)<<7}function Rs(e,t){var r,n,i,a=Y(),s=Y();for(r=0;r<16;++r)s[r]=t[r];for(dc(s),dc(s),dc(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,Nd(s,a,1-i)}for(r=0;r<16;r++)e[2*r]=s[r]&255,e[2*r+1]=s[r]>>8}function FA(e,t){var r=Y(),n=Y(),i=Y(),a=Y(),s=Y(),o=Y(),c=Y();return cn(e[2],Os),VA(e[1],t),qn(i,e[1]),Se(a,i,PA),di(i,i,e[2]),hi(a,e[2],a),qn(s,a),qn(o,s),Se(c,o,s),Se(r,c,i),Se(r,r,a),KA(r,r),Se(r,r,i),Se(r,r,a),Se(r,r,a),Se(e[0],r,a),qn(n,e[0]),Se(n,n,a),_d(n,i)&&Se(e[0],e[0],kA),qn(n,e[0]),Se(n,n,a),_d(n,i)?-1:(Od(e[0])===t[31]>>7&&di(e[0],vc,e[0]),Se(e[3],e[0],e[1]),0)}function VA(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function KA(e,t){var r=Y(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)qn(r,r),n!==1&&Se(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function _d(e,t){var r=new xt(32),n=new xt(32);return Rs(r,e),Rs(n,t),Bd(r,0,n,0)}function Bd(e,t,r,n){return HA(e,t,r,n,32)}function HA(e,t,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=e[t+a]^r[n+a];return(1&s-1>>>8)-1}function Od(e){var t=new xt(32);return Rs(t,e),t[0]&1}function Rd(e,t,r){var n,i;for(cn(e[0],vc),cn(e[1],Os),cn(e[2],Os),cn(e[3],vc),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,Ad(e,t,n),gc(t,e),gc(e,e),Ad(e,t,n)}function Ec(e,t){var r=[Y(),Y(),Y(),Y()];cn(r[0],bd),cn(r[1],Td),cn(r[2],Os),Se(r[3],bd,Td),Rd(e,r,t)}function cn(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function jA(e,t){var r=Y(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)qn(r,r),n!==2&&n!==4&&Se(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function dc(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function Nd(e,t,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(e[a]^t[a]),e[a]^=n,t[a]^=n}function Y(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function hi(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function di(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function qn(e,t){Se(e,t,t)}function Se(e,t,r){var n,i,a=0,s=0,o=0,c=0,u=0,l=0,f=0,h=0,p=0,d=0,m=0,E=0,x=0,_=0,w=0,R=0,O=0,B=0,V=0,K=0,W=0,Z=0,re=0,le=0,ye=0,Re=0,ne=0,ve=0,H=0,Dt=0,Pt=0,Ee=r[0],Ae=r[1],Q=r[2],Ze=r[3],et=r[4],tt=r[5],rt=r[6],nt=r[7],it=r[8],at=r[9],st=r[10],ot=r[11],ut=r[12],ct=r[13],lt=r[14],ft=r[15];n=t[0],a+=n*Ee,s+=n*Ae,o+=n*Q,c+=n*Ze,u+=n*et,l+=n*tt,f+=n*rt,h+=n*nt,p+=n*it,d+=n*at,m+=n*st,E+=n*ot,x+=n*ut,_+=n*ct,w+=n*lt,R+=n*ft,n=t[1],s+=n*Ee,o+=n*Ae,c+=n*Q,u+=n*Ze,l+=n*et,f+=n*tt,h+=n*rt,p+=n*nt,d+=n*it,m+=n*at,E+=n*st,x+=n*ot,_+=n*ut,w+=n*ct,R+=n*lt,O+=n*ft,n=t[2],o+=n*Ee,c+=n*Ae,u+=n*Q,l+=n*Ze,f+=n*et,h+=n*tt,p+=n*rt,d+=n*nt,m+=n*it,E+=n*at,x+=n*st,_+=n*ot,w+=n*ut,R+=n*ct,O+=n*lt,B+=n*ft,n=t[3],c+=n*Ee,u+=n*Ae,l+=n*Q,f+=n*Ze,h+=n*et,p+=n*tt,d+=n*rt,m+=n*nt,E+=n*it,x+=n*at,_+=n*st,w+=n*ot,R+=n*ut,O+=n*ct,B+=n*lt,V+=n*ft,n=t[4],u+=n*Ee,l+=n*Ae,f+=n*Q,h+=n*Ze,p+=n*et,d+=n*tt,m+=n*rt,E+=n*nt,x+=n*it,_+=n*at,w+=n*st,R+=n*ot,O+=n*ut,B+=n*ct,V+=n*lt,K+=n*ft,n=t[5],l+=n*Ee,f+=n*Ae,h+=n*Q,p+=n*Ze,d+=n*et,m+=n*tt,E+=n*rt,x+=n*nt,_+=n*it,w+=n*at,R+=n*st,O+=n*ot,B+=n*ut,V+=n*ct,K+=n*lt,W+=n*ft,n=t[6],f+=n*Ee,h+=n*Ae,p+=n*Q,d+=n*Ze,m+=n*et,E+=n*tt,x+=n*rt,_+=n*nt,w+=n*it,R+=n*at,O+=n*st,B+=n*ot,V+=n*ut,K+=n*ct,W+=n*lt,Z+=n*ft,n=t[7],h+=n*Ee,p+=n*Ae,d+=n*Q,m+=n*Ze,E+=n*et,x+=n*tt,_+=n*rt,w+=n*nt,R+=n*it,O+=n*at,B+=n*st,V+=n*ot,K+=n*ut,W+=n*ct,Z+=n*lt,re+=n*ft,n=t[8],p+=n*Ee,d+=n*Ae,m+=n*Q,E+=n*Ze,x+=n*et,_+=n*tt,w+=n*rt,R+=n*nt,O+=n*it,B+=n*at,V+=n*st,K+=n*ot,W+=n*ut,Z+=n*ct,re+=n*lt,le+=n*ft,n=t[9],d+=n*Ee,m+=n*Ae,E+=n*Q,x+=n*Ze,_+=n*et,w+=n*tt,R+=n*rt,O+=n*nt,B+=n*it,V+=n*at,K+=n*st,W+=n*ot,Z+=n*ut,re+=n*ct,le+=n*lt,ye+=n*ft,n=t[10],m+=n*Ee,E+=n*Ae,x+=n*Q,_+=n*Ze,w+=n*et,R+=n*tt,O+=n*rt,B+=n*nt,V+=n*it,K+=n*at,W+=n*st,Z+=n*ot,re+=n*ut,le+=n*ct,ye+=n*lt,Re+=n*ft,n=t[11],E+=n*Ee,x+=n*Ae,_+=n*Q,w+=n*Ze,R+=n*et,O+=n*tt,B+=n*rt,V+=n*nt,K+=n*it,W+=n*at,Z+=n*st,re+=n*ot,le+=n*ut,ye+=n*ct,Re+=n*lt,ne+=n*ft,n=t[12],x+=n*Ee,_+=n*Ae,w+=n*Q,R+=n*Ze,O+=n*et,B+=n*tt,V+=n*rt,K+=n*nt,W+=n*it,Z+=n*at,re+=n*st,le+=n*ot,ye+=n*ut,Re+=n*ct,ne+=n*lt,ve+=n*ft,n=t[13],_+=n*Ee,w+=n*Ae,R+=n*Q,O+=n*Ze,B+=n*et,V+=n*tt,K+=n*rt,W+=n*nt,Z+=n*it,re+=n*at,le+=n*st,ye+=n*ot,Re+=n*ut,ne+=n*ct,ve+=n*lt,H+=n*ft,n=t[14],w+=n*Ee,R+=n*Ae,O+=n*Q,B+=n*Ze,V+=n*et,K+=n*tt,W+=n*rt,Z+=n*nt,re+=n*it,le+=n*at,ye+=n*st,Re+=n*ot,ne+=n*ut,ve+=n*ct,H+=n*lt,Dt+=n*ft,n=t[15],R+=n*Ee,O+=n*Ae,B+=n*Q,V+=n*Ze,K+=n*et,W+=n*tt,Z+=n*rt,re+=n*nt,le+=n*it,ye+=n*at,Re+=n*st,ne+=n*ot,ve+=n*ut,H+=n*ct,Dt+=n*lt,Pt+=n*ft,a+=38*O,s+=38*B,o+=38*V,c+=38*K,u+=38*W,l+=38*Z,f+=38*re,h+=38*le,p+=38*ye,d+=38*Re,m+=38*ne,E+=38*ve,x+=38*H,_+=38*Dt,w+=38*Pt,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=R+i+65535,i=Math.floor(n/65536),R=n-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=s,e[2]=o,e[3]=c,e[4]=u,e[5]=l,e[6]=f,e[7]=h,e[8]=p,e[9]=d,e[10]=m,e[11]=E,e[12]=x,e[13]=_,e[14]=w,e[15]=R}});var qd=S((pL,Ud)=>{var wt=ee();de();Lt();Xi();Ud.exports=wt.kem=wt.kem||{};var Ld=wt.jsbn.BigInteger;wt.kem.rsa={};wt.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||wt.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),o;do o=new Ld(wt.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(o.compareTo(Ld.ONE)<=0);o=wt.util.hexToBytes(o.toString(16));var c=s-o.length;c>0&&(o=wt.util.fillString("\0",c)+o);var u=i.encrypt(o,"NONE"),l=e.generate(o,a);return{encapsulation:u,key:l}},n.decrypt=function(i,a,s){var o=i.decrypt(a,"NONE");return e.generate(o,s)},n};wt.kem.kdf1=function(e,t){kd(this,e,0,t||e.digestLength)};wt.kem.kdf2=function(e,t){kd(this,e,1,t||e.digestLength)};function kd(e,t,r,n){e.generate=function(i,a){for(var s=new wt.util.ByteBuffer,o=Math.ceil(a/n)+r,c=new wt.util.ByteBuffer,u=r;u<o;++u){c.putInt32(u),t.start(),t.update(i+c.getBytes());var l=t.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var Kd=S((vL,Vd)=>{var ce=ee();de();Vd.exports=ce.log=ce.log||{};ce.log.levels=["none","error","warning","info","debug","verbose","max"];var Ns={},xc=[],ia=null;ce.log.LEVEL_LOCKED=2;ce.log.NO_LEVEL_CHECK=4;ce.log.INTERPOLATE=8;for(pr=0;pr<ce.log.levels.length;++pr)Sc=ce.log.levels[pr],Ns[Sc]={index:pr,name:Sc.toUpperCase()};var Sc,pr;ce.log.logMessage=function(e){for(var t=Ns[e.level].index,r=0;r<xc.length;++r){var n=xc[r];if(n.flags&ce.log.NO_LEVEL_CHECK)n.f(e);else{var i=Ns[n.level].index;t<=i&&n.f(n,e)}}};ce.log.prepareStandard=function(e){"standard"in e||(e.standard=Ns[e.level].name+" ["+e.category+"] "+e.message)};ce.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=ce.util.format.apply(this,t)}};ce.log.prepareStandardFull=function(e){"standardFull"in e||(ce.log.prepareStandard(e),e.standardFull=e.standard)};for(Cc=["error","warning","info","debug","verbose"],pr=0;pr<Cc.length;++pr)(function(t){ce.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:r,message:n,arguments:i};ce.log.logMessage(a)}})(Cc[pr]);var Cc,pr;ce.log.makeLogger=function(e){var t={flags:0,f:e};return ce.log.setLevel(t,"none"),t};ce.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&ce.log.LEVEL_LOCKED))for(var n=0;n<ce.log.levels.length;++n){var i=ce.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};ce.log.lock=function(e,t){typeof t=="undefined"||t?e.flags|=ce.log.LEVEL_LOCKED:e.flags&=~ce.log.LEVEL_LOCKED};ce.log.addLogger=function(e){xc.push(e)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(Md={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},aa=function(e,t){ce.log.prepareStandard(t);var r=Md[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)},pi=ce.log.makeLogger(aa)):(aa=function(t,r){ce.log.prepareStandardFull(r),console.log(r.standardFull)},pi=ce.log.makeLogger(aa)),ce.log.setLevel(pi,"debug"),ce.log.addLogger(pi),ia=pi):console={log:function(){}};var pi,Md,aa;ia!==null&&typeof window!="undefined"&&window.location&&(na=new URL(window.location.href).searchParams,na.has("console.level")&&ce.log.setLevel(ia,na.get("console.level").slice(-1)[0]),na.has("console.lock")&&(Fd=na.get("console.lock").slice(-1)[0],Fd=="true"&&ce.log.lock(ia)));var na,Fd;ce.log.consoleLogger=ia});var jd=S((yL,Hd)=>{Hd.exports=sr();fs();oi();Lu();lc()});var zd=S((gL,Gd)=>{var k=ee();en();$t();Qi();tn();Rn();Qu();Lt();de();As();var b=k.asn1,gt=Gd.exports=k.pkcs7=k.pkcs7||{};gt.messageFromPem=function(e){var t=k.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=b.fromDer(t.body);return gt.messageFromAsn1(n)};gt.messageToPem=function(e,t){var r={type:"PKCS7",body:b.toDer(e.toAsn1()).getBytes()};return k.pem.encode(r,{maxline:t})};gt.messageFromAsn1=function(e){var t={},r=[];if(!b.validate(e,gt.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=b.derToOid(t.contentType),a;switch(i){case k.pki.oids.envelopedData:a=gt.createEnvelopedData();break;case k.pki.oids.encryptedData:a=gt.createEncryptedData();break;case k.pki.oids.signedData:a=gt.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};gt.createSignedData=function(){var e=null;return e={type:k.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Tc(e,n,gt.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(k.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(k.pki.certificateToAsn1(e.certificates[i]));var a=[],s=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&s.value[0].value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(b.create(b.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(b.create(b.Class.UNIVERSAL,b.Type.SET,!0,e.signerInfos)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=k.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=k.pki.privateKeyFromPem(o));var c=n.digestAlgorithm||k.pki.oids.sha1;switch(c){case k.pki.oids.sha1:case k.pki.oids.sha256:case k.pki.oids.sha384:case k.pki.oids.sha512:case k.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var l=!1,f=!1,h=0;h<u.length;++h){var p=u[h];if(!l&&p.type===k.pki.oids.contentType){if(l=!0,f)break;continue}if(!f&&p.type===k.pki.oids.messageDigest){if(f=!0,l)break;continue}}if(!l||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:a,digestAlgorithm:c,signatureAlgorithm:k.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(k.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof k.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=k.util.encodeUtf8(e.content)),n.detached?e.detachedContent=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=k.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var a=e.signers[i],s=a.digestAlgorithm;s in n||(n[s]=k.md[k.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=k.md[k.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in n)e.digestAlgorithmIdentifiers.push(b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(s).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=b.derToOid(e.contentInfo.value[0].value),s=b.toDer(i);s.getByte(),b.getBerValueLength(s),s=s.getBytes();for(var o in n)n[o].start().update(s);for(var c=new Date,u=0;u<e.signers.length;++u){var l=e.signers[u];if(l.authenticatedAttributes.length===0){if(a!==k.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[]),h=0;h<l.authenticatedAttributes.length;++h){var p=l.authenticatedAttributes[h];p.type===k.pki.oids.messageDigest?p.value=n[l.digestAlgorithm].digest():p.type===k.pki.oids.signingTime&&(p.value||(p.value=c)),f.value.push(bc(p)),l.authenticatedAttributesAsn1.value.push(bc(p))}s=b.toDer(f).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=YA(e.signers)}};gt.createEncryptedData=function(){var e=null;return e={type:k.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:k.pki.oids["aes256-CBC"]},fromAsn1:function(t){Tc(e,t,gt.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),$d(e)}},e};gt.createEnvelopedData=function(){var e=null;return e={type:k.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:k.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Tc(e,t,gt.asn1.envelopedDataValidator);e.recipients=zA(r.recipientInfos.value)},toAsn1:function(){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.type).getBytes()),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,WA(e.recipients)),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,XA(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===r.length){for(var s=!0,o=0;o<r.length;++o)if(a[o].type!==r[o].type||a[o].value!==r[o].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case k.pki.oids.rsaEncryption:case k.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=k.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}$d(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:k.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,a;switch(r){case k.pki.oids["aes128-CBC"]:n=16,i=16,a=k.aes.createEncryptionCipher;break;case k.pki.oids["aes192-CBC"]:n=24,i=16,a=k.aes.createEncryptionCipher;break;case k.pki.oids["aes256-CBC"]:n=32,i=16,a=k.aes.createEncryptionCipher;break;case k.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=k.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=k.util.createBuffer(k.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=k.util.createBuffer(k.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var c=e.recipients[o];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case k.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}},e};function $A(e){var t={},r=[];if(!b.validate(e,gt.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:k.pki.RDNAttributesAsArray(t.issuer),serialNumber:k.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:b.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function GA(e){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[k.pki.distinguishedNameToAsn1({attributes:e.issuer}),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,k.util.hexToBytes(e.serialNumber))]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.encryptedContent.algorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function zA(e){for(var t=[],r=0;r<e.length;++r)t.push($A(e[r]));return t}function WA(e){for(var t=[],r=0;r<e.length;++r)t.push(GA(e[r]));return t}function QA(e){var t=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(e.version).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[k.pki.distinguishedNameToAsn1({attributes:e.issuer}),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,k.util.hexToBytes(e.serialNumber))]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.digestAlgorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.signatureAlgorithm).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])),t.value.push(b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=b.create(b.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(bc(i))}t.value.push(r)}return t}function YA(e){for(var t=[],r=0;r<e.length;++r)t.push(QA(e[r]));return t}function bc(e){var t;if(e.type===k.pki.oids.contentType)t=b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.value).getBytes());else if(e.type===k.pki.oids.messageDigest)t=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===k.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=b.utcTimeToDate(i):i=b.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?t=b.create(b.Class.UNIVERSAL,b.Type.UTCTIME,!1,b.dateToUtcTime(i)):t=b.create(b.Class.UNIVERSAL,b.Type.GENERALIZEDTIME,!1,b.dateToGeneralizedTime(i))}return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.type).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SET,!0,[t])])}function XA(e){return[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(k.pki.oids.data).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(e.algorithm).getBytes()),e.parameter?b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),b.create(b.Class.CONTEXT_SPECIFIC,0,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Tc(e,t,r){var n={},i=[];if(!b.validate(t,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=b.derToOid(n.contentType);if(s!==k.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(k.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==b.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[c].value}else o=n.encryptedContent;e.encryptedContent={algorithm:b.derToOid(n.encAlgorithm),parameter:k.util.createBuffer(n.encParameter.value),content:k.util.createBuffer(o)}}if(n.content){var o="";if(k.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==b.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[c].value}else o=n.content;e.content=k.util.createBuffer(o)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function $d(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case k.pki.oids["aes128-CBC"]:case k.pki.oids["aes192-CBC"]:case k.pki.oids["aes256-CBC"]:t=k.aes.createDecryptionCipher(e.encryptedContent.key);break;case k.pki.oids.desCBC:case k.pki.oids["des-EDE3-CBC"]:t=k.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var Qd=S((mL,Wd)=>{var De=ee();en();ni();fs();oi();de();var Ps=Wd.exports=De.ssh=De.ssh||{};Ps.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=De.util.createBuffer();vi(s,n),vr(s,e.e),vr(s,e.n);var o=De.util.encode64(s.bytes(),64),c=Math.floor(o.length/66)+1;a+="Public-Lines: "+c+`\r
`,a+=o;var u=De.util.createBuffer();vr(u,e.d),vr(u,e.p),vr(u,e.q),vr(u,e.qInv);var l;if(!t)l=De.util.encode64(u.bytes(),64);else{var f=u.length()+16-1;f-=f%16;var h=Ds(u.bytes());h.truncate(h.length()-f+u.length()),u.putBuffer(h);var p=De.util.createBuffer();p.putBuffer(Ds("\0\0\0\0",t)),p.putBuffer(Ds("\0\0\0",t));var d=De.aes.createEncryptionCipher(p.truncate(8),"CBC");d.start(De.util.createBuffer().fillWithByte(0,16)),d.update(u.copy()),d.finish();var m=d.output;m.truncate(16),l=De.util.encode64(m.bytes(),64)}c=Math.floor(l.length/66)+1,a+=`\r
Private-Lines: `+c+`\r
`,a+=l;var E=Ds("putty-private-key-file-mac-key",t),x=De.util.createBuffer();vi(x,n),vi(x,i),vi(x,r),x.putInt32(s.length()),x.putBuffer(s),x.putInt32(u.length()),x.putBuffer(u);var _=De.hmac.create();return _.start("sha1",E),_.update(x.bytes()),a+=`\r
Private-MAC: `+_.digest().toHex()+`\r
`,a};Ps.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=De.util.createBuffer();return vi(n,r),vr(n,e.e),vr(n,e.n),r+" "+De.util.encode64(n.bytes())+" "+t};Ps.privateKeyToOpenSSH=function(e,t){return t?De.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):De.pki.privateKeyToPem(e)};Ps.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||De.md.md5.create(),n="ssh-rsa",i=De.util.createBuffer();vi(i,n),vr(i,e.e),vr(i,e.n),r.start(),r.update(i.getBytes());var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function vr(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=De.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function vi(e,t){e.putInt32(t.length),e.putString(t)}function Ds(){for(var e=De.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var Ac=S((EL,Yd)=>{Yd.exports=ee();en();yd();$t();is();Qi();Pd();ni();qd();Kd();jd();Yu();vs();Rn();ju();Zu();zd();tc();Gu();ku();xs();Lt();Mu();Qd();oc();de()});var Le=S((SL,tp)=>{var _c=Object.defineProperty,JA=Object.getOwnPropertyDescriptor,ZA=Object.getOwnPropertyNames,e_=Object.prototype.hasOwnProperty,t_=(e,t)=>{for(var r in t)_c(e,r,{get:t[r],enumerable:!0})},r_=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ZA(t))!e_.call(e,i)&&i!==r&&_c(e,i,{get:()=>t[i],enumerable:!(n=JA(t,i))||n.enumerable});return e},n_=e=>r_(_c({},"__esModule",{value:!0}),e),Xd={};t_(Xd,{DeviceType:()=>Jd,HostAddressFamily:()=>Zd,TriggerState:()=>ep});tp.exports=n_(Xd);var Jd=(e=>(e.Contact="Contact",e.Dimmer="Dimmer",e.Fan="Fan",e.Humidity="Humidity",e.Keypad="Keypad",e.Occupancy="Occupancy",e.Remote="Remote",e.Shade="Shade",e.Strip="Strip",e.Switch="Switch",e.Timeclock="Timeclock",e.Thermostat="Thermostat",e.Temperature="Temperature",e.Unknown="Unknown",e))(Jd||{}),Zd=(e=>(e[e.IPv4=4]="IPv4",e[e.IPv6=6]="IPv6",e))(Zd||{}),ep=(e=>(e[e.Idle=0]="Idle",e[e.Down=1]="Down",e[e.Up=2]="Up",e))(ep||{})});function sa(){return Ls>ks.length-16&&(rp.default.randomFillSync(ks),Ls=0),ks.slice(Ls,Ls+=16)}var rp,ks,Ls,wc=ht(()=>{rp=Ir(require("crypto")),ks=new Uint8Array(256),Ls=ks.length});var np,ip=ht(()=>{np=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function i_(e){return typeof e=="string"&&np.test(e)}var ln,oa=ht(()=>{ip();ln=i_});function Mn(e,t=0){return Qe[e[t+0]]+Qe[e[t+1]]+Qe[e[t+2]]+Qe[e[t+3]]+"-"+Qe[e[t+4]]+Qe[e[t+5]]+"-"+Qe[e[t+6]]+Qe[e[t+7]]+"-"+Qe[e[t+8]]+Qe[e[t+9]]+"-"+Qe[e[t+10]]+Qe[e[t+11]]+Qe[e[t+12]]+Qe[e[t+13]]+Qe[e[t+14]]+Qe[e[t+15]]}function a_(e,t=0){let r=Mn(e,t);if(!ln(r))throw TypeError("Stringified UUID is invalid");return r}var Qe,ap,ua=ht(()=>{oa();Qe=[];for(let e=0;e<256;++e)Qe.push((e+256).toString(16).slice(1));ap=a_});function s_(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let a=e.node||sp,s=e.clockseq!==void 0?e.clockseq:Ic;if(a==null||s==null){let h=e.random||(e.rng||sa)();a==null&&(a=sp=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),s==null&&(s=Ic=(h[6]<<8|h[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Oc+1,u=o-Bc+(c-Oc)/1e4;if(u<0&&e.clockseq===void 0&&(s=s+1&16383),(u<0||o>Bc)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Bc=o,Oc=c,Ic=s,o+=122192928e5;let l=((o&268435455)*1e4+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;let f=o/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let h=0;h<6;++h)i[n+h]=a[h];return t||Mn(i)}var sp,Ic,Bc,Oc,op,up=ht(()=>{wc();ua();Bc=0,Oc=0;op=s_});function o_(e){if(!ln(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Us,Rc=ht(()=>{oa();Us=o_});function u_(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function ca(e,t,r){function n(i,a,s,o){var c;if(typeof i=="string"&&(i=u_(i)),typeof a=="string"&&(a=Us(a)),((c=a)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(a),u.set(i,a.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,s){o=o||0;for(let l=0;l<16;++l)s[o+l]=u[l];return s}return Mn(u)}try{n.name=e}catch(i){}return n.DNS=c_,n.URL=l_,n}var c_,l_,Nc=ht(()=>{ua();Rc();c_="6ba7b810-9dad-11d1-80b4-00c04fd430c8",l_="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function f_(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),cp.default.createHash("md5").update(e).digest()}var cp,lp,fp=ht(()=>{cp=Ir(require("crypto"));lp=f_});var h_,hp,dp=ht(()=>{Nc();fp();h_=ca("v3",48,lp),hp=h_});var pp,Dc,vp=ht(()=>{pp=Ir(require("crypto")),Dc={randomUUID:pp.default.randomUUID}});function d_(e,t,r){if(Dc.randomUUID&&!t&&!e)return Dc.randomUUID();e=e||{};let n=e.random||(e.rng||sa)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return Mn(n)}var yp,gp=ht(()=>{vp();wc();ua();yp=d_});function p_(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),mp.default.createHash("sha1").update(e).digest()}var mp,Ep,Sp=ht(()=>{mp=Ir(require("crypto"));Ep=p_});var v_,Cp,xp=ht(()=>{Nc();Sp();v_=ca("v5",80,Ep),Cp=v_});var bp,Tp=ht(()=>{bp="00000000-0000-0000-0000-000000000000"});function y_(e){if(!ln(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var Ap,_p=ht(()=>{oa();Ap=y_});var wp={};p2(wp,{NIL:()=>bp,parse:()=>Us,stringify:()=>ap,v1:()=>op,v3:()=>hp,v4:()=>yp,v5:()=>Cp,validate:()=>ln,version:()=>Ap});var Ip=ht(()=>{up();dp();gp();xp();Tp();_p();oa();ua();Rc()});var yi=S((Bp,qs)=>{(function(e){"use strict";var t={};t.VERSION="1.6.1";var r,n={},i=function(u,l){return function(){return l.apply(u,arguments)}},a=function(){var u=arguments,l=u[0],f,h;for(h=1;h<u.length;h++)for(f in u[h])!(f in l)&&u[h].hasOwnProperty(f)&&(l[f]=u[h][f]);return l},s=function(u,l){return{value:u,name:l}};t.TRACE=s(1,"TRACE"),t.DEBUG=s(2,"DEBUG"),t.INFO=s(3,"INFO"),t.TIME=s(4,"TIME"),t.WARN=s(5,"WARN"),t.ERROR=s(8,"ERROR"),t.OFF=s(99,"OFF");var o=function(u){this.context=u,this.setLevel(u.filterLevel),this.log=this.info};o.prototype={setLevel:function(u){u&&"value"in u&&(this.context.filterLevel=u)},getLevel:function(){return this.context.filterLevel},enabledFor:function(u){var l=this.context.filterLevel;return u.value>=l.value},trace:function(){this.invoke(t.TRACE,arguments)},debug:function(){this.invoke(t.DEBUG,arguments)},info:function(){this.invoke(t.INFO,arguments)},warn:function(){this.invoke(t.WARN,arguments)},error:function(){this.invoke(t.ERROR,arguments)},time:function(u){typeof u=="string"&&u.length>0&&this.invoke(t.TIME,[u,"start"])},timeEnd:function(u){typeof u=="string"&&u.length>0&&this.invoke(t.TIME,[u,"end"])},invoke:function(u,l){r&&this.enabledFor(u)&&r(l,a({level:u},this.context))}};var c=new o({filterLevel:t.OFF});(function(){var u=t;u.enabledFor=i(c,c.enabledFor),u.trace=i(c,c.trace),u.debug=i(c,c.debug),u.time=i(c,c.time),u.timeEnd=i(c,c.timeEnd),u.info=i(c,c.info),u.warn=i(c,c.warn),u.error=i(c,c.error),u.log=u.info})(),t.setHandler=function(u){r=u},t.setLevel=function(u){c.setLevel(u);for(var l in n)n.hasOwnProperty(l)&&n[l].setLevel(u)},t.getLevel=function(){return c.getLevel()},t.get=function(u){return n[u]||(n[u]=new o(a({name:u},c.context)))},t.createDefaultHandler=function(u){u=u||{},u.formatter=u.formatter||function(p,d){d.name&&p.unshift("["+d.name+"]")};var l={},f=function(h,p){Function.prototype.apply.call(h,console,p)};return typeof console=="undefined"?function(){}:function(h,p){h=Array.prototype.slice.call(h);var d=console.log,m;p.level===t.TIME?(m=(p.name?"["+p.name+"] ":"")+h[0],h[1]==="start"?console.time?console.time(m):l[m]=new Date().getTime():console.timeEnd?console.timeEnd(m):f(d,[m+": "+(new Date().getTime()-l[m])+"ms"])):(p.level===t.WARN&&console.warn?d=console.warn:p.level===t.ERROR&&console.error?d=console.error:p.level===t.INFO&&console.info?d=console.info:p.level===t.DEBUG&&console.debug?d=console.debug:p.level===t.TRACE&&console.trace&&(d=console.trace),u.formatter(h,p),f(d,h))}},t.useDefaults=function(u){t.setLevel(u&&u.defaultLevel||t.DEBUG),t.setHandler(t.createDefaultHandler(u))},t.setDefaults=t.useDefaults,typeof define=="function"&&define.amd?define(t):typeof qs!="undefined"&&qs.exports?qs.exports=t:(t._prevLogger=e.Logger,t.noConflict=function(){return e.Logger=t._prevLogger,t},e.Logger=t)})(Bp)});var fn=S((s8,Pp)=>{var g_=Object.create,Ms=Object.defineProperty,m_=Object.getOwnPropertyDescriptor,E_=Object.getOwnPropertyNames,S_=Object.getPrototypeOf,C_=Object.prototype.hasOwnProperty,x_=(e,t)=>{for(var r in t)Ms(e,r,{get:t[r],enumerable:!0})},Rp=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of E_(t))!C_.call(e,i)&&i!==r&&Ms(e,i,{get:()=>t[i],enumerable:!(n=m_(t,i))||n.enumerable});return e},b_=(e,t,r)=>(r=e!=null?g_(S_(e)):{},Rp(t||!e||!e.__esModule?Ms(r,"default",{value:e,enumerable:!0}):r,e)),T_=e=>Rp(Ms({},"__esModule",{value:!0}),e),Np={};x_(Np,{EventEmitter:()=>Dp,default:()=>__});Pp.exports=T_(Np);var A_=b_(yi()),Op=A_.get("EventEmitter"),Dp=class{constructor(e){this.handlers={},this.maxListeners=e||10}on(e,t,r){return this.handlers[e]==null&&(this.handlers[e]=[]),this.handlers[e].length>=this.maxListeners&&Op.warn(`exceeded maximum (${this.maxListeners}) number of listeners`),r?this.handlers[e].unshift({listener:t,persistent:!0}):this.handlers[e].push({listener:t,persistent:!0}),this}once(e,t,r){return this.handlers[e]==null&&(this.handlers[e]=[]),r?this.handlers[e].unshift({listener:t,persistent:!1}):this.handlers[e].push({listener:t,persistent:!1}),this}off(e,t){let r=this.events().filter(n=>e==null?!0:n===e);for(let n=0;n<r.length;n++){if(t==null||this.handlers[r[n]].length===0){delete this.handlers[r[n]];continue}let i=this.handlers[r[n]].findIndex(a=>a.listener===t);if(i>=0)return this.handlers[r[n]].splice(i,1),this.handlers[r[n]].length===0&&delete this.handlers[r[n]],this}return this}emit(e,...t){if(this.handlers[e]==null||this.handlers[e].length===0)return!1;for(let r=0;r<this.handlers[e].length;r++)try{this.handlers[e][r].listener(...t)}catch(n){Op.error(n)}return this.handlers[e]=this.handlers[e].filter(r=>r.persistent),this.handlers[e].length===0&&delete this.handlers[e],!0}listeners(e){return[...this.handlers[e]||[]].map(t=>t.listener)}events(){return Object.keys(this.handlers)}},__=Dp});var Pc=S((u8,kp)=>{"use strict";var Lp=Object.prototype.toString;kp.exports=function(t){var r=Lp.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Lp.call(t.callee)==="[object Function]"),n}});var $p=S((c8,jp)=>{"use strict";var Hp;Object.keys||(la=Object.prototype.hasOwnProperty,Lc=Object.prototype.toString,Up=Pc(),kc=Object.prototype.propertyIsEnumerable,qp=!kc.call({toString:null},"toString"),Mp=kc.call(function(){},"prototype"),fa=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Fs=function(e){var t=e.constructor;return t&&t.prototype===e},Fp={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Vp=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!Fp["$"+e]&&la.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{Fs(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),Kp=function(e){if(typeof window=="undefined"||!Vp)return Fs(e);try{return Fs(e)}catch(t){return!1}},Hp=function(t){var r=t!==null&&typeof t=="object",n=Lc.call(t)==="[object Function]",i=Up(t),a=r&&Lc.call(t)==="[object String]",s=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var o=Mp&&n;if(a&&t.length>0&&!la.call(t,0))for(var c=0;c<t.length;++c)s.push(String(c));if(i&&t.length>0)for(var u=0;u<t.length;++u)s.push(String(u));else for(var l in t)!(o&&l==="prototype")&&la.call(t,l)&&s.push(String(l));if(qp)for(var f=Kp(t),h=0;h<fa.length;++h)!(f&&fa[h]==="constructor")&&la.call(t,fa[h])&&s.push(fa[h]);return s});var la,Lc,Up,kc,qp,Mp,fa,Fs,Fp,Vp,Kp;jp.exports=Hp});var Ks=S((l8,Wp)=>{"use strict";var w_=Array.prototype.slice,I_=Pc(),Gp=Object.keys,Vs=Gp?function(t){return Gp(t)}:$p(),zp=Object.keys;Vs.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return I_(n)?zp(w_.call(n)):zp(n)})}else Object.keys=Vs;return Object.keys||Vs};Wp.exports=Vs});var ha=S((f8,Qp)=>{"use strict";var Hs=Object.defineProperty||!1;if(Hs)try{Hs({},"a",{value:1})}catch(e){Hs=!1}Qp.exports=Hs});var Uc=S((h8,Yp)=>{"use strict";Yp.exports=SyntaxError});var Vt=S((d8,Xp)=>{"use strict";Xp.exports=TypeError});var Zp=S((p8,Jp)=>{"use strict";Jp.exports=Object.getOwnPropertyDescriptor});var hn=S((v8,ev)=>{"use strict";var js=Zp();if(js)try{js([],"length")}catch(e){js=null}ev.exports=js});var $s=S((y8,nv)=>{"use strict";var tv=ha(),B_=Uc(),gi=Vt(),rv=hn();nv.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new gi("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new gi("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new gi("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new gi("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new gi("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new gi("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,c=!!rv&&rv(t,r);if(tv)tv(t,r,{configurable:s===null&&c?c.configurable:!s,enumerable:i===null&&c?c.enumerable:!i,value:n,writable:a===null&&c?c.writable:!a});else if(o||!i&&!a&&!s)t[r]=n;else throw new B_("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Gs=S((g8,av)=>{"use strict";var qc=ha(),iv=function(){return!!qc};iv.hasArrayLengthDefineBug=function(){if(!qc)return null;try{return qc([],"length",{value:1}).length!==1}catch(t){return!0}};av.exports=iv});var dn=S((m8,cv)=>{"use strict";var O_=Ks(),R_=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",N_=Object.prototype.toString,D_=Array.prototype.concat,sv=$s(),P_=function(e){return typeof e=="function"&&N_.call(e)==="[object Function]"},ov=Gs()(),L_=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!P_(n)||!n())return}ov?sv(e,t,r,!0):sv(e,t,r)},uv=function(e,t){var r=arguments.length>2?arguments[2]:{},n=O_(t);R_&&(n=D_.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)L_(e,n[i],t[n[i]],r[n[i]])};uv.supportsDescriptors=!!ov;cv.exports=uv});var zs=S((E8,lv)=>{"use strict";lv.exports=Object});var Mc=S((S8,fv)=>{"use strict";fv.exports=Error});var dv=S((C8,hv)=>{"use strict";hv.exports=EvalError});var vv=S((x8,pv)=>{"use strict";pv.exports=RangeError});var gv=S((b8,yv)=>{"use strict";yv.exports=ReferenceError});var Ev=S((T8,mv)=>{"use strict";mv.exports=URIError});var Cv=S((A8,Sv)=>{"use strict";Sv.exports=Math.abs});var bv=S((_8,xv)=>{"use strict";xv.exports=Math.floor});var Av=S((w8,Tv)=>{"use strict";Tv.exports=Math.max});var wv=S((I8,_v)=>{"use strict";_v.exports=Math.min});var Bv=S((B8,Iv)=>{"use strict";Iv.exports=Math.pow});var Rv=S((O8,Ov)=>{"use strict";Ov.exports=Math.round});var Dv=S((R8,Nv)=>{"use strict";Nv.exports=Number.isNaN||function(t){return t!==t}});var Lv=S((N8,Pv)=>{"use strict";var k_=Dv();Pv.exports=function(t){return k_(t)||t===0?t:t<0?-1:1}});var Ws=S((D8,kv)=>{"use strict";kv.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var a in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var s=Object.getOwnPropertySymbols(t);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0}});var Fc=S((P8,qv)=>{"use strict";var Uv=typeof Symbol!="undefined"&&Symbol,U_=Ws();qv.exports=function(){return typeof Uv!="function"||typeof Symbol!="function"||typeof Uv("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:U_()}});var Vc=S((L8,Mv)=>{"use strict";Mv.exports=typeof Reflect!="undefined"&&Reflect.getPrototypeOf||null});var Kc=S((k8,Fv)=>{"use strict";var q_=zs();Fv.exports=q_.getPrototypeOf||null});var Hv=S((U8,Kv)=>{"use strict";var M_="Function.prototype.bind called on incompatible ",F_=Object.prototype.toString,V_=Math.max,K_="[object Function]",Vv=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var a=0;a<r.length;a+=1)n[a+t.length]=r[a];return n},H_=function(t,r){for(var n=[],i=r||0,a=0;i<t.length;i+=1,a+=1)n[a]=t[i];return n},j_=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};Kv.exports=function(t){var r=this;if(typeof r!="function"||F_.apply(r)!==K_)throw new TypeError(M_+r);for(var n=H_(arguments,1),i,a=function(){if(this instanceof i){var l=r.apply(this,Vv(n,arguments));return Object(l)===l?l:this}return r.apply(t,Vv(n,arguments))},s=V_(0,r.length-n.length),o=[],c=0;c<s;c++)o[c]="$"+c;if(i=Function("binder","return function ("+j_(o,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}});var mi=S((q8,jv)=>{"use strict";var $_=Hv();jv.exports=Function.prototype.bind||$_});var Qs=S((M8,$v)=>{"use strict";$v.exports=Function.prototype.call});var Ys=S((F8,Gv)=>{"use strict";Gv.exports=Function.prototype.apply});var Wv=S((V8,zv)=>{"use strict";zv.exports=typeof Reflect!="undefined"&&Reflect&&Reflect.apply});var Hc=S((K8,Qv)=>{"use strict";var G_=mi(),z_=Ys(),W_=Qs(),Q_=Wv();Qv.exports=Q_||G_.call(W_,z_)});var Xs=S((H8,Yv)=>{"use strict";var Y_=mi(),X_=Vt(),J_=Qs(),Z_=Hc();Yv.exports=function(t){if(t.length<1||typeof t[0]!="function")throw new X_("a function is required");return Z_(Y_,J_,t)}});var ry=S((j8,ty)=>{"use strict";var ew=Xs(),Xv=hn(),Zv;try{Zv=[].__proto__===Array.prototype}catch(e){if(!e||typeof e!="object"||!("code"in e)||e.code!=="ERR_PROTO_ACCESS")throw e}var jc=!!Zv&&Xv&&Xv(Object.prototype,"__proto__"),ey=Object,Jv=ey.getPrototypeOf;ty.exports=jc&&typeof jc.get=="function"?ew([jc.get]):typeof Jv=="function"?function(t){return Jv(t==null?t:ey(t))}:!1});var Js=S(($8,sy)=>{"use strict";var ny=Vc(),iy=Kc(),ay=ry();sy.exports=ny?function(t){return ny(t)}:iy?function(t){if(!t||typeof t!="object"&&typeof t!="function")throw new TypeError("getProto: not an object");return iy(t)}:ay?function(t){return ay(t)}:null});var $c=S((G8,oy)=>{"use strict";var tw=Function.prototype.call,rw=Object.prototype.hasOwnProperty,nw=mi();oy.exports=nw.call(tw,rw)});var Dr=S((z8,dy)=>{"use strict";var oe,iw=zs(),aw=Mc(),sw=dv(),ow=vv(),uw=gv(),xi=Uc(),Ci=Vt(),cw=Ev(),lw=Cv(),fw=bv(),hw=Av(),dw=wv(),pw=Bv(),vw=Rv(),yw=Lv(),fy=Function,Gc=function(e){try{return fy('"use strict"; return ('+e+").constructor;")()}catch(t){}},da=hn(),gw=ha(),zc=function(){throw new Ci},mw=da?function(){try{return arguments.callee,zc}catch(e){try{return da(arguments,"callee").get}catch(t){return zc}}}():zc,Ei=Fc()(),Ve=Js(),Ew=Kc(),Sw=Vc(),hy=Ys(),pa=Qs(),Si={},Cw=typeof Uint8Array=="undefined"||!Ve?oe:Ve(Uint8Array),Fn={__proto__:null,"%AggregateError%":typeof AggregateError=="undefined"?oe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?oe:ArrayBuffer,"%ArrayIteratorPrototype%":Ei&&Ve?Ve([][Symbol.iterator]()):oe,"%AsyncFromSyncIteratorPrototype%":oe,"%AsyncFunction%":Si,"%AsyncGenerator%":Si,"%AsyncGeneratorFunction%":Si,"%AsyncIteratorPrototype%":Si,"%Atomics%":typeof Atomics=="undefined"?oe:Atomics,"%BigInt%":typeof BigInt=="undefined"?oe:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?oe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?oe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?oe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":aw,"%eval%":eval,"%EvalError%":sw,"%Float16Array%":typeof Float16Array=="undefined"?oe:Float16Array,"%Float32Array%":typeof Float32Array=="undefined"?oe:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?oe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?oe:FinalizationRegistry,"%Function%":fy,"%GeneratorFunction%":Si,"%Int8Array%":typeof Int8Array=="undefined"?oe:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?oe:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?oe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ei&&Ve?Ve(Ve([][Symbol.iterator]())):oe,"%JSON%":typeof JSON=="object"?JSON:oe,"%Map%":typeof Map=="undefined"?oe:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Ei||!Ve?oe:Ve(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":iw,"%Object.getOwnPropertyDescriptor%":da,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?oe:Promise,"%Proxy%":typeof Proxy=="undefined"?oe:Proxy,"%RangeError%":ow,"%ReferenceError%":uw,"%Reflect%":typeof Reflect=="undefined"?oe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?oe:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Ei||!Ve?oe:Ve(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?oe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ei&&Ve?Ve(""[Symbol.iterator]()):oe,"%Symbol%":Ei?Symbol:oe,"%SyntaxError%":xi,"%ThrowTypeError%":mw,"%TypedArray%":Cw,"%TypeError%":Ci,"%Uint8Array%":typeof Uint8Array=="undefined"?oe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?oe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?oe:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?oe:Uint32Array,"%URIError%":cw,"%WeakMap%":typeof WeakMap=="undefined"?oe:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?oe:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?oe:WeakSet,"%Function.prototype.call%":pa,"%Function.prototype.apply%":hy,"%Object.defineProperty%":gw,"%Object.getPrototypeOf%":Ew,"%Math.abs%":lw,"%Math.floor%":fw,"%Math.max%":hw,"%Math.min%":dw,"%Math.pow%":pw,"%Math.round%":vw,"%Math.sign%":yw,"%Reflect.getPrototypeOf%":Sw};if(Ve)try{null.error}catch(e){uy=Ve(Ve(e)),Fn["%Error.prototype%"]=uy}var uy,xw=function e(t){var r;if(t==="%AsyncFunction%")r=Gc("async function () {}");else if(t==="%GeneratorFunction%")r=Gc("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Gc("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ve&&(r=Ve(i.prototype))}return Fn[t]=r,r},cy={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},va=mi(),Zs=$c(),bw=va.call(pa,Array.prototype.concat),Tw=va.call(hy,Array.prototype.splice),ly=va.call(pa,String.prototype.replace),eo=va.call(pa,String.prototype.slice),Aw=va.call(pa,RegExp.prototype.exec),_w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ww=/\\(\\)?/g,Iw=function(t){var r=eo(t,0,1),n=eo(t,-1);if(r==="%"&&n!=="%")throw new xi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new xi("invalid intrinsic syntax, expected opening `%`");var i=[];return ly(t,_w,function(a,s,o,c){i[i.length]=o?ly(c,ww,"$1"):s||a}),i},Bw=function(t,r){var n=t,i;if(Zs(cy,n)&&(i=cy[n],n="%"+i[0]+"%"),Zs(Fn,n)){var a=Fn[n];if(a===Si&&(a=xw(n)),typeof a=="undefined"&&!r)throw new Ci("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new xi("intrinsic "+t+" does not exist!")};dy.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Ci("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ci('"allowMissing" argument must be a boolean');if(Aw(/^%?[^%]*%?$/,t)===null)throw new xi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Iw(t),i=n.length>0?n[0]:"",a=Bw("%"+i+"%",r),s=a.name,o=a.value,c=!1,u=a.alias;u&&(i=u[0],Tw(n,bw([0,1],u)));for(var l=1,f=!0;l<n.length;l+=1){var h=n[l],p=eo(h,0,1),d=eo(h,-1);if((p==='"'||p==="'"||p==="`"||d==='"'||d==="'"||d==="`")&&p!==d)throw new xi("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),i+="."+h,s="%"+i+"%",Zs(Fn,s))o=Fn[s];else if(o!=null){if(!(h in o)){if(!r)throw new Ci("base intrinsic for "+t+" exists, but the property is not available.");return}if(da&&l+1>=n.length){var m=da(o,h);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?o=m.get:o=o[h]}else f=Zs(o,h),o=o[h];f&&!c&&(Fn[s]=o)}}return o}});var my=S((W8,gy)=>{"use strict";var Ow=Dr(),py=$s(),Rw=Gs()(),vy=hn(),yy=Vt(),Nw=Ow("%Math.floor%");gy.exports=function(t,r){if(typeof t!="function")throw new yy("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Nw(r)!==r)throw new yy("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in t&&vy){var s=vy(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(a=!1)}return(i||a||!n)&&(Rw?py(t,"length",r,!0,!0):py(t,"length",r)),t}});var Sy=S((Q8,Ey)=>{"use strict";var Dw=mi(),Pw=Ys(),Lw=Hc();Ey.exports=function(){return Lw(Dw,Pw,arguments)}});var Vn=S((Y8,to)=>{"use strict";var kw=my(),Cy=ha(),Uw=Xs(),xy=Sy();to.exports=function(t){var r=Uw(arguments),n=t.length-(arguments.length-1);return kw(r,1+(n>0?n:0),!0)};Cy?Cy(to.exports,"apply",{value:xy}):to.exports.apply=xy});var Ye=S((X8,Ay)=>{"use strict";var by=Dr(),Ty=Xs(),qw=Ty([by("%String.prototype.indexOf%")]);Ay.exports=function(t,r){var n=by(t,!!r);return typeof n=="function"&&qw(t,".prototype.")>-1?Ty([n]):n}});var Wc=S((J8,By)=>{"use strict";var Mw=Ks(),wy=Ws()(),Iy=Ye(),ro=zs(),Fw=Iy("Array.prototype.push"),_y=Iy("Object.prototype.propertyIsEnumerable"),Vw=wy?ro.getOwnPropertySymbols:null;By.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var n=ro(t);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var a=ro(arguments[i]),s=Mw(a),o=wy&&(ro.getOwnPropertySymbols||Vw);if(o)for(var c=o(a),u=0;u<c.length;++u){var l=c[u];_y(a,l)&&Fw(s,l)}for(var f=0;f<s.length;++f){var h=s[f];if(_y(a,h)){var p=a[h];n[h]=p}}}return n}});var Yc=S((Z8,Oy)=>{"use strict";var Qc=Wc(),Kw=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var i=Object.assign({},r),a="";for(var s in i)a+=s;return e!==a},Hw=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}return!1};Oy.exports=function(){return!Object.assign||Kw()||Hw()?Qc:Object.assign}});var Ny=S((e5,Ry)=>{"use strict";var jw=dn(),$w=Yc();Ry.exports=function(){var t=$w();return jw(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}});var ky=S((t5,Ly)=>{"use strict";var Gw=dn(),zw=Vn(),Ww=Wc(),Dy=Yc(),Qw=Ny(),Yw=zw.apply(Dy()),Py=function(t,r){return Yw(Object,arguments)};Gw(Py,{getPolyfill:Dy,implementation:Ww,shim:Qw});Ly.exports=Py});var Fy=S((r5,My)=>{"use strict";var Uy=Dr(),qy=Vn(),Xw=qy(Uy("String.prototype.indexOf"));My.exports=function(t,r){var n=Uy(t,!!r);return typeof n=="function"&&Xw(t,".prototype.")>-1?qy(n):n}});var Ky=S((n5,Vy)=>{"use strict";var ga=function(){return typeof function(){}.name=="string"},ya=Object.getOwnPropertyDescriptor;if(ya)try{ya([],"length")}catch(e){ya=null}ga.functionsHaveConfigurableNames=function(){if(!ga()||!ya)return!1;var t=ya(function(){},"name");return!!t&&!!t.configurable};var Jw=Function.prototype.bind;ga.boundFunctionsHaveNames=function(){return ga()&&typeof Jw=="function"&&function(){}.bind().name!==""};Vy.exports=ga});var $y=S((i5,jy)=>{"use strict";var Hy=$s(),Zw=Gs()(),eI=Ky().functionsHaveConfigurableNames(),tI=Vt();jy.exports=function(t,r){if(typeof t!="function")throw new tI("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||eI)&&(Zw?Hy(t,"name",r,!0,!0):Hy(t,"name",r)),t}});var Xc=S((a5,Gy)=>{"use strict";var rI=$y(),nI=Vt(),iI=Object;Gy.exports=rI(function(){if(this==null||this!==iI(this))throw new nI("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0)});var Jc=S((s5,zy)=>{"use strict";var aI=Xc(),sI=dn().supportsDescriptors,oI=Object.getOwnPropertyDescriptor;zy.exports=function(){if(sI&&/a/mig.flags==="gim"){var t=oI(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),t.get.call(n),r==="dy")return t.get}}return aI}});var Yy=S((o5,Qy)=>{"use strict";var uI=dn().supportsDescriptors,cI=Jc(),lI=hn(),fI=Object.defineProperty,hI=Mc(),Wy=Js(),dI=/a/;Qy.exports=function(){if(!uI||!Wy)throw new hI("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=cI(),r=Wy(dI),n=lI(r,"flags");return(!n||n.get!==t)&&fI(r,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var eg=S((u5,Zy)=>{"use strict";var pI=dn(),vI=Vn(),yI=Xc(),Xy=Jc(),gI=Yy(),Jy=vI(Xy());pI(Jy,{getPolyfill:Xy,implementation:yI,shim:gI});Zy.exports=Jy});var ng=S((c5,rg)=>{"use strict";var tg=Symbol.iterator;rg.exports=function(t){if(t!=null&&typeof t[tg]!="undefined")return t[tg]()}});var ag=S((l5,ig)=>{ig.exports=require("util").inspect});var xa=S((f5,Ag)=>{var ul=typeof Map=="function"&&Map.prototype,Zc=Object.getOwnPropertyDescriptor&&ul?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,io=ul&&Zc&&typeof Zc.get=="function"?Zc.get:null,sg=ul&&Map.prototype.forEach,cl=typeof Set=="function"&&Set.prototype,el=Object.getOwnPropertyDescriptor&&cl?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ao=cl&&el&&typeof el.get=="function"?el.get:null,og=cl&&Set.prototype.forEach,mI=typeof WeakMap=="function"&&WeakMap.prototype,Ea=mI?WeakMap.prototype.has:null,EI=typeof WeakSet=="function"&&WeakSet.prototype,Sa=EI?WeakSet.prototype.has:null,SI=typeof WeakRef=="function"&&WeakRef.prototype,ug=SI?WeakRef.prototype.deref:null,CI=Boolean.prototype.valueOf,xI=Object.prototype.toString,bI=Function.prototype.toString,TI=String.prototype.match,ll=String.prototype.slice,pn=String.prototype.replace,AI=String.prototype.toUpperCase,cg=String.prototype.toLowerCase,mg=RegExp.prototype.test,lg=Array.prototype.concat,yr=Array.prototype.join,_I=Array.prototype.slice,fg=Math.floor,nl=typeof BigInt=="function"?BigInt.prototype.valueOf:null,tl=Object.getOwnPropertySymbols,il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,bi=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ca=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===bi||!0)?Symbol.toStringTag:null,Eg=Object.prototype.propertyIsEnumerable,hg=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function dg(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||mg.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-fg(-e):fg(e);if(n!==e){var i=String(n),a=ll.call(t,i.length+1);return pn.call(i,r,"$&_")+"."+pn.call(pn.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return pn.call(t,r,"$&_")}var al=ag(),pg=al.custom,vg=xg(pg)?pg:null,Sg={__proto__:null,double:'"',single:"'"},wI={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Ag.exports=function e(t,r,n,i){var a=r||{};if(Pr(a,"quoteStyle")&&!Pr(Sg,a.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Pr(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=Pr(a,"customInspect")?a.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Pr(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Pr(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=a.numericSeparator;if(typeof t=="undefined")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Tg(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var c=String(t);return o?dg(t,c):c}if(typeof t=="bigint"){var u=String(t)+"n";return o?dg(t,u):u}var l=typeof a.depth=="undefined"?5:a.depth;if(typeof n=="undefined"&&(n=0),n>=l&&l>0&&typeof t=="object")return sl(t)?"[Array]":"[Object]";var f=$I(a,n);if(typeof i=="undefined")i=[];else if(bg(i,t)>=0)return"[Circular]";function h(ye,Re,ne){if(Re&&(i=_I.call(i),i.push(Re)),ne){var ve={depth:a.depth};return Pr(a,"quoteStyle")&&(ve.quoteStyle=a.quoteStyle),e(ye,ve,n+1,i)}return e(ye,a,n+1,i)}if(typeof t=="function"&&!yg(t)){var p=kI(t),d=no(t,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(d.length>0?" { "+yr.call(d,", ")+" }":"")}if(xg(t)){var m=bi?pn.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):il.call(t);return typeof t=="object"&&!bi?ma(m):m}if(KI(t)){for(var E="<"+cg.call(String(t.nodeName)),x=t.attributes||[],_=0;_<x.length;_++)E+=" "+x[_].name+"="+Cg(II(x[_].value),"double",a);return E+=">",t.childNodes&&t.childNodes.length&&(E+="..."),E+="</"+cg.call(String(t.nodeName))+">",E}if(sl(t)){if(t.length===0)return"[]";var w=no(t,h);return f&&!jI(w)?"["+ol(w,f)+"]":"[ "+yr.call(w,", ")+" ]"}if(OI(t)){var R=no(t,h);return!("cause"in Error.prototype)&&"cause"in t&&!Eg.call(t,"cause")?"{ ["+String(t)+"] "+yr.call(lg.call("[cause]: "+h(t.cause),R),", ")+" }":R.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+yr.call(R,", ")+" }"}if(typeof t=="object"&&s){if(vg&&typeof t[vg]=="function"&&al)return al(t,{depth:l-n});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(UI(t)){var O=[];return sg&&sg.call(t,function(ye,Re){O.push(h(Re,t,!0)+" => "+h(ye,t))}),gg("Map",io.call(t),O,f)}if(FI(t)){var B=[];return og&&og.call(t,function(ye){B.push(h(ye,t))}),gg("Set",ao.call(t),B,f)}if(qI(t))return rl("WeakMap");if(VI(t))return rl("WeakSet");if(MI(t))return rl("WeakRef");if(NI(t))return ma(h(Number(t)));if(PI(t))return ma(h(nl.call(t)));if(DI(t))return ma(CI.call(t));if(RI(t))return ma(h(String(t)));if(typeof window!="undefined"&&t===window)return"{ [object Window] }";if(typeof globalThis!="undefined"&&t===globalThis||typeof global!="undefined"&&t===global)return"{ [object globalThis] }";if(!BI(t)&&!yg(t)){var V=no(t,h),K=hg?hg(t)===Object.prototype:t instanceof Object||t.constructor===Object,W=t instanceof Object?"":"null prototype",Z=!K&&Ca&&Object(t)===t&&Ca in t?ll.call(vn(t),8,-1):W?"Object":"",re=K||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",le=re+(Z||W?"["+yr.call(lg.call([],Z||[],W||[]),": ")+"] ":"");return V.length===0?le+"{}":f?le+"{"+ol(V,f)+"}":le+"{ "+yr.call(V,", ")+" }"}return String(t)};function Cg(e,t,r){var n=r.quoteStyle||t,i=Sg[n];return i+e+i}function II(e){return pn.call(String(e),/"/g,"&quot;")}function Kn(e){return!Ca||!(typeof e=="object"&&(Ca in e||typeof e[Ca]!="undefined"))}function sl(e){return vn(e)==="[object Array]"&&Kn(e)}function BI(e){return vn(e)==="[object Date]"&&Kn(e)}function yg(e){return vn(e)==="[object RegExp]"&&Kn(e)}function OI(e){return vn(e)==="[object Error]"&&Kn(e)}function RI(e){return vn(e)==="[object String]"&&Kn(e)}function NI(e){return vn(e)==="[object Number]"&&Kn(e)}function DI(e){return vn(e)==="[object Boolean]"&&Kn(e)}function xg(e){if(bi)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!il)return!1;try{return il.call(e),!0}catch(t){}return!1}function PI(e){if(!e||typeof e!="object"||!nl)return!1;try{return nl.call(e),!0}catch(t){}return!1}var LI=Object.prototype.hasOwnProperty||function(e){return e in this};function Pr(e,t){return LI.call(e,t)}function vn(e){return xI.call(e)}function kI(e){if(e.name)return e.name;var t=TI.call(bI.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function bg(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function UI(e){if(!io||!e||typeof e!="object")return!1;try{io.call(e);try{ao.call(e)}catch(t){return!0}return e instanceof Map}catch(t){}return!1}function qI(e){if(!Ea||!e||typeof e!="object")return!1;try{Ea.call(e,Ea);try{Sa.call(e,Sa)}catch(t){return!0}return e instanceof WeakMap}catch(t){}return!1}function MI(e){if(!ug||!e||typeof e!="object")return!1;try{return ug.call(e),!0}catch(t){}return!1}function FI(e){if(!ao||!e||typeof e!="object")return!1;try{ao.call(e);try{io.call(e)}catch(t){return!0}return e instanceof Set}catch(t){}return!1}function VI(e){if(!Sa||!e||typeof e!="object")return!1;try{Sa.call(e,Sa);try{Ea.call(e,Ea)}catch(t){return!0}return e instanceof WeakSet}catch(t){}return!1}function KI(e){return!e||typeof e!="object"?!1:typeof HTMLElement!="undefined"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Tg(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Tg(ll.call(e,0,t.maxStringLength),t)+n}var i=wI[t.quoteStyle||"single"];i.lastIndex=0;var a=pn.call(pn.call(e,i,"\\$1"),/[\x00-\x1f]/g,HI);return Cg(a,"single",t)}function HI(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+AI.call(t.toString(16))}function ma(e){return"Object("+e+")"}function rl(e){return e+" { ? }"}function gg(e,t,r,n){var i=n?ol(r,n):yr.call(r,", ");return e+" ("+t+") {"+i+"}"}function jI(e){for(var t=0;t<e.length;t++)if(bg(e[t],`
`)>=0)return!1;return!0}function $I(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=yr.call(Array(e.indent+1)," ");else return null;return{base:r,prev:yr.call(Array(t+1),r)}}function ol(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+yr.call(e,","+r)+`
`+t.prev}function no(e,t){var r=sl(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Pr(e,i)?t(e[i],e):""}var a=typeof tl=="function"?tl(e):[],s;if(bi){s={};for(var o=0;o<a.length;o++)s["$"+a[o]]=a[o]}for(var c in e)Pr(e,c)&&(r&&String(Number(c))===c&&c<e.length||bi&&s["$"+c]instanceof Symbol||(mg.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e))));if(typeof tl=="function")for(var u=0;u<a.length;u++)Eg.call(e,a[u])&&n.push("["+t(a[u])+"]: "+t(e[a[u]],e));return n}});var wg=S((h5,_g)=>{"use strict";var GI=xa(),zI=Vt(),so=function(e,t,r){for(var n=e,i;(i=n.next)!=null;n=i)if(i.key===t)return n.next=i.next,r||(i.next=e.next,e.next=i),i},WI=function(e,t){if(e){var r=so(e,t);return r&&r.value}},QI=function(e,t,r){var n=so(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},YI=function(e,t){return e?!!so(e,t):!1},XI=function(e,t){if(e)return so(e,t,!0)};_g.exports=function(){var t,r={assert:function(n){if(!r.has(n))throw new zI("Side channel does not contain "+GI(n))},delete:function(n){var i=t&&t.next,a=XI(t,n);return a&&i&&i===a&&(t=void 0),!!a},get:function(n){return WI(t,n)},has:function(n){return YI(t,n)},set:function(n,i){t||(t={next:void 0}),QI(t,n,i)}};return r}});var fl=S((d5,Bg)=>{"use strict";var JI=Dr(),ba=Ye(),ZI=xa(),eB=Vt(),Ig=JI("%Map%",!0),tB=ba("Map.prototype.get",!0),rB=ba("Map.prototype.set",!0),nB=ba("Map.prototype.has",!0),iB=ba("Map.prototype.delete",!0),aB=ba("Map.prototype.size",!0);Bg.exports=!!Ig&&function(){var t,r={assert:function(n){if(!r.has(n))throw new eB("Side channel does not contain "+ZI(n))},delete:function(n){if(t){var i=iB(t,n);return aB(t)===0&&(t=void 0),i}return!1},get:function(n){if(t)return tB(t,n)},has:function(n){return t?nB(t,n):!1},set:function(n,i){t||(t=new Ig),rB(t,n,i)}};return r}});var Rg=S((p5,Og)=>{"use strict";var sB=Dr(),uo=Ye(),oB=xa(),oo=fl(),uB=Vt(),Ti=sB("%WeakMap%",!0),cB=uo("WeakMap.prototype.get",!0),lB=uo("WeakMap.prototype.set",!0),fB=uo("WeakMap.prototype.has",!0),hB=uo("WeakMap.prototype.delete",!0);Og.exports=Ti?function(){var t,r,n={assert:function(i){if(!n.has(i))throw new uB("Side channel does not contain "+oB(i))},delete:function(i){if(Ti&&i&&(typeof i=="object"||typeof i=="function")){if(t)return hB(t,i)}else if(oo&&r)return r.delete(i);return!1},get:function(i){return Ti&&i&&(typeof i=="object"||typeof i=="function")&&t?cB(t,i):r&&r.get(i)},has:function(i){return Ti&&i&&(typeof i=="object"||typeof i=="function")&&t?fB(t,i):!!r&&r.has(i)},set:function(i,a){Ti&&i&&(typeof i=="object"||typeof i=="function")?(t||(t=new Ti),lB(t,i,a)):oo&&(r||(r=oo()),r.set(i,a))}};return n}:oo});var Dg=S((v5,Ng)=>{"use strict";var dB=Vt(),pB=xa(),vB=wg(),yB=fl(),gB=Rg(),mB=gB||yB||vB;Ng.exports=function(){var t,r={assert:function(n){if(!r.has(n))throw new dB("Side channel does not contain "+pB(n))},delete:function(n){return!!t&&t.delete(n)},get:function(n){return t&&t.get(n)},has:function(n){return!!t&&t.has(n)},set:function(n,i){t||(t=mB()),t.set(n,i)}};return r}});var hl=S((y5,Lg)=>{"use strict";var Pg=function(e){return e!==e};Lg.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Pg(t)&&Pg(r))}});var dl=S((g5,kg)=>{"use strict";var EB=hl();kg.exports=function(){return typeof Object.is=="function"?Object.is:EB}});var qg=S((m5,Ug)=>{"use strict";var SB=dl(),CB=dn();Ug.exports=function(){var t=SB();return CB(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var Kg=S((E5,Vg)=>{"use strict";var xB=dn(),bB=Vn(),TB=hl(),Mg=dl(),AB=qg(),Fg=bB(Mg(),Object);xB(Fg,{getPolyfill:Mg,implementation:TB,shim:AB});Vg.exports=Fg});var yn=S((S5,Hg)=>{"use strict";var _B=Ws();Hg.exports=function(){return _B()&&!!Symbol.toStringTag}});var Gg=S((C5,$g)=>{"use strict";var wB=yn()(),IB=Ye(),pl=IB("Object.prototype.toString"),co=function(t){return wB&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:pl(t)==="[object Arguments]"},jg=function(t){return co(t)?!0:t!==null&&typeof t=="object"&&"length"in t&&typeof t.length=="number"&&t.length>=0&&pl(t)!=="[object Array]"&&"callee"in t&&pl(t.callee)==="[object Function]"},BB=function(){return co(arguments)}();co.isLegacyArguments=jg;$g.exports=BB?co:jg});var Wg=S((x5,zg)=>{var OB={}.toString;zg.exports=Array.isArray||function(e){return OB.call(e)=="[object Array]"}});var yl=S((b5,Jg)=>{"use strict";var RB=Vn(),Xg=Ye(),NB=Dr(),vl=NB("%ArrayBuffer%",!0),lo=Xg("ArrayBuffer.prototype.byteLength",!0),DB=Xg("Object.prototype.toString"),Qg=!!vl&&!lo&&new vl(0).slice,Yg=!!Qg&&RB(Qg);Jg.exports=lo||Yg?function(t){if(!t||typeof t!="object")return!1;try{return lo?lo(t):Yg(t,0),!0}catch(r){return!1}}:vl?function(t){return DB(t)==="[object ArrayBuffer]"}:function(t){return!1}});var tm=S((T5,em)=>{"use strict";var Zg=Ye(),PB=Zg("Date.prototype.getDay"),LB=function(t){try{return PB(t),!0}catch(r){return!1}},kB=Zg("Object.prototype.toString"),UB="[object Date]",qB=yn()();em.exports=function(t){return typeof t!="object"||t===null?!1:qB?LB(t):kB(t)===UB}});var Sl=S((A5,sm)=>{"use strict";var rm=Ye(),MB=yn()(),FB=$c(),VB=hn(),El;MB?(nm=rm("RegExp.prototype.exec"),gl={},fo=function(){throw gl},ml={toString:fo,valueOf:fo},typeof Symbol.toPrimitive=="symbol"&&(ml[Symbol.toPrimitive]=fo),El=function(t){if(!t||typeof t!="object")return!1;var r=VB(t,"lastIndex"),n=r&&FB(r,"value");if(!n)return!1;try{nm(t,ml)}catch(i){return i===gl}}):(im=rm("Object.prototype.toString"),am="[object RegExp]",El=function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:im(t)===am});var nm,gl,fo,ml,im,am;sm.exports=El});var cm=S((_5,um)=>{"use strict";var KB=Ye(),om=KB("SharedArrayBuffer.prototype.byteLength",!0);um.exports=om?function(t){if(!t||typeof t!="object")return!1;try{return om(t),!0}catch(r){return!1}}:function(t){return!1}});var hm=S((w5,fm)=>{"use strict";var lm=Ye(),HB=lm("String.prototype.valueOf"),jB=function(t){try{return HB(t),!0}catch(r){return!1}},$B=lm("Object.prototype.toString"),GB="[object String]",zB=yn()();fm.exports=function(t){return typeof t=="string"?!0:!t||typeof t!="object"?!1:zB?jB(t):$B(t)===GB}});var vm=S((I5,pm)=>{"use strict";var dm=Ye(),WB=dm("Number.prototype.toString"),QB=function(t){try{return WB(t),!0}catch(r){return!1}},YB=dm("Object.prototype.toString"),XB="[object Number]",JB=yn()();pm.exports=function(t){return typeof t=="number"?!0:!t||typeof t!="object"?!1:JB?QB(t):YB(t)===XB}});var mm=S((B5,gm)=>{"use strict";var ym=Ye(),ZB=ym("Boolean.prototype.toString"),eO=ym("Object.prototype.toString"),tO=function(t){try{return ZB(t),!0}catch(r){return!1}},rO="[object Boolean]",nO=yn()();gm.exports=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:nO?tO(t):eO(t)===rO}});var Sm=S((O5,Em)=>{"use strict";var iO=Ye(),aO=Sl(),sO=iO("RegExp.prototype.exec"),oO=Vt();Em.exports=function(t){if(!aO(t))throw new oO("`regex` must be a RegExp");return function(n){return sO(t,n)!==null}}});var Am=S((R5,Cl)=>{"use strict";var Tm=Ye(),uO=Tm("Object.prototype.toString"),cO=Fc()(),lO=Sm();cO?(Cm=Tm("Symbol.prototype.toString"),xm=lO(/^Symbol\(.*\)$/),bm=function(t){return typeof t.valueOf()!="symbol"?!1:xm(Cm(t))},Cl.exports=function(t){if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||uO(t)!=="[object Symbol]")return!1;try{return bm(t)}catch(r){return!1}}):Cl.exports=function(t){return!1};var Cm,xm,bm});var Im=S((N5,wm)=>{"use strict";var _m=typeof BigInt!="undefined"&&BigInt;wm.exports=function(){return typeof _m=="function"&&typeof BigInt=="function"&&typeof _m(42)=="bigint"&&typeof BigInt(42)=="bigint"}});var Rm=S((D5,xl)=>{"use strict";var fO=Im()();fO?(Bm=BigInt.prototype.valueOf,Om=function(t){try{return Bm.call(t),!0}catch(r){}return!1},xl.exports=function(t){return t===null||typeof t=="undefined"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:Om(t)}):xl.exports=function(t){return!1};var Bm,Om});var Dm=S((P5,Nm)=>{"use strict";var hO=hm(),dO=vm(),pO=mm(),vO=Am(),yO=Rm();Nm.exports=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(hO(t))return"String";if(dO(t))return"Number";if(pO(t))return"Boolean";if(vO(t))return"Symbol";if(yO(t))return"BigInt"}});var Um=S((L5,km)=>{"use strict";var bl=typeof Map=="function"&&Map.prototype?Map:null,gO=typeof Set=="function"&&Set.prototype?Set:null,ho;bl||(ho=function(t){return!1});var Lm=bl?Map.prototype.has:null,Pm=gO?Set.prototype.has:null;!ho&&!Lm&&(ho=function(t){return!1});km.exports=ho||function(t){if(!t||typeof t!="object")return!1;try{if(Lm.call(t),Pm)try{Pm.call(t)}catch(r){return!0}return t instanceof bl}catch(r){}return!1}});var Vm=S((k5,Fm)=>{"use strict";var mO=typeof Map=="function"&&Map.prototype?Map:null,Tl=typeof Set=="function"&&Set.prototype?Set:null,po;Tl||(po=function(t){return!1});var qm=mO?Map.prototype.has:null,Mm=Tl?Set.prototype.has:null;!po&&!Mm&&(po=function(t){return!1});Fm.exports=po||function(t){if(!t||typeof t!="object")return!1;try{if(Mm.call(t),qm)try{qm.call(t)}catch(r){return!0}return t instanceof Tl}catch(r){}return!1}});var jm=S((U5,Hm)=>{"use strict";var vo=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,Km=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,yo;vo||(yo=function(t){return!1});var _l=vo?vo.prototype.has:null,Al=Km?Km.prototype.has:null;!yo&&!_l&&(yo=function(t){return!1});Hm.exports=yo||function(t){if(!t||typeof t!="object")return!1;try{if(_l.call(t,_l),Al)try{Al.call(t,Al)}catch(r){return!0}return t instanceof vo}catch(r){}return!1}});var Gm=S((q5,Il)=>{"use strict";var EO=Dr(),$m=Ye(),SO=EO("%WeakSet%",!0),wl=$m("WeakSet.prototype.has",!0);wl?(go=$m("WeakMap.prototype.has",!0),Il.exports=function(t){if(!t||typeof t!="object")return!1;try{if(wl(t,wl),go)try{go(t,go)}catch(r){return!0}return t instanceof SO}catch(r){}return!1}):Il.exports=function(t){return!1};var go});var Wm=S((M5,zm)=>{"use strict";var CO=Um(),xO=Vm(),bO=jm(),TO=Gm();zm.exports=function(t){if(t&&typeof t=="object"){if(CO(t))return"Map";if(xO(t))return"Set";if(bO(t))return"WeakMap";if(TO(t))return"WeakSet"}return!1}});var Jm=S((F5,Xm)=>{"use strict";var Ym=Function.prototype.toString,Ai=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Ol,mo;if(typeof Ai=="function"&&typeof Object.defineProperty=="function")try{Ol=Object.defineProperty({},"length",{get:function(){throw mo}}),mo={},Ai(function(){throw 42},null,Ol)}catch(e){e!==mo&&(Ai=null)}else Ai=null;var AO=/^\s*class\b/,Rl=function(t){try{var r=Ym.call(t);return AO.test(r)}catch(n){return!1}},Bl=function(t){try{return Rl(t)?!1:(Ym.call(t),!0)}catch(r){return!1}},Eo=Object.prototype.toString,_O="[object Object]",wO="[object Function]",IO="[object GeneratorFunction]",BO="[object HTMLAllCollection]",OO="[object HTML document.all class]",RO="[object HTMLCollection]",NO=typeof Symbol=="function"&&!!Symbol.toStringTag,DO=!(0 in[,]),Nl=function(){return!1};typeof document=="object"&&(Qm=document.all,Eo.call(Qm)===Eo.call(document.all)&&(Nl=function(t){if((DO||!t)&&(typeof t=="undefined"||typeof t=="object"))try{var r=Eo.call(t);return(r===BO||r===OO||r===RO||r===_O)&&t("")==null}catch(n){}return!1}));var Qm;Xm.exports=Ai?function(t){if(Nl(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Ai(t,null,Ol)}catch(r){if(r!==mo)return!1}return!Rl(t)&&Bl(t)}:function(t){if(Nl(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(NO)return Bl(t);if(Rl(t))return!1;var r=Eo.call(t);return r!==wO&&r!==IO&&!/^\[object HTML/.test(r)?!1:Bl(t)}});var t1=S((V5,e1)=>{"use strict";var PO=Jm(),LO=Object.prototype.toString,Zm=Object.prototype.hasOwnProperty,kO=function(t,r,n){for(var i=0,a=t.length;i<a;i++)Zm.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},UO=function(t,r,n){for(var i=0,a=t.length;i<a;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},qO=function(t,r,n){for(var i in t)Zm.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))};function MO(e){return LO.call(e)==="[object Array]"}e1.exports=function(t,r,n){if(!PO(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),MO(t)?kO(t,r,i):typeof t=="string"?UO(t,r,i):qO(t,r,i)}});var n1=S((K5,r1)=>{"use strict";r1.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]});var a1=S((H5,i1)=>{"use strict";var Dl=n1(),FO=typeof globalThis=="undefined"?global:globalThis;i1.exports=function(){for(var t=[],r=0;r<Dl.length;r++)typeof FO[Dl[r]]=="function"&&(t[t.length]=Dl[r]);return t}});var l1=S((j5,c1)=>{"use strict";var xo=t1(),VO=a1(),s1=Vn(),Ll=Ye(),Co=hn(),So=Js(),KO=Ll("Object.prototype.toString"),u1=yn()(),o1=typeof globalThis=="undefined"?global:globalThis,Pl=VO(),kl=Ll("String.prototype.slice"),HO=Ll("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},bo={__proto__:null};u1&&Co&&So?xo(Pl,function(e){var t=new o1[e];if(Symbol.toStringTag in t&&So){var r=So(t),n=Co(r,Symbol.toStringTag);if(!n&&r){var i=So(r);n=Co(i,Symbol.toStringTag)}bo["$"+e]=s1(n.get)}}):xo(Pl,function(e){var t=new o1[e],r=t.slice||t.set;r&&(bo["$"+e]=s1(r))});var jO=function(t){var r=!1;return xo(bo,function(n,i){if(!r)try{"$"+n(t)===i&&(r=kl(i,1))}catch(a){}}),r},$O=function(t){var r=!1;return xo(bo,function(n,i){if(!r)try{n(t),r=kl(i,1)}catch(a){}}),r};c1.exports=function(t){if(!t||typeof t!="object")return!1;if(!u1){var r=kl(KO(t),8,-1);return HO(Pl,r)>-1?r:r!=="Object"?!1:$O(t)}return Co?jO(t):null}});var d1=S(($5,h1)=>{"use strict";var GO=Ye(),f1=GO("ArrayBuffer.prototype.byteLength",!0),zO=yl();h1.exports=function(t){return zO(t)?f1?f1(t):t.byteLength:NaN}});var mr=S((G5,U1)=>{"use strict";var P1=ky(),gr=Fy(),p1=eg(),WO=Dr(),_i=ng(),QO=Dg(),v1=Kg(),y1=Gg(),g1=Wg(),m1=yl(),E1=tm(),S1=Sl(),C1=cm(),x1=Ks(),b1=Dm(),T1=Wm(),A1=l1(),_1=d1(),w1=gr("SharedArrayBuffer.prototype.byteLength",!0),I1=gr("Date.prototype.getTime"),Ul=Object.getPrototypeOf,B1=gr("Object.prototype.toString"),Ao=WO("%Set%",!0),ql=gr("Map.prototype.has",!0),_o=gr("Map.prototype.get",!0),O1=gr("Map.prototype.size",!0),wo=gr("Set.prototype.add",!0),L1=gr("Set.prototype.delete",!0),Io=gr("Set.prototype.has",!0),To=gr("Set.prototype.size",!0);function R1(e,t,r,n){for(var i=_i(e),a;(a=i.next())&&!a.done;)if(zt(t,a.value,r,n))return L1(e,a.value),!0;return!1}function k1(e){if(typeof e=="undefined")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function YO(e,t,r,n,i,a){var s=k1(r);if(s!=null)return s;var o=_o(t,s),c=P1({},i,{strict:!1});return typeof o=="undefined"&&!ql(t,s)||!zt(n,o,c,a)?!1:!ql(e,s)&&zt(n,o,c,a)}function XO(e,t,r){var n=k1(r);return n!=null?n:Io(t,n)&&!Io(e,n)}function N1(e,t,r,n,i,a){for(var s=_i(e),o,c;(o=s.next())&&!o.done;)if(c=o.value,zt(r,c,i,a)&&zt(n,_o(t,c),i,a))return L1(e,c),!0;return!1}function zt(e,t,r,n){var i=r||{};if(i.strict?v1(e,t):e===t)return!0;var a=b1(e),s=b1(t);if(a!==s)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?v1(e,t):e==t;var o=n.has(e),c=n.has(t),u;if(o&&c){if(n.get(e)===n.get(t))return!0}else u={};return o||n.set(e,u),c||n.set(t,u),e4(e,t,i,n)}function D1(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function JO(e,t,r,n){if(To(e)!==To(t))return!1;for(var i=_i(e),a=_i(t),s,o,c;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")c||(c=new Ao),wo(c,s.value);else if(!Io(t,s.value)){if(r.strict||!XO(e,t,s.value))return!1;c||(c=new Ao),wo(c,s.value)}if(c){for(;(o=a.next())&&!o.done;)if(o.value&&typeof o.value=="object"){if(!R1(c,o.value,r.strict,n))return!1}else if(!r.strict&&!Io(e,o.value)&&!R1(c,o.value,r.strict,n))return!1;return To(c)===0}return!0}function ZO(e,t,r,n){if(O1(e)!==O1(t))return!1;for(var i=_i(e),a=_i(t),s,o,c,u,l,f;(s=i.next())&&!s.done;)if(u=s.value[0],l=s.value[1],u&&typeof u=="object")c||(c=new Ao),wo(c,u);else if(f=_o(t,u),typeof f=="undefined"&&!ql(t,u)||!zt(l,f,r,n)){if(r.strict||!YO(e,t,u,l,r,n))return!1;c||(c=new Ao),wo(c,u)}if(c){for(;(o=a.next())&&!o.done;)if(u=o.value[0],f=o.value[1],u&&typeof u=="object"){if(!N1(c,e,u,f,r,n))return!1}else if(!r.strict&&(!e.has(u)||!zt(_o(e,u),f,r,n))&&!N1(c,e,u,f,P1({},r,{strict:!1}),n))return!1;return To(c)===0}return!0}function e4(e,t,r,n){var i,a;if(typeof e!=typeof t||e==null||t==null||B1(e)!==B1(t)||y1(e)!==y1(t))return!1;var s=g1(e),o=g1(t);if(s!==o)return!1;var c=e instanceof Error,u=t instanceof Error;if(c!==u||(c||u)&&(e.name!==t.name||e.message!==t.message))return!1;var l=S1(e),f=S1(t);if(l!==f||(l||f)&&(e.source!==t.source||p1(e)!==p1(t)))return!1;var h=E1(e),p=E1(t);if(h!==p||(h||p)&&I1(e)!==I1(t)||r.strict&&Ul&&Ul(e)!==Ul(t))return!1;var d=A1(e),m=A1(t);if(d!==m)return!1;if(d||m){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var E=D1(e),x=D1(t);if(E!==x)return!1;if(E||x){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var _=m1(e),w=m1(t);if(_!==w)return!1;if(_||w)return _1(e)!==_1(t)?!1:typeof Uint8Array=="function"&&zt(new Uint8Array(e),new Uint8Array(t),r,n);var R=C1(e),O=C1(t);if(R!==O)return!1;if(R||O)return w1(e)!==w1(t)?!1:typeof Uint8Array=="function"&&zt(new Uint8Array(e),new Uint8Array(t),r,n);if(typeof e!=typeof t)return!1;var B=x1(e),V=x1(t);if(B.length!==V.length)return!1;for(B.sort(),V.sort(),i=B.length-1;i>=0;i--)if(B[i]!=V[i])return!1;for(i=B.length-1;i>=0;i--)if(a=B[i],!zt(e[a],t[a],r,n))return!1;var K=T1(e),W=T1(t);return K!==W?!1:K==="Set"||W==="Set"?JO(e,t,r,n):K==="Map"?ZO(e,t,r,n):!0}U1.exports=function(t,r,n){return zt(t,r,n,QO())}});var q1=S(Ml=>{Ml.stringify=function e(t){if(typeof t=="undefined")return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&typeof t=="object"){var r="",n=Array.isArray(t);r=n?"[":"{";var i=!0;for(var a in t){var s=typeof t[a]=="function"||!n&&typeof t[a]=="undefined";Object.hasOwnProperty.call(t,a)&&!s&&(i||(r+=","),i=!1,n?t[a]==null?r+="null":r+=e(t[a]):t[a]!==void 0&&(r+=e(a)+":"+e(t[a])))}return r+=n?"]":"}",r}else return typeof t=="string"?JSON.stringify(/^:/.test(t)?":"+t:t):typeof t=="undefined"?"null":JSON.stringify(t)};Ml.parse=function(e){return JSON.parse(e,function(t,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var K1=S((W5,V1)=>{"use strict";var t4=require("events"),M1=q1(),r4=e=>{let t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){let r=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(require(t[r]))(e)}return new Map},F1=["sqlite","postgres","mysql","mongo","redis","tiered"],Fl=class extends t4{constructor(t,i={}){var a=i,{emitErrors:r=!0}=a,n=Nh(a,["emitErrors"]);if(super(),this.opts=ts(ts({namespace:"keyv",serialize:M1.stringify,deserialize:M1.parse},typeof t=="string"?{uri:t}:t),n),!this.opts.store){let o=ts({},this.opts);this.opts.store=r4(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let s=o=>function(){return Ph(this,null,function*(){try{for(var c=Lh(typeof o=="function"?o(this.opts.store.namespace):o),u,l,f;u=!(l=yield new ji(c.next())).done;u=!1){let[h,p]=l.value;let d=yield new ji(this.opts.deserialize(p));if(!(this.opts.store.namespace&&!h.includes(this.opts.store.namespace))){if(typeof d.expires=="number"&&Date.now()>d.expires){this.delete(h);continue}yield[this._getKeyUnprefix(h),d.value]}}}catch(l){f=[l]}finally{try{u&&(l=c.return)&&(yield new ji(l.call(c)))}finally{if(f)throw f[0]}}})};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=s(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=s(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return F1.includes(this.opts.store.opts.dialect)||F1.findIndex(t=>this.opts.store.opts.url.includes(t))>=0}_getKeyPrefix(t){return`${this.opts.namespace}:${t}`}_getKeyPrefixArray(t){return t.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(t){return t.split(":").splice(1).join(":")}get(t,r){let{store:n}=this.opts,i=Array.isArray(t),a=i?this._getKeyPrefixArray(t):this._getKeyPrefix(t);if(i&&n.getMany===void 0){let s=[];for(let o of a)s.push(Promise.resolve().then(()=>n.get(o)).then(c=>typeof c=="string"?this.opts.deserialize(c):this.opts.compression?this.opts.deserialize(c):c).then(c=>{if(c!=null)return typeof c.expires=="number"&&Date.now()>c.expires?this.delete(o).then(()=>{}):r&&r.raw?c:c.value}));return Promise.allSettled(s).then(o=>{let c=[];for(let u of o)c.push(u.value);return c})}return Promise.resolve().then(()=>i?n.getMany(a):n.get(a)).then(s=>typeof s=="string"?this.opts.deserialize(s):this.opts.compression?this.opts.deserialize(s):s).then(s=>{if(s!=null)return i?s.map((o,c)=>{if(typeof o=="string"&&(o=this.opts.deserialize(o)),o!=null){if(typeof o.expires=="number"&&Date.now()>o.expires){this.delete(t[c]).then(()=>{});return}return r&&r.raw?o:o.value}}):typeof s.expires=="number"&&Date.now()>s.expires?this.delete(t).then(()=>{}):r&&r.raw?s:s.value})}set(t,r,n){let i=this._getKeyPrefix(t);typeof n=="undefined"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:a}=this.opts;return Promise.resolve().then(()=>{let s=typeof n=="number"?Date.now()+n:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:s},this.opts.serialize(r)}).then(s=>a.set(i,s,n)).then(()=>!0)}delete(t){let{store:r}=this.opts;if(Array.isArray(t)){let i=this._getKeyPrefixArray(t);if(r.deleteMany===void 0){let a=[];for(let s of i)a.push(r.delete(s));return Promise.allSettled(a).then(s=>s.every(o=>o.value===!0))}return Promise.resolve().then(()=>r.deleteMany(i))}let n=this._getKeyPrefix(t);return Promise.resolve().then(()=>r.delete(n))}clear(){let{store:t}=this.opts;return Promise.resolve().then(()=>t.clear())}has(t){let r=this._getKeyPrefix(t),{store:n}=this.opts;return Promise.resolve().then(()=>rs(this,null,function*(){return typeof n.has=="function"?n.has(r):(yield n.get(r))!==void 0}))}disconnect(){let{store:t}=this.opts;if(typeof t.disconnect=="function")return t.disconnect()}};V1.exports=Fl});var J1=S(Aa=>{"use strict";var{parse:$1,stringify:G1}=JSON,{keys:n4}=Object,Ta=String,z1="string",H1={},Bo="object",W1=(e,t)=>t,i4=e=>e instanceof Ta?Ta(e):e,a4=(e,t)=>typeof t===z1?new Ta(t):t,Q1=(e,t,r,n)=>{let i=[];for(let a=n4(r),{length:s}=a,o=0;o<s;o++){let c=a[o],u=r[c];if(u instanceof Ta){let l=e[u];typeof l===Bo&&!t.has(l)?(t.add(l),r[c]=H1,i.push({k:c,a:[e,t,l,n]})):r[c]=n.call(r,c,l)}else r[c]!==H1&&(r[c]=n.call(r,c,u))}for(let{length:a}=i,s=0;s<a;s++){let{k:o,a:c}=i[s];r[o]=n.call(r,o,Q1.apply(null,c))}return r},j1=(e,t,r)=>{let n=Ta(t.push(r)-1);return e.set(r,n),n},Y1=(e,t)=>{let r=$1(e,a4).map(i4),n=r[0],i=t||W1,a=typeof n===Bo&&n?Q1(r,new Set,n,i):n;return i.call({"":a},"",a)};Aa.parse=Y1;var X1=(e,t,r)=>{let n=t&&typeof t===Bo?(l,f)=>l===""||-1<t.indexOf(l)?f:void 0:t||W1,i=new Map,a=[],s=[],o=+j1(i,a,n.call({"":e},"",e)),c=!o;for(;o<a.length;)c=!0,s[o]=G1(a[o++],u,r);return"["+s.join(",")+"]";function u(l,f){if(c)return c=!c,f;let h=n.call(this,l,f);switch(typeof h){case Bo:if(h===null)return h;case z1:return i.get(h)||j1(i,a,h)}return h}};Aa.stringify=X1;var s4=e=>$1(X1(e));Aa.toJSON=s4;var o4=e=>Y1(G1(e));Aa.fromJSON=o4});var tE=S((X5,eE)=>{var Vl=require("fs"),u4=require("path"),Z1=J1();eE.exports={tryParse:function(e,t){var r;try{r=this.readJSON(e)}catch(n){r=t}return r},readJSON:function(e){return Z1.parse(Vl.readFileSync(e,{encoding:"utf8"}))},writeJSON:function(e,t){Vl.mkdirSync(u4.dirname(e),{recursive:!0}),Vl.writeFileSync(e,Z1.stringify(t))}}});var rE=S(Kl=>{var Hn=require("path"),mn=process.platform==="win32",gn=require("fs"),c4=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function l4(){var e;if(c4){var t=new Error;e=r}else e=n;return e;function r(i){i&&(t.message=i.message,i=t,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var a="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(a):console.error(a)}}}}function f4(e){return typeof e=="function"?e:l4()}var J5=Hn.normalize;mn?Lr=/(.*?)(?:[\/\\]+|$)/g:Lr=/(.*?)(?:[\/]+|$)/g;var Lr;mn?_a=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:_a=/^[\/]*/;var _a;Kl.realpathSync=function(t,r){if(t=Hn.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];var n=t,i={},a={},s,o,c,u;l();function l(){var E=_a.exec(t);s=E[0].length,o=E[0],c=E[0],u="",mn&&!a[c]&&(gn.lstatSync(c),a[c]=!0)}for(;s<t.length;){Lr.lastIndex=s;var f=Lr.exec(t);if(u=o,o+=f[0],c=u+f[1],s=Lr.lastIndex,!(a[c]||r&&r[c]===c)){var h;if(r&&Object.prototype.hasOwnProperty.call(r,c))h=r[c];else{var p=gn.lstatSync(c);if(!p.isSymbolicLink()){a[c]=!0,r&&(r[c]=c);continue}var d=null;if(!mn){var m=p.dev.toString(32)+":"+p.ino.toString(32);i.hasOwnProperty(m)&&(d=i[m])}d===null&&(gn.statSync(c),d=gn.readlinkSync(c)),h=Hn.resolve(u,d),r&&(r[c]=h),mn||(i[m]=d)}t=Hn.resolve(h,t.slice(s)),l()}}return r&&(r[n]=t),t};Kl.realpath=function(t,r,n){if(typeof n!="function"&&(n=f4(r),r=null),t=Hn.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return process.nextTick(n.bind(null,null,r[t]));var i=t,a={},s={},o,c,u,l;f();function f(){var E=_a.exec(t);o=E[0].length,c=E[0],u=E[0],l="",mn&&!s[u]?gn.lstat(u,function(x){if(x)return n(x);s[u]=!0,h()}):process.nextTick(h)}function h(){if(o>=t.length)return r&&(r[i]=t),n(null,t);Lr.lastIndex=o;var E=Lr.exec(t);return l=c,c+=E[0],u=l+E[1],o=Lr.lastIndex,s[u]||r&&r[u]===u?process.nextTick(h):r&&Object.prototype.hasOwnProperty.call(r,u)?m(r[u]):gn.lstat(u,p)}function p(E,x){if(E)return n(E);if(!x.isSymbolicLink())return s[u]=!0,r&&(r[u]=u),process.nextTick(h);if(!mn){var _=x.dev.toString(32)+":"+x.ino.toString(32);if(a.hasOwnProperty(_))return d(null,a[_],u)}gn.stat(u,function(w){if(w)return n(w);gn.readlink(u,function(R,O){mn||(a[_]=O),d(R,O)})})}function d(E,x,_){if(E)return n(E);var w=Hn.resolve(l,x);r&&(r[_]=w),m(w)}function m(E){t=Hn.resolve(E,t.slice(o)),f()}}});var Gl=S((ek,sE)=>{sE.exports=En;En.realpath=En;En.sync=$l;En.realpathSync=$l;En.monkeypatch=d4;En.unmonkeypatch=p4;var wi=require("fs"),Hl=wi.realpath,jl=wi.realpathSync,h4=process.version,nE=/^v[0-5]\./.test(h4),iE=rE();function aE(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function En(e,t,r){if(nE)return Hl(e,t,r);typeof t=="function"&&(r=t,t=null),Hl(e,t,function(n,i){aE(n)?iE.realpath(e,t,r):r(n,i)})}function $l(e,t){if(nE)return jl(e,t);try{return jl(e,t)}catch(r){if(aE(r))return iE.realpathSync(e,t);throw r}}function d4(){wi.realpath=En,wi.realpathSync=$l}function p4(){wi.realpath=Hl,wi.realpathSync=jl}});var uE=S((tk,oE)=>{oE.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);v4(i)?r.push.apply(r,i):r.push(i)}return r};var v4=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var dE=S((rk,hE)=>{"use strict";hE.exports=lE;function lE(e,t,r){e instanceof RegExp&&(e=cE(e,r)),t instanceof RegExp&&(t=cE(t,r));var n=fE(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function cE(e,t){var r=t.match(e);return r?r[0]:null}lE.range=fE;function fE(e,t,r){var n,i,a,s,o,c=r.indexOf(e),u=r.indexOf(t,c+1),l=c;if(c>=0&&u>0){if(e===t)return[c,u];for(n=[],a=r.length;l>=0&&!o;)l==c?(n.push(l),c=r.indexOf(e,l+1)):n.length==1?o=[n.pop(),u]:(i=n.pop(),i<a&&(a=i,s=u),u=r.indexOf(t,l+1)),l=c<u&&c>=0?c:u;n.length&&(o=[a,s])}return o}});var CE=S((nk,SE)=>{var y4=uE(),pE=dE();SE.exports=E4;var vE="\0SLASH"+Math.random()+"\0",yE="\0OPEN"+Math.random()+"\0",Wl="\0CLOSE"+Math.random()+"\0",gE="\0COMMA"+Math.random()+"\0",mE="\0PERIOD"+Math.random()+"\0";function zl(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function g4(e){return e.split("\\\\").join(vE).split("\\{").join(yE).split("\\}").join(Wl).split("\\,").join(gE).split("\\.").join(mE)}function m4(e){return e.split(vE).join("\\").split(yE).join("{").split(Wl).join("}").split(gE).join(",").split(mE).join(".")}function EE(e){if(!e)return[""];var t=[],r=pE("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,a=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var o=EE(a);return a.length&&(s[s.length-1]+=o.shift(),s.push.apply(s,o)),t.push.apply(t,s),t}function E4(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Ii(g4(e),!0).map(m4)):[]}function S4(e){return"{"+e+"}"}function C4(e){return/^-?0\d/.test(e)}function x4(e,t){return e<=t}function b4(e,t){return e>=t}function Ii(e,t){var r=[],n=pE("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||a,o=n.body.indexOf(",")>=0;if(!s&&!o)return n.post.match(/,(?!,).*\}/)?(e=n.pre+"{"+n.body+Wl+n.post,Ii(e)):[e];var c;if(s)c=n.body.split(/\.\./);else if(c=EE(n.body),c.length===1&&(c=Ii(c[0],!1).map(S4),c.length===1)){var l=n.post.length?Ii(n.post,!1):[""];return l.map(function(re){return n.pre+c[0]+re})}var u=n.pre,l=n.post.length?Ii(n.post,!1):[""],f;if(s){var h=zl(c[0]),p=zl(c[1]),d=Math.max(c[0].length,c[1].length),m=c.length==3?Math.abs(zl(c[2])):1,E=x4,x=p<h;x&&(m*=-1,E=b4);var _=c.some(C4);f=[];for(var w=h;E(w,p);w+=m){var R;if(a)R=String.fromCharCode(w),R==="\\"&&(R="");else if(R=String(w),_){var O=d-R.length;if(O>0){var B=new Array(O+1).join("0");w<0?R="-"+B+R.slice(1):R=B+R}}f.push(R)}}else f=y4(c,function(Z){return Ii(Z,!1)});for(var V=0;V<f.length;V++)for(var K=0;K<l.length;K++){var W=u+f[V]+l[K];(!t||s||W)&&r.push(W)}return r}});var No=S((ik,_E)=>{_E.exports=It;It.Minimatch=Xe;var wa=function(){try{return require("path")}catch(e){}}()||{sep:"/"};It.sep=wa.sep;var Xl=It.GLOBSTAR=Xe.GLOBSTAR={},T4=CE(),xE={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Ql="[^/]",Yl=Ql+"*?",A4="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",_4="(?:(?!(?:\\/|^)\\.).)*?",bE=w4("().*{}+?[]^$\\!");function w4(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var TE=/\/+/;It.filter=I4;function I4(e,t){return t=t||{},function(r,n,i){return It(r,e,t)}}function Sn(e,t){t=t||{};var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),Object.keys(t).forEach(function(n){r[n]=t[n]}),r}It.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return It;var t=It,r=function(i,a,s){return t(i,a,Sn(e,s))};return r.Minimatch=function(i,a){return new t.Minimatch(i,Sn(e,a))},r.Minimatch.defaults=function(i){return t.defaults(Sn(e,i)).Minimatch},r.filter=function(i,a){return t.filter(i,Sn(e,a))},r.defaults=function(i){return t.defaults(Sn(e,i))},r.makeRe=function(i,a){return t.makeRe(i,Sn(e,a))},r.braceExpand=function(i,a){return t.braceExpand(i,Sn(e,a))},r.match=function(n,i,a){return t.match(n,i,Sn(e,a))},r};Xe.defaults=function(e){return It.defaults(e).Minimatch};function It(e,t,r){return Ro(t),r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:new Xe(t,r).match(e)}function Xe(e,t){if(!(this instanceof Xe))return new Xe(e,t);Ro(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&wa.sep!=="/"&&(e=e.split(wa.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}Xe.prototype.debug=function(){};Xe.prototype.make=B4;function B4(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(TE)}),this.debug(this.pattern,r),r=r.map(function(n,i,a){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Xe.prototype.parseNegate=O4;function O4(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,a=e.length;i<a&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}It.braceExpand=function(e,t){return AE(e,t)};Xe.prototype.braceExpand=AE;function AE(e,t){return t||(this instanceof Xe?t=this.options:t={}),e=typeof e=="undefined"?this.pattern:e,Ro(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:T4(e)}var R4=1024*64,Ro=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>R4)throw new TypeError("pattern is too long")};Xe.prototype.parse=N4;var Oo={};function N4(e,t){Ro(e);var r=this.options;if(e==="**")if(r.noglobstar)e="*";else return Xl;if(e==="")return"";var n="",i=!!r.nocase,a=!1,s=[],o=[],c,u=!1,l=-1,f=-1,h=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",p=this;function d(){if(c){switch(c){case"*":n+=Yl,i=!0;break;case"?":n+=Ql,i=!0;break;default:n+="\\"+c;break}p.debug("clearStateChar %j %j",c,n),c=!1}}for(var m=0,E=e.length,x;m<E&&(x=e.charAt(m));m++){if(this.debug("%s	%s %s %j",e,m,n,x),a&&bE[x]){n+="\\"+x,a=!1;continue}switch(x){case"/":return!1;case"\\":d(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,m,n,x),u){this.debug("  in class"),x==="!"&&m===f+1&&(x="^"),n+=x;continue}p.debug("call clearStateChar %j",c),d(),c=x,r.noext&&d();continue;case"(":if(u){n+="(";continue}if(!c){n+="\\(";continue}s.push({type:c,start:m-1,reStart:n.length,open:xE[c].open,close:xE[c].close}),n+=c==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",c,n),c=!1;continue;case")":if(u||!s.length){n+="\\)";continue}d(),i=!0;var _=s.pop();n+=_.close,_.type==="!"&&o.push(_),_.reEnd=n.length;continue;case"|":if(u||!s.length||a){n+="\\|",a=!1;continue}d(),n+="|";continue;case"[":if(d(),u){n+="\\"+x;continue}u=!0,f=m,l=n.length,n+=x;continue;case"]":if(m===f+1||!u){n+="\\"+x,a=!1;continue}var w=e.substring(f+1,m);try{RegExp("["+w+"]")}catch(Ee){var R=this.parse(w,Oo);n=n.substr(0,l)+"\\["+R[0]+"\\]",i=i||R[1],u=!1;continue}i=!0,u=!1,n+=x;continue;default:d(),a?a=!1:bE[x]&&!(x==="^"&&u)&&(n+="\\"),n+=x}}for(u&&(w=e.substr(f+1),R=this.parse(w,Oo),n=n.substr(0,l)+"\\["+R[0],i=i||R[1]),_=s.pop();_;_=s.pop()){var O=n.slice(_.reStart+_.open.length);this.debug("setting tail",n,_),O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Ee,Ae,Q){return Q||(Q="\\"),Ae+Ae+Q+"|"}),this.debug(`tail=%j
   %s`,O,O,_,n);var B=_.type==="*"?Yl:_.type==="?"?Ql:"\\"+_.type;i=!0,n=n.slice(0,_.reStart)+B+"\\("+O}d(),a&&(n+="\\\\");var V=!1;switch(n.charAt(0)){case"[":case".":case"(":V=!0}for(var K=o.length-1;K>-1;K--){var W=o[K],Z=n.slice(0,W.reStart),re=n.slice(W.reStart,W.reEnd-8),le=n.slice(W.reEnd-8,W.reEnd),ye=n.slice(W.reEnd);le+=ye;var Re=Z.split("(").length-1,ne=ye;for(m=0;m<Re;m++)ne=ne.replace(/\)[+*?]?/,"");ye=ne;var ve="";ye===""&&t!==Oo&&(ve="$");var H=Z+re+ye+ve+le;n=H}if(n!==""&&i&&(n="(?=.)"+n),V&&(n=h+n),t===Oo)return[n,i];if(!i)return P4(e);var Dt=r.nocase?"i":"";try{var Pt=new RegExp("^"+n+"$",Dt)}catch(Ee){return new RegExp("$.")}return Pt._glob=e,Pt._src=n,Pt}It.makeRe=function(e,t){return new Xe(e,t||{}).makeRe()};Xe.prototype.makeRe=D4;function D4(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?Yl:t.dot?A4:_4,n=t.nocase?"i":"",i=e.map(function(a){return a.map(function(s){return s===Xl?r:typeof s=="string"?L4(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(a){this.regexp=!1}return this.regexp}It.match=function(e,t,r){r=r||{};var n=new Xe(t,r);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(t),e};Xe.prototype.match=function(t,r){if(typeof r=="undefined"&&(r=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&r)return!0;var n=this.options;wa.sep!=="/"&&(t=t.split(wa.sep).join("/")),t=t.split(TE),this.debug(this.pattern,"split",t);var i=this.set;this.debug(this.pattern,"set",i);var a,s;for(s=t.length-1;s>=0&&(a=t[s],!a);s--);for(s=0;s<i.length;s++){var o=i[s],c=t;n.matchBase&&o.length===1&&(c=[a]);var u=this.matchOne(c,o,r);if(u)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Xe.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,a=0,s=e.length,o=t.length;i<s&&a<o;i++,a++){this.debug("matchOne loop");var c=t[a],u=e[i];if(this.debug(t,c,u),c===!1)return!1;if(c===Xl){this.debug("GLOBSTAR",[t,c,u]);var l=i,f=a+1;if(f===o){for(this.debug("** at the end");i<s;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;l<s;){var h=e[l];if(this.debug(`
globstar while`,e,l,t,f,h),this.matchOne(e.slice(l),t.slice(f),r))return this.debug("globstar found match!",l,s,h),!0;if(h==="."||h===".."||!n.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,l,t,f);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,l,t,f),l===s))}var p;if(typeof c=="string"?(p=u===c,this.debug("string match",c,u,p)):(p=u.match(c),this.debug("pattern match",c,u,p)),!p)return!1}if(i===s&&a===o)return!0;if(i===s)return r;if(a===o)return i===s-1&&e[i]==="";throw new Error("wtf?")};function P4(e){return e.replace(/\\(.)/g,"$1")}function L4(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var wE=S((ak,Jl)=>{typeof Object.create=="function"?Jl.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Jl.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var IE=S((sk,ef)=>{try{if(Zl=require("util"),typeof Zl.inherits!="function")throw"";ef.exports=Zl.inherits}catch(e){ef.exports=wE()}var Zl});var Po=S((ok,Do)=>{"use strict";function BE(e){return e.charAt(0)==="/"}function OE(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=t.exec(e),n=r[1]||"",i=!!(n&&n.charAt(1)!==":");return!!(r[2]||i)}Do.exports=process.platform==="win32"?OE:BE;Do.exports.posix=BE;Do.exports.win32=OE});var rf=S(Cn=>{Cn.setopts=V4;Cn.ownProp=RE;Cn.makeAbs=Ia;Cn.finish=K4;Cn.mark=H4;Cn.isIgnored=DE;Cn.childrenIgnored=j4;function RE(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var k4=require("fs"),Bi=require("path"),U4=No(),NE=Po(),tf=U4.Minimatch;function q4(e,t){return e.localeCompare(t,"en")}function M4(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(F4))}function F4(e){var t=null;if(e.slice(-3)==="/**"){var r=e.replace(/(\/\*\*)+$/,"");t=new tf(r,{dot:!0})}return{matcher:new tf(e,{dot:!0}),gmatcher:t}}function V4(e,t,r){if(r||(r={}),r.matchBase&&t.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=r.strict!==!1,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||k4,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),M4(e,r),e.changedCwd=!1;var n=process.cwd();RE(r,"cwd")?(e.cwd=Bi.resolve(r.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=r.root||Bi.resolve(e.cwd,"/"),e.root=Bi.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=NE(e.cwd)?e.cwd:Ia(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,r.allowWindowsEscape=!1,e.minimatch=new tf(t,r),e.options=e.minimatch.options}function K4(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var a=e.matches[n];if(!a||Object.keys(a).length===0){if(e.nonull){var s=e.minimatch.globSet[n];t?r.push(s):r[s]=!0}}else{var o=Object.keys(a);t?r.push.apply(r,o):o.forEach(function(c){r[c]=!0})}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(q4)),e.mark){for(var n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(c){var u=!/\/$/.test(c),l=e.cache[c]||e.cache[Ia(e,c)];return u&&l&&(u=l!=="DIR"&&!Array.isArray(l)),u}))}e.ignore.length&&(r=r.filter(function(c){return!DE(e,c)})),e.found=r}function H4(e,t){var r=Ia(e,t),n=e.cache[r],i=t;if(n){var a=n==="DIR"||Array.isArray(n),s=t.slice(-1)==="/";if(a&&!s?i+="/":!a&&s&&(i=i.slice(0,-1)),i!==t){var o=Ia(e,i);e.statCache[o]=e.statCache[r],e.cache[o]=e.cache[r]}}return i}function Ia(e,t){var r=t;return t.charAt(0)==="/"?r=Bi.join(e.root,t):NE(t)||t===""?r=t:e.changedCwd?r=Bi.resolve(e.cwd,t):r=Bi.resolve(t),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function DE(e,t){return e.ignore.length?e.ignore.some(function(r){return r.matcher.match(t)||!!(r.gmatcher&&r.gmatcher.match(t))}):!1}function j4(e,t){return e.ignore.length?e.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(t))}):!1}});var qE=S((hk,UE)=>{UE.exports=kE;kE.GlobSync=ke;var $4=Gl(),PE=No(),ck=PE.Minimatch,lk=sf().Glob,fk=require("util"),nf=require("path"),LE=require("assert"),Lo=Po(),jn=rf(),G4=jn.setopts,af=jn.ownProp,z4=jn.childrenIgnored,W4=jn.isIgnored;function kE(e,t){if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new ke(e,t).found}function ke(e,t){if(!e)throw new Error("must provide pattern");if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof ke))return new ke(e,t);if(G4(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}ke.prototype._finish=function(){if(LE.ok(this instanceof ke),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i);var a=$4.realpathSync(i,e.realpathCache);n[a]=!0}catch(s){if(s.syscall==="stat")n[e._makeAbs(i)]=!0;else throw s}})}jn.finish(this)};ke.prototype._process=function(e,t,r){LE.ok(this instanceof ke);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),t);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var a=e.slice(n),s;i===null?s=".":((Lo(i)||Lo(e.map(function(u){return typeof u=="string"?u:"[*]"}).join("/")))&&(!i||!Lo(i))&&(i="/"+i),s=i);var o=this._makeAbs(s);if(!z4(this,s)){var c=a[0]===PE.GLOBSTAR;c?this._processGlobStar(i,s,o,a,t,r):this._processReaddir(i,s,o,a,t,r)}};ke.prototype._processReaddir=function(e,t,r,n,i,a){var s=this._readdir(r,a);if(s){for(var o=n[0],c=!!this.minimatch.negate,u=o._glob,l=this.dot||u.charAt(0)===".",f=[],h=0;h<s.length;h++){var p=s[h];if(p.charAt(0)!=="."||l){var d;c&&!e?d=!p.match(o):d=p.match(o),d&&f.push(p)}}var m=f.length;if(m!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<m;h++){var p=f[h];e&&(e.slice(-1)!=="/"?p=e+"/"+p:p=e+p),p.charAt(0)==="/"&&!this.nomount&&(p=nf.join(this.root,p)),this._emitMatch(i,p)}return}n.shift();for(var h=0;h<m;h++){var p=f[h],E;e?E=[e,p]:E=[p],this._process(E.concat(n),i,a)}}}};ke.prototype._emitMatch=function(e,t){if(!W4(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}};ke.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r,n;try{r=this.fs.lstatSync(e)}catch(a){if(a.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,!i&&r&&!r.isDirectory()?this.cache[e]="FILE":t=this._readdir(e,!1),t};ke.prototype._readdir=function(e,t){var r;if(t&&!af(this.symlinks,e))return this._readdirInGlobStar(e);if(af(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};ke.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t};ke.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t);break}};ke.prototype._processGlobStar=function(e,t,r,n,i,a){var s=this._readdir(r,a);if(s){var o=n.slice(1),c=e?[e]:[],u=c.concat(o);this._process(u,i,!1);var l=s.length,f=this.symlinks[r];if(!(f&&a))for(var h=0;h<l;h++){var p=s[h];if(!(p.charAt(0)==="."&&!this.dot)){var d=c.concat(s[h],o);this._process(d,i,!0);var m=c.concat(s[h],n);this._process(m,i,!0)}}}};ke.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),!!r){if(e&&Lo(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=nf.join(this.root,e):(e=nf.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}};ke.prototype._stat=function(e){var t=this._makeAbs(e),r=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&af(this.cache,t)){var s=this.cache[t];if(Array.isArray(s)&&(s="DIR"),!r||s==="DIR")return s;if(r&&s==="FILE")return!1}var n,i=this.statCache[t];if(!i){var a;try{a=this.fs.lstatSync(t)}catch(o){if(o&&(o.code==="ENOENT"||o.code==="ENOTDIR"))return this.statCache[t]=!1,!1}if(a&&a.isSymbolicLink())try{i=this.fs.statSync(t)}catch(o){i=a}else i=a}this.statCache[t]=i;var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,r&&s==="FILE"?!1:s};ke.prototype._mark=function(e){return jn.mark(this,e)};ke.prototype._makeAbs=function(e){return jn.makeAbs(this,e)}});var of=S((dk,FE)=>{FE.exports=ME;function ME(e,t){if(e&&t)return ME(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var a=e.apply(this,n),s=n[n.length-1];return typeof a=="function"&&a!==s&&Object.keys(s).forEach(function(o){a[o]=s[o]}),a}}});var cf=S((pk,uf)=>{var VE=of();uf.exports=VE(ko);uf.exports.strict=VE(KE);ko.proto=ko(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return ko(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return KE(this)},configurable:!0})});function ko(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function KE(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var jE=S((vk,HE)=>{var Q4=of(),Ba=Object.create(null),Y4=cf();HE.exports=Q4(X4);function X4(e,t){return Ba[e]?(Ba[e].push(t),null):(Ba[e]=[t],J4(e))}function J4(e){return Y4(function t(){var r=Ba[e],n=r.length,i=Z4(arguments);try{for(var a=0;a<n;a++)r[a].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){t.apply(null,i)})):delete Ba[e]}})}function Z4(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}});var sf=S((mk,GE)=>{GE.exports=$n;var eR=Gl(),$E=No(),yk=$E.Minimatch,tR=IE(),rR=require("events").EventEmitter,lf=require("path"),ff=require("assert"),Oa=Po(),df=qE(),Gn=rf(),nR=Gn.setopts,hf=Gn.ownProp,pf=jE(),gk=require("util"),iR=Gn.childrenIgnored,aR=Gn.isIgnored,sR=cf();function $n(e,t,r){if(typeof t=="function"&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return df(e,t)}return new me(e,t,r)}$n.sync=df;var oR=$n.GlobSync=df.GlobSync;$n.glob=$n;function uR(e,t){if(t===null||typeof t!="object")return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}$n.hasMagic=function(e,t){var r=uR({},t);r.noprocess=!0;var n=new me(e,r),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var a=0;a<i[0].length;a++)if(typeof i[0][a]!="string")return!0;return!1};$n.Glob=me;tR(me,rR);function me(e,t,r){if(typeof t=="function"&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new oR(e,t)}if(!(this instanceof me))return new me(e,t,r);nR(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=sR(r),this.on("error",r),this.on("end",function(c){r(null,c)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return o();for(var a=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,o);a=!1;function o(){--i._processing,i._processing<=0&&(a?process.nextTick(function(){i._finish()}):i._finish())}}me.prototype._finish=function(){if(ff(this instanceof me),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();Gn.finish(this),this.emit("end",this.found)}};me.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--e===0&&t._finish()}};me.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,a=n.length;if(a===0)return t();var s=this.matches[e]=Object.create(null);n.forEach(function(o,c){o=i._makeAbs(o),eR.realpath(o,i.realpathCache,function(u,l){u?u.syscall==="stat"?s[o]=!0:i.emit("error",u):s[l]=!0,--a===0&&(i.matches[e]=s,t())})})};me.prototype._mark=function(e){return Gn.mark(this,e)};me.prototype._makeAbs=function(e){return Gn.makeAbs(this,e)};me.prototype.abort=function(){this.aborted=!0,this.emit("abort")};me.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};me.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};me.prototype._process=function(e,t,r,n){if(ff(this instanceof me),ff(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,t,r,n]);return}for(var i=0;typeof e[i]=="string";)i++;var a;switch(i){case e.length:this._processSimple(e.join("/"),t,n);return;case 0:a=null;break;default:a=e.slice(0,i).join("/");break}var s=e.slice(i),o;a===null?o=".":((Oa(a)||Oa(e.map(function(l){return typeof l=="string"?l:"[*]"}).join("/")))&&(!a||!Oa(a))&&(a="/"+a),o=a);var c=this._makeAbs(o);if(iR(this,o))return n();var u=s[0]===$E.GLOBSTAR;u?this._processGlobStar(a,o,c,s,t,r,n):this._processReaddir(a,o,c,s,t,r,n)}};me.prototype._processReaddir=function(e,t,r,n,i,a,s){var o=this;this._readdir(r,a,function(c,u){return o._processReaddir2(e,t,r,n,i,a,u,s)})};me.prototype._processReaddir2=function(e,t,r,n,i,a,s,o){if(!s)return o();for(var c=n[0],u=!!this.minimatch.negate,l=c._glob,f=this.dot||l.charAt(0)===".",h=[],p=0;p<s.length;p++){var d=s[p];if(d.charAt(0)!=="."||f){var m;u&&!e?m=!d.match(c):m=d.match(c),m&&h.push(d)}}var E=h.length;if(E===0)return o();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<E;p++){var d=h[p];e&&(e!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=lf.join(this.root,d)),this._emitMatch(i,d)}return o()}n.shift();for(var p=0;p<E;p++){var d=h[p],x;e&&(e!=="/"?d=e+"/"+d:d=e+d),this._process([d].concat(n),i,a,o)}o()};me.prototype._emitMatch=function(e,t){if(!this.aborted&&!aR(this,t)){if(this.paused){this._emitQueue.push([e,t]);return}var r=Oa(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}};me.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,t);var r="lstat\0"+e,n=this,i=pf(r,a);i&&n.fs.lstat(e,i);function a(s,o){if(s&&s.code==="ENOENT")return t();var c=o&&o.isSymbolicLink();n.symlinks[e]=c,!c&&o&&!o.isDirectory()?(n.cache[e]="FILE",t()):n._readdir(e,!1,t)}};me.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=pf("readdir\0"+e+"\0"+t,r),!!r)){if(t&&!hf(this.symlinks,e))return this._readdirInGlobStar(e,r);if(hf(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(e,cR(this,e,r))}};function cR(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}me.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}};me.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t);break}return r()}};me.prototype._processGlobStar=function(e,t,r,n,i,a,s){var o=this;this._readdir(r,a,function(c,u){o._processGlobStar2(e,t,r,n,i,a,u,s)})};me.prototype._processGlobStar2=function(e,t,r,n,i,a,s,o){if(!s)return o();var c=n.slice(1),u=e?[e]:[],l=u.concat(c);this._process(l,i,!1,o);var f=this.symlinks[r],h=s.length;if(f&&a)return o();for(var p=0;p<h;p++){var d=s[p];if(!(d.charAt(0)==="."&&!this.dot)){var m=u.concat(s[p],c);this._process(m,i,!0,o);var E=u.concat(s[p],n);this._process(E,i,!0,o)}}o()};me.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,a){n._processSimple2(e,t,i,a,r)})};me.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&Oa(e)&&!this.nomount){var a=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=lf.join(this.root,e):(e=lf.resolve(this.root,e),a&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()};me.prototype._stat=function(e,t){var r=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&hf(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return t(null,i);if(n&&i==="FILE")return t()}var a,s=this.statCache[r];if(s!==void 0){if(s===!1)return t(null,s);var o=s.isDirectory()?"DIR":"FILE";return n&&o==="FILE"?t():t(null,o,s)}var c=this,u=pf("stat\0"+r,l);u&&c.fs.lstat(r,u);function l(f,h){if(h&&h.isSymbolicLink())return c.fs.stat(r,function(p,d){p?c._stat2(e,r,null,h,t):c._stat2(e,r,p,d,t)});c._stat2(e,r,f,h,t)}};me.prototype._stat2=function(e,t,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[t]=!1,i();var a=e.slice(-1)==="/";if(this.statCache[t]=n,t.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,a&&s==="FILE"?i():i(null,s,n)}});var eS=S((Ek,ZE)=>{var Ce=require("assert"),YE=require("path"),zE=require("fs"),Oi;try{Oi=sf()}catch(e){}var lR={nosort:!0,silent:!0},vf=0,Ra=process.platform==="win32",XE=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||zE[r],r=r+"Sync",e[r]=e[r]||zE[r]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,e.glob===!1&&(e.disableGlob=!0),e.disableGlob!==!0&&Oi===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||lR},gf=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),Ce(e,"rimraf: missing path"),Ce.equal(typeof e,"string","rimraf: path should be a string"),Ce.equal(typeof r,"function","rimraf: callback function required"),Ce(t,"rimraf: invalid options argument provided"),Ce.equal(typeof t,"object","rimraf: options should be object"),XE(t);let n=0,i=null,a=0,s=c=>{i=i||c,--a===0&&r(i)},o=(c,u)=>{if(c)return r(c);if(a=u.length,a===0)return r();u.forEach(l=>{let f=h=>{if(h){if((h.code==="EBUSY"||h.code==="ENOTEMPTY"||h.code==="EPERM")&&n<t.maxBusyTries)return n++,setTimeout(()=>yf(l,t,f),n*100);if(h.code==="EMFILE"&&vf<t.emfileWait)return setTimeout(()=>yf(l,t,f),vf++);h.code==="ENOENT"&&(h=null)}vf=0,s(h)};yf(l,t,f)})};if(t.disableGlob||!Oi.hasMagic(e))return o(null,[e]);t.lstat(e,(c,u)=>{if(!c)return o(null,[e]);Oi(e,t.glob,o)})},yf=(e,t,r)=>{Ce(e),Ce(t),Ce(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Ra&&WE(e,t,n,r),i&&i.isDirectory())return Uo(e,t,n,r);t.unlink(e,a=>{if(a){if(a.code==="ENOENT")return r(null);if(a.code==="EPERM")return Ra?WE(e,t,a,r):Uo(e,t,a,r);if(a.code==="EISDIR")return Uo(e,t,a,r)}return r(a)})})},WE=(e,t,r,n)=>{Ce(e),Ce(t),Ce(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(a,s)=>{a?n(a.code==="ENOENT"?null:r):s.isDirectory()?Uo(e,t,r,n):t.unlink(e,n)})})},QE=(e,t,r)=>{Ce(e),Ce(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}let n;try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?qo(e,t,r):t.unlinkSync(e)},Uo=(e,t,r,n)=>{Ce(e),Ce(t),Ce(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?fR(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})},fR=(e,t,r)=>{Ce(e),Ce(t),Ce(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let a=i.length;if(a===0)return t.rmdir(e,r);let s;i.forEach(o=>{gf(YE.join(e,o),t,c=>{if(!s){if(c)return r(s=c);--a===0&&t.rmdir(e,r)}})})})},JE=(e,t)=>{t=t||{},XE(t),Ce(e,"rimraf: missing path"),Ce.equal(typeof e,"string","rimraf: path should be a string"),Ce(t,"rimraf: missing options"),Ce.equal(typeof t,"object","rimraf: options should be object");let r;if(t.disableGlob||!Oi.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=Oi.sync(e,t.glob)}if(r.length)for(let n=0;n<r.length;n++){let i=r[n],a;try{a=t.lstatSync(i)}catch(s){if(s.code==="ENOENT")return;s.code==="EPERM"&&Ra&&QE(i,t,s)}try{a&&a.isDirectory()?qo(i,t,null):t.unlinkSync(i)}catch(s){if(s.code==="ENOENT")return;if(s.code==="EPERM")return Ra?QE(i,t,s):qo(i,t,s);if(s.code!=="EISDIR")throw s;qo(i,t,s)}}},qo=(e,t,r)=>{Ce(e),Ce(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR")throw r;(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")&&hR(e,t)}},hR=(e,t)=>{Ce(e),Ce(t),t.readdirSync(e).forEach(i=>JE(YE.join(e,i),t));let r=Ra?100:1,n=0;do{let i=!0;try{let a=t.rmdirSync(e,t);return i=!1,a}finally{if(++n<r&&i)continue}}while(!0)};ZE.exports=gf;gf.sync=JE});var rS=S((Sk,tS)=>{var dR=eS().sync,pR=require("fs");tS.exports=function(t){return pR.existsSync(t)?(dR(t,{glob:!1}),!0):!1}});var Ef=S((Ck,aS)=>{var xn=require("path"),vR=require("fs"),yR=K1(),iS=tE(),mf=rS(),gR=iS.writeJSON,nS={load:function(e,t){var r=this;r.keyv=new yR,r.__visited={},r.__persisted={},r._pathToFile=t?xn.resolve(t,e):xn.resolve(__dirname,"../.cache/",e),vR.existsSync(r._pathToFile)&&(r._persisted=iS.tryParse(r._pathToFile,{}))},get _persisted(){return this.__persisted},set _persisted(e){this.__persisted=e,this.keyv.set("persisted",e)},get _visited(){return this.__visited},set _visited(e){this.__visited=e,this.keyv.set("visited",e)},loadFile:function(e){var t=this,r=xn.dirname(e),n=xn.basename(e);t.load(n,r)},all:function(){return this._persisted},keys:function(){return Object.keys(this._persisted)},setKey:function(e,t){this._visited[e]=!0,this._persisted[e]=t},removeKey:function(e){delete this._visited[e],delete this._persisted[e]},getKey:function(e){return this._visited[e]=!0,this._persisted[e]},_prune:function(){var e=this,t={},r=Object.keys(e._visited);r.length!==0&&(r.forEach(function(n){t[n]=e._persisted[n]}),e._visited={},e._persisted=t)},save:function(e){var t=this;!e&&t._prune(),gR(t._pathToFile,t._persisted)},removeCacheFile:function(){return mf(this._pathToFile)},destroy:function(){var e=this;e._visited={},e._persisted={},e.removeCacheFile()}};aS.exports={load:function(e,t){return this.create(e,t)},create:function(e,t){var r=Object.create(nS);return r.load(e,t),r},createFromFile:function(e){var t=Object.create(nS);return t.loadFile(e),t},clearCacheById:function(e,t){var r=t?xn.resolve(t,e):xn.resolve(__dirname,"../.cache/",e);return mf(r)},clearAll:function(e){var t=e?xn.resolve(e):xn.resolve(__dirname,"../.cache/");return mf(t)}}});var sS=S(Mo=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});var mR;(function(e){e.TCP="tcp",e.UDP="udp"})(mR=Mo.Protocol||(Mo.Protocol={}))});var Cf=S(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});function ER(e){return typeof e=="object"&&typeof e.create=="function"}Sf.isAdvancedMapper=ER});var uS=S((Tk,oS)=>{var Ri=1e3,Ni=Ri*60,Di=Ni*60,zn=Di*24,SR=zn*7,CR=zn*365.25;oS.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return xR(e);if(r==="number"&&isFinite(e))return t.long?TR(e):bR(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function xR(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*CR;case"weeks":case"week":case"w":return r*SR;case"days":case"day":case"d":return r*zn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Di;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ni;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ri;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function bR(e){var t=Math.abs(e);return t>=zn?Math.round(e/zn)+"d":t>=Di?Math.round(e/Di)+"h":t>=Ni?Math.round(e/Ni)+"m":t>=Ri?Math.round(e/Ri)+"s":e+"ms"}function TR(e){var t=Math.abs(e);return t>=zn?Fo(e,t,zn,"day"):t>=Di?Fo(e,t,Di,"hour"):t>=Ni?Fo(e,t,Ni,"minute"):t>=Ri?Fo(e,t,Ri,"second"):e+" ms"}function Fo(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var xf=S((Ak,cS)=>{function AR(e){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=uS(),r.destroy=u,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let f=0;for(let h=0;h<l.length;h++)f=(f<<5)-f+l.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(l){let f,h=null,p,d;function m(...E){if(!m.enabled)return;let x=m,_=Number(new Date),w=_-(f||_);x.diff=w,x.prev=f,x.curr=_,f=_,E[0]=r.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let R=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(B,V)=>{if(B==="%%")return"%";R++;let K=r.formatters[V];if(typeof K=="function"){let W=E[R];B=K.call(x,W),E.splice(R,1),R--}return B}),r.formatArgs.call(x,E),(x.log||r.log).apply(x,E)}return m.namespace=l,m.useColors=r.useColors(),m.color=r.selectColor(l),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,d=r.enabled(l)),d),set:E=>{h=E}}),typeof r.init=="function"&&r.init(m),m}function n(l,f){let h=r(this.namespace+(typeof f=="undefined"?":":f)+l);return h.log=this.log,h}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let h of f)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function a(l,f){let h=0,p=0,d=-1,m=0;for(;h<l.length;)if(p<f.length&&(f[p]===l[h]||f[p]==="*"))f[p]==="*"?(d=p,m=h,p++):(h++,p++);else if(d!==-1)p=d+1,m++,h=m;else return!1;for(;p<f.length&&f[p]==="*";)p++;return p===f.length}function s(){let l=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),l}function o(l){for(let f of r.skips)if(a(l,f))return!1;for(let f of r.names)if(a(l,f))return!0;return!1}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}cS.exports=AR});var lS=S((bt,Vo)=>{bt.formatArgs=wR;bt.save=IR;bt.load=BR;bt.useColors=_R;bt.storage=OR();bt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();bt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _R(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wR(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Vo.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}bt.log=console.debug||console.log||(()=>{});function IR(e){try{e?bt.storage.setItem("debug",e):bt.storage.removeItem("debug")}catch(t){}}function BR(){let e;try{e=bt.storage.getItem("debug")||bt.storage.getItem("DEBUG")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function OR(){try{return localStorage}catch(e){}}Vo.exports=xf()(bt);var{formatters:RR}=Vo.exports;RR.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var hS=S((_k,fS)=>{"use strict";fS.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var vS=S((wk,pS)=>{"use strict";var NR=require("os"),dS=require("tty"),Kt=hS(),{env:Ke}=process,bn;Kt("no-color")||Kt("no-colors")||Kt("color=false")||Kt("color=never")?bn=0:(Kt("color")||Kt("colors")||Kt("color=true")||Kt("color=always"))&&(bn=1);"FORCE_COLOR"in Ke&&(Ke.FORCE_COLOR==="true"?bn=1:Ke.FORCE_COLOR==="false"?bn=0:bn=Ke.FORCE_COLOR.length===0?1:Math.min(parseInt(Ke.FORCE_COLOR,10),3));function bf(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Tf(e,t){if(bn===0)return 0;if(Kt("color=16m")||Kt("color=full")||Kt("color=truecolor"))return 3;if(Kt("color=256"))return 2;if(e&&!t&&bn===void 0)return 0;let r=bn||0;if(Ke.TERM==="dumb")return r;if(process.platform==="win32"){let n=NR.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Ke)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Ke)||Ke.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Ke)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ke.TEAMCITY_VERSION)?1:0;if(Ke.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ke){let n=parseInt((Ke.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ke.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ke.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ke.TERM)||"COLORTERM"in Ke?1:r}function DR(e){let t=Tf(e,e&&e.isTTY);return bf(t)}pS.exports={supportsColor:DR,stdout:bf(Tf(!0,dS.isatty(1))),stderr:bf(Tf(!0,dS.isatty(2)))}});var gS=S((He,Ho)=>{var PR=require("tty"),Ko=require("util");He.init=VR;He.log=qR;He.formatArgs=kR;He.save=MR;He.load=FR;He.useColors=LR;He.destroy=Ko.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");He.colors=[6,2,3,4,5,1];try{let e=vS();e&&(e.stderr||e).level>=2&&(He.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}He.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,a)=>a.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function LR(){return"colors"in He.inspectOpts?!!He.inspectOpts.colors:PR.isatty(process.stderr.fd)}function kR(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),a=`  ${i};1m${t} \x1B[0m`;e[0]=a+e[0].split(`
`).join(`
`+a),e.push(i+"m+"+Ho.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=UR()+t+" "+e[0]}function UR(){return He.inspectOpts.hideDate?"":new Date().toISOString()+" "}function qR(...e){return process.stderr.write(Ko.formatWithOptions(He.inspectOpts,...e)+`
`)}function MR(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function FR(){return process.env.DEBUG}function VR(e){e.inspectOpts={};let t=Object.keys(He.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=He.inspectOpts[t[r]]}Ho.exports=xf()(He);var{formatters:yS}=Ho.exports;yS.o=function(e){return this.inspectOpts.colors=this.useColors,Ko.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};yS.O=function(e){return this.inspectOpts.colors=this.useColors,Ko.inspect(e,this.inspectOpts)}});var jo=S((Ik,Af)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Af.exports=lS():Af.exports=gS()});var ES=S(kr=>{"use strict";var KR=kr&&kr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},HR=kr&&kr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},mS=kr&&kr.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(HR(arguments[t]));return e};Object.defineProperty(kr,"__esModule",{value:!0});var jR=function(){function e(t){var r=this;this.parent=t;var n=function(i){return r.subscribe(i)};n.subscribe=n,n.unsubscribe=function(i){return r.unsubscribe(i)},n.once=function(){return r.once()},this.subscribable=n}return e.prototype.emit=function(){for(var t,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(Array.isArray(this.registeredListeners))try{for(var a=KR(this.registeredListeners),s=a.next();!s.done;s=a.next()){var o=s.value;o.apply(this.parent,n)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else this.registeredListeners&&this.registeredListeners.apply(this.parent,n)},e.prototype.subscribe=function(t){Array.isArray(this.registeredListeners)?this.registeredListeners=mS(this.registeredListeners,[t]):this.registeredListeners?this.registeredListeners=[this.registeredListeners,t]:this.registeredListeners=t,this.monitor&&this.monitor(this);var r=this;return{unsubscribe:function(){return r.unsubscribe(t)}}},e.prototype.unsubscribe=function(t){if(Array.isArray(this.registeredListeners)){var r=this.registeredListeners.indexOf(t);if(r<0)return!1;var n=mS(this.registeredListeners);return n.splice(r),this.registeredListeners=t,this.registeredListeners.length===0&&(this.registeredListeners=void 0),this.monitor&&this.monitor(this),!0}else if(this.registeredListeners===t)return this.registeredListeners=void 0,this.monitor&&this.monitor(this),!0;return!1},e.prototype.once=function(){var t=this;return new Promise(function(r,n){var i=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t.unsubscribe(i),r(a)};t.subscribe(i)})},Object.defineProperty(e.prototype,"hasListeners",{get:function(){return this.registeredListeners!==void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listeners",{get:function(){return Array.isArray(this.registeredListeners)?this.registeredListeners.slice(0):[this.registeredListeners]},enumerable:!0,configurable:!0}),e.prototype.monitorListeners=function(t){if(this.monitor)throw new Error("A monitor is already registered, call removeMonitor before registering a new monitor");this.monitor=t},e.prototype.removeMonitor=function(){this.monitor=void 0},e}();kr.Event=jR});var Na=S($o=>{"use strict";function $R(e){for(var t in e)$o.hasOwnProperty(t)||($o[t]=e[t])}Object.defineProperty($o,"__esModule",{value:!0});$R(ES())});var CS=S(Wn=>{"use strict";var SS=Wn&&Wn.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},GR=Wn&&Wn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wn,"__esModule",{value:!0});var zR=GR(jo()),Da=Na(),WR=Cf(),Go=Er(),QR=function(){function e(t){this.debug=zR.default("th:discovery:"+t),this.errorEvent=new Da.Event(this),this.availableEvent=new Da.Event(this),this.unavailableEvent=new Da.Event(this),this.updateEvent=new Da.Event(this),this._destroyed=!1,this.destroyEvent=new Da.Event(this)}return Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.logAndEmitError=function(t,r){r===void 0&&(r="An error occurred:"),this.debug(r,t),this.errorEvent.emit(t)},Object.defineProperty(e.prototype,"onAvailable",{get:function(){return this.availableEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUnavailable",{get:function(){return this.unavailableEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUpdate",{get:function(){return this.updateEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.find=function(t){var r,n;try{for(var i=SS(this.services),a=i.next();!a.done;a=i.next()){var s=a.value;if(t(s))return s}}catch(o){r={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return null},e.prototype.findAll=function(t){var r,n,i=[];try{for(var a=SS(this.services),s=a.next();!s.done;s=a.next()){var o=s.value;t(o)&&i.push(o)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},e.prototype.filter=function(t){return new Go.FilteredServiceDiscovery(this,t)},e.prototype.map=function(t){return WR.isAdvancedMapper(t)?new Go.MappedDiscovery(this,t):new Go.MappedDiscovery(this,{create:t})},e.prototype.and=function(t){throw new Go.MergedServiceDiscovery([this,t])},e.prototype.destroy=function(){return this.destroyed||(this._destroyed=!0,this.destroyEvent.emit()),Promise.resolve()},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDestroy",{get:function(){return this.destroyEvent.subscribable},enumerable:!0,configurable:!0}),e}();Wn.AbstractServiceDiscovery=QR});var AS=S((Nk,TS)=>{"use strict";var xS=Array.isArray,bS=Object.keys,YR=Object.prototype.hasOwnProperty;TS.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=xS(t),i=xS(r),a,s,o;if(n&&i){if(s=t.length,s!=r.length)return!1;for(a=s;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(n!=i)return!1;var c=t instanceof Date,u=r instanceof Date;if(c!=u)return!1;if(c&&u)return t.getTime()==r.getTime();var l=t instanceof RegExp,f=r instanceof RegExp;if(l!=f)return!1;if(l&&f)return t.toString()==r.toString();var h=bS(t);if(s=h.length,s!==bS(r).length)return!1;for(a=s;a--!==0;)if(!YR.call(r,h[a]))return!1;for(a=s;a--!==0;)if(o=h[a],!e(t[o],r[o]))return!1;return!0}return t!==t&&r!==r}});var wS=S(Ur=>{"use strict";var XR=Ur&&Ur.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_S=Ur&&Ur.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},JR=Ur&&Ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ur,"__esModule",{value:!0});var ZR=Er(),eN=JR(AS()),tN=function(e){XR(t,e);function t(r){var n=e.call(this,r)||this;return n.serviceMap=new Map,n}return Object.defineProperty(t.prototype,"services",{get:function(){return Array.from(this.serviceMap.values())},enumerable:!0,configurable:!0}),t.prototype.get=function(r){return this.serviceMap.get(r)||null},t.prototype.updateService=function(r){if(typeof r!="object"||r===null)throw new Error("A service object is required");if(!r.id)throw new Error("Services must have an identifier");var n=this.serviceMap.get(r.id);return n?eN.default(n,r)?null:(this.debug("Service with id",r.id,"has been updated"),this.serviceMap.set(r.id,r),this.updateEvent.emit(r,n),n):(this.debug("Service with id",r.id,"is now available"),this.serviceMap.set(r.id,r),this.availableEvent.emit(r),null)},t.prototype.removeService=function(r){if(typeof r=="undefined"||r===null)return null;var n=typeof r=="string"?r:r.id,i=this.serviceMap.get(n);return i?(this.debug("Service with id",n,"is no longer available"),this.serviceMap.delete(n),this.unavailableEvent.emit(i),i):null},t.prototype.setServices=function(r){var n,i,a,s,o=new Set;try{for(var c=_S(r),u=c.next();!u.done;u=c.next()){var l=u.value;o.add(l.id),this.updateService(l)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}try{for(var f=_S(this.serviceMap.keys()),h=f.next();!h.done;h=f.next()){var p=h.value;o.has(p)||this.removeService(p)}}catch(d){a={error:d}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}},t}(ZR.AbstractServiceDiscovery);Ur.BasicServiceDiscovery=tN});var OS=S(Wt=>{"use strict";var rN=Wt&&Wt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IS=Wt&&Wt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(u){try{c(n.next(u))}catch(l){a(l)}}function o(u){try{c(n.throw(u))}catch(l){a(l)}}function c(u){u.done?i(u.value):new r(function(l){l(u.value)}).then(s,o)}c((n=n.apply(e,t||[])).next())})},BS=Wt&&Wt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},nN=Wt&&Wt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Wt,"__esModule",{value:!0});var iN=Er(),aN=function(e){rN(t,e);function t(r,n){var i,a,s=e.call(this,r)||this;s.parent=n,s.handleParentServiceAvailable=s.handleParentServiceAvailable.bind(s),s.handleParentServiceUnavailable=s.handleParentServiceUnavailable.bind(s),s.handleParentServiceUpdate=s.handleParentServiceUpdate.bind(s),s.destroy=s.destroy.bind(s),s.parent.onAvailable(s.handleParentServiceAvailable),s.parent.onUnavailable(s.handleParentServiceUnavailable),s.parent.onUpdate(s.handleParentServiceUpdate),s.parent.onDestroy(s.destroy);try{for(var o=nN(n.services),c=o.next();!c.done;c=o.next()){var u=c.value;s.handleParentServiceAvailable(u)}}catch(l){i={error:l}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return s}return t.prototype.release=function(){return IS(this,void 0,void 0,function(){return BS(this,function(r){switch(r.label){case 0:return this.destroyed?[2]:(this.parent.onAvailable.unsubscribe(this.handleParentServiceAvailable),this.parent.onUnavailable.unsubscribe(this.handleParentServiceUnavailable),this.parent.onUpdate.unsubscribe(this.handleParentServiceUpdate),this.parent.onDestroy.unsubscribe(this.destroy),[4,e.prototype.destroy.call(this)]);case 1:return r.sent(),[2]}})})},t.prototype.destroy=function(){return IS(this,void 0,void 0,function(){return BS(this,function(r){switch(r.label){case 0:return this.destroyed?[2]:[4,this.parent.destroy()];case 1:return r.sent(),[4,this.release()];case 2:return r.sent(),[2]}})})},t}(iN.BasicServiceDiscovery);Wt.LayeredServiceDiscovery=aN});var RS=S(Pa=>{"use strict";var sN=Pa&&Pa.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Pa,"__esModule",{value:!0});var oN=Er(),uN=function(e){sN(t,e);function t(r,n){var i=e.call(this,"filtered",r)||this;return i.predicate=n,i}return Object.defineProperty(t.prototype,"services",{get:function(){return this.parent.services.filter(this.predicate)},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=this.parent.get(r);return n&&this.predicate(n)?n:null},t.prototype.handleParentServiceAvailable=function(r){this.predicate(r)&&this.updateService(r)},t.prototype.handleParentServiceUnavailable=function(r){this.removeService(r)},t.prototype.handleParentServiceUpdate=function(r){this.predicate(r)?this.updateService(r):this.removeService(r.id)},t}(oN.LayeredServiceDiscovery);Pa.FilteredServiceDiscovery=uN});var NS=S(La=>{"use strict";var cN=La&&La.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(La,"__esModule",{value:!0});var lN=Er(),fN=function(e){cN(t,e);function t(r,n){var i=e.call(this,"mapped",r)||this;return i.mappedServices=new Map,i.mapper=n,i}return t.prototype.handleParentServiceAvailable=function(r){var n=this,i=this.mappedServices.get(r.id);if(i){this.debug("Warning: Received available event for already existing service",r.id);return}var a=Promise.resolve(this.mapper.create(r)).then(function(s){var o=n.mappedServices.get(r.id);!o||o.promise!==a||(o.promise=void 0,s&&(o.service=s,n.updateService(s)))}).catch(function(s){n.logAndEmitError(s,"An error occurred during mapping of "+r.id+":")});this.mappedServices.set(r.id,{promise:a})},t.prototype.handleParentServiceUnavailable=function(r){var n=this.mappedServices.get(r.id);if(n&&(this.mappedServices.delete(r.id),n.service)){var i=n.service.id;this.removeService(i)}},t.prototype.handleParentServiceUpdate=function(r,n){var i=this,a=this.mappedServices.get(r.id);if(!a){this.debug("Warning: Received an update for a service that was not available:",r.id);return}if(a.service&&this.mapper.update){a.promise&&this.debug("Update received for",r.id," while service was being updated, replacing with new update");var s=a.service.id,o=Promise.resolve(this.mapper.update({service:r,previousService:n,previousMappedService:a.service})).then(function(u){var l=i.mappedServices.get(r.id);!l||l.promise!==o||(l.promise=void 0,u&&u?(l.service=u,u.id!==s&&i.removeService(s),i.updateService(u)):(l.service=void 0,i.removeService(s)))}).catch(function(u){i.logAndEmitError(u,"An error occurred during update of "+r.id+":")});a.promise=o}else if(!a.service){var c=Promise.resolve(this.mapper.create(r)).then(function(u){var l=i.mappedServices.get(r.id);!l||l.promise!==c||(l.promise=void 0,u&&(l.service=u,i.updateService(u)))}).catch(function(u){i.logAndEmitError(u,"An error occurred during mapping of "+r.id+":")});a.promise=c}},t.prototype.updateService=function(r){var n=e.prototype.updateService.call(this,r);return n&&this.destroyService(n),n},t.prototype.removeService=function(r){var n=e.prototype.removeService.call(this,r);return n&&this.destroyService(n),n},t.prototype.destroyService=function(r){var n=this;if(this.mapper.destroy){var i=r.id;Promise.resolve(this.mapper.destroy(r)).catch(function(a){n.logAndEmitError(a,"An error occurred during destruction of mapped service with id "+i+":")})}},t}(lN.LayeredServiceDiscovery);La.MappedDiscovery=fN});var LS=S(Qt=>{"use strict";var hN=Qt&&Qt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DS=Qt&&Qt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(u){try{c(n.next(u))}catch(l){a(l)}}function o(u){try{c(n.throw(u))}catch(l){a(l)}}function c(u){u.done?i(u.value):new r(function(l){l(u.value)}).then(s,o)}c((n=n.apply(e,t||[])).next())})},PS=Qt&&Qt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},zo=Qt&&Qt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Qt,"__esModule",{value:!0});var dN=Er(),pN=function(e){hN(t,e);function t(r){var n,i,a=e.call(this,"combined")||this;a.combinedServiceData=new Map,a.instances=[];var s=function(f){var h=function(m){return a.handleAvailableOrUpdate(f,m)},p=function(m){return a.handleUnavailable(f,m)},d={discovery:f,handles:[f.onAvailable(h),f.onUpdate(h),f.onUnavailable(p),f.onError(o.handleError)]};o.instances.push(d)},o=this;try{for(var c=zo(r),u=c.next();!u.done;u=c.next()){var l=u.value;s(l)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return a}return t.prototype.release=function(){return DS(this,void 0,void 0,function(){var r,n,i,a,s,o,c,u,l,f;return PS(this,function(h){switch(h.label){case 0:if(!this.destroyed)try{for(r=zo(this.instances),n=r.next();!n.done;n=r.next()){i=n.value;try{for(a=(l=void 0,zo(i.handles)),s=a.next();!s.done;s=a.next())o=s.value,o.unsubscribe()}catch(p){l={error:p}}finally{try{s&&!s.done&&(f=a.return)&&f.call(a)}finally{if(l)throw l.error}}}}catch(p){c={error:p}}finally{try{n&&!n.done&&(u=r.return)&&u.call(r)}finally{if(c)throw c.error}}return[4,e.prototype.destroy.call(this)];case 1:return h.sent(),[2]}})})},t.prototype.destroy=function(){return DS(this,void 0,void 0,function(){var r,n,i,a,s,o;return PS(this,function(c){switch(c.label){case 0:if(this.destroyed)return[3,8];c.label=1;case 1:c.trys.push([1,6,7,8]),r=zo(this.instances),n=r.next(),c.label=2;case 2:return n.done?[3,5]:(i=n.value,[4,i.discovery.destroy()]);case 3:c.sent(),c.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return a=c.sent(),s={error:a},[3,8];case 7:try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 8:return[4,this.release()];case 9:return c.sent(),[2]}})})},t.prototype.handleError=function(r){e.prototype.logAndEmitError.call(this,r)},t.prototype.handleAvailableOrUpdate=function(r,n){var i=this.combinedServiceData.get(n.id);if(i){var a=i.discoveries.indexOf(r);a<0?(i.services.push(n),i.discoveries.push(r)):i.services[a]=n,(a===0||i.discoveries.length===1)&&this.updateService(n)}else i={services:[n],discoveries:[r]},this.combinedServiceData.set(n.id,i),this.updateService(n)},t.prototype.handleUnavailable=function(r,n){var i=this.combinedServiceData.get(n.id);if(i){var a=i.discoveries.indexOf(r);a<0||(i.discoveries.splice(a,1),i.services.splice(a,1),a===0&&(i.discoveries.length===0?(this.removeService(n),this.combinedServiceData.delete(n.id)):this.updateService(i.services[0])))}},t}(dN.BasicServiceDiscovery);Qt.MergedServiceDiscovery=pN});var Er=S(Wo=>{"use strict";function Pi(e){for(var t in e)Wo.hasOwnProperty(t)||(Wo[t]=e[t])}Object.defineProperty(Wo,"__esModule",{value:!0});Pi(CS());Pi(wS());Pi(OS());Pi(RS());Pi(NS());Pi(LS())});var kS=S(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var vN=function(){function e(t){this.data=t,this.previous=this,this.next=this,this.time=Number.MAX_SAFE_INTEGER}return e.prototype.remove=function(){this.previous.next=this.next,this.next.previous=this.previous,this.next=this.previous=this},e.prototype.appendToTail=function(t){var r=t.previous;t.previous=this,r.next=this,this.next=t,this.previous=r},e.prototype.moveToTail=function(t){this.remove(),this.appendToTail(t)},e}();_f.TimerNode=vN});var Yo=S(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var US=kS();function Li(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}var wf=[64,64,32,4,1],ki=[Li(1e3),Li(6e4),Li(36e5),Li(864e5),wf[3]*Li(864e5),wf[3]*Li(864e5)],Qo=ki.slice(0,ki.length-1).map(function(e){return 1+Math.floor(Math.log(e-1)*Math.LOG2E)}),yN=function(){return!1},gN=function(){function e(){this.base=Date.now(),this.layers=wf.map(function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=new US.TimerNode(yN);return r}),this.time=0}return Object.defineProperty(e.prototype,"localTime",{get:function(){return Date.now()-this.base},enumerable:!0,configurable:!0}),e.prototype.findBucket=function(t){var r=this.layers,n=t.time-this.time;if(n<=0)return r[0][0];for(var i=0,a=r.length-1;i<a;i++)if(!(n>=ki[i+1])){var s=t.time>>>Qo[i],o=s&r[i].length-1;return r[i][o]}return r[r.length-1][0]},e.prototype.advance=function(t){var r=this.time,n=t||this.localTime;this.time=n;for(var i=this.layers,a=[],s=0,o=Qo.length;s<o;s++){var c=r>>>Qo[s],u=n>>>Qo[s];if(u<=c)break;var l=i[s],f=void 0,h=void 0;n-r>=ki[s+1]?(f=0,h=l.length-1):(f=c&ki[s]-1,h=u&ki[s]-1);for(var p=f;p<=h;p++){var d=l[p&l.length-1],m=d.next;for(d.previous=d,d.next=d;m!==d;){var E=m.next;if(m.time<=n)this.expireNode(m),a.push(m.data);else{var x=this.findBucket(m);m.moveToTail(x)}m=E}}}return a},e.prototype.schedule=function(t,r){var n=new US.TimerNode(t);return n.time=this.localTime+r,this.scheduleNode(n)},e.prototype.scheduleNode=function(t){var r=this.findBucket(t);t.appendToTail(r);var n=this;return{remove:function(){n.expireNode(t)}}},e.prototype.expireNode=function(t){t.remove()},e}();If.TimerWheel=gN});var qS=S(ka=>{"use strict";var mN=ka&&ka.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ka,"__esModule",{value:!0});var EN=Yo(),SN=function(e){mN(t,e);function t(){var r=e.call(this)||this;return r.items=new Map,r}return t.prototype.unschedule=function(r){var n=this.items.get(r);return n?(n.remove(),this.items.delete(r),!0):!1},t.prototype.expireNode=function(r){this.items.delete(r.data),e.prototype.expireNode.call(this,r)},t.prototype.scheduleNode=function(r){var n=this.items.get(r.data);return n&&n.remove(),this.items.set(r.data,r),e.prototype.scheduleNode.call(this,r)},t}(EN.TimerWheel);ka.ReschedulingTimerWheel=SN});var MS=S(Ua=>{"use strict";var CN=Ua&&Ua.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Ua,"__esModule",{value:!0});var xN=Yo(),bN=function(){function e(){this.timerWheel=new xN.TimerWheel}return e.prototype.advance=function(){var t,r,n=this.timerWheel.advance();try{for(var i=CN(n),a=i.next();!a.done;a=i.next()){var s=a.value;s()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.schedule=function(t,r){return this.timerWheel.schedule(t,r)},e}();Ua.ActionTimerWheel=bN});var Jo=S(Xo=>{"use strict";function Bf(e){for(var t in e)Xo.hasOwnProperty(t)||(Xo[t]=e[t])}Object.defineProperty(Xo,"__esModule",{value:!0});Bf(Yo());Bf(qS());Bf(MS())});var Of=S(Yt=>{"use strict";var TN=Yt&&Yt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AN=Yt&&Yt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(u){try{c(n.next(u))}catch(l){a(l)}}function o(u){try{c(n.throw(u))}catch(l){a(l)}}function c(u){u.done?i(u.value):new r(function(l){l(u.value)}).then(s,o)}c((n=n.apply(e,t||[])).next())})},_N=Yt&&Yt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wN=Yt&&Yt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Yt,"__esModule",{value:!0});var IN=Jo(),BN=Er(),ON=function(e){TN(t,e);function t(r,n){var i=this;if(!n)throw new Error("options must be specified");if(!n.expirationTime||n.expirationTime<=0)throw new Error("expirationTime option is required and needs to be a positive number");return i=e.call(this,r)||this,i.expirationTime=n.expirationTime,i.expirationWheel=new IN.ReschedulingTimerWheel,i.expirationTimer=setInterval(i.removeExpiredServices.bind(i),1e3),i}return t.prototype.updateService=function(r,n){var i=e.prototype.updateService.call(this,r);return this.expirationWheel.schedule(r.id,n||this.expirationTime),i},t.prototype.removeService=function(r){var n=e.prototype.removeService.call(this,r);return n&&this.expirationWheel.unschedule(n.id),n},t.prototype.removeExpiredServices=function(r){var n,i,a=this.expirationWheel.advance(r);try{for(var s=wN(a),o=s.next();!o.done;o=s.next()){var c=o.value;this.removeService(c)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.destroy=function(){return AN(this,void 0,void 0,function(){return _N(this,function(r){switch(r.label){case 0:return clearInterval(this.expirationTimer),this.expirationTimer=void 0,[4,e.prototype.destroy.call(this)];case 1:return r.sent(),[2]}})})},t}(BN.BasicServiceDiscovery);Yt.ExpiringServiceDiscovery=ON});var FS=S(qr=>{"use strict";var RN=qr&&qr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NN=qr&&qr.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(u){try{c(n.next(u))}catch(l){a(l)}}function o(u){try{c(n.throw(u))}catch(l){a(l)}}function c(u){u.done?i(u.value):new r(function(l){l(u.value)}).then(s,o)}c((n=n.apply(e,t||[])).next())})},DN=qr&&qr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(qr,"__esModule",{value:!0});var PN=Of(),LN=function(e){RN(t,e);function t(r,n){var i=e.call(this,r,n)||this,a=n.searchTime;return i.debug("Searching every",a,"ms"),i.searchInterval=setInterval(function(){i.debug("Searching for services");try{i.search()}catch(s){i.logAndEmitError(s,"Caught error during search")}},a),i}return t.prototype.destroy=function(){return NN(this,void 0,void 0,function(){return DN(this,function(r){switch(r.label){case 0:return clearInterval(this.searchInterval),[4,e.prototype.destroy.call(this)];case 1:return r.sent(),[2]}})})},t}(PN.ExpiringServiceDiscovery);qr.TimedServiceDiscovery=LN});var VS=S(qa=>{"use strict";var kN=qa&&qa.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(qa,"__esModule",{value:!0});var UN=Er(),qN=function(e){kN(t,e);function t(r){return r===void 0&&(r="manual"),e.call(this,r)||this}return t.prototype.add=function(r){return this.updateService(r)},t.prototype.remove=function(r){return this.removeService(r)},t.prototype.set=function(r){return this.setServices(r)},t}(UN.BasicServiceDiscovery);qa.ManualDiscovery=qN});var KS=S(Tn=>{"use strict";function Rf(e){for(var t in e)Tn.hasOwnProperty(t)||(Tn[t]=e[t])}Object.defineProperty(Tn,"__esModule",{value:!0});var Zo=Er();Tn.AbstractServiceDiscovery=Zo.AbstractServiceDiscovery;Tn.BasicServiceDiscovery=Zo.BasicServiceDiscovery;Tn.LayeredServiceDiscovery=Zo.LayeredServiceDiscovery;Tn.MergedServiceDiscovery=Zo.MergedServiceDiscovery;Rf(Of());Rf(FS());Rf(VS())});var HS=S(Ma=>{"use strict";var MN=Ma&&Ma.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ma,"__esModule",{value:!0});var FN=MN(jo()),VN=Na(),KN=function(){function e(t){this.debug=FN.default("th:discovery:publisher:"+t),this.errorEvent=new VN.Event(this)}return Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.logAndEmitError=function(t,r){r===void 0&&(r="An error occurred:"),this.debug(r,t),this.errorEvent.emit(t)},e}();Ma.AbstractServicePublisher=KN});var jS=S(eu=>{"use strict";function HN(e){for(var t in e)eu.hasOwnProperty(t)||(eu[t]=e[t])}Object.defineProperty(eu,"__esModule",{value:!0});HN(HS())});var zS=S((Yk,GS)=>{"use strict";var $S="[a-fA-F\\d:]",An=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${$S})|(?<=${$S})(?=\\s|$))`:"",Xt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Pe="[a-fA-F\\d]{1,4}",tu=`
(?:
(?:${Pe}:){7}(?:${Pe}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Pe}:){6}(?:${Xt}|:${Pe}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Pe}:){5}(?::${Xt}|(?::${Pe}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Pe}:){4}(?:(?::${Pe}){0,1}:${Xt}|(?::${Pe}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Pe}:){3}(?:(?::${Pe}){0,2}:${Xt}|(?::${Pe}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Pe}:){2}(?:(?::${Pe}){0,3}:${Xt}|(?::${Pe}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Pe}:){1}(?:(?::${Pe}){0,4}:${Xt}|(?::${Pe}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Pe}){0,5}:${Xt}|(?::${Pe}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),jN=new RegExp(`(?:^${Xt}$)|(?:^${tu}$)`),$N=new RegExp(`^${Xt}$`),GN=new RegExp(`^${tu}$`),Nf=e=>e&&e.exact?jN:new RegExp(`(?:${An(e)}${Xt}${An(e)})|(?:${An(e)}${tu}${An(e)})`,"g");Nf.v4=e=>e&&e.exact?$N:new RegExp(`${An(e)}${Xt}${An(e)}`,"g");Nf.v6=e=>e&&e.exact?GN:new RegExp(`${An(e)}${tu}${An(e)}`,"g");GS.exports=Nf});var QS=S(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var zN=zS(),WS=zN.v6({exact:!0}),WN=function(){function e(t,r){this.host=t,this.port=r}return Object.defineProperty(e.prototype,"hasPort",{get:function(){return this.port>=0},enumerable:!0,configurable:!0}),e.fromString=function(t){if(t=t.trim(),t[0]==="["){var r=t.lastIndexOf("]");if(r<=0)return null;var n=t.substring(1,r);if(!WS.test(n))return null;if(t.length===r+1)return new e(n,0);if(t[r+1]===":"){var i=t.substring(r+2),a=parseInt(i,10);return new e(n,a)}else return null}else{var s=t.lastIndexOf(":"),o=t.indexOf(":")!==s;if(o)return WS.test(t)?new e(t,0):null;var n=s>=0?t.substring(0,s):t,a=0;if(s>=0){var i=t.substring(s+1);a=parseInt(i,10)}return new e(n,a)}},e.compare=function(t,r){return t.host<r.host?-1:t.host>r.host?1:t.port<r.port?-1:t.port===r.port?0:1},e}();Df.HostAndPort=WN});var YS=S(ru=>{"use strict";function QN(e){for(var t in e)ru.hasOwnProperty(t)||(ru[t]=e[t])}Object.defineProperty(ru,"__esModule",{value:!0});QN(QS())});var Pf=S(nu=>{"use strict";function iu(e){for(var t in e)nu.hasOwnProperty(t)||(nu[t]=e[t])}Object.defineProperty(nu,"__esModule",{value:!0});iu(Cf());iu(KS());iu(jS());iu(YS())});var Lf=S(_n=>{var YN=function(e){return"_"+e},XN=function(e){return e};_n.stringify=function(e){return typeof e=="object"&&e&&e.name?_n.stringify(e.name,e.protocol,e.subtypes):Array.prototype.concat.apply([],arguments).filter(XN).map(YN).join(".")};_n.parse=function(e){for(var t=e.split("."),r=0;r<t.length;r++)t[r][0]==="_"&&(t[r]=t[r].slice(1));return{name:t.shift(),protocol:t.shift()||null,subtypes:t}};_n.tcp=function(e){return _n.stringify(e,"tcp",Array.prototype.concat.apply([],Array.prototype.slice.call(arguments,1)))};_n.udp=function(e){return _n.stringify(e,"udp",Array.prototype.concat.apply([],Array.prototype.slice.call(arguments,1)))}});var XS=S(kf=>{"use strict";kf.toString=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e};kf.toType=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}});var JS=S(Uf=>{"use strict";Uf.toString=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e};Uf.toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}});var ZS=S(qf=>{"use strict";qf.toString=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e};qf.toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}});var eC=S(Mf=>{"use strict";Mf.toString=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e};Mf.toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}});var tC=S(Ff=>{"use strict";Ff.toString=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:`OPTION_${e}`};Ff.toCode=function(e){if(typeof e=="number")return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let t=e.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}});var iC=S((nC,Vf)=>{var rC=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=f,e.encode=l,e.familyOf=u,e.name=void 0,e.sizeOf=c,e.v6=e.v4=void 0;let t=/^(\d{1,3}\.){3,3}\d{1,3}$/,r=4,n=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,i=16,a={name:"v4",size:r,isFormat:h=>t.test(h),encode(h,p,d){d=~~d,p=p||new Uint8Array(d+r);let m=h.length,E=0;for(let x=0;x<m;){let _=h.charCodeAt(x++);_===46?(p[d++]=E,E=0):E=E*10+(_-48)}return p[d]=E,p},decode(h,p){return p=~~p,`${h[p++]}.${h[p++]}.${h[p++]}.${h[p]}`}};e.v4=a;let s={name:"v6",size:i,isFormat:h=>h.length>0&&n.test(h),encode(h,p,d){d=~~d;let m=d+i,E=-1,x=0,_=0,w=!0,R=!1;p=p||new Uint8Array(d+i);for(let O=0;O<h.length;O++){let B=h.charCodeAt(O);B===58?(w?E!==-1?(d<m&&(p[d]=0),d<m-1&&(p[d+1]=0),d+=2):d<m&&(E=d):(R===!0?(d<m&&(p[d]=_),d++):(d<m&&(p[d]=x>>8),d<m-1&&(p[d+1]=x&255),d+=2),x=0,_=0),w=!0,R=!1):B===46?(d<m&&(p[d]=_),d++,_=0,x=0,w=!1,R=!0):(w=!1,B>=97?B-=87:B>=65?B-=55:(B-=48,_=_*10+B),x=(x<<4)+B)}if(w===!1)R===!0?(d<m&&(p[d]=_),d++):(d<m&&(p[d]=x>>8),d<m-1&&(p[d+1]=x&255),d+=2);else if(E===0)d<m&&(p[d]=0),d<m-1&&(p[d+1]=0),d+=2;else if(E!==-1){d+=2;for(let O=Math.min(d-1,m-1);O>=E+2;O--)p[O]=p[O-2];p[E]=0,p[E+1]=0,E=d}if(E!==d&&E!==-1)for(d>m-2&&(d=m-2);m>E;)p[--m]=d<m&&d>E?p[--d]:0;else for(;d<m;)p[d++]=0;return p},decode(h,p){p=~~p;let d="";for(let m=0;m<i;m+=2)m!==0&&(d+=":"),d+=(h[p+m]<<8|h[p+m+1]).toString(16);return d.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};e.v6=s;let o="ip";e.name=o;function c(h){if(a.isFormat(h))return a.size;if(s.isFormat(h))return s.size;throw Error(`Invalid ip address: ${h}`)}function u(h){return c(h)===a.size?1:2}function l(h,p,d){d=~~d;let m=c(h);return typeof p=="function"&&(p=p(d+m)),m===a.size?a.encode(h,p,d):s.encode(h,p,d)}function f(h,p,d){if(p=~~p,d=d||h.length-p,d===a.size)return a.decode(h,p,d);if(d===s.size)return s.decode(h,p,d);throw Error(`Invalid buffer size needs to be ${a.size} for v4 or ${s.size} for v6.`)}return"default"in e?e.default:e}({});typeof define=="function"&&define.amd?define([],function(){return rC}):typeof Vf=="object"&&typeof nC=="object"&&(Vf.exports=rC)});var oC=S(j=>{"use strict";var $=require("buffer").Buffer,Wr=XS(),JN=JS(),ZN=ZS(),su=eC(),Kf=tC(),Qn=iC(),e3=0,aC=32768,Hf=32768,t3=~Hf,sC=32768,r3=~sC,M=j.name={};M.encode=function(e,t,r,{mail:n=!1}={}){t||(t=$.alloc(M.encodingLength(e))),r||(r=0);let i=r,a=e.replace(/^\.|\.$/gm,"");if(a.length){let s=[];if(n){let o="";a.split(".").forEach(c=>{c.endsWith("\\")?o+=(o.length?".":"")+c.slice(0,-1):s.length===0&&o.length?s.push(o+"."+c):s.push(c)})}else s=a.split(".");for(let o=0;o<s.length;o++){let c=t.write(s[o],r+1);t[r]=c,r+=c+1}}return t[r++]=0,M.encode.bytes=r-i,t};M.encode.bytes=0;M.decode=function(e,t,{mail:r=!1}={}){t||(t=0);let n=[],i=t,a=0,s=0,o=!1;for(;;){if(t>=e.length)throw new Error("Cannot decode name (buffer overflow)");let c=e[t++];if(s+=o?0:1,c===0)break;if(c&192)if((c&192)===192){if(t+1>e.length)throw new Error("Cannot decode name (buffer overflow)");let u=e.readUInt16BE(t-1)-49152;if(u>=i)throw new Error("Cannot decode name (bad pointer)");t=u,i=u,s+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(t+c>e.length)throw new Error("Cannot decode name (buffer overflow)");if(a+=c+1,a>254)throw new Error("Cannot decode name (name too long)");let u=e.toString("utf-8",t,t+c);r&&(u=u.replace(/\./g,"\\.")),n.push(u),t+=c,s+=o?0:c}}return M.decode.bytes=s,n.length===0?".":n.join(".")};M.decode.bytes=0;M.encodingLength=function(e){return e==="."||e===".."?1:$.byteLength(e.replace(/^\.|\.$/gm,""))+2};var te={};te.encode=function(e,t,r){t||(t=$.alloc(te.encodingLength(e))),r||(r=0);let n=t.write(e,r+1);return t[r]=n,te.encode.bytes=n+1,t};te.encode.bytes=0;te.decode=function(e,t){t||(t=0);let r=e[t],n=e.toString("utf-8",t+1,t+1+r);return te.decode.bytes=r+1,n};te.decode.bytes=0;te.encodingLength=function(e){return $.byteLength(e)+1};var er={};er.encode=function(e,t,r){t||(t=er.encodingLength(e)),r||(r=0);let n=(e.flags||0)&32767,i=e.type==="response"?aC:e3;return t.writeUInt16BE(e.id||0,r),t.writeUInt16BE(n|i,r+2),t.writeUInt16BE(e.questions.length,r+4),t.writeUInt16BE(e.answers.length,r+6),t.writeUInt16BE(e.authorities.length,r+8),t.writeUInt16BE(e.additionals.length,r+10),t};er.encode.bytes=12;er.decode=function(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");let r=e.readUInt16BE(t+2);return{id:e.readUInt16BE(t),type:r&aC?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:ZN.toString(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:JN.toString(r&15),questions:new Array(e.readUInt16BE(t+4)),answers:new Array(e.readUInt16BE(t+6)),authorities:new Array(e.readUInt16BE(t+8)),additionals:new Array(e.readUInt16BE(t+10))}};er.decode.bytes=12;er.encodingLength=function(){return 12};var Mr=j.unknown={};Mr.encode=function(e,t,r){return t||(t=$.alloc(Mr.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.length,r),e.copy(t,r+2),Mr.encode.bytes=e.length+2,t};Mr.encode.bytes=0;Mr.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n=e.slice(t+2,t+2+r);return Mr.decode.bytes=r+2,n};Mr.decode.bytes=0;Mr.encodingLength=function(e){return e.length+2};var Fr=j.ns={};Fr.encode=function(e,t,r){return t||(t=$.alloc(Fr.encodingLength(e))),r||(r=0),M.encode(e,t,r+2),t.writeUInt16BE(M.encode.bytes,r),Fr.encode.bytes=M.encode.bytes+2,t};Fr.encode.bytes=0;Fr.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n=M.decode(e,t+2);return Fr.decode.bytes=r+2,n};Fr.decode.bytes=0;Fr.encodingLength=function(e){return M.encodingLength(e)+2};var Vr=j.soa={};Vr.encode=function(e,t,r){t||(t=$.alloc(Vr.encodingLength(e))),r||(r=0);let n=r;return r+=2,M.encode(e.mname,t,r),r+=M.encode.bytes,M.encode(e.rname,t,r,{mail:!0}),r+=M.encode.bytes,t.writeUInt32BE(e.serial||0,r),r+=4,t.writeUInt32BE(e.refresh||0,r),r+=4,t.writeUInt32BE(e.retry||0,r),r+=4,t.writeUInt32BE(e.expire||0,r),r+=4,t.writeUInt32BE(e.minimum||0,r),r+=4,t.writeUInt16BE(r-n-2,n),Vr.encode.bytes=r-n,t};Vr.encode.bytes=0;Vr.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.mname=M.decode(e,t),t+=M.decode.bytes,n.rname=M.decode(e,t,{mail:!0}),t+=M.decode.bytes,n.serial=e.readUInt32BE(t),t+=4,n.refresh=e.readUInt32BE(t),t+=4,n.retry=e.readUInt32BE(t),t+=4,n.expire=e.readUInt32BE(t),t+=4,n.minimum=e.readUInt32BE(t),t+=4,Vr.decode.bytes=t-r,n};Vr.decode.bytes=0;Vr.encodingLength=function(e){return 22+M.encodingLength(e.mname)+M.encodingLength(e.rname)};var Kr=j.txt={};Kr.encode=function(e,t,r){Array.isArray(e)||(e=[e]);for(let i=0;i<e.length;i++)if(typeof e[i]=="string"&&(e[i]=$.from(e[i])),!$.isBuffer(e[i]))throw new Error("Must be a Buffer");t||(t=$.alloc(Kr.encodingLength(e))),r||(r=0);let n=r;return r+=2,e.forEach(function(i){t[r++]=i.length,i.copy(t,r,0,i.length),r+=i.length}),t.writeUInt16BE(r-n-2,n),Kr.encode.bytes=r-n,t};Kr.encode.bytes=0;Kr.decode=function(e,t){t||(t=0);let r=t,n=e.readUInt16BE(t);t+=2;let i=[];for(;n>0;){let a=e[t++];if(--n,n<a)throw new Error("Buffer overflow");i.push(e.slice(t,t+a)),t+=a,n-=a}return Kr.decode.bytes=t-r,i};Kr.decode.bytes=0;Kr.encodingLength=function(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach(function(r){typeof r=="string"?t+=$.byteLength(r)+1:t+=r.length+1}),t};var Hr=j.null={};Hr.encode=function(e,t,r){t||(t=$.alloc(Hr.encodingLength(e))),r||(r=0),typeof e=="string"&&(e=$.from(e)),e||(e=$.alloc(0));let n=r;r+=2;let i=e.length;return e.copy(t,r,0,i),r+=i,t.writeUInt16BE(r-n-2,n),Hr.encode.bytes=r-n,t};Hr.encode.bytes=0;Hr.decode=function(e,t){t||(t=0);let r=t,n=e.readUInt16BE(t);t+=2;let i=e.slice(t,t+n);return t+=n,Hr.decode.bytes=t-r,i};Hr.decode.bytes=0;Hr.encodingLength=function(e){return e?($.isBuffer(e)?e.length:$.byteLength(e))+2:2};var jr=j.hinfo={};jr.encode=function(e,t,r){t||(t=$.alloc(jr.encodingLength(e))),r||(r=0);let n=r;return r+=2,te.encode(e.cpu,t,r),r+=te.encode.bytes,te.encode(e.os,t,r),r+=te.encode.bytes,t.writeUInt16BE(r-n-2,n),jr.encode.bytes=r-n,t};jr.encode.bytes=0;jr.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.cpu=te.decode(e,t),t+=te.decode.bytes,n.os=te.decode(e,t),t+=te.decode.bytes,jr.decode.bytes=t-r,n};jr.decode.bytes=0;jr.encodingLength=function(e){return te.encodingLength(e.cpu)+te.encodingLength(e.os)+2};var Jt=j.ptr={},n3=j.cname=Jt,i3=j.dname=Jt;Jt.encode=function(e,t,r){return t||(t=$.alloc(Jt.encodingLength(e))),r||(r=0),M.encode(e,t,r+2),t.writeUInt16BE(M.encode.bytes,r),Jt.encode.bytes=M.encode.bytes+2,t};Jt.encode.bytes=0;Jt.decode=function(e,t){t||(t=0);let r=M.decode(e,t+2);return Jt.decode.bytes=M.decode.bytes+2,r};Jt.decode.bytes=0;Jt.encodingLength=function(e){return M.encodingLength(e)+2};var $r=j.srv={};$r.encode=function(e,t,r){t||(t=$.alloc($r.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.priority||0,r+2),t.writeUInt16BE(e.weight||0,r+4),t.writeUInt16BE(e.port||0,r+6),M.encode(e.target,t,r+8);let n=M.encode.bytes+6;return t.writeUInt16BE(n,r),$r.encode.bytes=n+2,t};$r.encode.bytes=0;$r.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n={};return n.priority=e.readUInt16BE(t+2),n.weight=e.readUInt16BE(t+4),n.port=e.readUInt16BE(t+6),n.target=M.decode(e,t+8),$r.decode.bytes=r+2,n};$r.decode.bytes=0;$r.encodingLength=function(e){return 8+M.encodingLength(e.target)};var Bt=j.caa={};Bt.ISSUER_CRITICAL=128;Bt.encode=function(e,t,r){let n=Bt.encodingLength(e);return t||(t=$.alloc(Bt.encodingLength(e))),r||(r=0),e.issuerCritical&&(e.flags=Bt.ISSUER_CRITICAL),t.writeUInt16BE(n-2,r),r+=2,t.writeUInt8(e.flags||0,r),r+=1,te.encode(e.tag,t,r),r+=te.encode.bytes,t.write(e.value,r),r+=$.byteLength(e.value),Bt.encode.bytes=n,t};Bt.encode.bytes=0;Bt.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t);t+=2;let n=t,i={};return i.flags=e.readUInt8(t),t+=1,i.tag=te.decode(e,t),t+=te.decode.bytes,i.value=e.toString("utf-8",t,n+r),i.issuerCritical=!!(i.flags&Bt.ISSUER_CRITICAL),Bt.decode.bytes=r+2,i};Bt.decode.bytes=0;Bt.encodingLength=function(e){return te.encodingLength(e.tag)+te.encodingLength(e.value)+2};var wn=j.mx={};wn.encode=function(e,t,r){t||(t=$.alloc(wn.encodingLength(e))),r||(r=0);let n=r;return r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,M.encode(e.exchange,t,r),r+=M.encode.bytes,t.writeUInt16BE(r-n-2,n),wn.encode.bytes=r-n,t};wn.encode.bytes=0;wn.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.preference=e.readUInt16BE(t),t+=2,n.exchange=M.decode(e,t),t+=M.decode.bytes,wn.decode.bytes=t-r,n};wn.encodingLength=function(e){return 4+M.encodingLength(e.exchange)};var Gr=j.a={};Gr.encode=function(e,t,r){return t||(t=$.alloc(Gr.encodingLength(e))),r||(r=0),t.writeUInt16BE(4,r),r+=2,Qn.v4.encode(e,t,r),Gr.encode.bytes=6,t};Gr.encode.bytes=0;Gr.decode=function(e,t){t||(t=0),t+=2;let r=Qn.v4.decode(e,t);return Gr.decode.bytes=6,r};Gr.decode.bytes=0;Gr.encodingLength=function(){return 6};var zr=j.aaaa={};zr.encode=function(e,t,r){return t||(t=$.alloc(zr.encodingLength(e))),r||(r=0),t.writeUInt16BE(16,r),r+=2,Qn.v6.encode(e,t,r),zr.encode.bytes=18,t};zr.encode.bytes=0;zr.decode=function(e,t){t||(t=0),t+=2;let r=Qn.v6.decode(e,t);return zr.decode.bytes=18,r};zr.decode.bytes=0;zr.encodingLength=function(){return 18};var Tt=j.option={};Tt.encode=function(e,t,r){t||(t=$.alloc(Tt.encodingLength(e))),r||(r=0);let n=r,i=Kf.toCode(e.code);if(t.writeUInt16BE(i,r),r+=2,e.data)t.writeUInt16BE(e.data.length,r),r+=2,e.data.copy(t,r),r+=e.data.length;else switch(i){case 8:let a=e.sourcePrefixLength||0,s=e.family||Qn.familyOf(e.ip),o=Qn.encode(e.ip,$.alloc),c=Math.ceil(a/8);t.writeUInt16BE(c+4,r),r+=2,t.writeUInt16BE(s,r),r+=2,t.writeUInt8(a,r++),t.writeUInt8(e.scopePrefixLength||0,r++),o.copy(t,r,0,c),r+=c;break;case 11:e.timeout?(t.writeUInt16BE(2,r),r+=2,t.writeUInt16BE(e.timeout,r),r+=2):(t.writeUInt16BE(0,r),r+=2);break;case 12:let u=e.length||0;t.writeUInt16BE(u,r),r+=2,t.fill(0,r,r+u),r+=u;break;case 14:let l=e.tags.length*2;t.writeUInt16BE(l,r),r+=2;for(let f of e.tags)t.writeUInt16BE(f,r),r+=2;break;default:throw new Error(`Unknown roption code: ${e.code}`)}return Tt.encode.bytes=r-n,t};Tt.encode.bytes=0;Tt.decode=function(e,t){t||(t=0);let r={};r.code=e.readUInt16BE(t),r.type=Kf.toString(r.code),t+=2;let n=e.readUInt16BE(t);switch(t+=2,r.data=e.slice(t,t+n),r.code){case 8:r.family=e.readUInt16BE(t),t+=2,r.sourcePrefixLength=e.readUInt8(t++),r.scopePrefixLength=e.readUInt8(t++);let i=$.alloc(r.family===1?4:16);e.copy(i,0,t,t+n-4),r.ip=Qn.decode(i);break;case 11:n>0&&(r.timeout=e.readUInt16BE(t),t+=2);break;case 14:r.tags=[];for(let a=0;a<n;a+=2)r.tags.push(e.readUInt16BE(t)),t+=2}return Tt.decode.bytes=n+4,r};Tt.decode.bytes=0;Tt.encodingLength=function(e){if(e.data)return e.data.length+4;switch(Kf.toCode(e.code)){case 8:let r=e.sourcePrefixLength||0;return Math.ceil(r/8)+8;case 11:return typeof e.timeout=="number"?6:4;case 12:return e.length+4;case 14:return 4+e.tags.length*2}throw new Error(`Unknown roption code: ${e.code}`)};var Rt=j.opt={};Rt.encode=function(e,t,r){t||(t=$.alloc(Rt.encodingLength(e))),r||(r=0);let n=r,i=Ui(e,Tt);return t.writeUInt16BE(i,r),r=Fa(e,Tt,t,r+2),Rt.encode.bytes=r-n,t};Rt.encode.bytes=0;Rt.decode=function(e,t){t||(t=0);let r=t,n=[],i=e.readUInt16BE(t);t+=2;let a=0;for(;i>0;)n[a++]=Tt.decode(e,t),t+=Tt.decode.bytes,i-=Tt.decode.bytes;return Rt.decode.bytes=t-r,n};Rt.decode.bytes=0;Rt.encodingLength=function(e){return 2+Ui(e||[],Tt)};var mt=j.dnskey={};mt.PROTOCOL_DNSSEC=3;mt.ZONE_KEY=128;mt.SECURE_ENTRYPOINT=32768;mt.encode=function(e,t,r){t||(t=$.alloc(mt.encodingLength(e))),r||(r=0);let n=r,i=e.key;if(!$.isBuffer(i))throw new Error("Key must be a Buffer");return r+=2,t.writeUInt16BE(e.flags,r),r+=2,t.writeUInt8(mt.PROTOCOL_DNSSEC,r),r+=1,t.writeUInt8(e.algorithm,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,mt.encode.bytes=r-n,t.writeUInt16BE(mt.encode.bytes-2,n),t};mt.encode.bytes=0;mt.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);if(t+=2,n.flags=e.readUInt16BE(t),t+=2,e.readUInt8(t)!==mt.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return t+=1,n.algorithm=e.readUInt8(t),t+=1,n.key=e.slice(t,r+i+2),t+=n.key.length,mt.decode.bytes=t-r,n};mt.decode.bytes=0;mt.encodingLength=function(e){return 6+$.byteLength(e.key)};var Sr=j.rrsig={};Sr.encode=function(e,t,r){t||(t=$.alloc(Sr.encodingLength(e))),r||(r=0);let n=r,i=e.signature;if(!$.isBuffer(i))throw new Error("Signature must be a Buffer");return r+=2,t.writeUInt16BE(Wr.toType(e.typeCovered),r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.labels,r),r+=1,t.writeUInt32BE(e.originalTTL,r),r+=4,t.writeUInt32BE(e.expiration,r),r+=4,t.writeUInt32BE(e.inception,r),r+=4,t.writeUInt16BE(e.keyTag,r),r+=2,M.encode(e.signersName,t,r),r+=M.encode.bytes,i.copy(t,r,0,i.length),r+=i.length,Sr.encode.bytes=r-n,t.writeUInt16BE(Sr.encode.bytes-2,n),t};Sr.encode.bytes=0;Sr.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.typeCovered=Wr.toString(e.readUInt16BE(t)),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.labels=e.readUInt8(t),t+=1,n.originalTTL=e.readUInt32BE(t),t+=4,n.expiration=e.readUInt32BE(t),t+=4,n.inception=e.readUInt32BE(t),t+=4,n.keyTag=e.readUInt16BE(t),t+=2,n.signersName=M.decode(e,t),t+=M.decode.bytes,n.signature=e.slice(t,r+i+2),t+=n.signature.length,Sr.decode.bytes=t-r,n};Sr.decode.bytes=0;Sr.encodingLength=function(e){return 20+M.encodingLength(e.signersName)+$.byteLength(e.signature)};var Cr=j.rp={};Cr.encode=function(e,t,r){t||(t=$.alloc(Cr.encodingLength(e))),r||(r=0);let n=r;return r+=2,M.encode(e.mbox||".",t,r,{mail:!0}),r+=M.encode.bytes,M.encode(e.txt||".",t,r),r+=M.encode.bytes,Cr.encode.bytes=r-n,t.writeUInt16BE(Cr.encode.bytes-2,n),t};Cr.encode.bytes=0;Cr.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.mbox=M.decode(e,t,{mail:!0})||".",t+=M.decode.bytes,n.txt=M.decode(e,t)||".",t+=M.decode.bytes,Cr.decode.bytes=t-r,n};Cr.decode.bytes=0;Cr.encodingLength=function(e){return 2+M.encodingLength(e.mbox||".")+M.encodingLength(e.txt||".")};var je={};je.encode=function(e,t,r){t||(t=$.alloc(je.encodingLength(e))),r||(r=0);let n=r;for(var i=[],a=0;a<e.length;a++){var s=Wr.toType(e[a]);i[s>>8]===void 0&&(i[s>>8]=[]),i[s>>8][s>>3&31]|=1<<7-(s&7)}for(a=0;a<i.length;a++)if(i[a]!==void 0){var o=$.from(i[a]);t.writeUInt8(a,r),r+=1,t.writeUInt8(o.length,r),r+=1,o.copy(t,r),r+=o.length}return je.encode.bytes=r-n,t};je.encode.bytes=0;je.decode=function(e,t,r){t||(t=0);let n=t;for(var i=[];t-n<r;){var a=e.readUInt8(t);t+=1;var s=e.readUInt8(t);t+=1;for(var o=0;o<s;o++)for(var c=e.readUInt8(t+o),u=0;u<8;u++)if(c&1<<7-u){var l=Wr.toString(a<<8|o<<3|u);i.push(l)}t+=s}return je.decode.bytes=t-n,i};je.decode.bytes=0;je.encodingLength=function(e){for(var t=[],r=0;r<e.length;r++){var n=Wr.toType(e[r]);t[n>>8]=Math.max(t[n>>8]||0,n&255)}var i=0;for(r=0;r<t.length;r++)t[r]!==void 0&&(i+=2+Math.ceil((t[r]+1)/8));return i};var xr=j.nsec={};xr.encode=function(e,t,r){t||(t=$.alloc(xr.encodingLength(e))),r||(r=0);let n=r;return r+=2,M.encode(e.nextDomain,t,r),r+=M.encode.bytes,je.encode(e.rrtypes,t,r),r+=je.encode.bytes,xr.encode.bytes=r-n,t.writeUInt16BE(xr.encode.bytes-2,n),t};xr.encode.bytes=0;xr.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.nextDomain=M.decode(e,t),t+=M.decode.bytes,n.rrtypes=je.decode(e,t,i-(t-r)),t+=je.decode.bytes,xr.decode.bytes=t-r,n};xr.decode.bytes=0;xr.encodingLength=function(e){return 2+M.encodingLength(e.nextDomain)+je.encodingLength(e.rrtypes)};var br=j.nsec3={};br.encode=function(e,t,r){t||(t=$.alloc(br.encodingLength(e))),r||(r=0);let n=r,i=e.salt;if(!$.isBuffer(i))throw new Error("salt must be a Buffer");let a=e.nextDomain;if(!$.isBuffer(a))throw new Error("nextDomain must be a Buffer");return r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.flags,r),r+=1,t.writeUInt16BE(e.iterations,r),r+=2,t.writeUInt8(i.length,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,t.writeUInt8(a.length,r),r+=1,a.copy(t,r,0,a.length),r+=a.length,je.encode(e.rrtypes,t,r),r+=je.encode.bytes,br.encode.bytes=r-n,t.writeUInt16BE(br.encode.bytes-2,n),t};br.encode.bytes=0;br.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);t+=2,n.algorithm=e.readUInt8(t),t+=1,n.flags=e.readUInt8(t),t+=1,n.iterations=e.readUInt16BE(t),t+=2;let a=e.readUInt8(t);t+=1,n.salt=e.slice(t,t+a),t+=a;let s=e.readUInt8(t);return t+=1,n.nextDomain=e.slice(t,t+s),t+=s,n.rrtypes=je.decode(e,t,i-(t-r)),t+=je.decode.bytes,br.decode.bytes=t-r,n};br.decode.bytes=0;br.encodingLength=function(e){return 8+e.salt.length+e.nextDomain.length+je.encodingLength(e.rrtypes)};var Tr=j.ds={};Tr.encode=function(e,t,r){t||(t=$.alloc(Tr.encodingLength(e))),r||(r=0);let n=r,i=e.digest;if(!$.isBuffer(i))throw new Error("Digest must be a Buffer");return r+=2,t.writeUInt16BE(e.keyTag,r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.digestType,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,Tr.encode.bytes=r-n,t.writeUInt16BE(Tr.encode.bytes-2,n),t};Tr.encode.bytes=0;Tr.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.keyTag=e.readUInt16BE(t),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.digestType=e.readUInt8(t),t+=1,n.digest=e.slice(t,r+i+2),t+=n.digest.length,Tr.decode.bytes=t-r,n};Tr.decode.bytes=0;Tr.encodingLength=function(e){return 6+$.byteLength(e.digest)};var Ot=j.sshfp={};Ot.getFingerprintLengthForHashType=function(t){switch(t){case 1:return 20;case 2:return 32}};Ot.encode=function(t,r,n){r||(r=$.alloc(Ot.encodingLength(t))),n||(n=0);let i=n;n+=2,r[n]=t.algorithm,n+=1,r[n]=t.hash,n+=1;let a=$.from(t.fingerprint.toUpperCase(),"hex");if(a.length!==Ot.getFingerprintLengthForHashType(t.hash))throw new Error("Invalid fingerprint length");return a.copy(r,n),n+=a.byteLength,Ot.encode.bytes=n-i,r.writeUInt16BE(Ot.encode.bytes-2,i),r};Ot.encode.bytes=0;Ot.decode=function(t,r){r||(r=0);let n=r,i={};r+=2,i.algorithm=t[r],r+=1,i.hash=t[r],r+=1;let a=Ot.getFingerprintLengthForHashType(i.hash);return i.fingerprint=t.slice(r,r+a).toString("hex").toUpperCase(),r+=a,Ot.decode.bytes=r-n,i};Ot.decode.bytes=0;Ot.encodingLength=function(e){return 4+$.from(e.fingerprint,"hex").byteLength};var Ar=j.naptr={};Ar.encode=function(e,t,r){t||(t=$.alloc(Ar.encodingLength(e))),r||(r=0);let n=r;return r+=2,t.writeUInt16BE(e.order||0,r),r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,te.encode(e.flags,t,r),r+=te.encode.bytes,te.encode(e.services,t,r),r+=te.encode.bytes,te.encode(e.regexp,t,r),r+=te.encode.bytes,M.encode(e.replacement,t,r),r+=M.encode.bytes,Ar.encode.bytes=r-n,t.writeUInt16BE(Ar.encode.bytes-2,n),t};Ar.encode.bytes=0;Ar.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.order=e.readUInt16BE(t),t+=2,n.preference=e.readUInt16BE(t),t+=2,n.flags=te.decode(e,t),t+=te.decode.bytes,n.services=te.decode(e,t),t+=te.decode.bytes,n.regexp=te.decode(e,t),t+=te.decode.bytes,n.replacement=M.decode(e,t),t+=M.decode.bytes,Ar.decode.bytes=t-r,n};Ar.decode.bytes=0;Ar.encodingLength=function(e){return te.encodingLength(e.flags)+te.encodingLength(e.services)+te.encodingLength(e.regexp)+M.encodingLength(e.replacement)+6};var _r=j.tlsa={};_r.encode=function(e,t,r){t||(t=$.alloc(_r.encodingLength(e))),r||(r=0);let n=r,i=e.certificate;if(!$.isBuffer(i))throw new Error("Certificate must be a Buffer");return r+=2,t.writeUInt8(e.usage,r),r+=1,t.writeUInt8(e.selector,r),r+=1,t.writeUInt8(e.matchingType,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,_r.encode.bytes=r-n,t.writeUInt16BE(_r.encode.bytes-2,n),t};_r.encode.bytes=0;_r.decode=function(e,t){t||(t=0);let r=t,n={},i=e.readUInt16BE(t);return t+=2,n.usage=e.readUInt8(t),t+=1,n.selector=e.readUInt8(t),t+=1,n.matchingType=e.readUInt8(t),t+=1,n.certificate=e.slice(t,r+i+2),t+=n.certificate.length,_r.decode.bytes=t-r,n};_r.decode.bytes=0;_r.encodingLength=function(e){return 5+$.byteLength(e.certificate)};var jf=j.record=function(e){switch(e.toUpperCase()){case"A":return Gr;case"PTR":return Jt;case"CNAME":return n3;case"DNAME":return i3;case"TXT":return Kr;case"NULL":return Hr;case"AAAA":return zr;case"SRV":return $r;case"HINFO":return jr;case"CAA":return Bt;case"NS":return Fr;case"SOA":return Vr;case"MX":return wn;case"OPT":return Rt;case"DNSKEY":return mt;case"RRSIG":return Sr;case"RP":return Cr;case"NSEC":return xr;case"NSEC3":return br;case"SSHFP":return Ot;case"DS":return Tr;case"NAPTR":return Ar;case"TLSA":return _r}return Mr},Je=j.answer={};Je.encode=function(e,t,r){t||(t=$.alloc(Je.encodingLength(e))),r||(r=0);let n=r;if(M.encode(e.name,t,r),r+=M.encode.bytes,t.writeUInt16BE(Wr.toType(e.type),r),e.type.toUpperCase()==="OPT"){if(e.name!==".")throw new Error("OPT name must be root.");t.writeUInt16BE(e.udpPayloadSize||4096,r+2),t.writeUInt8(e.extendedRcode||0,r+4),t.writeUInt8(e.ednsVersion||0,r+5),t.writeUInt16BE(e.flags||0,r+6),r+=8,Rt.encode(e.options||[],t,r),r+=Rt.encode.bytes}else{let i=su.toClass(e.class===void 0?"IN":e.class);e.flush&&(i|=Hf),t.writeUInt16BE(i,r+2),t.writeUInt32BE(e.ttl||0,r+4),r+=8;let a=jf(e.type);a.encode(e.data,t,r),r+=a.encode.bytes}return Je.encode.bytes=r-n,t};Je.encode.bytes=0;Je.decode=function(e,t){t||(t=0);let r={},n=t;if(r.name=M.decode(e,t),t+=M.decode.bytes,r.type=Wr.toString(e.readUInt16BE(t)),r.type==="OPT")r.udpPayloadSize=e.readUInt16BE(t+2),r.extendedRcode=e.readUInt8(t+4),r.ednsVersion=e.readUInt8(t+5),r.flags=e.readUInt16BE(t+6),r.flag_do=(r.flags>>15&1)===1,r.options=Rt.decode(e,t+8),t+=8+Rt.decode.bytes;else{let i=e.readUInt16BE(t+2);r.ttl=e.readUInt32BE(t+4),r.class=su.toString(i&t3),r.flush=!!(i&Hf);let a=jf(r.type);r.data=a.decode(e,t+8),t+=8+a.decode.bytes}return Je.decode.bytes=t-n,r};Je.decode.bytes=0;Je.encodingLength=function(e){let t=e.data!==null&&e.data!==void 0?e.data:e.options;return M.encodingLength(e.name)+8+jf(e.type).encodingLength(t)};var Zt=j.question={};Zt.encode=function(e,t,r){t||(t=$.alloc(Zt.encodingLength(e))),r||(r=0);let n=r;return M.encode(e.name,t,r),r+=M.encode.bytes,t.writeUInt16BE(Wr.toType(e.type),r),r+=2,t.writeUInt16BE(su.toClass(e.class===void 0?"IN":e.class),r),r+=2,Zt.encode.bytes=r-n,e};Zt.encode.bytes=0;Zt.decode=function(e,t){t||(t=0);let r=t,n={};return n.name=M.decode(e,t),t+=M.decode.bytes,n.type=Wr.toString(e.readUInt16BE(t)),t+=2,n.class=su.toString(e.readUInt16BE(t)),t+=2,!!(n.class&sC)&&(n.class&=r3),Zt.decode.bytes=t-r,n};Zt.decode.bytes=0;Zt.encodingLength=function(e){return M.encodingLength(e.name)+4};j.AUTHORITATIVE_ANSWER=1024;j.TRUNCATED_RESPONSE=512;j.RECURSION_DESIRED=256;j.RECURSION_AVAILABLE=128;j.AUTHENTIC_DATA=32;j.CHECKING_DISABLED=16;j.DNSSEC_OK=32768;j.encode=function(e,t,r){let n=!t;n&&(t=$.alloc(j.encodingLength(e))),r||(r=0);let i=r;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),er.encode(e,t,r),r+=er.encode.bytes,r=Fa(e.questions,Zt,t,r),r=Fa(e.answers,Je,t,r),r=Fa(e.authorities,Je,t,r),r=Fa(e.additionals,Je,t,r),j.encode.bytes=r-i,n&&j.encode.bytes!==t.length?t.slice(0,j.encode.bytes):t};j.encode.bytes=0;j.decode=function(e,t){t||(t=0);let r=t,n=er.decode(e,t);return t+=er.decode.bytes,t=au(n.questions,Zt,e,t),t=au(n.answers,Je,e,t),t=au(n.authorities,Je,e,t),t=au(n.additionals,Je,e,t),j.decode.bytes=t-r,n};j.decode.bytes=0;j.encodingLength=function(e){return er.encodingLength(e)+Ui(e.questions||[],Zt)+Ui(e.answers||[],Je)+Ui(e.authorities||[],Je)+Ui(e.additionals||[],Je)};j.streamEncode=function(e){let t=j.encode(e),r=$.alloc(2);r.writeUInt16BE(t.byteLength);let n=$.concat([r,t]);return j.streamEncode.bytes=n.byteLength,n};j.streamEncode.bytes=0;j.streamDecode=function(e){let t=e.readUInt16BE(0);if(e.byteLength<t+2)return null;let r=j.decode(e.slice(2));return j.streamDecode.bytes=j.decode.bytes,r};j.streamDecode.bytes=0;function Ui(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function Fa(e,t,r,n){for(let i=0;i<e.length;i++)t.encode(e[i],r,n),n+=t.encode.bytes;return n}function au(e,t,r,n){for(let i=0;i<e.length;i++)e[i]=t.decode(r,n),n+=t.decode.bytes;return n}});var lC=S((oU,cC)=>{"use strict";var uC=l3;process.nextTick(c3,42);cC.exports=a3;function a3(e){var t=n;return r;function r(i){t(i||o3)}function n(i){var a=[i];t=s,e(o);function s(c){a.push(c)}function o(c){var u=arguments;for(t=s3(c)?n:l;a.length;)l(a.shift());function l(f){uC(u3,f,u)}}}}function s3(e){return Object.prototype.toString.call(e)==="[object Error]"}function o3(){}function u3(e,t){e.apply(null,t)}function c3(e){e===42&&(uC=process.nextTick)}function l3(e,t,r){process.nextTick(function(){e(t,r)})}});var dC=S((uU,hC)=>{var $f=oC(),f3=require("dgram"),h3=lC(),d3=require("events"),zf=require("os"),Gf=function(){};hC.exports=function(e){e||(e={});var t=new d3.EventEmitter,r=typeof e.port=="number"?e.port:5353,n=e.type||"udp4",i=e.ip||e.host||(n==="udp4"?"224.0.0.251":null),a={address:i,port:r},s={},o=!1,c=null;if(n==="udp6"&&(!i||!e.interface))throw new Error("For IPv6 multicast you must specify `ip` and `interface`");var u=e.socket||f3.createSocket({type:n,reuseAddr:e.reuseAddr!==!1,toString:function(){return n}});u.on("error",function(f){f.code==="EACCES"||f.code==="EADDRINUSE"?t.emit("error",f):t.emit("warning",f)}),u.on("message",function(f,h){try{f=$f.decode(f)}catch(p){t.emit("warning",p);return}t.emit("packet",f,h),f.type==="query"&&t.emit("query",f,h),f.type==="response"&&t.emit("response",f,h)}),u.on("listening",function(){r||(r=a.port=u.address().port),e.multicast!==!1&&(t.update(),c=setInterval(t.update,5e3),u.setMulticastTTL(e.ttl||255),u.setMulticastLoopback(e.loopback!==!1))});var l=h3(function(f){if(!r||e.bind===!1)return f(null);u.once("error",f),u.bind(r,e.bind||e.interface,function(){u.removeListener("error",f),f(null)})});return l(function(f){if(f)return t.emit("error",f);t.emit("ready")}),t.send=function(f,h,p){if(typeof h=="function")return t.send(f,null,h);p||(p=Gf),h?!h.host&&!h.address&&(h.address=a.address):h=a,l(d);function d(m){if(o)return p();if(m)return p(m);var E=$f.encode(f);u.send(E,0,E.length,h.port,h.address||h.host,p)}},t.response=t.respond=function(f,h,p){Array.isArray(f)&&(f={answers:f}),f.type="response",f.flags=(f.flags||0)|$f.AUTHORITATIVE_ANSWER,t.send(f,h,p)},t.query=function(f,h,p,d){if(typeof h=="function")return t.query(f,null,null,h);if(typeof h=="object"&&h&&h.port)return t.query(f,null,h,p);if(typeof p=="function")return t.query(f,h,null,p);d||(d=Gf),typeof f=="string"&&(f=[{name:f,type:h||"ANY"}]),Array.isArray(f)&&(f={type:"query",questions:f}),f.type="query",t.send(f,p,d)},t.destroy=function(f){if(f||(f=Gf),o)return process.nextTick(f);o=!0,clearInterval(c);for(var h in s)try{u.dropMembership(i,h)}catch(p){}s={},u.close(f)},t.update=function(){for(var f=e.interface?[].concat(e.interface):v3(),h=!1,p=0;p<f.length;p++){var d=f[p];if(!s[d])try{u.addMembership(i,d),s[d]=!0,h=!0}catch(m){t.emit("warning",m)}}if(h){if(u.setMulticastInterface)try{u.setMulticastInterface(e.interface||p3())}catch(m){t.emit("warning",m)}t.emit("networkInterface")}},t};function p3(){for(var e=zf.networkInterfaces(),t=Object.keys(e),r=0;r<t.length;r++)for(var n=e[t[r]],i=0;i<n.length;i++){var a=n[i];if(fC(a.family)&&!a.internal)return zf.platform()==="darwin"&&t[r]==="en0"?a.address:"0.0.0.0"}return"127.0.0.1"}function v3(){for(var e=zf.networkInterfaces(),t=Object.keys(e),r=[],n=0;n<t.length;n++)for(var i=e[t[n]],a=0;a<i.length;a++){var s=i[a];if(fC(s.family)){r.push(s.address);break}}return r}function fC(e){return e===4||e==="IPv4"}});var Qf=S(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var y3=function(){function e(t){this.mapRecord=t.mapRecord,this.onQuery=t.onQuery,this.onResponse=t.onResponse,this.onError=t.onError}return e}();Wf.AbstractTransport=y3});var gC=S((lU,yC)=>{"use strict";var pC=Array.isArray,vC=Object.keys,g3=Object.prototype.hasOwnProperty;yC.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=pC(t),i=pC(r),a,s,o;if(n&&i){if(s=t.length,s!=r.length)return!1;for(a=s;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(n!=i)return!1;var c=t instanceof Date,u=r instanceof Date;if(c!=u)return!1;if(c&&u)return t.getTime()==r.getTime();var l=t instanceof RegExp,f=r instanceof RegExp;if(l!=f)return!1;if(l&&f)return t.toString()==r.toString();var h=vC(t);if(s=h.length,s!==vC(r).length)return!1;for(a=s;a--!==0;)if(!g3.call(r,h[a]))return!1;for(a=s;a--!==0;)if(o=h[a],!e(t[o],r[o]))return!1;return!0}return t!==t&&r!==r}});var SC=S(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var mC=96,EC=61;function m3(e,t,r){t===void 0&&(t=0),r===void 0&&(r=e.length);for(var n=t,i=!1,a=!1,s=[],o=[];n<r;){var c=e[n];i?(c===mC?s.push("`"):c===EC?s.push("="):(s.push("`"),s.push(String.fromCharCode(c))),i=!1):a?o.push(String.fromCharCode(c)):c===mC?i=!0:c===EC?a=!0:s.push(String.fromCharCode(c)),n++}if(s.length===0)return null;var u=s.join("").toLowerCase();return o.length===0?{key:u,value:!0}:{key:u,value:o.join("")}}Yf.decodeTXT=m3});var Xf=S(Et=>{"use strict";var qi=Et&&Et.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E3=Et&&Et.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},S3=Et&&Et.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Et,"__esModule",{value:!0});var CC=Na(),xC=S3(gC()),C3=SC(),Yn=function(){function e(t){this.name=t.name||"",this.class=t.class||"IN",this.flush=t.flush||!1,this.ttl=t.ttl,this.lastRefresh=Date.now(),this.expireEvent=new CC.Event(this),this.refreshEvent=new CC.Event(this)}return e.prototype.destroy=function(){this.expireEvent.emit()},e.prototype.refresh=function(t){this.ttl=t,this.lastRefresh=Date.now(),this.refreshEvent.emit()},Object.defineProperty(e.prototype,"remainingTTL",{get:function(){if(this.ttl){var t=Math.floor((Date.now()-this.lastRefresh)/1e3);return this.ttl-t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onExpire",{get:function(){return this.expireEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRefresh",{get:function(){return this.refreshEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t.type!==this.type||t.name!==this.name?!1:this.isDataEqual(t)},e}();Et.Record=Yn;var x3=function(e){qi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="A",n.ip=r.ip,n}return t.prototype.isDataEqual=function(r){return this.ip===r.ip},t}(Yn);Et.ARecord=x3;var b3=function(e){qi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="AAAA",n.ip=r.ip,n}return t.prototype.isDataEqual=function(r){return this.ip===r.ip},t}(Yn);Et.AAAARecord=b3;var T3=function(e){qi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="SRV",n.target=r.target,n.port=r.port,n}return t.prototype.isDataEqual=function(r){return this.target===r.target&&this.port===r.port},t}(Yn);Et.SRVRecord=T3;var A3=function(e){qi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="PTR",n.hostname=r.hostname,n}return t.prototype.isDataEqual=function(r){return this.hostname===r.hostname},t.prototype.toData=function(){return this.hostname},t}(Yn);Et.PTRRecord=A3;var _3=function(e){qi(t,e);function t(r){var n,i,a=e.call(this,r)||this;if(a.type="TXT",a.binaryData=r.data,a.data=new Map,r.decode)try{for(var s=E3(a.binaryData),o=s.next();!o.done;o=s.next()){var c=o.value,u=C3.decodeTXT(c);u&&a.data.set(u.key,u.value)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}return t.prototype.isDataEqual=function(r){return xC.default(this.binaryData,this.binaryData)},t.prototype.toData=function(){return this.binaryData},t}(Yn);Et.TXTRecord=_3;var w3=function(e){qi(t,e);function t(r){var n=e.call(this,r)||this;return n.type=r.type,n.data=r.data,n}return t.prototype.isDataEqual=function(r){return xC.default(this.data,r.data)},t.prototype.toData=function(){return this.data},t}(Yn);Et.UnknownRecord=w3});var Jf=S(Xn=>{"use strict";var I3=Xn&&Xn.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},B3=Xn&&Xn.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(I3(arguments[t]));return e};Object.defineProperty(Xn,"__esModule",{value:!0});var O3=function(){function e(t,r){r===void 0&&(r=[]),this.answers=t,this.additionals=r}return Object.defineProperty(e.prototype,"mergedRecords",{get:function(){return B3(this.answers,this.additionals)},enumerable:!0,configurable:!0}),e}();Xn.AbstractPacket=O3});var Zf=S(Va=>{"use strict";var R3=Va&&Va.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Va,"__esModule",{value:!0});var N3=Jf(),D3=function(e){R3(t,e);function t(r,n,i){n===void 0&&(n=[]),i===void 0&&(i=[]);var a=e.call(this,n,i)||this;return a.questions=r,a}return t}(N3.AbstractPacket);Va.MDNSQuery=D3});var eh=S(Ka=>{"use strict";var P3=Ka&&Ka.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ka,"__esModule",{value:!0});var L3=Jf(),k3=function(e){P3(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(L3.AbstractPacket);Ka.MDNSResponse=k3});var TC=S(wr=>{"use strict";var U3=wr&&wr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q3=wr&&wr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},M3=wr&&wr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wr,"__esModule",{value:!0});var F3=M3(dC()),V3=Qf(),Ht=Xf(),K3=Zf(),H3=eh(),j3=function(e){U3(t,e);function t(r){var n=e.call(this,r)||this;return n.mdns=F3.default(),n.mdns.on("error",function(i){n.onError(i)}),n.mdns.on("response",function(i,a){var s=new H3.MDNSResponse(n.fromTransportsRecords(i.answers||[]),n.fromTransportsRecords(i.additionals||[]));n.onResponse(s)}),n.mdns.on("query",function(i,a){var s=new K3.MDNSQuery(i.questions||[],n.fromTransportsRecords(i.answers||[]),n.fromTransportsRecords(i.additionals||[]));n.onQuery(s)}),n}return t.prototype.fromTransportsRecords=function(r){var n,i,a=[];try{for(var s=q3(r),o=s.next();!o.done;o=s.next()){var c=o.value;a.push(this.mapRecord(bC(c)))}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},t.prototype.query=function(r){var n=this,i={questions:r.questions.map(function(a){return{name:a.name,type:a.type,class:a.class}}),answers:r.answers.map(ou),additionals:r.additionals.map(ou)};return new Promise(function(a,s){return n.mdns.query(i,function(o){o&&s(o),a()})})},t.prototype.respond=function(r){var n=this,i={answers:r.answers.map(ou),additionals:r.additionals.map(ou)};return new Promise(function(a,s){return n.mdns.respond(i,function(o){o&&s(o),a()})})},t.prototype.destroy=function(){this.mdns.destroy()},t}(V3.AbstractTransport);wr.MulticastDNSTransport=j3;function ou(e){var t;return e instanceof Ht.ARecord||e instanceof Ht.AAAARecord?t=e.ip:e instanceof Ht.TXTRecord?t=e.binaryData:e instanceof Ht.PTRRecord?t=e.hostname:e instanceof Ht.SRVRecord?t={target:e.target,port:e.port}:e instanceof Ht.UnknownRecord?t=e.data:t=void 0,{type:e.type,name:e.name,ttl:e.ttl,class:e.class,flush:e.flush,data:t}}function bC(e){switch(e.type){case"A":return new Ht.ARecord(Object.assign(e,{ip:e.data}));case"AAAA":return new Ht.AAAARecord(Object.assign(e,{ip:e.data}));case"TXT":return new Ht.TXTRecord(Object.assign(e,{data:e.data,decode:!0}));case"SRV":return new Ht.SRVRecord(Object.assign(e,{target:e.data.target,port:e.data.port}));case"PTR":return new Ht.PTRRecord(Object.assign(e,{hostname:e.data}));default:return new Ht.UnknownRecord(e)}}wr.fromTransportRecord=bC});var AC=S(Ha=>{"use strict";function $3(e){for(var t in e)Ha.hasOwnProperty(t)||(Ha[t]=e[t])}Object.defineProperty(Ha,"__esModule",{value:!0});var G3=TC();$3(Qf());var z3=function(e){return new G3.MulticastDNSTransport(e)};function W3(e){return z3(e)}Ha.createTransport=W3});var nh=S(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});var th=Na(),Q3=function(){function e(t){this.manager=t,this.queryEvent=new th.Event(this),this.responseEvent=new th.Event(this),this.errorEvent=new th.Event(this)}return Object.defineProperty(e.prototype,"onResponse",{get:function(){return this.responseEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onQuery",{get:function(){return this.queryEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.query=function(t){return this.manager.query(t)},e.prototype.respond=function(t){return this.manager.respond(t)},e.prototype.destroy=function(){this.manager.release(this)},e.prototype.receiveQuery=function(t){this.queryEvent.emit(t)},e.prototype.receiveResponse=function(t){this.responseEvent.emit(t)},e.prototype.receiveError=function(t){this.errorEvent.emit(t)},e.prototype.find=function(t){return this.manager.find(t)},e.prototype.findAll=function(t){return this.manager.findAll(t)},e}();rh.MDNS=Q3});var IC=S(tr=>{"use strict";var _C=tr&&tr.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(u){try{c(n.next(u))}catch(l){a(l)}}function o(u){try{c(n.throw(u))}catch(l){a(l)}}function c(u){u.done?i(u.value):new r(function(l){l(u.value)}).then(s,o)}c((n=n.apply(e,t||[])).next())})},wC=tr&&tr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Jn=tr&&tr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},Y3=tr&&tr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tr,"__esModule",{value:!0});var X3=Jo(),J3=AC(),Z3=nh(),e6=Y3(jo()),uu=e6.default("th:mdns:manager"),t6=function(){function e(){this.instances=[],this.records=[],this.recordExpirer=new X3.ReschedulingTimerWheel,this.mapRecord=this.mapRecord.bind(this)}return e.prototype.removeRecord=function(t){var r=this.records.findIndex(function(n){return n===t});r>=0&&(this.recordExpirer.unschedule(t),this.records.splice(r,1),t.destroy(),uu("REMOVED",t.type,t.name," total=",this.records.length))},e.prototype.mapRecord=function(t){var r,n;if(t.flush){var i=0,a=Date.now()-1e3;try{for(var s=Jn(this.records),o=s.next();!o.done;o=s.next()){var c=o.value;c.type===t.type&&c.class===t.class&&c.name===t.name&&c.lastRefresh<a&&(this.scheduleRemoval(c,0),i++)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}uu("FLUSH",t.type,t.class,t.name,"records=",i)}if(typeof t.ttl!="number")return t;var u=this.records.find(function(l){return l.isEqual(t)});return u?(u.refresh(t.ttl),this.scheduleRemoval(u,t.ttl),uu("REFRESH",t.type,t.class,t.name,"ttl=",t.ttl,"total=",this.records.length),u):(this.records.push(t),this.scheduleRemoval(t,t.ttl),uu("ADDED",t.type,t.class,t.name,"ttl=",t.ttl,"total=",this.records.length),t)},e.prototype.scheduleRemoval=function(t,r){return this.recordExpirer.schedule(t,r*1e3)},e.prototype.advanceAndExpire=function(){var t,r;try{for(var n=Jn(this.recordExpirer.advance()),i=n.next();!i.done;i=n.next()){var a=i.value;this.removeRecord(a)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.createMulticastDNS=function(){var t=this;this.transport=J3.createTransport({mapRecord:function(r){return t.mapRecord(r)},onError:function(r){var n,i;try{for(var a=Jn(t.instances),s=a.next();!s.done;s=a.next()){var o=s.value;o.receiveError(r)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},onQuery:function(r){var n,i;try{for(var a=Jn(t.instances),s=a.next();!s.done;s=a.next()){var o=s.value;o.receiveQuery(r)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},onResponse:function(r){var n,i;try{for(var a=Jn(t.instances),s=a.next();!s.done;s=a.next()){var o=s.value;o.receiveResponse(r)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}}),this.recordExpirerInterval=setInterval(function(){return t.advanceAndExpire()},1e3)},e.prototype.requestHandle=function(){this.instances.length===0&&this.createMulticastDNS();var t=new Z3.MDNS(this);return this.instances.push(t),t},e.prototype.release=function(t){var r=this.instances.indexOf(t);r<0||(this.instances.splice(r,1),this.instances.length===0&&this.transport&&(this.transport.destroy(),this.transport=void 0,clearInterval(this.recordExpirerInterval)))},e.prototype.query=function(t){return _C(this,void 0,void 0,function(){return wC(this,function(r){switch(r.label){case 0:if(!this.transport)throw new Error("No mDNS transport instance available");return[4,this.transport.query(t)];case 1:return[2,r.sent()]}})})},e.prototype.respond=function(t){return _C(this,void 0,void 0,function(){return wC(this,function(r){if(!this.transport)throw new Error("No mDNS transport instance available");return[2,this.transport.respond(t)]})})},e.prototype.find=function(t){var r,n;this.advanceAndExpire();try{for(var i=Jn(this.records),a=i.next();!a.done;a=i.next()){var s=a.value;if(t(s))return s}}catch(o){r={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.findAll=function(t){var r,n;this.advanceAndExpire();var i=[];try{for(var a=Jn(this.records),s=a.next();!s.done;s=a.next()){var o=s.value;t(o)&&i.push(o)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},e}();tr.Manager=t6});var ih=S(ja=>{"use strict";function cu(e){for(var t in e)ja.hasOwnProperty(t)||(ja[t]=e[t])}Object.defineProperty(ja,"__esModule",{value:!0});var r6=IC();cu(nh());cu(Xf());cu(Zf());cu(eh());var n6=new r6.Manager;function i6(){return n6.requestHandle()}ja.createMDNS=i6});var BC=S(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});var a6=function(){function e(t,r){this.onSet=t,this.onRemove=r}return Object.defineProperty(e.prototype,"record",{get:function(){return this._record||null},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this._record!==t&&(this._record&&this.onRemove(this._record),this._record=t||void 0,t&&this.onSet(t))},e}();ah.RecordHandle=a6});var RC=S($a=>{"use strict";var OC=$a&&$a.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty($a,"__esModule",{value:!0});var s6=function(){function e(t){this.refresher=t,this._items=[],this._handles=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){var r,n,i,a,s=[],o=[],c=new Set(this._handles);try{for(var u=OC(t),l=u.next();!l.done;l=u.next()){var f=l.value;s.push(f);var h=this._items.indexOf(f);if(h<0)o.push(f.onExpire(this.refresher));else{var p=this._handles[h];c.delete(p),o.push(p)}}}catch(E){r={error:E}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}try{for(var d=OC(c),m=d.next();!m.done;m=d.next()){var p=m.value;p.unsubscribe()}}catch(E){i={error:E}}finally{try{m&&!m.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}this._items=s,this._handles=o},enumerable:!0,configurable:!0}),e}();$a.RecordArray=s6});var NC=S(Ga=>{"use strict";var o6=Ga&&Ga.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Ga,"__esModule",{value:!0});var u6=Jo(),c6=function(){function e(t){var r=this;this.query=t,this.records=new u6.ReschedulingTimerWheel,this.interval=setInterval(function(){return r.check()},1e3);var n=this;this.listener=function(){n.scheduleRefresh(this)}}return e.prototype.destroy=function(){clearInterval(this.interval)},e.prototype.add=function(t){t.onRefresh.unsubscribe(this.listener),t.onRefresh.subscribe(this.listener),this.scheduleRefresh(t)},e.prototype.remove=function(t){t.onRefresh.unsubscribe(this.listener),this.records.unschedule(t)},e.prototype.check=function(){var t,r,n=this.records.advance(),i=Date.now();try{for(var a=o6(n),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.ttl){var c=(i-o.lastRefresh)/1e3,u=o.ttl-c;if(!(u<=0)){var l=(o.ttl-u)/o.ttl,f=l+.05;if(f>.97)return;var h=f*o.ttl-c;this.records.schedule(o,h*1e3)}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}n.length>0&&this.query()},e.prototype.scheduleRefresh=function(t){if(t.ttl){var r=.8+Math.random()*.02;this.records.schedule(t,t.ttl*r*1e3)}},e}();Ga.TTLRefreshHelper=c6});var UC=S(Nt=>{"use strict";var l6=Nt&&Nt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f6=Nt&&Nt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(u){try{c(n.next(u))}catch(l){a(l)}}function o(u){try{c(n.throw(u))}catch(l){a(l)}}function c(u){u.done?i(u.value):new r(function(l){l(u.value)}).then(s,o)}c((n=n.apply(e,t||[])).next())})},h6=Nt&&Nt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Mi=Nt&&Nt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},d6=Nt&&Nt.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a};Object.defineProperty(Nt,"__esModule",{value:!0});var sh=Pf(),DC=Lf(),In=ih(),PC=BC(),LC=RC(),p6=NC(),kC=1e3,v6=60*60*1e3,y6=3,g6=function(e){l6(t,e);function t(r){var n=e.call(this,"mdns")||this;n.serviceData=new Map,n.queuedRefreshes=new Set,n.ttlRefreshHelper=new p6.TTLRefreshHelper(function(){return n.search(!1)}),n.searchName=DC.stringify(r.type,r.protocol||"tcp")+".local",n.normalizedSearchName=oh(n.searchName),n.mdns=In.createMDNS(),n.mdns.onResponse(n.handleResponse.bind(n)),n.mdns.onQuery(n.handleQuery.bind(n));var i=20+Math.random()*100;return n.searchTime=0,n.searchLastInvoke=0,n.searchTimeout=setTimeout(function(){return n.search(!0)},i),n}return t.prototype.destroy=function(){return f6(this,void 0,void 0,function(){return h6(this,function(r){switch(r.label){case 0:return clearTimeout(this.searchTimeout),this.ttlRefreshHelper.destroy(),this.mdns.destroy(),[4,e.prototype.destroy.call(this)];case 1:return r.sent(),[2]}})})},t.prototype.search=function(r){var n=this,i=Date.now();if(r)this.debug("Searching for services on schedule");else{if(i-this.searchLastInvoke<kC)return;this.debug("Searching for services due to near-end TTL")}this.searchLastInvoke=i;var a=new In.MDNSQuery([{type:"PTR",name:this.searchName}]);this.mdns.query(a).catch(function(s){return n.logAndEmitError(s,"Caught error during search")}),r&&(this.searchTime===0?this.searchTime=kC:this.searchTime=Math.min(this.searchTime*y6,v6)),this.rescheduleSearch()},t.prototype.rescheduleSearch=function(){var r=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){return r.search(!0)},this.searchTime)},t.prototype.handleQuery=function(r){this.isSameQuery(r)&&Date.now()-this.searchLastInvoke>500&&(this.debug("Rescheduling search due to incoming query"),this.rescheduleSearch())},t.prototype.isSameQuery=function(r){var n,i,a,s;try{for(var o=Mi(r.questions),c=o.next();!c.done;c=o.next()){var u=c.value;if(u.type==="PTR"&&oh(u.name)===this.normalizedSearchName){if(r.answers){var l=function(E){var x=f.mdns.find(function(_){return _.isEqual(E)});if(!x)return{value:!1}},f=this;try{for(var h=(a=void 0,Mi(r.answers)),p=h.next();!p.done;p=h.next()){var d=p.value,m=l(d);if(typeof m=="object")return m.value}}catch(E){a={error:E}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return!0}}}catch(E){n={error:E}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.isMatching=function(r){var n=oh(r.name);return n===this.normalizedSearchName},t.prototype.handleResponse=function(r){var n,i,a=this,s=function(f){if(f instanceof In.PTRRecord&&o.isMatching(f)){if(o.queuedRefreshes.has(f.hostname))return"continue";o.queuedRefreshes.add(f.hostname),setTimeout(function(){return a.refreshService(f.hostname)},500)}},o=this;try{for(var c=Mi(r.mergedRecords),u=c.next();!u.done;u=c.next()){var l=u.value;s(l)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},t.prototype.refreshService=function(r){var n,i,a,s,o,c,u=this;this.debug("Refreshing service",r),this.queuedRefreshes.delete(r);var l=this.serviceData.get(r),f=this.mdns.find(function(Q){return Q instanceof In.PTRRecord&&Q.hostname===r});if(l)if(f)l.PTR.record!==f&&(this.debug("Updating",r,"with new PTR"),l.PTR.update(f));else{this.debug("Removing",r,"due to no PTR"),this.invalidateService(r,l);return}else{if(!f){this.debug("Requested refresh of non-existent service",r,"without an initial PTR record");return}var h=function(){u.queuedRefreshes.has(r)||(u.queuedRefreshes.add(r),setTimeout(function(){return u.refreshService(r)},500))},p=function(Q){Q.onExpire(h),u.ttlRefreshHelper.add(Q)},d=function(Q){Q.onExpire.unsubscribe(h),u.ttlRefreshHelper.remove(Q)};l={PTR:new PC.RecordHandle(p,d),SRV:new PC.RecordHandle(p,d),addressRecords:new LC.RecordArray(h),txtRecords:new LC.RecordArray(h)},l.PTR.update(f),this.serviceData.set(r,l)}var m=this.mdns.find(function(Q){return Q instanceof In.SRVRecord&&Q.name===r});if(m)l.SRV.record!==m&&(this.debug("Updating",r,"with new SRV"),l.SRV.update(m));else{this.debug("Removing",r,"due to no SRV"),this.invalidateService(r,l);return}var E=m.port,x=m.target,_=this.mdns.findAll(function(Q){return(Q instanceof In.ARecord||Q instanceof In.AAAARecord)&&Q.name===x});if(l.addressRecords.items=_,_.length===0){this.debug("Removing",r,"due to no addresses available"),this.invalidateService(r,l);return}var w=_.map(function(Q){return new sh.HostAndPort(Q.ip,E)}).sort(sh.HostAndPort.compare),R=new Map,O=[],B=this.mdns.findAll(function(Q){return Q instanceof In.TXTRecord&&Q.name===r});try{for(var V=Mi(B),K=V.next();!K.done;K=V.next()){var W=K.value;try{for(var Z=(a=void 0,Mi(W.data.entries())),re=Z.next();!re.done;re=Z.next()){var le=d6(re.value,2),ye=le[0],Re=le[1];R.set(ye,Re)}}catch(Q){a={error:Q}}finally{try{re&&!re.done&&(s=Z.return)&&s.call(Z)}finally{if(a)throw a.error}}try{for(var ne=(o=void 0,Mi(W.binaryData)),ve=ne.next();!ve.done;ve=ne.next()){var H=ve.value;O.push(H)}}catch(Q){o={error:Q}}finally{try{ve&&!ve.done&&(c=ne.return)&&c.call(ne)}finally{if(o)throw o.error}}}}catch(Q){n={error:Q}}finally{try{K&&!K.done&&(i=V.return)&&i.call(V)}finally{if(n)throw n.error}}var Dt=r.indexOf("."),Pt=r.substring(0,Dt),Ee=DC.parse(r.substring(Dt+1,r.length-6)),Ae={id:r,name:Pt,type:Ee.name||"unknown",protocol:Ee.protocol,subtypes:Ee.subtypes||[],addresses:w,data:R,binaryData:O};this.updateService(Ae)},t.prototype.invalidateService=function(r,n){n.PTR.update(null),n.SRV.update(null),this.removeService(r),this.serviceData.delete(r)},t}(sh.BasicServiceDiscovery);Nt.MDNSServiceDiscovery=g6;function oh(e){return e&&e.toLowerCase()}});var qC=S(lu=>{"use strict";function m6(e){for(var t in e)lu.hasOwnProperty(t)||(lu[t]=e[t])}Object.defineProperty(lu,"__esModule",{value:!0});m6(UC())});var FC=S(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});var uh="0123456789abcdefghijlkmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function MC(e){for(var t=uh.length,r=[];e>t;)r.push(uh[e%t]),e=Math.floor(e/t);return r.push(uh[e]),r.reverse().join("")}var E6=Date.UTC(2017,1,1);function S6(){return MC(Date.now()-E6)+MC(Math.floor((1+Math.random())*65536))}ch.randomId=S6});var jC=S(rr=>{"use strict";var C6=rr&&rr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x6=rr&&rr.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(u){try{c(n.next(u))}catch(l){a(l)}}function o(u){try{c(n.throw(u))}catch(l){a(l)}}function c(u){u.done?i(u.value):new r(function(l){l(u.value)}).then(s,o)}c((n=n.apply(e,t||[])).next())})},b6=rr&&rr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},fu=rr&&rr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(rr,"__esModule",{value:!0});var VC=require("os"),T6=Pf(),A6=Lf(),Qr=ih(),_6=FC(),w6=1e3,I6=8,B6=3,KC=".local",HC="_services._dns-sd._udp.local",O6=function(e){C6(t,e);function t(r){var n=e.call(this,"mdns")||this;n.name=r.name||_6.randomId(),n.port=r.port,n.type=A6.stringify(r.type,r.protocol||"tcp",r.subtypes)+KC,n.qualifiedName=n.name+"."+n.type,n.ttl=r.ttl||4500,n.mdns=Qr.createMDNS(),n.mdns.onQuery(function(a){return n.handleQuery(a)});var i=20+Math.random()*100;return n.broadcastTime=0,n.broadcastNumber=0,n.broadcastTimeout=setTimeout(function(){return n.broadcast()},i),n}return t.prototype.handleQuery=function(r){var n,i;try{for(var a=fu(r.questions),s=a.next();!s.done;s=a.next()){var o=s.value;o.type==="PTR"&&(o.name===HC?this.hasService(r.answers)||this.announce(!0):o.name===this.type&&(this.hasService(r.answers)||this.announce(!1)))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.hasService=function(r){var n,i;try{for(var a=fu(r),s=a.next();!s.done;s=a.next()){var o=s.value;if(o instanceof Qr.PTRRecord&&o.name===this.type&&o.hostname===this.qualifiedName&&o.ttl&&o.ttl>this.ttl/2)return!0}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},t.prototype.broadcast=function(){var r=this;this.announce(!1),!(++this.broadcastNumber>=I6)&&(this.broadcastTime===0?this.broadcastTime=w6:this.broadcastTime=this.broadcastTime*B6,this.broadcastTimeout=setTimeout(function(){return r.broadcast()},this.broadcastTime))},t.prototype.announce=function(r){var n,i,a,s;r?this.debug("Responding to query for any services",this.qualifiedName):this.debug("Announcing availability of service",this.qualifiedName);var o=[new Qr.PTRRecord({name:r?HC:this.type,ttl:this.ttl,flush:!1,hostname:this.qualifiedName})],c=VC.hostname()+KC,u=[new Qr.SRVRecord({name:this.qualifiedName,ttl:this.ttl,flush:!0,target:c,port:this.port})],l=VC.networkInterfaces();try{for(var f=fu(Object.keys(l)),h=f.next();!h.done;h=f.next()){var p=h.value;try{for(var d=(a=void 0,fu(l[p])),m=d.next();!m.done;m=d.next()){var E=m.value;if(!E.internal)switch(E.family){case"IPv4":u.push(new Qr.ARecord({name:c,ttl:this.ttl,flush:!0,ip:E.address}));break;case"IPv6":u.push(new Qr.AAAARecord({name:c,ttl:this.ttl,flush:!0,ip:E.address}));break}}}catch(x){a={error:x}}finally{try{m&&!m.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}}catch(x){n={error:x}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}this.mdns.respond(new Qr.MDNSResponse(o,u))},t.prototype.destroy=function(){return x6(this,void 0,void 0,function(){var r=this;return b6(this,function(n){switch(n.label){case 0:return clearTimeout(this.broadcastTimeout),[4,this.sendGoodbye()];case 1:return n.sent(),[4,new Promise(function(i,a){setTimeout(function(){return r.sendGoodbye().catch(a)},250),setTimeout(function(){try{r.mdns.destroy(),i()}catch(s){a(s)}},500)})];case 2:return[2,n.sent()]}})})},t.prototype.sendGoodbye=function(){return this.mdns.respond(new Qr.MDNSResponse([new Qr.PTRRecord({name:this.type,ttl:0,hostname:this.qualifiedName})]))},t}(T6.AbstractServicePublisher);rr.MDNSServicePublisher=O6});var $C=S(hu=>{"use strict";function lh(e){for(var t in e)hu.hasOwnProperty(t)||(hu[t]=e[t])}Object.defineProperty(hu,"__esModule",{value:!0});lh(sS());lh(qC());lh(jC())});var QC=S((BU,WC)=>{var zC={};WC.exports=zC;var GC={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(GC).forEach(function(e){var t=GC[e],r=zC[e]=[];r.open="\x1B["+t[0]+"m",r.close="\x1B["+t[1]+"m"})});var XC=S((OU,YC)=>{"use strict";YC.exports=function(e,t){t=t||process.argv;var r=t.indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(n+e);return i!==-1&&(r===-1?!0:i<r)}});var ZC=S((RU,JC)=>{"use strict";var R6=require("os"),nr=XC(),St=process.env,Fi=void 0;nr("no-color")||nr("no-colors")||nr("color=false")?Fi=!1:(nr("color")||nr("colors")||nr("color=true")||nr("color=always"))&&(Fi=!0);"FORCE_COLOR"in St&&(Fi=St.FORCE_COLOR.length===0||parseInt(St.FORCE_COLOR,10)!==0);function N6(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function D6(e){if(Fi===!1)return 0;if(nr("color=16m")||nr("color=full")||nr("color=truecolor"))return 3;if(nr("color=256"))return 2;if(e&&!e.isTTY&&Fi!==!0)return 0;var t=Fi?1:0;if(process.platform==="win32"){var r=R6.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in St)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in St})||St.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in St)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(St.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in St){var n=parseInt((St.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(St.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(St.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(St.TERM)||"COLORTERM"in St?1:(St.TERM==="dumb",t)}function fh(e){var t=D6(e);return N6(t)}JC.exports={supportsColor:fh,stdout:fh(process.stdout),stderr:fh(process.stderr)}});var tx=S((NU,ex)=>{ex.exports=function(t,r){var n="";t=t||"Run the trap, drop the bass",t=t.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return t.forEach(function(a){a=a.toLowerCase();var s=i[a]||[" "],o=Math.floor(Math.random()*s.length);typeof i[a]!="undefined"?n+=i[a][o]:n+=a}),n}});var nx=S((DU,rx)=>{rx.exports=function(t,r){t=t||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function a(c){var u=Math.floor(Math.random()*c);return u}function s(c){var u=!1;return i.filter(function(l){u=l===c}),u}function o(c,u){var l="",f,h;u=u||{},u.up=typeof u.up!="undefined"?u.up:!0,u.mid=typeof u.mid!="undefined"?u.mid:!0,u.down=typeof u.down!="undefined"?u.down:!0,u.size=typeof u.size!="undefined"?u.size:"maxi",c=c.split("");for(h in c)if(!s(h)){switch(l=l+c[h],f={up:0,down:0,mid:0},u.size){case"mini":f.up=a(8),f.mid=a(2),f.down=a(8);break;case"maxi":f.up=a(16)+3,f.mid=a(4)+1,f.down=a(64)+3;break;default:f.up=a(8)+1,f.mid=a(6)/2,f.down=a(8)+1;break}var p=["up","mid","down"];for(var d in p)for(var m=p[d],E=0;E<=f[m];E++)u[m]&&(l=l+n[m][a(n[m].length)])}return l}return o(t,r)}});var ax=S((PU,ix)=>{ix.exports=function(e){return function(t,r,n){if(t===" ")return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}});var ox=S((LU,sx)=>{sx.exports=function(e){return function(t,r,n){return r%2===0?t:e.inverse(t)}}});var cx=S((kU,ux)=>{ux.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:e[t[n++%t.length]](r)}}});var fx=S((UU,lx)=>{lx.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}});var hh=S((MU,yx)=>{var ue={};yx.exports=ue;ue.themes={};var P6=require("util"),Zn=ue.styles=QC(),dx=Object.defineProperties,L6=new RegExp(/[\r\n]+/g);ue.supportsColor=ZC().supportsColor;typeof ue.enabled=="undefined"&&(ue.enabled=ue.supportsColor()!==!1);ue.enable=function(){ue.enabled=!0};ue.disable=function(){ue.enabled=!1};ue.stripColors=ue.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var qU=ue.stylize=function(t,r){if(!ue.enabled)return t+"";var n=Zn[r];return!n&&r in ue?ue[r](t):n.open+t+n.close},k6=/[|\\{}()[\]^$+*?.]/g,U6=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(k6,"\\$&")};function px(e){var t=function r(){return M6.apply(r,arguments)};return t._styles=e,t.__proto__=q6,t}var vx=function(){var e={};return Zn.grey=Zn.gray,Object.keys(Zn).forEach(function(t){Zn[t].closeRe=new RegExp(U6(Zn[t].close),"g"),e[t]={get:function(){return px(this._styles.concat(t))}}}),e}(),q6=dx(function(){},vx);function M6(){var e=Array.prototype.slice.call(arguments),t=e.map(function(s){return s!=null&&s.constructor===String?s:P6.inspect(s)}).join(" ");if(!ue.enabled||!t)return t;for(var r=t.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var a=Zn[n[i]];t=a.open+t.replace(a.closeRe,a.open)+a.close,r&&(t=t.replace(L6,function(s){return a.close+s+a.open}))}return t}ue.setTheme=function(e){if(typeof e=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var t in e)(function(r){ue[r]=function(n){if(typeof e[r]=="object"){var i=n;for(var a in e[r])i=ue[e[r][a]](i);return i}return ue[e[r]](n)}})(t)};function F6(){var e={};return Object.keys(vx).forEach(function(t){e[t]={get:function(){return px([t])}}}),e}var V6=function(t,r){var n=r.split("");return n=n.map(t),n.join("")};ue.trap=tx();ue.zalgo=nx();ue.maps={};ue.maps.america=ax()(ue);ue.maps.zebra=ox()(ue);ue.maps.rainbow=cx()(ue);ue.maps.random=fx()(ue);for(hx in ue.maps)(function(e){ue[e]=function(t){return V6(ue.maps[e],t)}})(hx);var hx;dx(ue,F6())});var mx=S((FU,gx)=>{var dt=hh();gx.exports=function(){var e=function(n,i){String.prototype.__defineGetter__(n,i)};e("strip",function(){return dt.strip(this)}),e("stripColors",function(){return dt.strip(this)}),e("trap",function(){return dt.trap(this)}),e("zalgo",function(){return dt.zalgo(this)}),e("zebra",function(){return dt.zebra(this)}),e("rainbow",function(){return dt.rainbow(this)}),e("random",function(){return dt.random(this)}),e("america",function(){return dt.america(this)});var t=Object.keys(dt.styles);t.forEach(function(n){e(n,function(){return dt.stylize(this,n)})});function r(n){var i=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(n).forEach(function(a){if(i.indexOf(a)!==-1)console.log("warn: ".red+("String.prototype"+a).magenta+" is probably something you don't want to override.  Ignoring style name");else if(typeof n[a]=="string")dt[a]=dt[n[a]],e(a,function(){return dt[a](this)});else{var s=function(o){for(var c=o||this,u=0;u<n[a].length;u++)c=dt[n[a][u]](c);return c};e(a,s),dt[a]=function(o){return s(o)}}})}dt.setTheme=function(n){if(typeof n=="string"){console.log("colors.setTheme now only accepts an object, not a string. If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}else r(n)}}});var Bn=S((VU,Ex)=>{var K6=hh();Ex.exports=K6;mx()()});var $x=S((HU,jx)=>{var H6=Object.create,Qa=Object.defineProperty,j6=Object.defineProperties,$6=Object.getOwnPropertyDescriptor,G6=Object.getOwnPropertyDescriptors,z6=Object.getOwnPropertyNames,Sx=Object.getOwnPropertySymbols,W6=Object.getPrototypeOf,Dx=Object.prototype.hasOwnProperty,Q6=Object.prototype.propertyIsEnumerable,Cx=(e,t,r)=>t in e?Qa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$e=(e,t)=>{for(var r in t||(t={}))Dx.call(t,r)&&Cx(e,r,t[r]);if(Sx)for(var r of Sx(t))Q6.call(t,r)&&Cx(e,r,t[r]);return e},Ki=(e,t)=>j6(e,G6(t)),Y6=(e,t)=>{for(var r in t)Qa(e,r,{get:t[r],enumerable:!0})},Px=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of z6(t))!Dx.call(e,i)&&i!==r&&Qa(e,i,{get:()=>t[i],enumerable:!(n=$6(t,i))||n.enumerable});return e},Te=(e,t,r)=>(r=e!=null?H6(W6(e)):{},Px(t||!e||!e.__esModule?Qa(r,"default",{value:e,enumerable:!0}):r,e)),X6=e=>Px(Qa({},"__esModule",{value:!0}),e),Lx=(e,t,r)=>new Promise((n,i)=>{var a=c=>{try{o(r.next(c))}catch(u){i(u)}},s=c=>{try{o(r.throw(c))}catch(u){i(u)}},o=c=>c.done?n(c.value):Promise.resolve(c.value).then(a,s);o((r=r.apply(e,t)).next())}),kx={};Y6(kx,{Client:()=>Hx,connect:()=>hP,pair:()=>dP});jx.exports=X6(kx);var dh=Ac(),J6=Le(),xx=Te(require("fs")),Z6=Te(require("path")),eD=Te(require("net")),tD=require("bson"),rD=Ac(),du=(Ip(),v2(wp)),nD=fn(),iD=class{},aD=class vu{constructor(t,r){this.message=t,this.code=r}static fromString(t){let r=t==null?void 0:t.split(" ",2);if(r==null||r.length===1)return new vu(t);let n=parseInt(r[0],10);return Number.isNaN(n)?new vu(t):new vu(r[1],n)}isSuccessful(){return this.code!==void 0&&this.code>=200&&this.code<300}},Ux=class vh{constructor(){this.Header=new iD}static parse(t){let r=JSON.parse(t),n=r.Header.StatusCode==null?void 0:aD.fromString(r.Header.StatusCode),i=Object.assign({},r.Header,{StatusCode:n,MessageBodyType:r.Header.MessageBodyType});if(i.MessageBodyType==null)return Object.assign(new vh,{Header:i});let a=Object.keys(r.Body||{})[0],s=a!=null&&r.Body[a]||void 0;return Object.assign(new vh,r,{Header:i,Body:s})}},sD=class extends nD.EventEmitter{constructor(){super(...arguments),this.buffer=""}parse(e,t){let r=this.buffer+e.toString(),n=r.split(/\r?\n/);if(n.length-1===0){this.buffer=r;return}this.buffer=n[n.length-1]||"";for(let i of n.slice(0,n.length-1))t(Ux.parse(i))}},bx=class{constructor(){this.Message=""}},oD=fn(),Tx=require("tls"),uD=1e4,cD=3e4,lD=class extends oD.EventEmitter{constructor(e,t,r){super(),this.onSocketData=n=>{this.emit("Data",n)},this.onSocketTimeout=()=>{this.emit("Error",new Error("connect ETIMEDOUT"))},this.onSocketClose=()=>{this.emit("Disconnect")},this.onSocketError=n=>{this.emit("Error",n)},this.host=e,this.port=t,this.certificate=r}connect(){return new Promise((e,t)=>{let r=(0,Tx.connect)(this.port,this.host,{secureContext:(0,Tx.createSecureContext)(this.certificate),secureProtocol:"TLS_method",rejectUnauthorized:!1});r.once("secureConnect",()=>{this.connection=r,this.connection.off("error",t),this.connection.on("timeout",this.onSocketTimeout),this.connection.on("error",this.onSocketError),this.connection.on("close",this.onSocketClose),this.connection.on("data",this.onSocketData),this.connection.setKeepAlive(!0,uD),this.connection.setTimeout(cD),e(this.connection.getProtocol()||"Unknown")}),r.once("error",t)})}disconnect(){var e,t;(e=this.connection)==null||e.end(),(t=this.connection)==null||t.destroy()}write(e){return new Promise((t,r)=>{if(this.connection==null)return r(new Error("connection not established"));this.connection.write(`${JSON.stringify(e)}
`,n=>n!=null?r(n):t())})}},Ax=8083,fD=8081,hD=1e3,qx=class extends sD{constructor(e,t){super(),this.secure=!1,this.teardown=!1,this.requests=new Map,this.subscriptions=new Map,this.onResponse=r=>{let n=r.Header.ClientTag;if(n==null){this.emit("Message",r);return}let i=this.requests.get(n);i!=null&&(clearTimeout(i.timeout),this.requests.delete(n),i.resolve(r));let a=this.subscriptions.get(n);a!=null&&(a.url.includes("/button/")&&a.url.includes("/status/event")&&console.error(`[PROCESSOR_RAW] URL: ${a.url}, Event: ${JSON.stringify(r.Body)}`),a.callback(r))},this.onSocketData=r=>{this.secure?this.parse(r,this.onResponse):this.emit("Message",JSON.parse(r.toString()))},this.onSocketDisconnect=()=>{this.teardown||this.emit("Disconnect")},this.onSocketError=r=>{this.emit("Error",r)},this.host=e,this.secure=t!=null,this.certificate=$e({ca:"",cert:"",key:""},t!=null?t:this.authorityCertificate())}static reachable(e){return new Promise(t=>{let r=new eD.default.Socket,n=i=>{r.destroy(),t(i)};r.setTimeout(hD),r.once("error",()=>n(!1)),r.once("timeout",()=>n(!1)),r.connect(Ax,e,()=>n(!0))})}connect(){return new Promise((e,t)=>{this.teardown=!1,this.socket=void 0;let r=[...this.subscriptions.values()],n=new lD(this.host,this.secure?fD:Ax,this.certificate);n.on("Data",this.onSocketData),n.on("Error",this.onSocketError),n.on("Disconnect",this.onSocketDisconnect),n.connect().then(i=>{this.physicalAccess(this.secure).then(()=>{let a=[];if(this.subscriptions.clear(),this.socket=n,this.secure)for(let s of r)a.push(this.subscribe(s.url,s.listener));Promise.all(a).then(()=>{this.emit("Connect",i),e()})})}).catch(i=>t(i))})}disconnect(){var e;this.teardown=!0,this.secure&&this.drainRequests(),this.subscriptions.clear(),(e=this.socket)==null||e.disconnect()}read(e){return new Promise((t,r)=>{let n=(0,du.v4)();if(!this.secure)return r(new Error("Only available for secure connections"));this.sendRequest(n,"ReadRequest",e).then(i=>i.Body==null?r(new Error(`${e} no body`)):i.Body instanceof bx?r(new Error(i.Body.Message)):t(i.Body)).catch(i=>r(i))})}authenticate(e){return new Promise((t,r)=>{var n;if(this.secure)return r(new Error("Only available for physical connections"));let i={Header:{RequestType:"Execute",Url:"/pair",ClientTag:"get-cert"},Body:{CommandType:"CSR",Parameters:{CSR:e.cert,DisplayName:"get_lutron_cert.py",DeviceUID:"000000000000",Role:"Admin"}}},a=setTimeout(()=>r(new Error("Authentication timeout exceeded")),5e3);this.once("Message",s=>{clearTimeout(a),t({ca:s.Body.SigningResult.RootCertificate,cert:s.Body.SigningResult.Certificate,key:rD.pki.privateKeyToPem(e.key)})}),(n=this.socket)==null||n.write(i)})}update(e,t){return new Promise((r,n)=>{let i=(0,du.v4)();if(!this.secure)return n(new Error("Only available for secure connections"));this.sendRequest(i,"UpdateRequest",e,t).then(a=>a.Body instanceof bx?n(new Error(a.Body.Message)):r(a.Body)).catch(a=>n(a))})}command(e,t){return new Promise((r,n)=>{let i=(0,du.v4)();if(!this.secure)return n(new Error("Only available for secure connections"));this.sendRequest(i,"CreateRequest",e,t).then(()=>r()).catch(a=>n(a))})}subscribe(e,t){return new Promise((r,n)=>{if(!this.secure)return n(new Error("Only available for secure connections"));let i=(0,du.v4)();this.sendRequest(i,"SubscribeRequest",e).then(a=>{a.Header.StatusCode!=null&&a.Header.StatusCode.isSuccessful()&&this.subscriptions.set(i,{url:e,listener:t,callback:s=>t(s.Body)}),r()}).catch(a=>n(a))})}drainRequests(){for(let e of this.requests.keys()){let t=this.requests.get(e);clearTimeout(t.timeout)}this.requests.clear()}sendRequest(e,t,r,n){return new Promise((i,a)=>{if(this.requests.has(e)){let o=this.requests.get(e);o.reject(new Error(`tag "${e}" reused`)),clearTimeout(o.timeout),this.requests.delete(e)}let s={CommuniqueType:t,Header:{ClientTag:e,Url:r},Body:n};if(this.socket==null)return a(new Error("Connection not established"));this.socket.write(s).then(()=>{this.requests.set(e,{message:s,resolve:i,reject:a,timeout:setTimeout(()=>i(Ux.parse(JSON.stringify({Header:{MessageBodyType:"ExceptionDetail"},Body:{Message:"Request timeout"}}))),5e3)})}).catch(o=>a(o))})}authorityCertificate(){let e=Z6.default.resolve(__dirname,"../authority");if(xx.default.existsSync(e)){let t=xx.default.readFileSync(e);if(t==null)return null;let r=tD.BSON.deserialize(t);return r.ca=Buffer.from(r.ca,"base64").toString("utf8"),r.key=Buffer.from(r.key,"base64").toString("utf8"),r.cert=Buffer.from(r.cert,"base64").toString("utf8"),r}return null}physicalAccess(e){return new Promise((t,r)=>{if(e)return t();let n=setTimeout(()=>r(new Error("Physical timeout exceeded")),6e4);this.once("Message",i=>i.Body.Status.Permissions.includes("PhysicalAccess")?(clearTimeout(n),t()):r(new Error("Unknown pairing error")))})}},dD=class{constructor(e){let t=e.addresses.find(r=>r.family===J6.HostAddressFamily.IPv4)||e.addresses[0];this.connection=new qx(t.address)}authenticate(){return Lx(this,null,function*(){return new Promise((e,t)=>{this.connection.connect().then(()=>{this.createCertificateRequest("mkellsy-mqtt-lutron").then(r=>{this.connection.authenticate(r).then(n=>e(n)).catch(n=>t(n))}).catch(r=>t(r))}).catch(r=>t(r))})})}createCertificateRequest(e){return new Promise((t,r)=>{dh.pki.rsa.generateKeyPair({bits:2048},(n,i)=>{if(n==null){let a=dh.pki.createCertificationRequest();return a.publicKey=i.publicKey,a.setSubject([{name:"commonName",value:e}]),a.sign(i.privateKey),t({key:i.privateKey,cert:dh.pki.certificationRequestToPem(a)})}return r(new Error("Error generating RSA keys"))})})}},ei=Te(require("fs")),za=Te(require("path")),_x=Te(require("os")),wx=require("bson"),Mx=class{constructor(){this.context={};let e=this.open("pairing")||{},t=Object.keys(e);for(let r=0;r<t.length;r++)e[t[r]]=this.decrypt(e[t[r]]);this.context=e}get processors(){return Object.keys(this.context).filter(e=>e!=="authority")}has(e){return this.context[e]!=null}get(e){return this.context[e]}set(e,t){this.context[e.id]=$e({},t),this.save("pairing",this.context)}decrypt(e){return e==null?null:(e.ca=Buffer.from(e.ca,"base64").toString("utf8"),e.key=Buffer.from(e.key,"base64").toString("utf8"),e.cert=Buffer.from(e.cert,"base64").toString("utf8"),e)}encrypt(e){return e==null?null:(e.ca=Buffer.from(e.ca).toString("base64"),e.key=Buffer.from(e.key).toString("base64"),e.cert=Buffer.from(e.cert).toString("base64"),e)}open(e){let t=za.default.join(_x.default.homedir(),".leap");if(ei.default.existsSync(t)||ei.default.mkdirSync(t),ei.default.existsSync(za.default.join(t,e))){let r=ei.default.readFileSync(za.default.join(t,e));return wx.BSON.deserialize(r)}return null}save(e,t){let r=za.default.join(_x.default.homedir(),".leap");ei.default.existsSync(r)||ei.default.mkdirSync(r);let n=$e({},t),i=Object.keys(n);for(let a=0;a<i.length;a++)n[i[a]]=this.encrypt(n[i[a]]);ei.default.writeFileSync(za.default.join(r,e),wx.BSON.serialize(n))}},pD=Te(require("os")),vD=Te(require("path")),yD=Te(mr()),gD=Te(Ef()),mD=fn(),Ix=$C(),Bx=Le(),Fx=class extends mD.EventEmitter{constructor(){super(),this.onAvailable=e=>{if(!this.isProcessorService(e))return;let t=this.parseProcessorAddress(e);this.isProcessorCached(t)||this.emit("Discovered",t),this.cacheProcessor(t)},this.cache=gD.default.load("discovery",vD.default.join(pD.default.homedir(),".leap")),this.cached=this.cache.getKey("/hosts")||[],this.cache.setKey("/hosts",this.cached),this.cache.save(!0)}search(){this.stop();for(let e=0;e<this.cached.length;e++)this.emit("Discovered",this.cached[e]);this.discovery=new Ix.MDNSServiceDiscovery({type:"lutron",protocol:Ix.Protocol.TCP}),this.discovery.onAvailable(this.onAvailable)}stop(){var e;(e=this.discovery)==null||e.destroy()}isProcessorCached(e){return this.cached.find(t=>(0,yD.default)(t,e))!=null}isProcessorService(e){let t=e.data.get("systype");return!(t==null||typeof t=="boolean")}cacheProcessor(e){let t=this.cached.findIndex(r=>r.id===e.id);t>=0?this.cached[t]=e:this.cached.push(e),this.cache.setKey("/hosts",this.cached),this.cache.save()}parseProcessorAddress(e){var t;let r=this.discovery.serviceData.get(e.id).SRV._record.target,n=[];for(let i=0;i<((t=e.addresses)==null?void 0:t.length);i++)n.push({address:e.addresses[i].host,family:/^([\da-f]{1,4}:){7}[\da-f]{1,4}$/i.test(e.addresses[i].host)?Bx.HostAddressFamily.IPv6:Bx.HostAddressFamily.IPv4});return{id:r.match(new RegExp("[Ll]utron-(?<id>\\w+)\\.local")).groups.id.toUpperCase(),type:String(e.data.get("systype")),addresses:n}}},ED=yi(),Wa=Te(Bn()),pu=Le(),SD=fn(),CD=yi(),xD=Te(Ef()),bD=Te(Bn()),TD=Te(require("os")),AD=Te(require("path")),_D=fn(),wD=2e4,ID=class extends _D.EventEmitter{constructor(e,t){super(),this.discovered=new Map,this.onConnect=()=>{this.log.info("connected"),this.emit("Connect",this.connection)},this.onMessage=r=>{this.log.debug("message"),this.emit("Message",r)},this.onDisconnect=()=>{this.log.info("disconnected"),this.emit("Disconnect")},this.onError=r=>{this.emit("Error",r)},this.uuid=e,this.logger=(0,CD.get)(`Processor ${bD.default.dim(this.id)}`),this.connection=t,this.cache=xD.default.load(e,AD.default.join(TD.default.homedir(),".leap")),this.connection.on("Connect",this.onConnect),this.connection.on("Message",this.onMessage),this.connection.on("Error",this.onError),this.connection.once("Disconnect",this.onDisconnect)}get id(){return this.uuid}get log(){return this.logger}get devices(){return this.discovered}connect(){return new Promise((e,t)=>{this.connection.connect().then(()=>{this.startHeartbeat(),e()}).catch(r=>t(r))})}disconnect(){this.stopHeartbeat(),this.connection.disconnect()}clear(){for(let e of this.cache.keys())this.cache.removeKey(e);this.cache.removeCacheFile(),this.cache.save()}ping(){return this.read("/server/1/status/ping")}read(e){return this.connection.read(e)}project(){return new Promise((e,t)=>{let r=this.cache.getKey("/project");if(r!=null)return e(r);this.connection.read("/project").then(n=>{this.cache.setKey("/project",n),this.cache.save(!0),e(n)}).catch(n=>t(n))})}system(){return new Promise((e,t)=>{let r=this.cache.getKey("/device?where=IsThisDevice:true");if(r!=null)return e(r);this.connection.read("/device?where=IsThisDevice:true").then(n=>{if(n[0]!=null)return this.cache.setKey("/device?where=IsThisDevice:true",n[0]),this.cache.save(!0),e(n[0]);t(new Error("No system device found"))}).catch(n=>t(n))})}areas(){return new Promise((e,t)=>{let r=this.cache.getKey("/area");if(r!=null)return e(r);this.connection.read("/area").then(n=>{this.cache.setKey("/area",n),this.cache.save(!0),e(n)}).catch(n=>t(n))})}timeclocks(){return new Promise((e,t)=>{let r=this.cache.getKey("/timeclock");if(r!=null)return e(r);this.connection.read("/timeclock").then(n=>{this.cache.setKey("/timeclock",n),this.cache.save(!0),e(n)}).catch(n=>t(n))})}zones(e){return new Promise((t,r)=>{let n=this.cache.getKey(`${e.href}/associatedzone`);if(n!=null)return t(n);this.connection.read(`${e.href}/associatedzone`).then(i=>{this.cache.setKey(`${e.href}/associatedzone`,i),this.cache.save(!0),t(i)}).catch(i=>r(i))})}status(e){return this.read(`${e.href}/status`)}statuses(e){return new Promise((t,r)=>{let n=[];n.push(this.read("/zone/status")),n.push(this.read("/area/status")),e==="RadioRa3Processor"&&n.push(this.read("/timeclock/status")),Promise.all(n).then(([i,a,s])=>t([...i,...a,...s||[]])).catch(i=>r(i))})}controls(e){return new Promise((t,r)=>{let n=this.cache.getKey(`${e.href}/associatedcontrolstation`);if(n!=null)return t(n);this.connection.read(`${e.href}/associatedcontrolstation`).then(i=>{this.cache.setKey(`${e.href}/associatedcontrolstation`,i),this.cache.save(!0),t(i)}).catch(i=>r(i))})}device(e){return new Promise((t,r)=>{let n=this.cache.getKey(e.href);if(n!=null)return t(n);this.connection.read(e.href).then(i=>{this.cache.setKey(e.href,i),this.cache.save(!0),t(i)}).catch(i=>r(i))})}buttons(e){return new Promise((t,r)=>{let n=this.cache.getKey(`${e.href}/buttongroup/expanded`);if(n!=null)return t(n);this.connection.read(`${e.href}/buttongroup/expanded`).then(i=>{this.cache.setKey(`${e.href}/buttongroup/expanded`,i),this.cache.save(!0),t(i)}).catch(i=>r(i))})}update(e,t,r){return this.connection.update(`${e.href}/${t}`,r)}command(e,t){return this.connection.command(`${e.href}/commandprocessor`,{Command:t})}subscribe(e,t){return this.connection.subscribe(e.href,t)}startHeartbeat(){this.stopHeartbeat(),this.ping().finally(()=>{this.heartbeatTimeout=setTimeout(()=>this.startHeartbeat(),wD)})}stopHeartbeat(){clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=void 0}},Ne=Le(),BD=Te(mr()),OD=Le(),RD=yi(),ND=Le(),DD=Te(Bn()),PD=fn(),ir=class extends PD.EventEmitter{constructor(e,t,r,n,i){super(),this.initialized=!1,this.fields=new Map,this.processor=t,this.deviceAddress=n.href,this.deviceName=n.Name,this.deviceArea=r,this.deviceType=e,this.logger=(0,RD.get)(`Device ${DD.default.dim(this.id)}`),this.state=i}get manufacturer(){return"Lutron Electronics Co., Inc"}get id(){var e;return`LEAP-${this.processor.id}-${ND.DeviceType[this.deviceType].toUpperCase()}-${(e=this.deviceAddress)==null?void 0:e.split("/")[2]}`}get name(){return this.deviceName}get room(){return this.area.Name}get capabilities(){return Object.fromEntries(this.fields)}get log(){return this.logger}get address(){return{href:this.deviceAddress}}get type(){return this.deviceType}get area(){return this.deviceArea}get status(){return this.state}},LD=class extends ir{constructor(e,t,r){super(OD.DeviceType.Contact,e,t,r,{state:"Open"}),this.fields.set("state",{type:"String",values:["Open","Closed"]})}update(e){let t=$e({},this.status);e.CCOLevel!=null&&(this.state.state=e.CCOLevel),this.initialized&&!(0,BD.default)(this.state,t)&&this.emit("Update",this,this.state),this.initialized=!0}set(e){return this.processor.command(this.address,{CommandType:"GoToCCOLevel",CCOLevelParameters:{CCOLevel:e.state}})}},kD=Te(mr()),UD=Le(),qD=class extends ir{constructor(e,t,r){super(UD.DeviceType.Dimmer,e,t,r,{state:"Off",level:0}),this.fields.set("state",{type:"String",values:["On","Off"]}),this.fields.set("level",{type:"Integer",min:0,max:100})}update(e){let t=$e({},this.status);e.Level!=null&&(this.state.state=e.Level>0?"On":"Off",this.state.level=e.Level),this.initialized&&!(0,kD.default)(this.state,t)&&this.emit("Update",this,this.state),this.initialized=!0}set(e){return this.processor.command(this.address,{CommandType:"GoToLevel",Parameter:[{Type:"Level",Value:e.state==="Off"?0:e.level}]})}},MD=Te(mr()),FD=Le(),VD=class extends ir{constructor(e,t,r){super(FD.DeviceType.Fan,e,t,r,{state:"Off",speed:0}),this.fields.set("state",{type:"String",values:["On","Off"]}),this.fields.set("speed",{type:"Integer",min:0,max:7})}update(e){let t=$e({},this.status),r=this.parseFanSpeed(e.FanSpeed);this.state=Ki($e({},t),{state:r>0?"On":"Off",speed:r}),this.initialized&&!(0,MD.default)(this.state,t)&&this.emit("Update",this,this.state),this.initialized=!0}set(e){let t=e.state==="Off"?"Off":this.lookupFanSpeed(e.speed);return this.processor.command(this.address,{CommandType:"GoToFanSpeed",FanSpeedParameters:[{FanSpeed:t}]})}lookupFanSpeed(e){switch(e){case 1:return"Low";case 2:case 3:return"Medium";case 4:case 5:return"MediumHigh";case 6:case 7:return"High";default:return"Off"}}parseFanSpeed(e){switch(e){case"Low":return 1;case"Medium":return 3;case"MediumHigh":return 5;case"High":return 7;default:return 0}}},Vi=Te(Bn()),KD=Le(),KU=Le(),At=Le(),HD=fn(),Vx=class extends HD.EventEmitter{constructor(e,t,r,n){super(),this.state=At.TriggerState.Idle,this.index=r,this.processor=e,this.action=t,this.options=$e({doubleClickSpeed:300,clickSpeed:450,raiseLower:!1,triggerOn:"pressAndRelease"},n),this.button={id:this.id,index:this.index,name:((this.action.Engraving||{}).Text||this.action.Name).replace(/\n/g," ")},this.options.raiseLower===!0&&(this.button.raiseLower=!0)}get id(){return`LEAP-${this.processor.id}-BUTTON-${this.action.href.split("/")[2]}`}get definition(){return this.button}reset(){this.state=At.TriggerState.Idle,this.timer&&clearTimeout(this.timer),this.timer=void 0}update(e){let t=()=>{this.reset(),this.options.clickSpeed!==0&&this.emit("LongPress",this.button)},r=()=>{this.reset(),this.emit("Press",this.button)};if(this.options.triggerOn==="press"){if(e.ButtonEvent.EventType==="Press"){if(this.state===At.TriggerState.Idle)this.state=At.TriggerState.Up,this.options.doubleClickSpeed>0?this.timer=setTimeout(r,this.options.doubleClickSpeed):r();else if(this.state===At.TriggerState.Up&&this.timer){if(this.reset(),this.options.doubleClickSpeed===0)return;this.emit("DoublePress",this.button)}}else e.ButtonEvent.EventType==="LongHold"&&(this.reset(),this.emit("LongPress",this.button));return}if(this.options.triggerOn==="release"){if(e.ButtonEvent.EventType==="Release"){if(this.state===At.TriggerState.Idle)this.state=At.TriggerState.Up,this.options.doubleClickSpeed>0?this.timer=setTimeout(r,this.options.doubleClickSpeed):r();else if(this.state===At.TriggerState.Up&&this.timer){if(this.reset(),this.options.doubleClickSpeed===0)return;this.emit("DoublePress",this.button)}}else e.ButtonEvent.EventType==="LongHold"&&(this.reset(),this.emit("LongPress",this.button));return}switch(this.state){case At.TriggerState.Idle:{if(e.ButtonEvent.EventType==="Press"&&this.options.clickSpeed>0){this.state=At.TriggerState.Down,this.timer=setTimeout(t,this.options.clickSpeed);return}if(e.ButtonEvent.EventType==="Press"){this.state=At.TriggerState.Down,r();return}break}case At.TriggerState.Down:{if(e.ButtonEvent.EventType==="Release"){this.state=At.TriggerState.Up,this.timer&&clearTimeout(this.timer),this.options.doubleClickSpeed>0&&(this.timer=setTimeout(r,this.options.doubleClickSpeed+(this.options.raiseLower?250:0)));return}this.reset();break}case At.TriggerState.Up:{if(e.ButtonEvent.EventType==="Press"&&this.timer){if(this.reset(),this.options.doubleClickSpeed===0)return;this.emit("DoublePress",this.button);return}this.reset();break}}}},jD=class extends ir{constructor(e,t,r,n){super(KD.DeviceType.Keypad,e,t,r,{led:{href:"/unknown"},state:"Off"}),this.buttons=[],this.triggers=[],this.config=n||{},r.DeviceType==="SunnataKeypad"||r.DeviceType==="SunnataHybridKeypad"||r.DeviceType==="PalladiomKeypad"?(this.log.info(Vi.default.cyan(`KeypadController: Initializing ${r.DeviceType} at ${this.address.href}`)),this.initPromise=this.processor.buttons(this.address).then(i=>{var a,s,o;this.log.info(Vi.default.cyan(`KeypadController: Retrieved ${(i==null?void 0:i.length)||0} button groups`));for(let c=0;c<(i==null?void 0:i.length);c++)for(let u=0;u<((a=i[c].Buttons)==null?void 0:a.length);u++){let l=i[c].Buttons[u],f=(s=l.ProgrammingModel)==null?void 0:s.ProgrammingModelType,h=((l.Engraving||{}).Text||l.Name).replace(/\n/g," ");console.error(`[KEYPAD_INIT] Button: "${h}", Type: ${f||"undefined"}, Index: ${l.ButtonNumber}`);let p=(o=this.config.buttonConfig)==null?void 0:o[h],d=(p==null?void 0:p.triggerOn)||"release";this.setupTriggerButton(l,l.ButtonNumber,{triggerOn:d,doubleClickSpeed:500,clickSpeed:0})}this.log.info(Vi.default.green(`KeypadController: Successfully initialized ${this.buttons.length} buttons with TriggerController (default: release mode)`))}).catch(i=>{this.log.error(Vi.default.red(`KeypadController: Error fetching buttons for ${r.DeviceType}: ${i.message}`)),this.log.error(Vi.default.red(i.stack||"No stack trace"))})):this.initPromise=Promise.resolve()}initialize(){return this.initPromise||Promise.resolve()}setupTriggerButton(e,t,r){let n=new Vx(this.processor,e,t,r);this.triggers.push(n),this.buttons.push(n.definition);let i=r.triggerOn||"pressAndRelease";console.error(`[TRIGGER_SETUP] Button: "${n.definition.name}", ID: ${n.definition.id}, Mode: ${i}, Index: ${t}`),this.processor.subscribe({href:`${e.href}/status/event`},a=>{let s=a.ButtonEvent.EventType;console.error(`[TRIGGER_EVENT] "${e.Name.replace(/\n/g," ")}" received: ${s} (triggerMode: ${i})`),n.update(a)}).catch(a=>this.log.error(Vi.default.red(a.message))),n.on("Press",a=>{console.error(`[TRIGGER_ACTION] "${a.name}" -> Press`),this.emit("Action",this,a,"Press")}),n.on("DoublePress",a=>{console.error(`[TRIGGER_ACTION] "${a.name}" -> DoublePress`),this.emit("Action",this,a,"DoublePress")}),n.on("LongPress",a=>{console.error(`[TRIGGER_ACTION] "${a.name}" -> LongPress`),this.emit("Action",this,a,"LongPress")})}update(){this.initialized=!0}set(e){return this.processor.update(e.led,"status",{LEDStatus:{State:e.state==="On"?"On":"Off"}})}},Ox=Te(Bn()),$D=Le(),GD=new Map([["Pico2Button",new Map([[0,[1,!1]],[2,[2,!1]]])],["Pico2ButtonRaiseLower",new Map([[0,[1,!1]],[2,[4,!1]],[3,[2,!0]],[4,[3,!0]]])],["Pico3Button",new Map([[0,[1,!1]],[1,[2,!1]],[2,[3,!1]]])],["Pico3ButtonRaiseLower",new Map([[0,[1,!1]],[1,[3,!1]],[2,[5,!1]],[3,[2,!0]],[4,[4,!0]]])],["Pico4Button2Group",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])],["Pico4ButtonScene",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])],["Pico4ButtonZone",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])],["PaddleSwitchPico",new Map([[0,[1,!1]],[2,[2,!1]]])],["Pico4Button",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])]]),zD=class extends ir{constructor(e,t,r){super($D.DeviceType.Remote,e,t,r,{state:"Unknown"}),this.buttons=[],this.triggers=new Map,this.set=()=>Promise.resolve(),this.initPromise=this.processor.buttons(this.address).then(n=>{var i;for(let a=0;a<(n==null?void 0:n.length);a++)for(let s=0;s<((i=n[a].Buttons)==null?void 0:i.length);s++){let o=n[a].Buttons[s],c=GD.get(r.DeviceType),u=c.get(o.ButtonNumber)[0],l=c.get(o.ButtonNumber)[1],f=new Vx(this.processor,o,u,{raiseLower:l});f.on("Press",h=>{this.emit("Action",this,h,"Press"),setTimeout(()=>this.emit("Action",this,h,"Release"),100)}),f.on("DoublePress",h=>{this.emit("Action",this,h,"DoublePress"),setTimeout(()=>this.emit("Action",this,h,"Release"),100)}),f.on("LongPress",h=>{this.emit("Action",this,h,"LongPress"),setTimeout(()=>this.emit("Action",this,h,"Release"),100)}),this.triggers.set(o.href,f),this.buttons.push(f.definition),this.processor.subscribe({href:`${o.href}/status/event`},h=>this.triggers.get(o.href).update(h)).catch(h=>this.log.error(Ox.default.red(h.message)))}}).catch(n=>this.log.error(Ox.default.red(n.message)))}initialize(){return this.initPromise||Promise.resolve()}update(){this.initialized=!0}},WD=Te(mr()),QD=Le(),YD=class extends ir{constructor(e,t,r){super(QD.DeviceType.Occupancy,e,t,r,{state:"Unoccupied"}),this.set=()=>Promise.resolve()}update(e){let t=$e({},this.status);e.OccupancyStatus!=null&&(this.state.state=e.OccupancyStatus==="Occupied"?"Occupied":"Unoccupied"),(0,WD.default)(this.state,t)||this.emit("Update",this,this.state),this.initialized=!0}},XD=Te(mr()),JD=Le(),ZD=class extends ir{constructor(e,t,r){super(JD.DeviceType.Shade,e,t,r,{state:"Closed",level:0,tilt:0}),this.fields.set("state",{type:"String",values:["Open","Closed"]}),this.fields.set("level",{type:"Integer",min:0,max:100}),this.fields.set("tilt",{type:"Integer",min:0,max:100})}update(e){let t=$e({},this.status);e.Level!=null&&(this.state.state=e.Level>0?"Open":"Closed",this.state.level=e.Level),e.Tilt!=null&&(this.state.tilt=e.Tilt),this.initialized&&!(0,XD.default)(this.state,t)&&this.emit("Update",this,this.state),this.initialized=!0}set(e){let t=[];return t.push(this.processor.command(this.address,{CommandType:"GoToLevel",Parameter:[{Type:"Level",Value:e.state==="Closed"?0:e.level}]})),(e.tilt!=null||e.state==="Closed")&&t.push(this.processor.command(this.address,{CommandType:"TiltParameters",TiltParameters:{Tilt:e.state==="Closed"?0:e.tilt}})),Promise.all(t)}},eP=Te(mr()),tP=Le(),rP=class extends ir{constructor(e,t,r){super(tP.DeviceType.Strip,e,t,r,{state:"Off",level:0,luminance:1800}),this.fields.set("state",{type:"String",values:["On","Off"]}),this.fields.set("level",{type:"Integer",min:0,max:100}),this.fields.set("luminance",{type:"Integer",min:1800,max:3e3})}update(e){let t=$e({},this.status);e.Level!=null&&(this.state.state=e.Level>0?"On":"Off",this.state.level=e.Level),e.ColorTuningStatus!=null&&e.ColorTuningStatus.WhiteTuningLevel!=null&&e.ColorTuningStatus.WhiteTuningLevel.Kelvin!=null&&(this.state.luminance=e.ColorTuningStatus.WhiteTuningLevel.Kelvin),this.initialized&&!(0,eP.default)(this.state,t)&&this.emit("Update",this,this.state),this.initialized=!0}set(e){return e.state==="Off"?this.processor.command(this.address,{CommandType:"GoToWhiteTuningLevel",WhiteTuningLevelParameters:{Level:0}}):this.processor.command(this.address,{CommandType:"GoToWhiteTuningLevel",WhiteTuningLevelParameters:{Level:e.level,WhiteTuningLevel:{Kelvin:e.luminance}}})}},nP=Te(mr()),iP=Le(),aP=class extends ir{constructor(e,t,r){super(iP.DeviceType.Switch,e,t,r,{state:"Off"}),this.fields.set("state",{type:"String",values:["On","Off"]})}update(e){let t=$e({},this.status);this.state=Ki($e({},t),{state:e.SwitchedLevel||"Unknown"}),this.initialized&&!(0,nP.default)(this.state,t)&&this.emit("Update",this,this.state),this.initialized=!0}set(e){return this.processor.command(this.address,{CommandType:"GoToLevel",Parameter:[{Type:"Level",Value:e.state==="On"?100:0}]})}},sP=Te(mr()),oP=Le(),uP=class extends ir{constructor(e,t,r){super(oP.DeviceType.Timeclock,e,t,r,{state:"Off"}),this.set=()=>Promise.resolve(),this.fields.set("state",{type:"String",values:["On","Off"]})}update(e){let t=$e({},this.status);this.state=Ki($e({},t),{state:e.EnabledState==="Enabled"?"On":"Off"}),this.initialized&&!(0,sP.default)(this.state,t)&&this.emit("Update",this,this.state),this.initialized=!0}},cP=Le(),lP=class extends ir{constructor(e,t,r){super(cP.DeviceType.Unknown,e,t,r,{state:"Unknown"}),this.set=()=>Promise.resolve()}update(){}};function ph(e,t,r,n){var i;switch(Kx(r.ControlType||r.DeviceType)){case Ne.DeviceType.Contact:return new LD(e,t,r);case Ne.DeviceType.Dimmer:return new qD(e,t,r);case Ne.DeviceType.Fan:return new VD(e,t,r);case Ne.DeviceType.Keypad:return new jD(e,t,r,n);case Ne.DeviceType.Occupancy:return new YD(e,t,{href:`/occupancy/${(i=t.href)==null?void 0:i.split("/")[2]}`,Name:r.Name});case Ne.DeviceType.Remote:return new zD(e,t,r);case Ne.DeviceType.Shade:return new ZD(e,t,r);case Ne.DeviceType.Strip:return new rP(e,t,r);case Ne.DeviceType.Switch:return new aP(e,t,r);case Ne.DeviceType.Timeclock:return new uP(e,t,r);default:return new lP(e,t,r)}}function Kx(e){switch(e){case"Switched":case"PowPakSwitch":case"OutdoorPlugInSwitch":return Ne.DeviceType.Switch;case"Dimmed":case"PlugInDimmer":return Ne.DeviceType.Dimmer;case"Shade":return Ne.DeviceType.Shade;case"Timeclock":return Ne.DeviceType.Timeclock;case"WhiteTune":return Ne.DeviceType.Strip;case"FanSpeed":return Ne.DeviceType.Fan;case"Pico2Button":case"Pico3Button":case"Pico4Button":case"Pico3ButtonRaiseLower":return Ne.DeviceType.Remote;case"SunnataDimmer":case"SunnataSwitch":case"SunnataKeypad":case"SunnataHybridKeypad":case"PalladiomKeypad":return Ne.DeviceType.Keypad;case"RPSCeilingMountedOccupancySensor":return Ne.DeviceType.Occupancy;case"CCO":return Ne.DeviceType.Contact;default:return Ne.DeviceType.Unknown}}function fP(e){if(e.AddressedState!=="Addressed")return!1;switch(e.DeviceType){case"Pico2Button":case"Pico3Button":case"Pico4Button":case"Pico3ButtonRaiseLower":return!0;case"SunnataKeypad":case"SunnataHybridKeypad":case"PalladiomKeypad":return!0;case"RPSCeilingMountedOccupancySensor":return!0;default:return!1}}var Rx=(0,ED.get)("Client"),Nx=5e3,Hx=class extends SD.EventEmitter{constructor(e,t){super(1/0),this.discovered=new Map,this.onDiscovered=r=>{if(this.discovered.delete(r.id),!this.context.has(r.id))return;let n=r.addresses.find(a=>a.family===pu.HostAddressFamily.IPv4)||r.addresses[0],i=new ID(r.id,new qx(n.address,this.context.get(r.id)));this.discovered.set(r.id,i),i.log.info(`Processor ${Wa.default.green(n.address)}`),i.on("Disconnect",()=>{setTimeout(()=>this.onDiscovered(r),Nx)}).on("Connect",()=>{this.refresh&&i.clear(),Promise.all([i.system(),i.project(),i.areas()]).then(([a,s,o])=>{let c=a==null?void 0:a.FirmwareImage.Firmware.DisplayName,u=a==null?void 0:a.DeviceType,l=[];i.log.info(`Firmware ${Wa.default.green(c||"Unknown")}`),i.log.info(s.ProductType),i.subscribe({href:"/zone/status"},f=>{for(let h of f){let p=i.devices.get(h.Zone.href);p!=null&&p.update(h)}}).catch(f=>this.onProcessorError(r,f)),i.subscribe({href:"/area/status"},f=>{var h;for(let p of f){let d=i.devices.get(`/occupancy/${(h=p.href)==null?void 0:h.split("/")[2]}`);d!=null&&p.OccupancyStatus!=null&&d.update(p)}}).catch(f=>this.onProcessorError(r,f)),u==="RadioRa3Processor"&&i.subscribe({href:"/timeclock/status"},f=>{for(let h of f){let p=i.devices.get(h.Timeclock.href);p!=null&&p.update(h)}}).catch(f=>this.onProcessorError(r,f));for(let f of o)l.push(new Promise(h=>{this.discoverZones(i,f).then(()=>h())})),l.push(new Promise(h=>{this.discoverControls(i,f).then(()=>h())}));u==="RadioRa3Processor"&&l.push(new Promise(f=>{this.discoverTimeclocks(i).then(()=>f())})),Promise.all(l).then(()=>{i.statuses(u).then(f=>{for(let h of f){let p=i.devices.get((h.Zone||{}).href||""),d=i.devices.get(`/occupancy/${(h.href||"").split("/")[2]}`);p!=null&&p.update(h),d!=null&&h.OccupancyStatus!=null&&d.update(h)}}),i.log.info(`discovered ${Wa.default.green([...i.devices.keys()].length.toString())} devices`),this.emit("Available",[...i.devices.values()])})}).catch(a=>this.onProcessorError(r,a))}).on("Error",a=>this.onProcessorError(r,a)),i.connect().catch(a=>this.onProcessorError(r,a))},this.onDeviceUpdate=(r,n)=>{this.emit("Update",r,n)},this.onDeviceAction=(r,n,i)=>{this.emit("Action",r,n,i)},this.onProcessorError=(r,n)=>{if(n.message==null){Rx.error(Wa.default.red(String(n)));return}if(n.message.match(/ENOTFOUND|ENETUNREACH|EHOSTUNREACH|ECONNRESET|EPIPE|ECONNREFUSED|ETIMEDOUT/g)!=null){setTimeout(()=>this.onDiscovered(r),Nx);return}Rx.error(Wa.default.red(n.message))},this.context=new Mx,this.discovery=new Fx,this.refresh=e===!0,this.config=t||{},this.discovery.on("Discovered",this.onDiscovered).search()}get processors(){return[...this.discovered.keys()]}processor(e){return this.discovered.get(e)}close(){this.discovery.stop();for(let e of this.discovered.values())e.disconnect();this.discovered.clear()}discoverZones(e,t){return new Promise(r=>{if(!t.IsLeaf)return r();e.zones(t).then(n=>{for(let i of n){let a=ph(e,t,Ki($e({},i),{Name:`${t.Name} ${i.Name}`}),this.config).on("Update",this.onDeviceUpdate).on("Action",this.onDeviceAction);e.devices.set(i.href,a)}r()}).catch(()=>r())})}discoverTimeclocks(e){return new Promise(t=>{e.timeclocks().then(r=>{for(let n of r){let i=ph(e,{href:n.href,Name:n.Name,ControlType:"Timeclock",Parent:n.Parent,IsLeaf:!0,AssociatedZones:[],AssociatedControlStations:[],AssociatedOccupancyGroups:[]},Ki($e({},n),{ControlType:"Timeclock"}),this.config).on("Update",this.onDeviceUpdate);e.devices.set(n.href,i)}t()}).catch(()=>t())})}discoverControls(e,t){return new Promise(r=>{if(!t.IsLeaf)return r();e.controls(t).then(n=>Lx(this,null,function*(){var i;for(let a of n){let s=yield this.discoverPositions(e,a),o=[];for(let c of s){let u=Kx(c.DeviceType),l=u===pu.DeviceType.Occupancy?`/occupancy/${(i=t.href)==null?void 0:i.split("/")[2]}`:c.href,f=ph(e,t,Ki($e({},c),{Name:`${t.Name} ${a.Name} ${c.Name}`}),this.config).on("Update",this.onDeviceUpdate).on("Action",this.onDeviceAction);e.devices.set(l,f),(u===pu.DeviceType.Keypad||u===pu.DeviceType.Remote)&&o.push(f.initialize())}yield Promise.all(o)}r()})).catch(()=>r())})}discoverPositions(e,t){return new Promise(r=>{if(t.AssociatedGangedDevices==null)return r([]);let n=[];for(let i of t.AssociatedGangedDevices)n.push(e.device(i.Device));Promise.all(n).then(i=>{r(i.filter(a=>fP(a)))}).catch(()=>r([]))})}};function hP(e,t){return new Hx(e,t)}function dP(){return new Promise((e,t)=>{let r=new Fx,n=new Mx;r.on("Discovered",i=>{n.get(i.id)==null&&new dD(i).authenticate().then(a=>{n.set(i,a),e()}).catch(a=>t(a)).finally(()=>r.stop())}),r.search()})}});var Xa=S(gh=>{var gu=class extends Error{constructor(t,r,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=r,this.exitCode=t,this.nestedError=void 0}},yh=class extends gu{constructor(t){super(1,"commander.invalidArgument",t),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};gh.CommanderError=gu;gh.InvalidArgumentError=yh});var mu=S(Eh=>{var{InvalidArgumentError:pP}=Xa(),mh=class{constructor(t,r){switch(this.description=r||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,t[0]){case"<":this.required=!0,this._name=t.slice(1,-1);break;case"[":this.required=!1,this._name=t.slice(1,-1);break;default:this.required=!0,this._name=t;break}this._name.length>3&&this._name.slice(-3)==="..."&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_concatValue(t,r){return r===this.defaultValue||!Array.isArray(r)?[t]:r.concat(t)}default(t,r){return this.defaultValue=t,this.defaultValueDescription=r,this}argParser(t){return this.parseArg=t,this}choices(t){return this.argChoices=t.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new pP(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function vP(e){let t=e.name()+(e.variadic===!0?"...":"");return e.required?"<"+t+">":"["+t+"]"}Eh.Argument=mh;Eh.humanReadableArgName=vP});var Ch=S(zx=>{var{humanReadableArgName:yP}=mu(),Sh=class{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(t){let r=t.commands.filter(n=>!n._hidden);if(t._hasImplicitHelpCommand()){let[,n,i]=t._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/),a=t.createCommand(n).helpOption(!1);a.description(t._helpCommandDescription),i&&a.arguments(i),r.push(a)}return this.sortSubcommands&&r.sort((n,i)=>n.name().localeCompare(i.name())),r}compareOptions(t,r){let n=i=>i.short?i.short.replace(/^-/,""):i.long.replace(/^--/,"");return n(t).localeCompare(n(r))}visibleOptions(t){let r=t.options.filter(a=>!a.hidden),n=t._hasHelpOption&&t._helpShortFlag&&!t._findOption(t._helpShortFlag),i=t._hasHelpOption&&!t._findOption(t._helpLongFlag);if(n||i){let a;n?i?a=t.createOption(t._helpFlags,t._helpDescription):a=t.createOption(t._helpShortFlag,t._helpDescription):a=t.createOption(t._helpLongFlag,t._helpDescription),r.push(a)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleGlobalOptions(t){if(!this.showGlobalOptions)return[];let r=[];for(let n=t.parent;n;n=n.parent){let i=n.options.filter(a=>!a.hidden);r.push(...i)}return this.sortOptions&&r.sort(this.compareOptions),r}visibleArguments(t){return t._argsDescription&&t._args.forEach(r=>{r.description=r.description||t._argsDescription[r.name()]||""}),t._args.find(r=>r.description)?t._args:[]}subcommandTerm(t){let r=t._args.map(n=>yP(n)).join(" ");return t._name+(t._aliases[0]?"|"+t._aliases[0]:"")+(t.options.length?" [options]":"")+(r?" "+r:"")}optionTerm(t){return t.flags}argumentTerm(t){return t.name()}longestSubcommandTermLength(t,r){return r.visibleCommands(t).reduce((n,i)=>Math.max(n,r.subcommandTerm(i).length),0)}longestOptionTermLength(t,r){return r.visibleOptions(t).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestGlobalOptionTermLength(t,r){return r.visibleGlobalOptions(t).reduce((n,i)=>Math.max(n,r.optionTerm(i).length),0)}longestArgumentTermLength(t,r){return r.visibleArguments(t).reduce((n,i)=>Math.max(n,r.argumentTerm(i).length),0)}commandUsage(t){let r=t._name;t._aliases[0]&&(r=r+"|"+t._aliases[0]);let n="";for(let i=t.parent;i;i=i.parent)n=i.name()+" "+n;return n+r+" "+t.usage()}commandDescription(t){return t.description()}subcommandDescription(t){return t.summary()||t.description()}optionDescription(t){let r=[];return t.argChoices&&r.push(`choices: ${t.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),t.defaultValue!==void 0&&(t.required||t.optional||t.isBoolean()&&typeof t.defaultValue=="boolean")&&r.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),t.presetArg!==void 0&&t.optional&&r.push(`preset: ${JSON.stringify(t.presetArg)}`),t.envVar!==void 0&&r.push(`env: ${t.envVar}`),r.length>0?`${t.description} (${r.join(", ")})`:t.description}argumentDescription(t){let r=[];if(t.argChoices&&r.push(`choices: ${t.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),t.defaultValue!==void 0&&r.push(`default: ${t.defaultValueDescription||JSON.stringify(t.defaultValue)}`),r.length>0){let n=`(${r.join(", ")})`;return t.description?`${t.description} ${n}`:n}return t.description}formatHelp(t,r){let n=r.padWidth(t,r),i=r.helpWidth||80,a=2,s=2;function o(d,m){if(m){let E=`${d.padEnd(n+s)}${m}`;return r.wrap(E,i-a,n+s)}return d}function c(d){return d.join(`
`).replace(/^/gm," ".repeat(a))}let u=[`Usage: ${r.commandUsage(t)}`,""],l=r.commandDescription(t);l.length>0&&(u=u.concat([r.wrap(l,i,0),""]));let f=r.visibleArguments(t).map(d=>o(r.argumentTerm(d),r.argumentDescription(d)));f.length>0&&(u=u.concat(["Arguments:",c(f),""]));let h=r.visibleOptions(t).map(d=>o(r.optionTerm(d),r.optionDescription(d)));if(h.length>0&&(u=u.concat(["Options:",c(h),""])),this.showGlobalOptions){let d=r.visibleGlobalOptions(t).map(m=>o(r.optionTerm(m),r.optionDescription(m)));d.length>0&&(u=u.concat(["Global Options:",c(d),""]))}let p=r.visibleCommands(t).map(d=>o(r.subcommandTerm(d),r.subcommandDescription(d)));return p.length>0&&(u=u.concat(["Commands:",c(p),""])),u.join(`
`)}padWidth(t,r){return Math.max(r.longestOptionTermLength(t,r),r.longestGlobalOptionTermLength(t,r),r.longestSubcommandTermLength(t,r),r.longestArgumentTermLength(t,r))}wrap(t,r,n,i=40){let a=" \\f\\t\\v\xA0\u1680\u2000-\u200A\u202F\u205F\u3000\uFEFF",s=new RegExp(`[\\n][${a}]+`);if(t.match(s))return t;let o=r-n;if(o<i)return t;let c=t.slice(0,n),u=t.slice(n).replace(`\r
`,`
`),l=" ".repeat(n),h="\\s\u200B",p=new RegExp(`
|.{1,${o-1}}([${h}]|$)|[^${h}]+?([${h}]|$)`,"g"),d=u.match(p)||[];return c+d.map((m,E)=>m===`
`?"":(E>0?l:"")+m.trimEnd()).join(`
`)}};zx.Help=Sh});var Th=S(Eu=>{var{InvalidArgumentError:gP}=Xa(),xh=class{constructor(t,r){this.flags=t,this.description=r||"",this.required=t.includes("<"),this.optional=t.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(t),this.mandatory=!1;let n=Wx(t);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(t,r){return this.defaultValue=t,this.defaultValueDescription=r,this}preset(t){return this.presetArg=t,this}conflicts(t){return this.conflictsWith=this.conflictsWith.concat(t),this}implies(t){let r=t;return typeof t=="string"&&(r={[t]:!0}),this.implied=Object.assign(this.implied||{},r),this}env(t){return this.envVar=t,this}argParser(t){return this.parseArg=t,this}makeOptionMandatory(t=!0){return this.mandatory=!!t,this}hideHelp(t=!0){return this.hidden=!!t,this}_concatValue(t,r){return r===this.defaultValue||!Array.isArray(r)?[t]:r.concat(t)}choices(t){return this.argChoices=t.slice(),this.parseArg=(r,n)=>{if(!this.argChoices.includes(r))throw new gP(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._concatValue(r,n):r},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return mP(this.name().replace(/^no-/,""))}is(t){return this.short===t||this.long===t}isBoolean(){return!this.required&&!this.optional&&!this.negate}},bh=class{constructor(t){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,t.forEach(r=>{r.negate?this.negativeOptions.set(r.attributeName(),r):this.positiveOptions.set(r.attributeName(),r)}),this.negativeOptions.forEach((r,n)=>{this.positiveOptions.has(n)&&this.dualOptions.add(n)})}valueFromOption(t,r){let n=r.attributeName();if(!this.dualOptions.has(n))return!0;let i=this.negativeOptions.get(n).presetArg,a=i!==void 0?i:!1;return r.negate===(a===t)}};function mP(e){return e.split("-").reduce((t,r)=>t+r[0].toUpperCase()+r.slice(1))}function Wx(e){let t,r,n=e.split(/[ |,]+/);return n.length>1&&!/^[[<]/.test(n[1])&&(t=n.shift()),r=n.shift(),!t&&/^-[^-]$/.test(r)&&(t=r,r=void 0),{shortFlag:t,longFlag:r}}Eu.Option=xh;Eu.splitOptionFlags=Wx;Eu.DualOptions=bh});var Yx=S(Qx=>{function EP(e,t){if(Math.abs(e.length-t.length)>3)return Math.max(e.length,t.length);let r=[];for(let n=0;n<=e.length;n++)r[n]=[n];for(let n=0;n<=t.length;n++)r[0][n]=n;for(let n=1;n<=t.length;n++)for(let i=1;i<=e.length;i++){let a=1;e[i-1]===t[n-1]?a=0:a=1,r[i][n]=Math.min(r[i-1][n]+1,r[i][n-1]+1,r[i-1][n-1]+a),i>1&&n>1&&e[i-1]===t[n-2]&&e[i-2]===t[n-1]&&(r[i][n]=Math.min(r[i][n],r[i-2][n-2]+1))}return r[e.length][t.length]}function SP(e,t){if(!t||t.length===0)return"";t=Array.from(new Set(t));let r=e.startsWith("--");r&&(e=e.slice(2),t=t.map(s=>s.slice(2)));let n=[],i=3,a=.4;return t.forEach(s=>{if(s.length<=1)return;let o=EP(e,s),c=Math.max(e.length,s.length);(c-o)/c>a&&(o<i?(i=o,n=[s]):o===i&&n.push(s))}),n.sort((s,o)=>s.localeCompare(o)),r&&(n=n.map(s=>`--${s}`)),n.length>1?`
(Did you mean one of ${n.join(", ")}?)`:n.length===1?`
(Did you mean ${n[0]}?)`:""}Qx.suggestSimilar=SP});var r2=S(t2=>{var CP=require("events").EventEmitter,Ah=require("child_process"),Xr=require("path"),_h=require("fs"),Be=require("process"),{Argument:xP,humanReadableArgName:bP}=mu(),{CommanderError:wh}=Xa(),{Help:TP}=Ch(),{Option:Xx,splitOptionFlags:AP,DualOptions:_P}=Th(),{suggestSimilar:Jx}=Yx(),Ih=class e extends CP{constructor(t){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this._args=[],this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=t||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:r=>Be.stdout.write(r),writeErr:r=>Be.stderr.write(r),getOutHelpWidth:()=>Be.stdout.isTTY?Be.stdout.columns:void 0,getErrHelpWidth:()=>Be.stderr.isTTY?Be.stderr.columns:void 0,outputError:(r,n)=>n(r)},this._hidden=!1,this._hasHelpOption=!0,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._addImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command",this._helpConfiguration={}}copyInheritedSettings(t){return this._outputConfiguration=t._outputConfiguration,this._hasHelpOption=t._hasHelpOption,this._helpFlags=t._helpFlags,this._helpDescription=t._helpDescription,this._helpShortFlag=t._helpShortFlag,this._helpLongFlag=t._helpLongFlag,this._helpCommandName=t._helpCommandName,this._helpCommandnameAndArgs=t._helpCommandnameAndArgs,this._helpCommandDescription=t._helpCommandDescription,this._helpConfiguration=t._helpConfiguration,this._exitCallback=t._exitCallback,this._storeOptionsAsProperties=t._storeOptionsAsProperties,this._combineFlagAndOptionalValue=t._combineFlagAndOptionalValue,this._allowExcessArguments=t._allowExcessArguments,this._enablePositionalOptions=t._enablePositionalOptions,this._showHelpAfterError=t._showHelpAfterError,this._showSuggestionAfterError=t._showSuggestionAfterError,this}command(t,r,n){let i=r,a=n;typeof i=="object"&&i!==null&&(a=i,i=null),a=a||{};let[,s,o]=t.match(/([^ ]+) *(.*)/),c=this.createCommand(s);return i&&(c.description(i),c._executableHandler=!0),a.isDefault&&(this._defaultCommandName=c._name),c._hidden=!!(a.noHelp||a.hidden),c._executableFile=a.executableFile||null,o&&c.arguments(o),this.commands.push(c),c.parent=this,c.copyInheritedSettings(this),i?this:c}createCommand(t){return new e(t)}createHelp(){return Object.assign(new TP,this.configureHelp())}configureHelp(t){return t===void 0?this._helpConfiguration:(this._helpConfiguration=t,this)}configureOutput(t){return t===void 0?this._outputConfiguration:(Object.assign(this._outputConfiguration,t),this)}showHelpAfterError(t=!0){return typeof t!="string"&&(t=!!t),this._showHelpAfterError=t,this}showSuggestionAfterError(t=!0){return this._showSuggestionAfterError=!!t,this}addCommand(t,r){if(!t._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return r=r||{},r.isDefault&&(this._defaultCommandName=t._name),(r.noHelp||r.hidden)&&(t._hidden=!0),this.commands.push(t),t.parent=this,this}createArgument(t,r){return new xP(t,r)}argument(t,r,n,i){let a=this.createArgument(t,r);return typeof n=="function"?a.default(i).argParser(n):a.default(n),this.addArgument(a),this}arguments(t){return t.split(/ +/).forEach(r=>{this.argument(r)}),this}addArgument(t){let r=this._args.slice(-1)[0];if(r&&r.variadic)throw new Error(`only the last argument can be variadic '${r.name()}'`);if(t.required&&t.defaultValue!==void 0&&t.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${t.name()}'`);return this._args.push(t),this}addHelpCommand(t,r){return t===!1?this._addImplicitHelpCommand=!1:(this._addImplicitHelpCommand=!0,typeof t=="string"&&(this._helpCommandName=t.split(" ")[0],this._helpCommandnameAndArgs=t),this._helpCommandDescription=r||this._helpCommandDescription),this}_hasImplicitHelpCommand(){return this._addImplicitHelpCommand===void 0?this.commands.length&&!this._actionHandler&&!this._findCommand("help"):this._addImplicitHelpCommand}hook(t,r){let n=["preSubcommand","preAction","postAction"];if(!n.includes(t))throw new Error(`Unexpected value for event passed to hook : '${t}'.
Expecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[t]?this._lifeCycleHooks[t].push(r):this._lifeCycleHooks[t]=[r],this}exitOverride(t){return t?this._exitCallback=t:this._exitCallback=r=>{if(r.code!=="commander.executeSubCommandAsync")throw r},this}_exit(t,r,n){this._exitCallback&&this._exitCallback(new wh(t,r,n)),Be.exit(t)}action(t){let r=n=>{let i=this._args.length,a=n.slice(0,i);return this._storeOptionsAsProperties?a[i]=this:a[i]=this.opts(),a.push(this),t.apply(this,a)};return this._actionHandler=r,this}createOption(t,r){return new Xx(t,r)}addOption(t){let r=t.name(),n=t.attributeName();if(t.negate){let a=t.long.replace(/^--no-/,"--");this._findOption(a)||this.setOptionValueWithSource(n,t.defaultValue===void 0?!0:t.defaultValue,"default")}else t.defaultValue!==void 0&&this.setOptionValueWithSource(n,t.defaultValue,"default");this.options.push(t);let i=(a,s,o)=>{a==null&&t.presetArg!==void 0&&(a=t.presetArg);let c=this.getOptionValue(n);if(a!==null&&t.parseArg)try{a=t.parseArg(a,c)}catch(u){if(u.code==="commander.invalidArgument"){let l=`${s} ${u.message}`;this.error(l,{exitCode:u.exitCode,code:u.code})}throw u}else a!==null&&t.variadic&&(a=t._concatValue(a,c));a==null&&(t.negate?a=!1:t.isBoolean()||t.optional?a=!0:a=""),this.setOptionValueWithSource(n,a,o)};return this.on("option:"+r,a=>{let s=`error: option '${t.flags}' argument '${a}' is invalid.`;i(a,s,"cli")}),t.envVar&&this.on("optionEnv:"+r,a=>{let s=`error: option '${t.flags}' value '${a}' from env '${t.envVar}' is invalid.`;i(a,s,"env")}),this}_optionEx(t,r,n,i,a){if(typeof r=="object"&&r instanceof Xx)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let s=this.createOption(r,n);if(s.makeOptionMandatory(!!t.mandatory),typeof i=="function")s.default(a).argParser(i);else if(i instanceof RegExp){let o=i;i=(c,u)=>{let l=o.exec(c);return l?l[0]:u},s.default(a).argParser(i)}else s.default(i);return this.addOption(s)}option(t,r,n,i){return this._optionEx({},t,r,n,i)}requiredOption(t,r,n,i){return this._optionEx({mandatory:!0},t,r,n,i)}combineFlagAndOptionalValue(t=!0){return this._combineFlagAndOptionalValue=!!t,this}allowUnknownOption(t=!0){return this._allowUnknownOption=!!t,this}allowExcessArguments(t=!0){return this._allowExcessArguments=!!t,this}enablePositionalOptions(t=!0){return this._enablePositionalOptions=!!t,this}passThroughOptions(t=!0){if(this._passThroughOptions=!!t,this.parent&&t&&!this.parent._enablePositionalOptions)throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)");return this}storeOptionsAsProperties(t=!0){if(this._storeOptionsAsProperties=!!t,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}getOptionValue(t){return this._storeOptionsAsProperties?this[t]:this._optionValues[t]}setOptionValue(t,r){return this.setOptionValueWithSource(t,r,void 0)}setOptionValueWithSource(t,r,n){return this._storeOptionsAsProperties?this[t]=r:this._optionValues[t]=r,this._optionValueSources[t]=n,this}getOptionValueSource(t){return this._optionValueSources[t]}getOptionValueSourceWithGlobals(t){let r;return Ja(this).forEach(n=>{n.getOptionValueSource(t)!==void 0&&(r=n.getOptionValueSource(t))}),r}_prepareUserArgs(t,r){if(t!==void 0&&!Array.isArray(t))throw new Error("first parameter to parse must be array or undefined");r=r||{},t===void 0&&(t=Be.argv,Be.versions&&Be.versions.electron&&(r.from="electron")),this.rawArgs=t.slice();let n;switch(r.from){case void 0:case"node":this._scriptPath=t[1],n=t.slice(2);break;case"electron":Be.defaultApp?(this._scriptPath=t[1],n=t.slice(2)):n=t.slice(1);break;case"user":n=t.slice(0);break;default:throw new Error(`unexpected parse option { from: '${r.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(t,r){let n=this._prepareUserArgs(t,r);return this._parseCommand([],n),this}parseAsync(t,r){return rs(this,null,function*(){let n=this._prepareUserArgs(t,r);return yield this._parseCommand([],n),this})}_executeSubCommand(t,r){r=r.slice();let n=!1,i=[".js",".ts",".tsx",".mjs",".cjs"];function a(l,f){let h=Xr.resolve(l,f);if(_h.existsSync(h))return h;if(i.includes(Xr.extname(f)))return;let p=i.find(d=>_h.existsSync(`${h}${d}`));if(p)return`${h}${p}`}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let s=t._executableFile||`${this._name}-${t._name}`,o=this._executableDir||"";if(this._scriptPath){let l;try{l=_h.realpathSync(this._scriptPath)}catch(f){l=this._scriptPath}o=Xr.resolve(Xr.dirname(l),o)}if(o){let l=a(o,s);if(!l&&!t._executableFile&&this._scriptPath){let f=Xr.basename(this._scriptPath,Xr.extname(this._scriptPath));f!==this._name&&(l=a(o,`${f}-${t._name}`))}s=l||s}n=i.includes(Xr.extname(s));let c;Be.platform!=="win32"?n?(r.unshift(s),r=e2(Be.execArgv).concat(r),c=Ah.spawn(Be.argv[0],r,{stdio:"inherit"})):c=Ah.spawn(s,r,{stdio:"inherit"}):(r.unshift(s),r=e2(Be.execArgv).concat(r),c=Ah.spawn(Be.execPath,r,{stdio:"inherit"})),c.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(f=>{Be.on(f,()=>{c.killed===!1&&c.exitCode===null&&c.kill(f)})});let u=this._exitCallback;u?c.on("close",()=>{u(new wh(Be.exitCode||0,"commander.executeSubCommandAsync","(close)"))}):c.on("close",Be.exit.bind(Be)),c.on("error",l=>{if(l.code==="ENOENT"){let f=o?`searched for local subcommand relative to directory '${o}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",h=`'${s}' does not exist
 - if '${t._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${f}`;throw new Error(h)}else if(l.code==="EACCES")throw new Error(`'${s}' not executable`);if(!u)Be.exit(1);else{let f=new wh(1,"commander.executeSubCommandAsync","(error)");f.nestedError=l,u(f)}}),this.runningCommand=c}_dispatchSubcommand(t,r,n){let i=this._findCommand(t);i||this.help({error:!0});let a;return a=this._chainOrCallSubCommandHook(a,i,"preSubcommand"),a=this._chainOrCall(a,()=>{if(i._executableHandler)this._executeSubCommand(i,r.concat(n));else return i._parseCommand(r,n)}),a}_checkNumberOfArguments(){this._args.forEach((t,r)=>{t.required&&this.args[r]==null&&this.missingArgument(t.name())}),!(this._args.length>0&&this._args[this._args.length-1].variadic)&&this.args.length>this._args.length&&this._excessArguments(this.args)}_processArguments(){let t=(n,i,a)=>{let s=i;if(i!==null&&n.parseArg)try{s=n.parseArg(i,a)}catch(o){if(o.code==="commander.invalidArgument"){let c=`error: command-argument value '${i}' is invalid for argument '${n.name()}'. ${o.message}`;this.error(c,{exitCode:o.exitCode,code:o.code})}throw o}return s};this._checkNumberOfArguments();let r=[];this._args.forEach((n,i)=>{let a=n.defaultValue;n.variadic?i<this.args.length?(a=this.args.slice(i),n.parseArg&&(a=a.reduce((s,o)=>t(n,o,s),n.defaultValue))):a===void 0&&(a=[]):i<this.args.length&&(a=this.args[i],n.parseArg&&(a=t(n,a,n.defaultValue))),r[i]=a}),this.processedArgs=r}_chainOrCall(t,r){return t&&t.then&&typeof t.then=="function"?t.then(()=>r()):r()}_chainOrCallHooks(t,r){let n=t,i=[];return Ja(this).reverse().filter(a=>a._lifeCycleHooks[r]!==void 0).forEach(a=>{a._lifeCycleHooks[r].forEach(s=>{i.push({hookedCommand:a,callback:s})})}),r==="postAction"&&i.reverse(),i.forEach(a=>{n=this._chainOrCall(n,()=>a.callback(a.hookedCommand,this))}),n}_chainOrCallSubCommandHook(t,r,n){let i=t;return this._lifeCycleHooks[n]!==void 0&&this._lifeCycleHooks[n].forEach(a=>{i=this._chainOrCall(i,()=>a(this,r))}),i}_parseCommand(t,r){let n=this.parseOptions(r);if(this._parseOptionsEnv(),this._parseOptionsImplied(),t=t.concat(n.operands),r=n.unknown,this.args=t.concat(r),t&&this._findCommand(t[0]))return this._dispatchSubcommand(t[0],t.slice(1),r);if(this._hasImplicitHelpCommand()&&t[0]===this._helpCommandName)return t.length===1&&this.help(),this._dispatchSubcommand(t[1],[],[this._helpLongFlag]);if(this._defaultCommandName)return Zx(this,r),this._dispatchSubcommand(this._defaultCommandName,t,r);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),Zx(this,n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i=()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},a=`command:${this.name()}`;if(this._actionHandler){i(),this._processArguments();let s;return s=this._chainOrCallHooks(s,"preAction"),s=this._chainOrCall(s,()=>this._actionHandler(this.processedArgs)),this.parent&&(s=this._chainOrCall(s,()=>{this.parent.emit(a,t,r)})),s=this._chainOrCallHooks(s,"postAction"),s}if(this.parent&&this.parent.listenerCount(a))i(),this._processArguments(),this.parent.emit(a,t,r);else if(t.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",t,r);this.listenerCount("command:*")?this.emit("command:*",t,r):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(t){if(t)return this.commands.find(r=>r._name===t||r._aliases.includes(t))}_findOption(t){return this.options.find(r=>r.is(t))}_checkForMissingMandatoryOptions(){for(let t=this;t;t=t.parent)t.options.forEach(r=>{r.mandatory&&t.getOptionValue(r.attributeName())===void 0&&t.missingMandatoryOptionValue(r)})}_checkForConflictingLocalOptions(){let t=this.options.filter(n=>{let i=n.attributeName();return this.getOptionValue(i)===void 0?!1:this.getOptionValueSource(i)!=="default"});t.filter(n=>n.conflictsWith.length>0).forEach(n=>{let i=t.find(a=>n.conflictsWith.includes(a.attributeName()));i&&this._conflictingOption(n,i)})}_checkForConflictingOptions(){for(let t=this;t;t=t.parent)t._checkForConflictingLocalOptions()}parseOptions(t){let r=[],n=[],i=r,a=t.slice();function s(c){return c.length>1&&c[0]==="-"}let o=null;for(;a.length;){let c=a.shift();if(c==="--"){i===n&&i.push(c),i.push(...a);break}if(o&&!s(c)){this.emit(`option:${o.name()}`,c);continue}if(o=null,s(c)){let u=this._findOption(c);if(u){if(u.required){let l=a.shift();l===void 0&&this.optionMissingArgument(u),this.emit(`option:${u.name()}`,l)}else if(u.optional){let l=null;a.length>0&&!s(a[0])&&(l=a.shift()),this.emit(`option:${u.name()}`,l)}else this.emit(`option:${u.name()}`);o=u.variadic?u:null;continue}}if(c.length>2&&c[0]==="-"&&c[1]!=="-"){let u=this._findOption(`-${c[1]}`);if(u){u.required||u.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${u.name()}`,c.slice(2)):(this.emit(`option:${u.name()}`),a.unshift(`-${c.slice(2)}`));continue}}if(/^--[^=]+=/.test(c)){let u=c.indexOf("="),l=this._findOption(c.slice(0,u));if(l&&(l.required||l.optional)){this.emit(`option:${l.name()}`,c.slice(u+1));continue}}if(s(c)&&(i=n),(this._enablePositionalOptions||this._passThroughOptions)&&r.length===0&&n.length===0){if(this._findCommand(c)){r.push(c),a.length>0&&n.push(...a);break}else if(c===this._helpCommandName&&this._hasImplicitHelpCommand()){r.push(c),a.length>0&&r.push(...a);break}else if(this._defaultCommandName){n.push(c),a.length>0&&n.push(...a);break}}if(this._passThroughOptions){i.push(c),a.length>0&&i.push(...a);break}i.push(c)}return{operands:r,unknown:n}}opts(){if(this._storeOptionsAsProperties){let t={},r=this.options.length;for(let n=0;n<r;n++){let i=this.options[n].attributeName();t[i]=i===this._versionOptionName?this._version:this[i]}return t}return this._optionValues}optsWithGlobals(){return Ja(this).reduce((t,r)=>Object.assign(t,r.opts()),{})}error(t,r){this._outputConfiguration.outputError(`${t}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let n=r||{},i=n.exitCode||1,a=n.code||"commander.error";this._exit(i,a,t)}_parseOptionsEnv(){this.options.forEach(t=>{if(t.envVar&&t.envVar in Be.env){let r=t.attributeName();(this.getOptionValue(r)===void 0||["default","config","env"].includes(this.getOptionValueSource(r)))&&(t.required||t.optional?this.emit(`optionEnv:${t.name()}`,Be.env[t.envVar]):this.emit(`optionEnv:${t.name()}`))}})}_parseOptionsImplied(){let t=new _P(this.options),r=n=>this.getOptionValue(n)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(n));this.options.filter(n=>n.implied!==void 0&&r(n.attributeName())&&t.valueFromOption(this.getOptionValue(n.attributeName()),n)).forEach(n=>{Object.keys(n.implied).filter(i=>!r(i)).forEach(i=>{this.setOptionValueWithSource(i,n.implied[i],"implied")})})}missingArgument(t){let r=`error: missing required argument '${t}'`;this.error(r,{code:"commander.missingArgument"})}optionMissingArgument(t){let r=`error: option '${t.flags}' argument missing`;this.error(r,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(t){let r=`error: required option '${t.flags}' not specified`;this.error(r,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(t,r){let n=s=>{let o=s.attributeName(),c=this.getOptionValue(o),u=this.options.find(f=>f.negate&&o===f.attributeName()),l=this.options.find(f=>!f.negate&&o===f.attributeName());return u&&(u.presetArg===void 0&&c===!1||u.presetArg!==void 0&&c===u.presetArg)?u:l||s},i=s=>{let o=n(s),c=o.attributeName();return this.getOptionValueSource(c)==="env"?`environment variable '${o.envVar}'`:`option '${o.flags}'`},a=`error: ${i(t)} cannot be used with ${i(r)}`;this.error(a,{code:"commander.conflictingOption"})}unknownOption(t){if(this._allowUnknownOption)return;let r="";if(t.startsWith("--")&&this._showSuggestionAfterError){let i=[],a=this;do{let s=a.createHelp().visibleOptions(a).filter(o=>o.long).map(o=>o.long);i=i.concat(s),a=a.parent}while(a&&!a._enablePositionalOptions);r=Jx(t,i)}let n=`error: unknown option '${t}'${r}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(t){if(this._allowExcessArguments)return;let r=this._args.length,n=r===1?"":"s",a=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${r} argument${n} but got ${t.length}.`;this.error(a,{code:"commander.excessArguments"})}unknownCommand(){let t=this.args[0],r="";if(this._showSuggestionAfterError){let i=[];this.createHelp().visibleCommands(this).forEach(a=>{i.push(a.name()),a.alias()&&i.push(a.alias())}),r=Jx(t,i)}let n=`error: unknown command '${t}'${r}`;this.error(n,{code:"commander.unknownCommand"})}version(t,r,n){if(t===void 0)return this._version;this._version=t,r=r||"-V, --version",n=n||"output the version number";let i=this.createOption(r,n);return this._versionOptionName=i.attributeName(),this.options.push(i),this.on("option:"+i.name(),()=>{this._outputConfiguration.writeOut(`${t}
`),this._exit(0,"commander.version",t)}),this}description(t,r){return t===void 0&&r===void 0?this._description:(this._description=t,r&&(this._argsDescription=r),this)}summary(t){return t===void 0?this._summary:(this._summary=t,this)}alias(t){if(t===void 0)return this._aliases[0];let r=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(r=this.commands[this.commands.length-1]),t===r._name)throw new Error("Command alias can't be the same as its name");return r._aliases.push(t),this}aliases(t){return t===void 0?this._aliases:(t.forEach(r=>this.alias(r)),this)}usage(t){if(t===void 0){if(this._usage)return this._usage;let r=this._args.map(n=>bP(n));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?r:[]).join(" ")}return this._usage=t,this}name(t){return t===void 0?this._name:(this._name=t,this)}nameFromFilename(t){return this._name=Xr.basename(t,Xr.extname(t)),this}executableDir(t){return t===void 0?this._executableDir:(this._executableDir=t,this)}helpInformation(t){let r=this.createHelp();return r.helpWidth===void 0&&(r.helpWidth=t&&t.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()),r.formatHelp(this,r)}_getHelpContext(t){t=t||{};let r={error:!!t.error},n;return r.error?n=i=>this._outputConfiguration.writeErr(i):n=i=>this._outputConfiguration.writeOut(i),r.write=t.write||n,r.command=this,r}outputHelp(t){let r;typeof t=="function"&&(r=t,t=void 0);let n=this._getHelpContext(t);Ja(this).reverse().forEach(a=>a.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let i=this.helpInformation(n);if(r&&(i=r(i),typeof i!="string"&&!Buffer.isBuffer(i)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(i),this.emit(this._helpLongFlag),this.emit("afterHelp",n),Ja(this).forEach(a=>a.emit("afterAllHelp",n))}helpOption(t,r){if(typeof t=="boolean")return this._hasHelpOption=t,this;this._helpFlags=t||this._helpFlags,this._helpDescription=r||this._helpDescription;let n=AP(this._helpFlags);return this._helpShortFlag=n.shortFlag,this._helpLongFlag=n.longFlag,this}help(t){this.outputHelp(t);let r=Be.exitCode||0;r===0&&t&&typeof t!="function"&&t.error&&(r=1),this._exit(r,"commander.help","(outputHelp)")}addHelpText(t,r){let n=["beforeAll","before","after","afterAll"];if(!n.includes(t))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${n.join("', '")}'`);let i=`${t}Help`;return this.on(i,a=>{let s;typeof r=="function"?s=r({error:a.error,command:a.command}):s=r,s&&a.write(`${s}
`)}),this}};function Zx(e,t){e._hasHelpOption&&t.find(n=>n===e._helpLongFlag||n===e._helpShortFlag)&&(e.outputHelp(),e._exit(0,"commander.helpDisplayed","(outputHelp)"))}function e2(e){return e.map(t=>{if(!t.startsWith("--inspect"))return t;let r,n="127.0.0.1",i="9229",a;return(a=t.match(/^(--inspect(-brk)?)$/))!==null?r=a[1]:(a=t.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(r=a[1],/^\d+$/.test(a[3])?i=a[3]:n=a[3]):(a=t.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(r=a[1],n=a[3],i=a[4]),r&&i!=="0"?`${r}=${n}:${parseInt(i)+1}`:t})}function Ja(e){let t=[];for(let r=e;r;r=r.parent)t.push(r);return t}t2.Command=Ih});var s2=S((ar,a2)=>{var{Argument:wP}=mu(),{Command:n2}=r2(),{CommanderError:IP,InvalidArgumentError:i2}=Xa(),{Help:BP}=Ch(),{Option:OP}=Th();ar=a2.exports=new n2;ar.program=ar;ar.Argument=wP;ar.Command=n2;ar.CommanderError=IP;ar.Help=BP;ar.InvalidArgumentError=i2;ar.InvalidOptionArgumentError=i2;ar.Option=OP});var c2=Ir($x()),Bh=Ir(Bn());var Yr=Ir(yi()),yu=Ir(Bn()),Gx=require("util"),Ya=class{static configure(t){let r=(n,i)=>{i.name!=null&&n.unshift(yu.default.cyan(i.name)),n.unshift(yu.default.dim(new Date().toLocaleTimeString()))};t.opts().debug?Yr.setDefaults({defaultLevel:Yr.default.DEBUG,formatter:r}):Yr.setDefaults({defaultLevel:Yr.default.INFO,formatter:r})}static get log(){return Yr.default}static get(t){return Yr.get(t)}static inspect(t){return yu.default.dim((0,Gx.inspect)(t,{showHidden:!1,depth:1/0,colors:!0,compact:!0,breakLength:1/0}))}};var o2=Ir(s2(),1),{program:Za,createCommand:Cq,createArgument:xq,createOption:bq,CommanderError:Tq,InvalidArgumentError:Aq,InvalidOptionArgumentError:_q,Command:wq,Argument:Iq,Option:Bq,Help:Oq}=o2.default;var u2=Ya.log;Za.option("-d, --debug","enable debug logging");Za.command("pair").action(()=>{Ya.configure(Za),console.log(Bh.default.green("Press the pairing button on the main processor or smart bridge")),c2.pair().then(()=>u2.info("Processor paired")).catch(e=>u2.error(Bh.default.red(e.message))).finally(()=>process.exit(0))});module.exports=function(t){Za.parse(t||process.argv)};
//# sourceMappingURL=cli.js.map
