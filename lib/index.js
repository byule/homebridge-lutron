var Tb=Object.create;var sa=Object.defineProperty;var Ab=Object.getOwnPropertyDescriptor;var _b=Object.getOwnPropertyNames,hs=Object.getOwnPropertySymbols,Ib=Object.getPrototypeOf,qc=Object.prototype.hasOwnProperty,o0=Object.prototype.propertyIsEnumerable;var Uc=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e);var s0=(e,t,r)=>t in e?sa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_n=(e,t)=>{for(var r in t||(t={}))qc.call(t,r)&&s0(e,r,t[r]);if(hs)for(var r of hs(t))o0.call(t,r)&&s0(e,r,t[r]);return e};var c0=(e,t)=>{var r={};for(var n in e)qc.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&hs)for(var n of hs(e))t.indexOf(n)<0&&o0.call(e,n)&&(r[n]=e[n]);return r};var lt=(e,t)=>()=>(e&&(t=e(e=0)),t);var C=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),wb=(e,t)=>{for(var r in t)sa(e,r,{get:t[r],enumerable:!0})},u0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of _b(t))!qc.call(e,i)&&i!==r&&sa(e,i,{get:()=>t[i],enumerable:!(n=Ab(t,i))||n.enumerable});return e};var ei=(e,t,r)=>(r=e!=null?Tb(Ib(e)):{},u0(t||!e||!e.__esModule?sa(r,"default",{value:e,enumerable:!0}):r,e)),Bb=e=>u0(sa({},"__esModule",{value:!0}),e);var ke=(e,t,r)=>new Promise((n,i)=>{var a=u=>{try{o(r.next(u))}catch(c){i(c)}},s=u=>{try{o(r.throw(u))}catch(c){i(c)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,s);o((r=r.apply(e,t)).next())}),oa=function(e,t){this[0]=e,this[1]=t},l0=(e,t,r)=>{var n=(s,o,u,c)=>{try{var l=r[s](o),f=(o=l.value)instanceof oa,h=l.done;Promise.resolve(f?o[0]:o).then(p=>f?n(s==="return"?s:"next",o[1]?{done:p.done,value:p.value}:p,u,c):u({value:p,done:h})).catch(p=>n("throw",p,u,c))}catch(p){c(p)}},i=s=>a[s]=o=>new Promise((u,c)=>n(s,o,u,c)),a={};return r=r.apply(e,t),a[Uc("asyncIterator")]=()=>a,i("next"),i("throw"),i("return"),a};var f0=(e,t,r)=>(t=e[Uc("asyncIterator")])?t.call(e):(e=e[Uc("iterator")](),t={},r=(n,i)=>(i=e[n])&&(t[n]=a=>new Promise((s,o,u)=>(a=i.call(e,a),u=a.done,Promise.resolve(a.value).then(c=>s({value:c,done:u}),o)))),r("next"),r("return"),t);var ee=C((sP,h0)=>{h0.exports={options:{usePureJavaScript:!1}}});var v0=C((oP,p0)=>{var Mc={};p0.exports=Mc;var d0={};Mc.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Rb(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<o.length;++u)c+=o[u]<<8,o[u]=c%a,c=c/a|0;for(;c>0;)o.push(c%a),c=c/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join(`\r
`)}return n};Mc.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=d0[t];if(!r){r=d0[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var u=0,c=o;u<s.length;++u)c+=s[u]*i,s[u]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var l=0;e[l]===a&&l<e.length-1;++l)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Rb(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%n,o=o/n|0;for(;o>0;)a.push(o%n),o=o/n|0}var u="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=t[a[r]];return u}});var de=C((cP,S0)=>{var y0=ee(),g0=v0(),T=S0.exports=y0.util=y0.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){T.nextTick=process.nextTick,typeof setImmediate=="function"?T.setImmediate=setImmediate:T.setImmediate=T.nextTick;return}if(typeof setImmediate=="function"){T.setImmediate=function(){return setImmediate.apply(void 0,arguments)},T.nextTick=function(o){return setImmediate(o)};return}if(T.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(u){if(u.source===window&&u.data===e){u.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(l){l()})}};var s=o,e="forge.setImmediate",t=[];T.setImmediate=function(u){t.push(u),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var u=t.slice();t.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var a=T.setImmediate;T.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(t.push(u),t.length===1&&i.setAttribute("a",n=!n))}}T.nextTick=T.setImmediate})();T.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;T.globalScope=function(){return T.isNodejs?global:typeof self=="undefined"?window:self}();T.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};T.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};T.isArrayBufferView=function(e){return e&&T.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function ca(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}T.ByteBuffer=Fc;function Fc(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(T.isArrayBuffer(e)||T.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Fc||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}T.ByteStringBuffer=Fc;var Ob=4096;T.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Ob&&(this.data.substr(0,1),this._constructedStringLength=0)};T.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};T.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};T.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};T.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};T.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};T.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(T.encodeUtf8(e))};T.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};T.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};T.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};T.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};T.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};T.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};T.ByteStringBuffer.prototype.putInt=function(e,t){ca(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};T.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};T.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};T.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};T.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};T.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};T.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};T.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};T.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};T.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};T.ByteStringBuffer.prototype.getInt=function(e){ca(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};T.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};T.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};T.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};T.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};T.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};T.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};T.ByteStringBuffer.prototype.copy=function(){var e=T.createBuffer(this.data);return e.read=this.read,e};T.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};T.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};T.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};T.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};T.ByteStringBuffer.prototype.toString=function(){return T.decodeUtf8(this.bytes())};function Nb(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=T.isArrayBuffer(e),n=T.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}T.DataBuffer=Nb;T.DataBuffer.prototype.length=function(){return this.write-this.read};T.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};T.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};T.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};T.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};T.DataBuffer.prototype.putBytes=function(e,t){if(T.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(T.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof T.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&T.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof T.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=T.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=T.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=T.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=T.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=T.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};T.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};T.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};T.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};T.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};T.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};T.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};T.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};T.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};T.DataBuffer.prototype.putInt=function(e,t){ca(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};T.DataBuffer.prototype.putSignedInt=function(e,t){return ca(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};T.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};T.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};T.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};T.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};T.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};T.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};T.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};T.DataBuffer.prototype.getInt=function(e){ca(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};T.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};T.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};T.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};T.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};T.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};T.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};T.DataBuffer.prototype.copy=function(){return new T.DataBuffer(this)};T.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};T.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};T.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};T.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};T.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return T.binary.raw.encode(t);if(e==="hex")return T.binary.hex.encode(t);if(e==="base64")return T.binary.base64.encode(t);if(e==="utf8")return T.text.utf8.decode(t);if(e==="utf16")return T.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};T.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=T.encodeUtf8(e)),new T.ByteBuffer(e)};T.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};T.xorBytes=function(e,t,r){for(var n="",i="",a="",s=0,o=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=a,a="",o=0),a+=String.fromCharCode(i),++o;return n+=a,n};T.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};T.bytesToHex=function(e){return T.createBuffer(e).toHex()};T.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var $r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",zr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],m0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";T.encode64=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),r+=$r.charAt(i>>2),r+=$r.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=$r.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":$r.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};T.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,a,s=0;s<e.length;)r=zr[e.charCodeAt(s++)-43],n=zr[e.charCodeAt(s++)-43],i=zr[e.charCodeAt(s++)-43],a=zr[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};T.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};T.decodeUtf8=function(e){return decodeURIComponent(escape(e))};T.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:g0.encode,decode:g0.decode}};T.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};T.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};T.binary.hex.encode=T.bytesToHex;T.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(e.length&1&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n};T.binary.base64.encode=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],r+=$r.charAt(i>>2),r+=$r.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=$r.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":$r.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};T.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,o,u=0,c=r;u<e.length;)i=zr[e.charCodeAt(u++)-43],a=zr[e.charCodeAt(u++)-43],s=zr[e.charCodeAt(u++)-43],o=zr[e.charCodeAt(u++)-43],n[c++]=i<<2|a>>4,s!==64&&(n[c++]=(a&15)<<4|s>>2,o!==64&&(n[c++]=(s&3)<<6|o));return t?c-r:n.subarray(0,c)};T.binary.base58.encode=function(e,t){return T.binary.baseN.encode(e,m0,t)};T.binary.base58.decode=function(e,t){return T.binary.baseN.decode(e,m0,t)};T.text={utf8:{},utf16:{}};T.text.utf8.encode=function(e,t,r){e=T.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};T.text.utf8.decode=function(e){return T.decodeUtf8(String.fromCharCode.apply(null,e))};T.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-r:n};T.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};T.deflate=function(e,t,r){if(t=T.decode64(e.deflate(T.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};T.inflate=function(e,t,r){var n=e.inflate(T.encode64(t)).rval;return n===null?null:T.decode64(n)};var Vc=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=T.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Kc=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(T.decode64(r))),r},Db=function(e,t,r,n){var i=Kc(e,t);i===null&&(i={}),i[r]=n,Vc(e,t,i)},Pb=function(e,t,r){var n=Kc(e,t);return n!==null&&(n=r in n?n[r]:null),n},Lb=function(e,t,r){var n=Kc(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),Vc(e,t,n)}},kb=function(e,t){Vc(e,t,null)},ds=function(e,t,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};T.setItem=function(e,t,r,n,i){ds(Db,arguments,i)};T.getItem=function(e,t,r,n){return ds(Pb,arguments,n)};T.removeItem=function(e,t,r,n){ds(Lb,arguments,n)};T.clearItems=function(e,t,r){ds(kb,arguments,r)};T.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};T.format=function(e){for(var t=/%./g,r,n,i=0,a=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&a.push(n),s=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};T.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,o=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+o:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-c).toFixed(a).slice(2):"")};T.formatSize=function(e){return e>=1073741824?e=T.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=T.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=T.formatNumber(e/1024,0)+" KiB":e=T.formatNumber(e,0)+" bytes",e};T.bytesFromIP=function(e){return e.indexOf(".")!==-1?T.bytesFromIPv4(e):e.indexOf(":")!==-1?T.bytesFromIPv6(e):null};T.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=T.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};T.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=T.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=T.hexToBytes(e[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};T.bytesToIP=function(e){return e.length===4?T.bytesToIPv4(e):e.length===16?T.bytesToIPv6(e):null};T.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};T.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var a=T.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],o=t.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),u.start===0&&t.unshift(""),u.end===7&&t.push(""))}return t.join(":")};T.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in T&&!e.update)return t(null,T.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return T.cores=navigator.hardwareConcurrency,t(null,T.cores);if(typeof Worker=="undefined")return T.cores=1,t(null,T.cores);if(typeof Blob=="undefined")return T.cores=2,t(null,T.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),u=o+4;Date.now()<u;);self.postMessage({st:o,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,o,u){if(o===0){var c=Math.floor(s.reduce(function(l,f){return l+f},0)/s.length);return T.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,T.cores)}i(u,function(l,f){s.push(a(u,f)),n(s,o-1,u)})}function i(s,o){for(var u=[],c=[],l=0;l<s;++l){var f=new Worker(r);f.addEventListener("message",function(h){if(c.push(h.data),c.length===s){for(var p=0;p<s;++p)u[p].terminate();o(null,c)}}),u.push(f)}for(var l=0;l<s;++l)u[l].postMessage(l)}function a(s,o){for(var u=[],c=0;c<s;++c)for(var l=o[c],f=u[c]=[],h=0;h<s;++h)if(c!==h){var p=o[h];(l.st>p.st&&l.st<p.et||p.st>l.st&&p.st<l.et)&&f.push(h)}return u.reduce(function(d,m){return Math.max(d,m.length)},0)}}});var ps=C((uP,C0)=>{var Ue=ee();de();C0.exports=Ue.cipher=Ue.cipher||{};Ue.cipher.algorithms=Ue.cipher.algorithms||{};Ue.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Ue.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Ue.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Ue.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Ue.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Ue.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Ue.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Ue.cipher.algorithms[e]=t};Ue.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Ue.cipher.algorithms?Ue.cipher.algorithms[e]:null};var Gc=Ue.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};Gc.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Ue.util.createBuffer(),this.output=e.output||Ue.util.createBuffer(),this.mode.start(t)};Gc.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Gc.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Hc=C((lP,E0)=>{var qe=ee();de();qe.cipher=qe.cipher||{};var ie=E0.exports=qe.cipher.modes=qe.cipher.modes||{};ie.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.ecb.prototype.start=function(e){};ie.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};ie.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};ie.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};ie.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};ie.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ie.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=vs(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ie.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};ie.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};ie.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};ie.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};ie.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};ie.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=vs(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ie.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ie.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};ie.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=vs(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};ie.ofb.prototype.decrypt=ie.ofb.prototype.encrypt;ie.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};ie.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=vs(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ie.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}ys(this._inBlock)};ie.ctr.prototype.decrypt=ie.ctr.prototype.encrypt;ie.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ie.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=qe.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=qe.util.createBuffer(e.additionalData):r=qe.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=qe.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(jc(n*8)))}this._inBlock=this._j0.slice(0),ys(this._inBlock),this._partialBytes=0,r=qe.util.createBuffer(r),this._aDataLength=jc(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};ie.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),ys(this._inBlock)};ie.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),ys(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};ie.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=qe.util.createBuffer();var n=this._aDataLength.concat(jc(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};ie.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};ie.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};ie.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};ie.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};ie.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],u=s/n|0,c=(n-1-s%n)*t;o[u]=1<<t-1<<c,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};ie.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var o=i[a],u=i[s];i[a+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var c=i[a^n];i[a]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function vs(e,t){if(typeof e=="string"&&(e=qe.util.createBuffer(e)),qe.util.isArray(e)&&e.length>4){var r=e;e=qe.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!qe.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function ys(e){e[e.length-1]=e[e.length-1]+1&4294967295}function jc(e){return[e/4294967296|0,e&4294967295]}});var Wr=C((fP,A0)=>{var be=ee();ps();Hc();de();A0.exports=be.aes=be.aes||{};be.aes.startEncrypting=function(e,t,r,n){var i=gs({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};be.aes.createEncryptionCipher=function(e,t){return gs({key:e,output:null,decrypt:!1,mode:t})};be.aes.startDecrypting=function(e,t,r,n){var i=gs({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};be.aes.createDecryptionCipher=function(e,t){return gs({key:e,output:null,decrypt:!0,mode:t})};be.aes.Algorithm=function(e,t){Wc||x0();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return zc(r._w,n,i,!1)},decrypt:function(n,i){return zc(r._w,n,i,!0)}}}),r._init=!1};be.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=be.util.createBuffer(t);else if(be.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=be.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!be.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!be.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=T0(t,e.decrypt&&!s),this._init=!0}};be.aes._expandKey=function(e,t){return Wc||x0(),T0(e,t)};be.aes._updateBlock=zc;ri("AES-ECB",be.cipher.modes.ecb);ri("AES-CBC",be.cipher.modes.cbc);ri("AES-CFB",be.cipher.modes.cfb);ri("AES-OFB",be.cipher.modes.ofb);ri("AES-CTR",be.cipher.modes.ctr);ri("AES-GCM",be.cipher.modes.gcm);function ri(e,t){var r=function(){return new be.aes.Algorithm(e,t)};be.cipher.registerAlgorithm(e,r)}var Wc=!1,ti=4,dt,$c,b0,In,Gt;function x0(){Wc=!0,b0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;dt=new Array(256),$c=new Array(256),In=new Array(4),Gt=new Array(4);for(var t=0;t<4;++t)In[t]=new Array(256),Gt[t]=new Array(256);for(var r=0,n=0,i,a,s,o,u,c,l,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,dt[r]=o,$c[o]=r,u=e[o],i=e[r],a=e[i],s=e[a],c=u<<24^o<<16^o<<8^(o^u),l=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var f=0;f<4;++f)In[f][r]=c,Gt[f][o]=l,c=c<<24|c>>>8,l=l<<24|l>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function T0(e,t){for(var r=e.slice(0),n,i=1,a=r.length,s=a+6+1,o=ti*s,u=a;u<o;++u)n=r[u-1],u%a===0?(n=dt[n>>>16&255]<<24^dt[n>>>8&255]<<16^dt[n&255]<<8^dt[n>>>24]^b0[i]<<24,i++):a>6&&u%a===4&&(n=dt[n>>>24]<<24^dt[n>>>16&255]<<16^dt[n>>>8&255]<<8^dt[n&255]),r[u]=r[u-a]^n;if(t){var c,l=Gt[0],f=Gt[1],h=Gt[2],p=Gt[3],d=r.slice(0);o=r.length;for(var u=0,m=o-ti;u<o;u+=ti,m-=ti)if(u===0||u===o-ti)d[u]=r[m],d[u+1]=r[m+3],d[u+2]=r[m+2],d[u+3]=r[m+1];else for(var S=0;S<ti;++S)c=r[m+S],d[u+(3&-S)]=l[dt[c>>>24]]^f[dt[c>>>16&255]]^h[dt[c>>>8&255]]^p[dt[c&255]];r=d}return r}function zc(e,t,r,n){var i=e.length/4-1,a,s,o,u,c;n?(a=Gt[0],s=Gt[1],o=Gt[2],u=Gt[3],c=$c):(a=In[0],s=In[1],o=In[2],u=In[3],c=dt);var l,f,h,p,d,m,S;l=t[0]^e[0],f=t[n?3:1]^e[1],h=t[2]^e[2],p=t[n?1:3]^e[3];for(var b=3,_=1;_<i;++_)d=a[l>>>24]^s[f>>>16&255]^o[h>>>8&255]^u[p&255]^e[++b],m=a[f>>>24]^s[h>>>16&255]^o[p>>>8&255]^u[l&255]^e[++b],S=a[h>>>24]^s[p>>>16&255]^o[l>>>8&255]^u[f&255]^e[++b],p=a[p>>>24]^s[l>>>16&255]^o[f>>>8&255]^u[h&255]^e[++b],l=d,f=m,h=S;r[0]=c[l>>>24]<<24^c[f>>>16&255]<<16^c[h>>>8&255]<<8^c[p&255]^e[++b],r[n?3:1]=c[f>>>24]<<24^c[h>>>16&255]<<16^c[p>>>8&255]<<8^c[l&255]^e[++b],r[2]=c[h>>>24]<<24^c[p>>>16&255]<<16^c[l>>>8&255]<<8^c[f&255]^e[++b],r[n?1:3]=c[p>>>24]<<24^c[l>>>16&255]<<16^c[f>>>8&255]<<8^c[h&255]^e[++b]}function gs(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=be.cipher.createDecipher(r,e.key):n=be.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof be.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var Qr=C((hP,_0)=>{var ua=ee();ua.pki=ua.pki||{};var Qc=_0.exports=ua.pki.oids=ua.oids=ua.oids||{};function P(e,t){Qc[e]=t,Qc[t]=e}function ge(e,t){Qc[e]=t}P("1.2.840.113549.1.1.1","rsaEncryption");P("1.2.840.113549.1.1.4","md5WithRSAEncryption");P("1.2.840.113549.1.1.5","sha1WithRSAEncryption");P("1.2.840.113549.1.1.7","RSAES-OAEP");P("1.2.840.113549.1.1.8","mgf1");P("1.2.840.113549.1.1.9","pSpecified");P("1.2.840.113549.1.1.10","RSASSA-PSS");P("1.2.840.113549.1.1.11","sha256WithRSAEncryption");P("1.2.840.113549.1.1.12","sha384WithRSAEncryption");P("1.2.840.113549.1.1.13","sha512WithRSAEncryption");P("1.3.101.112","EdDSA25519");P("1.2.840.10040.4.3","dsa-with-sha1");P("1.3.14.3.2.7","desCBC");P("1.3.14.3.2.26","sha1");P("1.3.14.3.2.29","sha1WithRSASignature");P("2.16.840.1.101.3.4.2.1","sha256");P("2.16.840.1.101.3.4.2.2","sha384");P("2.16.840.1.101.3.4.2.3","sha512");P("2.16.840.1.101.3.4.2.4","sha224");P("2.16.840.1.101.3.4.2.5","sha512-224");P("2.16.840.1.101.3.4.2.6","sha512-256");P("1.2.840.113549.2.2","md2");P("1.2.840.113549.2.5","md5");P("1.2.840.113549.1.7.1","data");P("1.2.840.113549.1.7.2","signedData");P("1.2.840.113549.1.7.3","envelopedData");P("1.2.840.113549.1.7.4","signedAndEnvelopedData");P("1.2.840.113549.1.7.5","digestedData");P("1.2.840.113549.1.7.6","encryptedData");P("1.2.840.113549.1.9.1","emailAddress");P("1.2.840.113549.1.9.2","unstructuredName");P("1.2.840.113549.1.9.3","contentType");P("1.2.840.113549.1.9.4","messageDigest");P("1.2.840.113549.1.9.5","signingTime");P("1.2.840.113549.1.9.6","counterSignature");P("1.2.840.113549.1.9.7","challengePassword");P("1.2.840.113549.1.9.8","unstructuredAddress");P("1.2.840.113549.1.9.14","extensionRequest");P("1.2.840.113549.1.9.20","friendlyName");P("1.2.840.113549.1.9.21","localKeyId");P("1.2.840.113549.1.9.22.1","x509Certificate");P("1.2.840.113549.1.12.10.1.1","keyBag");P("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");P("1.2.840.113549.1.12.10.1.3","certBag");P("1.2.840.113549.1.12.10.1.4","crlBag");P("1.2.840.113549.1.12.10.1.5","secretBag");P("1.2.840.113549.1.12.10.1.6","safeContentsBag");P("1.2.840.113549.1.5.13","pkcs5PBES2");P("1.2.840.113549.1.5.12","pkcs5PBKDF2");P("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");P("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");P("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");P("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");P("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");P("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");P("1.2.840.113549.2.7","hmacWithSHA1");P("1.2.840.113549.2.8","hmacWithSHA224");P("1.2.840.113549.2.9","hmacWithSHA256");P("1.2.840.113549.2.10","hmacWithSHA384");P("1.2.840.113549.2.11","hmacWithSHA512");P("1.2.840.113549.3.7","des-EDE3-CBC");P("2.16.840.1.101.3.4.1.2","aes128-CBC");P("2.16.840.1.101.3.4.1.22","aes192-CBC");P("2.16.840.1.101.3.4.1.42","aes256-CBC");P("2.5.4.3","commonName");P("2.5.4.4","surname");P("2.5.4.5","serialNumber");P("2.5.4.6","countryName");P("2.5.4.7","localityName");P("2.5.4.8","stateOrProvinceName");P("2.5.4.9","streetAddress");P("2.5.4.10","organizationName");P("2.5.4.11","organizationalUnitName");P("2.5.4.12","title");P("2.5.4.13","description");P("2.5.4.15","businessCategory");P("2.5.4.17","postalCode");P("2.5.4.42","givenName");P("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");P("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");P("2.16.840.1.113730.1.1","nsCertType");P("2.16.840.1.113730.1.13","nsComment");ge("2.5.29.1","authorityKeyIdentifier");ge("2.5.29.2","keyAttributes");ge("2.5.29.3","certificatePolicies");ge("2.5.29.4","keyUsageRestriction");ge("2.5.29.5","policyMapping");ge("2.5.29.6","subtreesConstraint");ge("2.5.29.7","subjectAltName");ge("2.5.29.8","issuerAltName");ge("2.5.29.9","subjectDirectoryAttributes");ge("2.5.29.10","basicConstraints");ge("2.5.29.11","nameConstraints");ge("2.5.29.12","policyConstraints");ge("2.5.29.13","basicConstraints");P("2.5.29.14","subjectKeyIdentifier");P("2.5.29.15","keyUsage");ge("2.5.29.16","privateKeyUsagePeriod");P("2.5.29.17","subjectAltName");P("2.5.29.18","issuerAltName");P("2.5.29.19","basicConstraints");ge("2.5.29.20","cRLNumber");ge("2.5.29.21","cRLReason");ge("2.5.29.22","expirationDate");ge("2.5.29.23","instructionCode");ge("2.5.29.24","invalidityDate");ge("2.5.29.25","cRLDistributionPoints");ge("2.5.29.26","issuingDistributionPoint");ge("2.5.29.27","deltaCRLIndicator");ge("2.5.29.28","issuingDistributionPoint");ge("2.5.29.29","certificateIssuer");ge("2.5.29.30","nameConstraints");P("2.5.29.31","cRLDistributionPoints");P("2.5.29.32","certificatePolicies");ge("2.5.29.33","policyMappings");ge("2.5.29.34","policyConstraints");P("2.5.29.35","authorityKeyIdentifier");ge("2.5.29.36","policyConstraints");P("2.5.29.37","extKeyUsage");ge("2.5.29.46","freshestCRL");ge("2.5.29.54","inhibitAnyPolicy");P("1.3.6.1.4.1.11129.2.4.2","timestampList");P("1.3.6.1.5.5.7.1.1","authorityInfoAccess");P("1.3.6.1.5.5.7.3.1","serverAuth");P("1.3.6.1.5.5.7.3.2","clientAuth");P("1.3.6.1.5.5.7.3.3","codeSigning");P("1.3.6.1.5.5.7.3.4","emailProtection");P("1.3.6.1.5.5.7.3.8","timeStamping")});var jt=C((dP,w0)=>{var Ae=ee();de();Qr();var U=w0.exports=Ae.asn1=Ae.asn1||{};U.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};U.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};U.create=function(e,t,r,n,i){if(Ae.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var o={tagClass:e,type:t,constructed:r,composed:r||Ae.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=U.copy(o)),o};U.copy=function(e,t){var r;if(Ae.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(U.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:U.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};U.equals=function(e,t,r){if(Ae.util.isArray(e)){if(!Ae.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!U.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&U.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};U.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function la(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var Ub=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;la(e,t,a),n=e.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};U.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Ae.util.createBuffer(e));var r=e.length(),n=ms(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function ms(e,t,r,n){var i;la(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var u=Ub(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=u,c}u=t}var l,f,h=(a&32)===32;if(h)if(l=[],u===void 0)for(;;){if(la(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),l.push(ms(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),l.push(ms(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(l===void 0&&s===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&(f=e.bytes(u)),l===void 0&&n.decodeBitStrings&&s===U.Class.UNIVERSAL&&o===U.Type.BITSTRING&&u>1){var p=e.read,d=t,m=0;if(o===U.Type.BITSTRING&&(la(e,t,1),m=e.getByte(),t--),m===0)try{i=e.length();var S={strict:!0,decodeBitStrings:!0},b=ms(e,t,r+1,S),_=i-e.length();t-=_,o==U.Type.BITSTRING&&_++;var I=b.tagClass;_===u&&(I===U.Class.UNIVERSAL||I===U.Class.CONTEXT_SPECIFIC)&&(l=[b])}catch(R){}l===void 0&&(e.read=p,t=d)}if(l===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(o===U.Type.BMPSTRING)for(l="";u>0;u-=2)la(e,t,2),l+=String.fromCharCode(e.getInt16()),t-=2;else l=e.getBytes(u),t-=u}var O=f===void 0?null:{bitStringContents:f};return U.create(s,o,h,l,O)}U.toDer=function(e){var t=Ae.util.createBuffer(),r=e.tagClass|e.type,n=Ae.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=U.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&n.putBuffer(U.toDer(e.value[a]))}else if(e.type===U.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===U.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(n),t};U.oidToDer=function(e){var t=e.split("."),r=Ae.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,a,s,o=2;o<t.length;++o){n=!0,i=[],a=parseInt(t[o],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};U.derToOid=function(e){var t;typeof e=="string"&&(e=Ae.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};U.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),c=10;u!=="+"&&u!=="-"&&(o=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,0),c&&(u=e.charAt(c),u==="+"||u==="-")){var l=parseInt(e.substr(c+1,2),10),f=parseInt(e.substr(c+4,2),10),h=l*60+f;h*=6e4,u==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};U.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;e.charAt(e.length-1)==="Z"&&(l=!0);var f=e.length-5,h=e.charAt(f);if(h==="+"||h==="-"){var p=parseInt(e.substr(f+1,2),10),d=parseInt(e.substr(f+4,2),10);c=p*60+d,c*=6e4,h==="+"&&(c*=-1),l=!0}return e.charAt(14)==="."&&(u=parseFloat(e.substr(14),10)*1e3),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(a,s,o,u)),t};U.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};U.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};U.integerToDer=function(e){var t=Ae.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};U.derToInteger=function(e){typeof e=="string"&&(e=Ae.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};U.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&Ae.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=U.validate(e.value[a],t.value[s],r,n),i?++a:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var o;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var u=e.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var I0=/[^\\u0000-\\u00ff]/;U.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",a=0;a<t*r;++a)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case U.Class.UNIVERSAL:n+="Universal:";break;case U.Class.APPLICATION:n+="Application:";break;case U.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case U.Class.PRIVATE:n+="Private:";break}if(e.tagClass===U.Class.UNIVERSAL)switch(n+=e.type,e.type){case U.Type.NONE:n+=" (None)";break;case U.Type.BOOLEAN:n+=" (Boolean)";break;case U.Type.INTEGER:n+=" (Integer)";break;case U.Type.BITSTRING:n+=" (Bit string)";break;case U.Type.OCTETSTRING:n+=" (Octet string)";break;case U.Type.NULL:n+=" (Null)";break;case U.Type.OID:n+=" (Object Identifier)";break;case U.Type.ODESC:n+=" (Object Descriptor)";break;case U.Type.EXTERNAL:n+=" (External or Instance of)";break;case U.Type.REAL:n+=" (Real)";break;case U.Type.ENUMERATED:n+=" (Enumerated)";break;case U.Type.EMBEDDED:n+=" (Embedded PDV)";break;case U.Type.UTF8:n+=" (UTF8)";break;case U.Type.ROID:n+=" (Relative Object Identifier)";break;case U.Type.SEQUENCE:n+=" (Sequence)";break;case U.Type.SET:n+=" (Set)";break;case U.Type.PRINTABLESTRING:n+=" (Printable String)";break;case U.Type.IA5String:n+=" (IA5String (ASCII))";break;case U.Type.UTCTIME:n+=" (UTC time)";break;case U.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case U.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=U.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(o+=","));n+=i+"Sub values: "+s+o}else{if(n+=i+"Value: ",e.type===U.Type.OID){var u=U.derToOid(e.value);n+=u,Ae.pki&&Ae.pki.oids&&u in Ae.pki.oids&&(n+=" ("+Ae.pki.oids[u]+") ")}if(e.type===U.Type.INTEGER)try{n+=U.derToInteger(e.value)}catch(l){n+="0x"+Ae.util.bytesToHex(e.value)}else if(e.type===U.Type.BITSTRING){if(e.value.length>1?n+="0x"+Ae.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===U.Type.OCTETSTRING)I0.test(e.value)||(n+="("+e.value+") "),n+="0x"+Ae.util.bytesToHex(e.value);else if(e.type===U.Type.UTF8)try{n+=Ae.util.decodeUtf8(e.value)}catch(l){if(l.message==="URI malformed")n+="0x"+Ae.util.bytesToHex(e.value)+" (malformed UTF8)";else throw l}else e.type===U.Type.PRINTABLESTRING||e.type===U.Type.IA5String?n+=e.value:I0.test(e.value)?n+="0x"+Ae.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var ar=C((pP,B0)=>{var Ss=ee();B0.exports=Ss.md=Ss.md||{};Ss.md.algorithms=Ss.md.algorithms||{}});var ni=C((vP,R0)=>{var Ir=ee();ar();de();var qb=R0.exports=Ir.hmac=Ir.hmac||{};qb.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in Ir.md.algorithms)t=Ir.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=Ir.util.createBuffer(s);else if(Ir.util.isArray(s)){var o=s;s=Ir.util.createBuffer();for(var u=0;u<o.length;++u)s.putByte(o[u])}var c=s.length();c>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=Ir.util.createBuffer(),n=Ir.util.createBuffer(),c=s.length();for(var u=0;u<c;++u){var o=s.at(u);r.putByte(54^o),n.putByte(92^o)}if(c<t.blockLength)for(var o=t.blockLength-c,u=0;u<o;++u)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(n),t.update(a),t.digest()},i.digest=i.getMac,i}});var Es=C((yP,P0)=>{var sr=ee();ar();de();var N0=P0.exports=sr.md5=sr.md5||{};sr.md.md5=sr.md.algorithms.md5=N0;N0.create=function(){D0||Mb();var e=null,t=sr.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=sr.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=sr.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),O0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=sr.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Yc.substr(0,n.blockLength-s));for(var o,u=0,c=n.fullMessageLength.length-1;c>=0;--c)o=n.fullMessageLength[c]*8+u,u=o/4294967296>>>0,i.putInt32Le(o>>>0);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};O0(l,r,i);var f=sr.util.createBuffer();return f.putInt32Le(l.h0),f.putInt32Le(l.h1),f.putInt32Le(l.h2),f.putInt32Le(l.h3),f},n};var Yc=null,Cs=null,fa=null,ii=null,D0=!1;function Mb(){Yc="\x80",Yc+=sr.util.fillString("\0",64),Cs=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],fa=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],ii=new Array(64);for(var e=0;e<64;++e)ii[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);D0=!0}function O0(e,t,r){for(var n,i,a,s,o,u,c,l,f=r.length();f>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,l=0;l<16;++l)t[l]=r.getInt32Le(),u=o^a&(s^o),n=i+u+ii[l]+t[l],c=fa[l],i=o,o=s,s=a,a+=n<<c|n>>>32-c;for(;l<32;++l)u=s^o&(a^s),n=i+u+ii[l]+t[Cs[l]],c=fa[l],i=o,o=s,s=a,a+=n<<c|n>>>32-c;for(;l<48;++l)u=a^s^o,n=i+u+ii[l]+t[Cs[l]],c=fa[l],i=o,o=s,s=a,a+=n<<c|n>>>32-c;for(;l<64;++l)u=s^(a|~o),n=i+u+ii[l]+t[Cs[l]],c=fa[l],i=o,o=s,s=a,a+=n<<c|n>>>32-c;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,f-=64}}});var wn=C((gP,k0)=>{var xs=ee();de();var L0=k0.exports=xs.pem=xs.pem||{};L0.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=bs(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=bs(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=bs(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=bs(e.headers[i]);return e.procType&&(r+=`\r
`),r+=xs.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};L0.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(e),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var o={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:xs.util.decode64(a[3])};if(t.push(o),!!a[2]){for(var u=a[2].split(i),c=0;a&&c<u.length;){for(var l=u[c].replace(/\s+$/,""),f=c+1;f<u.length;++f){var h=u[f];if(!/\s/.test(h[0]))break;l+=h,c=f}if(a=l.match(n),a){for(var p={name:a[1],values:[]},d=a[2].split(","),m=0;m<d.length;++m)p.values.push(Fb(d[m]));if(o.procType)if(!o.contentDomain&&p.name==="Content-Domain")o.contentDomain=d[0]||"";else if(!o.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:d[0],parameters:d[1]||null}}else o.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:d[0],type:d[1]}}}++c}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function bs(e){for(var t=e.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function Fb(e){return e.replace(/^\s+/,"")}});var ha=C((mP,q0)=>{var Ie=ee();ps();Hc();de();q0.exports=Ie.des=Ie.des||{};Ie.des.startEncrypting=function(e,t,r,n){var i=Ts({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Ie.des.createEncryptionCipher=function(e,t){return Ts({key:e,output:null,decrypt:!1,mode:t})};Ie.des.startDecrypting=function(e,t,r,n){var i=Ts({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};Ie.des.createDecryptionCipher=function(e,t){return Ts({key:e,output:null,decrypt:!0,mode:t})};Ie.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return U0(r._keys,n,i,!1)},decrypt:function(n,i){return U0(r._keys,n,i,!0)}}}),r._init=!1};Ie.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Ie.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Qb(t),this._init=!0}};or("DES-ECB",Ie.cipher.modes.ecb);or("DES-CBC",Ie.cipher.modes.cbc);or("DES-CFB",Ie.cipher.modes.cfb);or("DES-OFB",Ie.cipher.modes.ofb);or("DES-CTR",Ie.cipher.modes.ctr);or("3DES-ECB",Ie.cipher.modes.ecb);or("3DES-CBC",Ie.cipher.modes.cbc);or("3DES-CFB",Ie.cipher.modes.cfb);or("3DES-OFB",Ie.cipher.modes.ofb);or("3DES-CTR",Ie.cipher.modes.ctr);function or(e,t){var r=function(){return new Ie.des.Algorithm(e,t)};Ie.cipher.registerAlgorithm(e,r)}var Vb=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Kb=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Gb=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],jb=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Hb=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],$b=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],zb=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Wb=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Qb(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],d=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,S=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],_=0,I,O=0;O<m;O++){var R=e.getInt32(),B=e.getInt32();I=(R>>>4^B)&252645135,B^=I,R^=I<<4,I=(B>>>-16^R)&65535,R^=I,B^=I<<-16,I=(R>>>2^B)&858993459,B^=I,R^=I<<2,I=(B>>>-16^R)&65535,R^=I,B^=I<<-16,I=(R>>>1^B)&1431655765,B^=I,R^=I<<1,I=(B>>>8^R)&16711935,R^=I,B^=I<<8,I=(R>>>1^B)&1431655765,B^=I,R^=I<<1,I=R<<8|B>>>20&240,R=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=I;for(var V=0;V<b.length;++V){b[V]?(R=R<<2|R>>>26,B=B<<2|B>>>26):(R=R<<1|R>>>27,B=B<<1|B>>>27),R&=-15,B&=-15;var K=t[R>>>28]|r[R>>>24&15]|n[R>>>20&15]|i[R>>>16&15]|a[R>>>12&15]|s[R>>>8&15]|o[R>>>4&15],W=u[B>>>28]|c[B>>>24&15]|l[B>>>20&15]|f[B>>>16&15]|h[B>>>12&15]|p[B>>>8&15]|d[B>>>4&15];I=(W>>>16^K)&65535,S[_++]=K^I,S[_++]=W^I<<16}}return S}function U0(e,t,r,n){var i=e.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],u=t[1];s=(o>>>4^u)&252645135,u^=s,o^=s<<4,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,o=o<<1|o>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var l=a[c+1],f=a[c+2],h=a[c];h!=l;h+=f){var p=u^e[h],d=(u>>>4|u<<28)^e[h+1];s=o,o=u,u=s^(Kb[p>>>24&63]|jb[p>>>16&63]|$b[p>>>8&63]|Wb[p&63]|Vb[d>>>24&63]|Gb[d>>>16&63]|Hb[d>>>8&63]|zb[d&63])}s=o,o=u,u=s}o=o>>>1|o<<31,u=u>>>1|u<<31,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(o>>>4^u)&252645135,u^=s,o^=s<<4,r[0]=o,r[1]=u}function Ts(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=Ie.cipher.createDecipher(r,e.key):n=Ie.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof Ie.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var As=C((SP,M0)=>{var pt=ee();ni();ar();de();var Yb=pt.pkcs5=pt.pkcs5||{},wr;pt.util.isNodejs&&!pt.options.usePureJavaScript&&(wr=require("crypto"));M0.exports=pt.pbkdf2=Yb.pbkdf2=function(e,t,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),pt.util.isNodejs&&!pt.options.usePureJavaScript&&wr.pbkdf2&&(i===null||typeof i!="object")&&(wr.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?wr.pbkdf2Sync.length===4?wr.pbkdf2(e,t,r,n,function(I,O){if(I)return a(I);a(null,O.toString("binary"))}):wr.pbkdf2(e,t,r,n,i,function(I,O){if(I)return a(I);a(null,O.toString("binary"))}):wr.pbkdf2Sync.length===4?wr.pbkdf2Sync(e,t,r,n).toString("binary"):wr.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in pt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=pt.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var u=Math.ceil(n/s),c=n-(u-1)*s,l=pt.hmac.create();l.start(i,e);var f="",h,p,d;if(!a){for(var m=1;m<=u;++m){l.start(null,null),l.update(t),l.update(pt.util.int32ToBytes(m)),h=d=l.digest().getBytes();for(var S=2;S<=r;++S)l.start(null,null),l.update(d),p=l.digest().getBytes(),h=pt.util.xorBytes(h,p,s),d=p;f+=m<u?h:h.substr(0,c)}return f}var m=1,S;function b(){if(m>u)return a(null,f);l.start(null,null),l.update(t),l.update(pt.util.int32ToBytes(m)),h=d=l.digest().getBytes(),S=2,_()}function _(){if(S<=r)return l.start(null,null),l.update(d),p=l.digest().getBytes(),h=pt.util.xorBytes(h,p,s),d=p,++S,pt.util.setImmediate(_);f+=m<u?h:h.substr(0,c),++m,b()}b()}});var Jc=C((CP,j0)=>{var cr=ee();ar();de();var V0=j0.exports=cr.sha256=cr.sha256||{};cr.md.sha256=cr.md.algorithms.sha256=V0;V0.create=function(){K0||Xb();var e=null,t=cr.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=cr.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=cr.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),F0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=cr.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Xc.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)o=n.fullMessageLength[l+1]*8,u=o/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};F0(f,r,i);var h=cr.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h.putInt32(f.h5),h.putInt32(f.h6),h.putInt32(f.h7),h},n};var Xc=null,K0=!1,G0=null;function Xb(){Xc="\x80",Xc+=cr.util.fillString("\0",64),G0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],K0=!0}function F0(e,t,r){for(var n,i,a,s,o,u,c,l,f,h,p,d,m,S,b,_=r.length();_>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(l=e.h0,f=e.h1,h=e.h2,p=e.h3,d=e.h4,m=e.h5,S=e.h6,b=e.h7,c=0;c<64;++c)s=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),o=S^d&(m^S),a=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),u=l&f|h&(l^f),n=b+s+o+G0[c]+t[c],i=a+u,b=S,S=m,m=d,d=p+n>>>0,p=h,h=f,f=l,l=n+i>>>0;e.h0=e.h0+l|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+p|0,e.h4=e.h4+d|0,e.h5=e.h5+m|0,e.h6=e.h6+S|0,e.h7=e.h7+b|0,_-=64}}});var Zc=C((EP,H0)=>{var ur=ee();de();var _s=null;ur.util.isNodejs&&!ur.options.usePureJavaScript&&!process.versions["node-webkit"]&&(_s=require("crypto"));var Jb=H0.exports=ur.prng=ur.prng||{};Jb.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(c,l){if(!l)return t.generateSync(c);var f=t.plugin.cipher,h=t.plugin.increment,p=t.plugin.formatKey,d=t.plugin.formatSeed,m=ur.util.createBuffer();t.key=null,S();function S(b){if(b)return l(b);if(m.length()>=c)return l(null,m.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return ur.util.nextTick(function(){a(S)});var _=f(t.key,t.seed);t.generated+=_.length,m.putBytes(_),t.key=p(f(t.key,h(t.seed))),t.seed=d(f(t.key,t.seed)),ur.util.setImmediate(S)}},t.generateSync=function(c){var l=t.plugin.cipher,f=t.plugin.increment,h=t.plugin.formatKey,p=t.plugin.formatSeed;t.key=null;for(var d=ur.util.createBuffer();d.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&s();var m=l(t.key,t.seed);t.generated+=m.length,d.putBytes(m),t.key=h(l(t.key,f(t.seed))),t.seed=p(l(t.key,t.seed))}return d.getBytes(c)};function a(c){if(t.pools[0].messageLength>=32)return o(),c();var l=32-t.pools[0].messageLength<<5;t.seedFile(l,function(f,h){if(f)return c(f);t.collect(h),o(),c()})}function s(){if(t.pools[0].messageLength>=32)return o();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var l=1,f=0;f<32;++f)t.reseeds%l===0&&(c.update(t.pools[f].digest().getBytes()),t.pools[f].start()),l=l<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var h=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function u(c){var l=null,f=ur.util.globalScope,h=f.crypto||f.msCrypto;h&&h.getRandomValues&&(l=function(R){return h.getRandomValues(R)});var p=ur.util.createBuffer();if(l)for(;p.length()<c;){var d=Math.max(1,Math.min(c-p.length(),65536)/4),m=new Uint32Array(Math.floor(d));try{l(m);for(var S=0;S<m.length;++S)p.putInt32(m[S])}catch(R){if(!(typeof QuotaExceededError!="undefined"&&R instanceof QuotaExceededError))throw R}}if(p.length()<c)for(var b,_,I,O=Math.floor(Math.random()*65536);p.length()<c;){_=16807*(O&65535),b=16807*(O>>16),_+=(b&32767)<<16,_+=b>>15,_=(_&2147483647)+(_>>31),O=_&4294967295;for(var S=0;S<3;++S)I=O>>>(S<<3),I^=Math.floor(Math.random()*256),p.putByte(I&255)}return p.getBytes(c)}return _s?(t.seedFile=function(c,l){_s.randomBytes(c,function(f,h){if(f)return l(f);l(null,h.toString())})},t.seedFileSync=function(c){return _s.randomBytes(c).toString()}):(t.seedFile=function(c,l){try{l(null,u(c))}catch(f){l(f)}},t.seedFileSync=u),t.collect=function(c){for(var l=c.length,f=0;f<l;++f)t.pools[t.pool].update(c.substr(f,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,l){for(var f="",h=0;h<l;h+=8)f+=String.fromCharCode(c>>h&255);t.collect(f)},t.registerWorker=function(c){if(c===self)t.seedFile=function(f,h){function p(d){var m=d.data;m.forge&&m.forge.prng&&(self.removeEventListener("message",p),h(m.forge.prng.err,m.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:f}}})};else{var l=function(f){var h=f.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(p,d){c.postMessage({forge:{prng:{err:p,bytes:d}}})})};c.addEventListener("message",l)}},t}});var Dt=C((bP,eu)=>{var Me=ee();Wr();Jc();Zc();de();(function(){if(Me.random&&Me.random.getBytes){eu.exports=Me.random;return}(function(e){var t={},r=new Array(4),n=Me.util.createBuffer();t.formatKey=function(f){var h=Me.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),Me.aes._expandKey(f,!1)},t.formatSeed=function(f){var h=Me.util.createBuffer(f);return f=new Array(4),f[0]=h.getInt32(),f[1]=h.getInt32(),f[2]=h.getInt32(),f[3]=h.getInt32(),f},t.cipher=function(f,h){return Me.aes._updateBlock(f,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(f){return++f[3],f},t.md=Me.md.sha256;function i(){var f=Me.prng.create(t);return f.getBytes=function(h,p){return f.generate(h,p)},f.getBytesSync=function(h){return f.generate(h)},f}var a=i(),s=null,o=Me.util.globalScope,u=o.crypto||o.msCrypto;if(u&&u.getRandomValues&&(s=function(f){return u.getRandomValues(f)}),Me.options.usePureJavaScript||!Me.util.isNodejs&&!s){if(typeof window=="undefined"||window.document,a.collectInt(+new Date,32),typeof navigator!="undefined"){var c="";for(var l in navigator)try{typeof navigator[l]=="string"&&(c+=navigator[l])}catch(f){}a.collect(c),c=null}e&&(e().mousemove(function(f){a.collectInt(f.clientX,16),a.collectInt(f.clientY,16)}),e().keypress(function(f){a.collectInt(f.charCode,8)}))}if(!Me.random)Me.random=a;else for(var l in a)Me.random[l]=a[l];Me.random.createInstance=i,eu.exports=Me.random})(typeof jQuery!="undefined"?jQuery:null)})()});var ru=C((xP,W0)=>{var Ct=ee();de();var tu=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],$0=[1,2,3,5],Zb=function(e,t){return e<<t&65535|(e&65535)>>16-t},e2=function(e,t){return(e&65535)>>t|e<<16-t&65535};W0.exports=Ct.rc2=Ct.rc2||{};Ct.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ct.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(tu[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-a,tu[r.at(128-a)&s]),o=127-a;o>=0;o--)r.setAt(o,tu[r.at(o+1)^r.at(o+a)]);return r};var z0=function(e,t,r){var n=!1,i=null,a=null,s=null,o,u,c,l,f=[];for(e=Ct.rc2.expandKey(e,t),c=0;c<64;c++)f.push(e.getInt16Le());r?(o=function(d){for(c=0;c<4;c++)d[c]+=f[l]+(d[(c+3)%4]&d[(c+2)%4])+(~d[(c+3)%4]&d[(c+1)%4]),d[c]=Zb(d[c],$0[c]),l++},u=function(d){for(c=0;c<4;c++)d[c]+=f[d[(c+3)%4]&63]}):(o=function(d){for(c=3;c>=0;c--)d[c]=e2(d[c],$0[c]),d[c]-=f[l]+(d[(c+3)%4]&d[(c+2)%4])+(~d[(c+3)%4]&d[(c+1)%4]),l--},u=function(d){for(c=3;c>=0;c--)d[c]-=f[d[(c+3)%4]&63]});var h=function(d){var m=[];for(c=0;c<4;c++){var S=i.getInt16Le();s!==null&&(r?S^=s.getInt16Le():s.putInt16Le(S)),m.push(S&65535)}l=r?0:63;for(var b=0;b<d.length;b++)for(var _=0;_<d[b][0];_++)d[b][1](m);for(c=0;c<4;c++)s!==null&&(r?s.putInt16Le(m[c]):m[c]^=s.getInt16Le()),a.putInt16Le(m[c])},p=null;return p={start:function(d,m){d&&typeof d=="string"&&(d=Ct.util.createBuffer(d)),n=!1,i=Ct.util.createBuffer(),a=m||new Ct.util.createBuffer,s=d,p.output=a},update:function(d){for(n||i.putBuffer(d);i.length()>=8;)h([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(d){var m=!0;if(r)if(d)m=d(8,i,!r);else{var S=i.length()===8?8:8-i.length();i.fillWithByte(S,S)}if(m&&(n=!0,p.update()),!r&&(m=i.length()===0,m))if(d)m=d(8,a,!r);else{var b=a.length(),_=a.at(b-1);_>b?m=!1:a.truncate(_)}return m}},p};Ct.rc2.startEncrypting=function(e,t,r){var n=Ct.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Ct.rc2.createEncryptionCipher=function(e,t){return z0(e,t,!0)};Ct.rc2.startDecrypting=function(e,t,r){var n=Ct.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Ct.rc2.createDecryptionCipher=function(e,t){return z0(e,t,!1)}});var pa=C((TP,rd)=>{var nu=ee();rd.exports=nu.jsbn=nu.jsbn||{};var Br,t2=0xdeadbeefcafe,Q0=(t2&16777215)==15715070;function N(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}nu.jsbn.BigInteger=N;function pe(){return new N(null)}function r2(e,t,r,n,i,a){for(;--a>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function n2(e,t,r,n,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var u=this.data[e]&32767,c=this.data[e++]>>15,l=o*u+c*s;u=s*u+((l&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(l>>>15)+o*c+(i>>>30),r.data[n++]=u&1073741823}return i}function Y0(e,t,r,n,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var u=this.data[e]&16383,c=this.data[e++]>>14,l=o*u+c*s;u=s*u+((l&16383)<<14)+r.data[n]+i,i=(u>>28)+(l>>14)+o*c,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(N.prototype.am=Y0,Br=28):Q0&&navigator.appName=="Microsoft Internet Explorer"?(N.prototype.am=n2,Br=30):Q0&&navigator.appName!="Netscape"?(N.prototype.am=r2,Br=26):(N.prototype.am=Y0,Br=28);N.prototype.DB=Br;N.prototype.DM=(1<<Br)-1;N.prototype.DV=1<<Br;var iu=52;N.prototype.FV=Math.pow(2,iu);N.prototype.F1=iu-Br;N.prototype.F2=2*Br-iu;var i2="0123456789abcdefghijklmnopqrstuvwxyz",Is=new Array,ai,Pt;ai=48;for(Pt=0;Pt<=9;++Pt)Is[ai++]=Pt;ai=97;for(Pt=10;Pt<36;++Pt)Is[ai++]=Pt;ai=65;for(Pt=10;Pt<36;++Pt)Is[ai++]=Pt;function X0(e){return i2.charAt(e)}function J0(e,t){var r=Is[e.charCodeAt(t)];return r==null?-1:r}function a2(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function s2(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Yr(e){var t=pe();return t.fromInt(e),t}function o2(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:J0(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&e[0]&128&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&N.ZERO.subTo(this,this)}function c2(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function u2(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(n=this.data[s]>>o)>0&&(i=!0,a=X0(n));s>=0;)o<t?(n=(this.data[s]&(1<<o)-1)<<t-o,n|=this.data[--s]>>(o+=this.DB-t)):(n=this.data[s]>>(o-=t)&r,o<=0&&(o+=this.DB,--s)),n>0&&(i=!0),i&&(a+=X0(n));return i?a:"0"}function l2(){var e=pe();return N.ZERO.subTo(this,e),e}function f2(){return this.s<0?this.negate():this}function h2(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function ws(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function d2(){return this.t<=0?0:this.DB*(this.t-1)+ws(this.data[this.t-1]^this.s&this.DM)}function p2(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function v2(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function y2(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>n|s,s=(this.data[o]&i)<<r;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function g2(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function m2(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function S2(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&N.ZERO.subTo(t,t)}function C2(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function E2(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=pe());var a=pe(),s=this.s,o=e.s,u=this.DB-ws(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var c=a.t,l=a.data[c-1];if(l!=0){var f=l*(1<<this.F1)+(c>1?a.data[c-2]>>this.F2:0),h=this.FV/f,p=(1<<this.F1)/f,d=1<<this.F2,m=r.t,S=m-c,b=t==null?pe():t;for(a.dlShiftTo(S,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),N.ONE.dlShiftTo(c,b),b.subTo(a,a);a.t<c;)a.data[a.t++]=0;for(;--S>=0;){var _=r.data[--m]==l?this.DM:Math.floor(r.data[m]*h+(r.data[m-1]+d)*p);if((r.data[m]+=a.am(0,_,r,S,0,c))<_)for(a.dlShiftTo(S,b),r.subTo(b,r);r.data[m]<--_;)r.subTo(b,r)}t!=null&&(r.drShiftTo(c,t),s!=o&&N.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&N.ZERO.subTo(r,r)}}}function b2(e){var t=pe();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(N.ZERO)>0&&e.subTo(t,t),t}function Bn(e){this.m=e}function x2(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function T2(e){return e}function A2(e){e.divRemTo(this.m,null,e)}function _2(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function I2(e,t){e.squareTo(t),this.reduce(t)}Bn.prototype.convert=x2;Bn.prototype.revert=T2;Bn.prototype.reduce=A2;Bn.prototype.mulTo=_2;Bn.prototype.sqrTo=I2;function w2(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Rn(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function B2(e){var t=pe();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(N.ZERO)>0&&this.m.subTo(t,t),t}function R2(e){var t=pe();return e.copyTo(t),this.reduce(t),t}function O2(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function N2(e,t){e.squareTo(t),this.reduce(t)}function D2(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Rn.prototype.convert=B2;Rn.prototype.revert=R2;Rn.prototype.reduce=O2;Rn.prototype.mulTo=D2;Rn.prototype.sqrTo=N2;function P2(){return(this.t>0?this.data[0]&1:this.s)==0}function L2(e,t){if(e>4294967295||e<1)return N.ONE;var r=pe(),n=pe(),i=t.convert(this),a=ws(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function k2(e,t){var r;return e<256||t.isEven()?r=new Bn(t):r=new Rn(t),this.exp(e,r)}N.prototype.copyTo=a2;N.prototype.fromInt=s2;N.prototype.fromString=o2;N.prototype.clamp=c2;N.prototype.dlShiftTo=p2;N.prototype.drShiftTo=v2;N.prototype.lShiftTo=y2;N.prototype.rShiftTo=g2;N.prototype.subTo=m2;N.prototype.multiplyTo=S2;N.prototype.squareTo=C2;N.prototype.divRemTo=E2;N.prototype.invDigit=w2;N.prototype.isEven=P2;N.prototype.exp=L2;N.prototype.toString=u2;N.prototype.negate=l2;N.prototype.abs=f2;N.prototype.compareTo=h2;N.prototype.bitLength=d2;N.prototype.mod=b2;N.prototype.modPowInt=k2;N.ZERO=Yr(0);N.ONE=Yr(1);function U2(){var e=pe();return this.copyTo(e),e}function q2(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function M2(){return this.t==0?this.s:this.data[0]<<24>>24}function F2(){return this.t==0?this.s:this.data[0]<<16>>16}function V2(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function K2(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function G2(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Yr(r),i=pe(),a=pe(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function j2(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,o=0;o<e.length;++o){var u=J0(e,o);if(u<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&N.ZERO.subTo(this,this)}function H2(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(N.ONE.shiftLeft(e-1),au,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(N.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function $2(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function z2(e){return this.compareTo(e)==0}function W2(e){return this.compareTo(e)<0?this:e}function Q2(e){return this.compareTo(e)>0?this:e}function Y2(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function X2(e,t){return e&t}function J2(e){var t=pe();return this.bitwiseTo(e,X2,t),t}function au(e,t){return e|t}function Z2(e){var t=pe();return this.bitwiseTo(e,au,t),t}function Z0(e,t){return e^t}function ex(e){var t=pe();return this.bitwiseTo(e,Z0,t),t}function ed(e,t){return e&~t}function tx(e){var t=pe();return this.bitwiseTo(e,ed,t),t}function rx(){for(var e=pe(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function nx(e){var t=pe();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function ix(e){var t=pe();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function ax(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function sx(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+ax(this.data[e]);return this.s<0?this.t*this.DB:-1}function ox(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function cx(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=ox(this.data[r]^t);return e}function ux(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function lx(e,t){var r=N.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function fx(e){return this.changeBit(e,au)}function hx(e){return this.changeBit(e,ed)}function dx(e){return this.changeBit(e,Z0)}function px(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function vx(e){var t=pe();return this.addTo(e,t),t}function yx(e){var t=pe();return this.subTo(e,t),t}function gx(e){var t=pe();return this.multiplyTo(e,t),t}function mx(e){var t=pe();return this.divRemTo(e,t,null),t}function Sx(e){var t=pe();return this.divRemTo(e,null,t),t}function Cx(e){var t=pe(),r=pe();return this.divRemTo(e,t,r),new Array(t,r)}function Ex(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function bx(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function da(){}function td(e){return e}function xx(e,t,r){e.multiplyTo(t,r)}function Tx(e,t){e.squareTo(t)}da.prototype.convert=td;da.prototype.revert=td;da.prototype.mulTo=xx;da.prototype.sqrTo=Tx;function Ax(e){return this.exp(e,new da)}function _x(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function Ix(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function si(e){this.r2=pe(),this.q3=pe(),N.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function wx(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=pe();return e.copyTo(t),this.reduce(t),t}function Bx(e){return e}function Rx(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Ox(e,t){e.squareTo(t),this.reduce(t)}function Nx(e,t,r){e.multiplyTo(t,r),this.reduce(r)}si.prototype.convert=wx;si.prototype.revert=Bx;si.prototype.reduce=Rx;si.prototype.mulTo=Nx;si.prototype.sqrTo=Ox;function Dx(e,t){var r=e.bitLength(),n,i=Yr(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Bn(t):t.isEven()?a=new si(t):a=new Rn(t);var s=new Array,o=3,u=n-1,c=(1<<n)-1;if(s[1]=a.convert(this),n>1){var l=pe();for(a.sqrTo(s[1],l);o<=c;)s[o]=pe(),a.mulTo(l,s[o-2],s[o]),o+=2}var f=e.t-1,h,p=!0,d=pe(),m;for(r=ws(e.data[f])-1;f>=0;){for(r>=u?h=e.data[f]>>r-u&c:(h=(e.data[f]&(1<<r+1)-1)<<u-r,f>0&&(h|=e.data[f-1]>>this.DB+r-u)),o=n;!(h&1);)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--f),p)s[h].copyTo(i),p=!1;else{for(;o>1;)a.sqrTo(i,d),a.sqrTo(d,i),o-=2;o>0?a.sqrTo(i,d):(m=i,i=d,d=m),a.mulTo(d,s[h],i)}for(;f>=0&&!(e.data[f]&1<<r);)a.sqrTo(i,d),m=i,i=d,d=m,--r<0&&(r=this.DB-1,--f)}return a.revert(i)}function Px(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function Lx(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function kx(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return N.ZERO;for(var r=e.clone(),n=this.clone(),i=Yr(1),a=Yr(0),s=Yr(0),o=Yr(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(o,a)):(n.subTo(r,n),t&&s.subTo(i,s),o.subTo(a,o))}if(n.compareTo(N.ONE)!=0)return N.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var Ht=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Ux=(1<<26)/Ht[Ht.length-1];function qx(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Ht[Ht.length-1]){for(t=0;t<Ht.length;++t)if(r.data[0]==Ht[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Ht.length;){for(var n=Ht[t],i=t+1;i<Ht.length&&n<Ux;)n*=Ht[i++];for(n=r.modInt(n);t<i;)if(n%Ht[t++]==0)return!1}return r.millerRabin(e)}function Mx(e){var t=this.subtract(N.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=Fx(),a,s=0;s<e;++s){do a=new N(this.bitLength(),i);while(a.compareTo(N.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(n,this);if(o.compareTo(N.ONE)!=0&&o.compareTo(t)!=0){for(var u=1;u++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(N.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function Fx(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}N.prototype.chunkSize=V2;N.prototype.toRadix=G2;N.prototype.fromRadix=j2;N.prototype.fromNumber=H2;N.prototype.bitwiseTo=Y2;N.prototype.changeBit=lx;N.prototype.addTo=px;N.prototype.dMultiply=Ex;N.prototype.dAddOffset=bx;N.prototype.multiplyLowerTo=_x;N.prototype.multiplyUpperTo=Ix;N.prototype.modInt=Lx;N.prototype.millerRabin=Mx;N.prototype.clone=U2;N.prototype.intValue=q2;N.prototype.byteValue=M2;N.prototype.shortValue=F2;N.prototype.signum=K2;N.prototype.toByteArray=$2;N.prototype.equals=z2;N.prototype.min=W2;N.prototype.max=Q2;N.prototype.and=J2;N.prototype.or=Z2;N.prototype.xor=ex;N.prototype.andNot=tx;N.prototype.not=rx;N.prototype.shiftLeft=nx;N.prototype.shiftRight=ix;N.prototype.getLowestSetBit=sx;N.prototype.bitCount=cx;N.prototype.testBit=ux;N.prototype.setBit=fx;N.prototype.clearBit=hx;N.prototype.flipBit=dx;N.prototype.add=vx;N.prototype.subtract=yx;N.prototype.multiply=gx;N.prototype.divide=mx;N.prototype.remainder=Sx;N.prototype.divideAndRemainder=Cx;N.prototype.modPow=Dx;N.prototype.modInverse=kx;N.prototype.pow=Ax;N.prototype.gcd=Px;N.prototype.isProbablePrime=qx});var oi=C((AP,sd)=>{var lr=ee();ar();de();var id=sd.exports=lr.sha1=lr.sha1||{};lr.md.sha1=lr.md.algorithms.sha1=id;id.create=function(){ad||Vx();var e=null,t=lr.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=lr.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=lr.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),nd(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=lr.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(su.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,l=0;l<n.fullMessageLength.length-1;++l)o=n.fullMessageLength[l+1]*8,u=o/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};nd(f,r,i);var h=lr.util.createBuffer();return h.putInt32(f.h0),h.putInt32(f.h1),h.putInt32(f.h2),h.putInt32(f.h3),h.putInt32(f.h4),h},n};var su=null,ad=!1;function Vx(){su="\x80",su+=lr.util.fillString("\0",64),ad=!0}function nd(e,t,r){for(var n,i,a,s,o,u,c,l,f=r.length();f>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,u=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,c=o^a&(s^o),n=(i<<5|i>>>27)+c+u+1518500249+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<20;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=o^a&(s^o),n=(i<<5|i>>>27)+c+u+1518500249+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<32;++l)n=t[l-3]^t[l-8]^t[l-14]^t[l-16],n=n<<1|n>>>31,t[l]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+1859775393+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<40;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+1859775393+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<60;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=a&s|o&(a^s),n=(i<<5|i>>>27)+c+u+2400959708+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;l<80;++l)n=t[l-6]^t[l-16]^t[l-28]^t[l-32],n=n<<2|n>>>30,t[l]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+3395469782+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,f-=64}}});var ou=C((_P,cd)=>{var fr=ee();de();Dt();oi();var od=cd.exports=fr.pkcs1=fr.pkcs1||{};od.encode_rsa_oaep=function(e,t,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=fr.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),u=o-2*a.digestLength-2;if(t.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=u,c}n||(n=""),a.update(n,"raw");for(var l=a.digest(),f="",h=u-t.length,p=0;p<h;p++)f+="\0";var d=l.getBytes()+f+""+t;if(!i)i=fr.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=a.digestLength,c}var m=Bs(i,o-a.digestLength-1,s),S=fr.util.xorBytes(d,m,d.length),b=Bs(S,a.digestLength,s),_=fr.util.xorBytes(i,b,i.length);return"\0"+_+S};od.decode_rsa_oaep=function(e,t,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var S=new Error("RSAES-OAEP encoded message length is invalid.");throw S.length=t.length,S.expectedLength=s,S}if(i===void 0?i=fr.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),u=t.charAt(0),c=t.substring(1,i.digestLength+1),l=t.substring(1+i.digestLength),f=Bs(l,i.digestLength,a),h=fr.util.xorBytes(c,f,c.length),p=Bs(h,s-i.digestLength-1,a),d=fr.util.xorBytes(l,p,l.length),m=d.substring(0,i.digestLength),S=u!=="\0",b=0;b<i.digestLength;++b)S|=o.charAt(b)!==m.charAt(b);for(var _=1,I=i.digestLength,O=i.digestLength;O<d.length;O++){var R=d.charCodeAt(O),B=R&1^1,V=_?65534:0;S|=R&V,_=_&B,I+=_}if(S||d.charCodeAt(I)!==1)throw new Error("Invalid RSAES-OAEP padding.");return d.substring(I+1)};function Bs(e,t,r){r||(r=fr.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var uu=C((IP,cu)=>{var Xr=ee();de();pa();Dt();(function(){if(Xr.prime){cu.exports=Xr.prime;return}var e=cu.exports=Xr.prime=Xr.prime||{},t=Xr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(f,h){return f|h};e.generateProbablePrime=function(f,h,p){typeof h=="function"&&(p=h,h={}),h=h||{};var d=h.algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var m=h.prng||Xr.random,S={nextBytes:function(b){for(var _=m.getBytesSync(b.length),I=0;I<b.length;++I)b[I]=_.charCodeAt(I)}};if(d.name==="PRIMEINC")return a(f,S,d.options,p);throw new Error("Invalid prime generation algorithm: "+d.name)};function a(f,h,p,d){return"workers"in p?u(f,h,p,d):s(f,h,p,d)}function s(f,h,p,d){var m=c(f,h),S=0,b=l(m.bitLength());"millerRabinTests"in p&&(b=p.millerRabinTests);var _=10;"maxBlockTime"in p&&(_=p.maxBlockTime),o(m,f,h,S,b,_,d)}function o(f,h,p,d,m,S,b){var _=+new Date;do{if(f.bitLength()>h&&(f=c(h,p)),f.isProbablePrime(m))return b(null,f);f.dAddOffset(r[d++%8],0)}while(S<0||+new Date-_<S);Xr.util.setImmediate(function(){o(f,h,p,d,m,S,b)})}function u(f,h,p,d){if(typeof Worker=="undefined")return s(f,h,p,d);var m=c(f,h),S=p.workers,b=p.workLoad||100,_=b*30/8,I=p.workerScript||"forge/prime.worker.js";if(S===-1)return Xr.util.estimateCores(function(R,B){R&&(B=2),S=B-1,O()});O();function O(){S=Math.max(1,S);for(var R=[],B=0;B<S;++B)R[B]=new Worker(I);for(var V=S,B=0;B<S;++B)R[B].addEventListener("message",W);var K=!1;function W(Z){if(!K){--V;var re=Z.data;if(re.found){for(var le=0;le<R.length;++le)R[le].terminate();return K=!0,d(null,new t(re.prime,16))}m.bitLength()>f&&(m=c(f,h));var ye=m.toString(16);Z.target.postMessage({hex:ye,workLoad:b}),m.dAddOffset(_,0)}}}}function c(f,h){var p=new t(f,h),d=f-1;return p.testBit(d)||p.bitwiseTo(t.ONE.shiftLeft(d),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function l(f){return f<=100?27:f<=150?18:f<=200?15:f<=250?12:f<=300?9:f<=350?8:f<=400?7:f<=500?6:f<=600?5:f<=800?4:f<=1250?3:2}})()});var va=C((wP,vd)=>{var $=ee();jt();pa();Qr();ou();uu();Dt();de();typeof fe=="undefined"&&(fe=$.jsbn.BigInteger);var fe,lu=$.util.isNodejs?require("crypto"):null,A=$.asn1,Lt=$.util;$.pki=$.pki||{};vd.exports=$.pki.rsa=$.rsa=$.rsa||{};var X=$.pki,Kx=[6,4,2,4,2,4,6,2],Gx={name:"PrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},jx={name:"RSAPrivateKey",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Hx={name:"RSAPublicKey",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:A.Class.UNIVERSAL,type:A.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},$x=$.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:A.Class.UNIVERSAL,type:A.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},zx={name:"DigestInfo",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:A.Class.UNIVERSAL,type:A.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:A.Class.UNIVERSAL,type:A.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:A.Class.UNIVERSAL,type:A.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:A.Class.UNIVERSAL,type:A.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Wx=function(e){var t;if(e.algorithm in X.oids)t=X.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=A.oidToDer(t).getBytes(),i=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[]),a=A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[]);a.value.push(A.create(A.Class.UNIVERSAL,A.Type.OID,!1,n)),a.value.push(A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,""));var s=A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),A.toDer(i).getBytes()},dd=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(fe.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(fe.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new fe($.util.bytesToHex($.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(fe.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};X.rsa.encrypt=function(e,t,r){var n=r,i,a=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=pd(e,t,r)):(i=$.util.createBuffer(),i.putBytes(e));for(var s=new fe(i.toHex(),16),o=dd(s,t,n),u=o.toString(16),c=$.util.createBuffer(),l=a-Math.ceil(u.length/2);l>0;)c.putByte(0),--l;return c.putBytes($.util.hexToBytes(u)),c.getBytes()};X.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new fe($.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=dd(s,t,r),u=o.toString(16),c=$.util.createBuffer(),l=i-Math.ceil(u.length/2);l>0;)c.putByte(0),--l;return c.putBytes($.util.hexToBytes(u)),n!==!1?Rs(c.getBytes(),t,r):c.getBytes()};X.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||$.random,i={nextBytes:function(o){for(var u=n.getBytesSync(o.length),c=0;c<o.length;++c)o[c]=u.charCodeAt(c)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new fe(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};X.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new fe(null);r.fromInt(30);for(var n=0,i=function(f,h){return f|h},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var u=e.p===null?e.pBits:e.qBits,c=u-1;e.pqState===0?(e.num=new fe(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(fe.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(Yx(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Kx[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(fe.ONE).gcd(e.e).compareTo(fe.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(fe.ONE),e.q1=e.q.subtract(fe.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(fe.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var l=e.e.modInverse(e.phi);e.keys={privateKey:X.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:X.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};X.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!$.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(ud("generateKeyPair"))return lu.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,u,c){if(o)return n(o);n(null,{privateKey:X.privateKeyFromPem(c),publicKey:X.publicKeyFromPem(u)})});if(ld("generateKey")&&ld("exportKey"))return Lt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:hd(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Lt.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var u=X.privateKeyFromAsn1(A.fromDer($.util.createBuffer(o)));n(null,{privateKey:u,publicKey:X.setRsaPublicKey(u.n,u.e)})}});if(fd("generateKey")&&fd("exportKey")){var i=Lt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:hd(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var u=o.target.result,c=Lt.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(l){var f=l.target.result,h=X.privateKeyFromAsn1(A.fromDer($.util.createBuffer(f)));n(null,{privateKey:h,publicKey:X.setRsaPublicKey(h.n,h.e)})},c.onerror=function(l){n(l)}},i.onerror=function(o){n(o)};return}}else if(ud("generateKeyPairSync")){var a=lu.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:X.privateKeyFromPem(a.privateKey),publicKey:X.publicKeyFromPem(a.publicKey)}}}var s=X.rsa.createKeyPairGenerationState(e,t,r);if(!n)return X.rsa.stepKeyPairGenerationState(s,0),s.keys;Qx(s,r,n)};X.setRsaPublicKey=X.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,u,c){return pd(o,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,u){return $.pkcs1.encode_rsa_oaep(u,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return X.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(u,c){c=Rs(c,r,!0);var l=A.fromDer(c,{parseAllBytes:s._parseAllDigestBytes}),f={},h=[];if(!A.validate(l,zx,f,h)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=h,p}var d=A.derToOid(f.algorithmIdentifier);if(!(d===$.oids.md2||d===$.oids.md5||d===$.oids.sha1||d===$.oids.sha224||d===$.oids.sha256||d===$.oids.sha384||d===$.oids.sha512||d===$.oids["sha512-224"]||d===$.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=d,p}if((d===$.oids.md2||d===$.oids.md5)&&!("parameters"in f))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===f.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(u,c){return c=Rs(c,r,!0),u===c}});var o=X.rsa.decrypt(i,r,!0,!1);return a.verify(n,o,r.n.bitLength())},r};X.setRsaPrivateKey=X.rsa.setPrivateKey=function(e,t,r,n,i,a,s,o){var u={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:o};return u.decrypt=function(c,l,f){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSAES-PKCS1-V1_5");var h=X.rsa.decrypt(c,u,!1,!1);if(l==="RSAES-PKCS1-V1_5")l={decode:Rs};else if(l==="RSA-OAEP"||l==="RSAES-OAEP")l={decode:function(p,d){return $.pkcs1.decode_rsa_oaep(d,p,f)}};else if(["RAW","NONE","NULL",null].indexOf(l)!==-1)l={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+l+'".');return l.decode(h,u,!1)},u.sign=function(c,l){var f=!1;typeof l=="string"&&(l=l.toUpperCase()),l===void 0||l==="RSASSA-PKCS1-V1_5"?(l={encode:Wx},f=1):(l==="NONE"||l==="NULL"||l===null)&&(l={encode:function(){return c}},f=1);var h=l.encode(c,u.n.bitLength());return X.rsa.encrypt(h,u,f)},u};X.wrapRsaPrivateKey=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(0).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(X.oids.rsaEncryption).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")]),A.create(A.Class.UNIVERSAL,A.Type.OCTETSTRING,!1,A.toDer(e).getBytes())])};X.privateKeyFromAsn1=function(e){var t={},r=[];if(A.validate(e,Gx,t,r)&&(e=A.fromDer($.util.createBuffer(t.privateKey))),t={},r=[],!A.validate(e,jx,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,o,u,c,l,f;return i=$.util.createBuffer(t.privateKeyModulus).toHex(),a=$.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=$.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=$.util.createBuffer(t.privateKeyPrime1).toHex(),u=$.util.createBuffer(t.privateKeyPrime2).toHex(),c=$.util.createBuffer(t.privateKeyExponent1).toHex(),l=$.util.createBuffer(t.privateKeyExponent2).toHex(),f=$.util.createBuffer(t.privateKeyCoefficient).toHex(),X.setRsaPrivateKey(new fe(i,16),new fe(a,16),new fe(s,16),new fe(o,16),new fe(u,16),new fe(c,16),new fe(l,16),new fe(f,16))};X.privateKeyToAsn1=X.privateKeyToRSAPrivateKey=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,A.integerToDer(0).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.n)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.e)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.d)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.p)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.q)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.dP)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.dQ)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.qInv))])};X.publicKeyFromAsn1=function(e){var t={},r=[];if(A.validate(e,$x,t,r)){var n=A.derToOid(t.publicKeyOid);if(n!==X.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!A.validate(e,Hx,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=$.util.createBuffer(t.publicKeyModulus).toHex(),s=$.util.createBuffer(t.publicKeyExponent).toHex();return X.setRsaPublicKey(new fe(a,16),new fe(s,16))};X.publicKeyToAsn1=X.publicKeyToSubjectPublicKeyInfo=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.OID,!1,A.oidToDer(X.oids.rsaEncryption).getBytes()),A.create(A.Class.UNIVERSAL,A.Type.NULL,!1,"")]),A.create(A.Class.UNIVERSAL,A.Type.BITSTRING,!1,[X.publicKeyToRSAPublicKey(e)])])};X.publicKeyToRSAPublicKey=function(e){return A.create(A.Class.UNIVERSAL,A.Type.SEQUENCE,!0,[A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.n)),A.create(A.Class.UNIVERSAL,A.Type.INTEGER,!1,hr(e.e))])};function pd(e,t,r){var n=$.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var u=0;u<s;++u)n.putByte(o)}else for(;s>0;){for(var c=0,l=$.random.getBytes(s),u=0;u<s;++u)o=l.charCodeAt(u),o===0?++c:n.putByte(o);s=c}return n.putByte(0),n.putBytes(e),n}function Rs(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=$.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(o===0){u=i-3-n;for(var c=0;c<u;++c)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(o===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var l=a.getByte();if(l!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function Qx(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){a(e.pBits,function(o,u){if(o)return r(o);if(e.p=u,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,u){$.prime.generateProbablePrime(o,n,u)}function s(o,u){if(o)return r(o);if(e.q=u,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(fe.ONE).gcd(e.e).compareTo(fe.ONE)!==0){e.p=null,i();return}if(e.q.subtract(fe.ONE).gcd(e.e).compareTo(fe.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(fe.ONE),e.q1=e.q.subtract(fe.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(fe.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var l=e.e.modInverse(e.phi);e.keys={privateKey:X.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:X.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function hr(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=$.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function Yx(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function ud(e){return $.util.isNodejs&&typeof lu[e]=="function"}function ld(e){return typeof Lt.globalScope!="undefined"&&typeof Lt.globalScope.crypto=="object"&&typeof Lt.globalScope.crypto.subtle=="object"&&typeof Lt.globalScope.crypto.subtle[e]=="function"}function fd(e){return typeof Lt.globalScope!="undefined"&&typeof Lt.globalScope.msCrypto=="object"&&typeof Lt.globalScope.msCrypto.subtle=="object"&&typeof Lt.globalScope.msCrypto.subtle[e]=="function"}function hd(e){for(var t=$.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var fu=C((BP,Cd)=>{var F=ee();Wr();jt();ha();ar();Qr();As();wn();Dt();ru();va();de();typeof yd=="undefined"&&(yd=F.jsbn.BigInteger);var yd,w=F.asn1,J=F.pki=F.pki||{};Cd.exports=J.pbe=F.pbe=F.pbe||{};var On=J.oids,Xx={name:"EncryptedPrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Jx={name:"PBES2Algorithms",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Zx={name:"pkcs-12PbeParams",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"iterations"}]};J.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=F.random.getBytesSync(r.saltSize),i=r.count,a=w.integerToDer(i),s,o,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,l,f;switch(r.algorithm){case"aes128":s=16,c=16,l=On["aes128-CBC"],f=F.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,l=On["aes192-CBC"],f=F.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,l=On["aes256-CBC"],f=F.aes.createEncryptionCipher;break;case"des":s=8,c=8,l=On.desCBC,f=F.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),d=Sd(p),m=F.pkcs5.pbkdf2(t,n,i,s,d),S=F.random.getBytesSync(c),b=f(m);b.start(S),b.update(w.toDer(e)),b.finish(),u=b.output.getBytes();var _=eT(n,a,s,p);o=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(On.pkcs5PBES2).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(On.pkcs5PBKDF2).getBytes()),_]),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(l).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,S)])])])}else if(r.algorithm==="3des"){s=24;var I=new F.util.ByteBuffer(n),m=J.pbe.generatePkcs12Key(t,I,1,i,s),S=J.pbe.generatePkcs12Key(t,I,2,i,s),b=F.des.createEncryptionCipher(m);b.start(S),b.update(w.toDer(e)),b.finish(),u=b.output.getBytes(),o=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(On["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,n),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,a.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var O=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[o,w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,u)]);return O};J.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!w.validate(e,Xx,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=w.derToOid(n.encryptionOid),o=J.pbe.getCipher(s,n.encryptionParams,t),u=F.util.createBuffer(n.encryptedData);return o.update(u),o.finish()&&(r=w.fromDer(o.output)),r};J.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:w.toDer(e).getBytes()};return F.pem.encode(r,{maxline:t})};J.encryptedPrivateKeyFromPem=function(e){var t=F.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return w.fromDer(t.body)};J.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=J.wrapRsaPrivateKey(J.privateKeyToAsn1(e));return n=J.encryptPrivateKeyInfo(n,t,r),J.encryptedPrivateKeyToPem(n)}var i,a,s,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=F.random.getBytesSync(16),o=F.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=F.random.getBytesSync(16),o=F.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=F.random.getBytesSync(16),o=F.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=F.random.getBytesSync(8),o=F.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=F.random.getBytesSync(8),o=F.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=F.pbe.opensslDeriveBytes(t,a.substr(0,8),s),l=o(c);l.start(a),l.update(w.toDer(J.privateKeyToAsn1(e))),l.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:F.util.bytesToHex(a).toUpperCase()},body:l.output.getBytes()};return F.pem.encode(f)};J.decryptRsaPrivateKey=function(e,t){var r=null,n=F.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=F.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=F.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=F.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=F.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=F.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(f){return F.rc2.createDecryptionCipher(f,40)};break;case"RC2-64-CBC":a=8,s=function(f){return F.rc2.createDecryptionCipher(f,64)};break;case"RC2-128-CBC":a=16,s=function(f){return F.rc2.createDecryptionCipher(f,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=F.util.hexToBytes(n.dekInfo.parameters),u=F.pbe.opensslDeriveBytes(t,o.substr(0,8),a),c=s(u);if(c.start(o),c.update(F.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=J.decryptPrivateKeyInfo(w.fromDer(r),t):r=w.fromDer(r),r!==null&&(r=J.privateKeyFromAsn1(r)),r};J.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in F.md))throw new Error('"sha1" hash algorithm unavailable.');a=F.md.sha1.create()}var u=a.digestLength,c=a.blockLength,l=new F.util.ByteBuffer,f=new F.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)f.putInt16(e.charCodeAt(o));f.putInt16(0)}var h=f.length(),p=t.length(),d=new F.util.ByteBuffer;d.fillWithByte(r,c);var m=c*Math.ceil(p/c),S=new F.util.ByteBuffer;for(o=0;o<m;o++)S.putByte(t.at(o%p));var b=c*Math.ceil(h/c),_=new F.util.ByteBuffer;for(o=0;o<b;o++)_.putByte(f.at(o%h));var I=S;I.putBuffer(_);for(var O=Math.ceil(i/u),R=1;R<=O;R++){var B=new F.util.ByteBuffer;B.putBytes(d.bytes()),B.putBytes(I.bytes());for(var V=0;V<n;V++)a.start(),a.update(B.getBytes()),B=a.digest();var K=new F.util.ByteBuffer;for(o=0;o<c;o++)K.putByte(B.at(o%u));var W=Math.ceil(p/c)+Math.ceil(h/c),Z=new F.util.ByteBuffer;for(s=0;s<W;s++){var re=new F.util.ByteBuffer(I.getBytes(c)),le=511;for(o=K.length()-1;o>=0;o--)le=le>>8,le+=K.at(o)+re.at(o),re.setAt(o,le&255);Z.putBuffer(re)}I=Z,l.putBuffer(B)}return l.truncate(l.length()-i),l};J.pbe.getCipher=function(e,t,r){switch(e){case J.oids.pkcs5PBES2:return J.pbe.getCipherForPBES2(e,t,r);case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case J.oids["pbewithSHAAnd40BitRC2-CBC"]:return J.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};J.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!w.validate(t,Jx,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=w.derToOid(n.kdfOid),e!==J.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=w.derToOid(n.encOid),e!==J.oids["aes128-CBC"]&&e!==J.oids["aes192-CBC"]&&e!==J.oids["aes256-CBC"]&&e!==J.oids["des-EDE3-CBC"]&&e!==J.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,o=F.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var u,c;switch(J.oids[e]){case"aes128-CBC":u=16,c=F.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=F.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=F.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=F.des.createDecryptionCipher;break;case"desCBC":u=8,c=F.des.createDecryptionCipher;break}var l=md(n.prfOid),f=F.pkcs5.pbkdf2(r,s,o,u,l),h=n.encIv,p=c(f);return p.start(h),p};J.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!w.validate(t,Zx,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=F.util.createBuffer(n.salt),o=F.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var u,c,l;switch(e){case J.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,l=F.des.startDecrypting;break;case J.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,l=function(m,S){var b=F.rc2.createDecryptionCipher(m,40);return b.start(S,null),b};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var f=md(n.prfOid),h=J.pbe.generatePkcs12Key(r,s,1,o,u,f);f.start();var p=J.pbe.generatePkcs12Key(r,s,2,o,c,f);return l(h,p)};J.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in F.md))throw new Error('"md5" hash algorithm unavailable.');n=F.md.md5.create()}t===null&&(t="");for(var i=[gd(n,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(gd(n,i[s-1]+e+t));return i.join("").substr(0,r)};function gd(e,t){return e.start().update(t).digest().getBytes()}function md(e){var t;if(!e)t="hmacWithSHA1";else if(t=J.oids[w.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Sd(t)}function Sd(e){var t=F.md;switch(e){case"hmacWithSHA224":t=F.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function eT(e,t,r,n){var i=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,e),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,F.util.hexToBytes(r.toString(16))),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(J.oids[n]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])),i}});var hu=C((RP,xd)=>{var ci=ee();jt();de();var q=ci.asn1,ui=xd.exports=ci.pkcs7asn1=ci.pkcs7asn1||{};ci.pkcs7=ci.pkcs7||{};ci.pkcs7.asn1=ui;var Ed={name:"ContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};ui.contentInfoValidator=Ed;var bd={name:"EncryptedContentInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};ui.envelopedDataValidator={name:"EnvelopedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(bd)};ui.encryptedDataValidator={name:"EncryptedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"}].concat(bd)};var tT={name:"SignerInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:q.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};ui.signedDataValidator={name:"SignedData",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Ed,{name:"SignedData.Certificates",tagClass:q.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:q.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:q.Class.UNIVERSAL,type:q.Type.SET,capture:"signerInfos",optional:!0,value:[tT]}]};ui.recipientInfoValidator={name:"RecipientInfo",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:q.Class.UNIVERSAL,type:q.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:q.Class.UNIVERSAL,type:q.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:q.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:q.Class.UNIVERSAL,type:q.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var du=C((OP,Td)=>{var Nn=ee();de();Nn.mgf=Nn.mgf||{};var rT=Td.exports=Nn.mgf.mgf1=Nn.mgf1=Nn.mgf1||{};rT.create=function(e){var t={generate:function(r,n){for(var i=new Nn.util.ByteBuffer,a=Math.ceil(n/e.digestLength),s=0;s<a;s++){var o=new Nn.util.ByteBuffer;o.putInt32(s),e.start(),e.update(r+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t}});var _d=C((NP,Ad)=>{var Os=ee();du();Ad.exports=Os.mgf=Os.mgf||{};Os.mgf.mgf1=Os.mgf1});var Ns=C((DP,Id)=>{var Dn=ee();Dt();de();var nT=Id.exports=Dn.pss=Dn.pss||{};nT.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,r=e.mgf,n=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=Dn.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||Dn.random,o={};return o.encode=function(u,c){var l,f=c-1,h=Math.ceil(f/8),p=u.digest().getBytes();if(h<n+a+2)throw new Error("Message is too long to encrypt.");var d;i===null?d=s.getBytesSync(a):d=i.bytes();var m=new Dn.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(p),m.putBytes(d),t.start(),t.update(m.getBytes());var S=t.digest().getBytes(),b=new Dn.util.ByteBuffer;b.fillWithByte(0,h-a-n-2),b.putByte(1),b.putBytes(d);var _=b.getBytes(),I=h-n-1,O=r.generate(S,I),R="";for(l=0;l<I;l++)R+=String.fromCharCode(_.charCodeAt(l)^O.charCodeAt(l));var B=65280>>8*h-f&255;return R=String.fromCharCode(R.charCodeAt(0)&~B)+R.substr(1),R+S+"\xBC"},o.verify=function(u,c,l){var f,h=l-1,p=Math.ceil(h/8);if(c=c.substr(-p),p<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(p-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var d=p-n-1,m=c.substr(0,d),S=c.substr(d,n),b=65280>>8*p-h&255;if(m.charCodeAt(0)&b)throw new Error("Bits beyond keysize not zero as expected.");var _=r.generate(S,d),I="";for(f=0;f<d;f++)I+=String.fromCharCode(m.charCodeAt(f)^_.charCodeAt(f));I=String.fromCharCode(I.charCodeAt(0)&~b)+I.substr(1);var O=p-n-a-2;for(f=0;f<O;f++)if(I.charCodeAt(f)!==0)throw new Error("Leftmost octets not zero as expected");if(I.charCodeAt(O)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var R=I.substr(-a),B=new Dn.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(u),B.putBytes(R),t.start(),t.update(B.getBytes());var V=t.digest().getBytes();return S===V},o}});var Ls=C((PP,Nd)=>{var z=ee();Wr();jt();ha();ar();_d();Qr();wn();Ns();va();de();var v=z.asn1,L=Nd.exports=z.pki=z.pki||{},he=L.oids,we={};we.CN=he.commonName;we.commonName="CN";we.C=he.countryName;we.countryName="C";we.L=he.localityName;we.localityName="L";we.ST=he.stateOrProvinceName;we.stateOrProvinceName="ST";we.O=he.organizationName;we.organizationName="O";we.OU=he.organizationalUnitName;we.organizationalUnitName="OU";we.E=he.emailAddress;we.emailAddress="E";var Bd=z.pki.rsa.publicKeyValidator,iT={name:"Certificate",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:v.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:v.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:v.Class.UNIVERSAL,type:v.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:v.Class.UNIVERSAL,type:v.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:v.Class.UNIVERSAL,type:v.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:v.Class.UNIVERSAL,type:v.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},Bd,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:v.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:v.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:v.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:v.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},aT={name:"rsapss",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:v.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:v.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:v.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:v.Class.UNIVERSAL,type:v.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:v.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:v.Class.UNIVERSAL,type:v.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},sT={name:"CertificationRequestInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},Bd,{name:"CertificationRequestInfo.attributes",tagClass:v.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:v.Class.UNIVERSAL,type:v.Type.SET,constructed:!0}]}]}]},oT={name:"CertificationRequest",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[sT,{name:"CertificationRequest.signatureAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};L.RDNAttributesAsArray=function(e,t){for(var r=[],n,i,a,s=0;s<e.value.length;++s){n=e.value[s];for(var o=0;o<n.value.length;++o)a={},i=n.value[o],a.type=v.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in he&&(a.name=he[a.type],a.name in we&&(a.shortName=we[a.name])),t&&(t.update(a.type),t.update(a.value)),r.push(a)}return r};L.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=v.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var o={};if(o.type=i,o.value=a[s].value,o.valueTagClass=a[s].type,o.type in he&&(o.name=he[o.type],o.name in we&&(o.shortName=we[o.name])),o.type===he.extensionRequest){o.extensions=[];for(var u=0;u<o.value.length;++u)o.extensions.push(L.certificateExtensionFromAsn1(o.value[u]))}t.push(o)}return t};function Jr(e,t){typeof t=="string"&&(t={shortName:t});for(var r=null,n,i=0;r===null&&i<e.attributes.length;++i)n=e.attributes[i],(t.type&&t.type===n.type||t.name&&t.name===n.name||t.shortName&&t.shortName===n.shortName)&&(r=n);return r}var Ds=function(e,t,r){var n={};if(e!==he["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:he.sha1},mgf:{algorithmOid:he.mgf1,hash:{algorithmOid:he.sha1}},saltLength:20});var i={},a=[];if(!v.validate(t,aT,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=v.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=v.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=v.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Ps=function(e){switch(he[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return z.md.sha1.create();case"md5WithRSAEncryption":return z.md.md5.create();case"sha256WithRSAEncryption":return z.md.sha256.create();case"sha384WithRSAEncryption":return z.md.sha384.create();case"sha512WithRSAEncryption":return z.md.sha512.create();case"RSASSA-PSS":return z.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},Rd=function(e){var t=e.certificate,r;switch(t.signatureOid){case he.sha1WithRSAEncryption:case he.sha1WithRSASignature:break;case he["RSASSA-PSS"]:var n,i;if(n=he[t.signatureParameters.mgf.hash.algorithmOid],n===void 0||z.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=he[t.signatureParameters.mgf.algorithmOid],i===void 0||z.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=z.mgf[i].create(z.md[n].create()),n=he[t.signatureParameters.hash.algorithmOid],n===void 0||z.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=n,a}r=z.pss.create(z.md[n].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,r)};L.certificateFromPem=function(e,t,r){var n=z.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=v.fromDer(n.body,r);return L.certificateFromAsn1(a,t)};L.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:v.toDer(L.certificateToAsn1(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.publicKeyFromPem=function(e){var t=z.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=v.fromDer(t.body);return L.publicKeyFromAsn1(n)};L.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:v.toDer(L.publicKeyToAsn1(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:v.toDer(L.publicKeyToRSAPublicKey(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||z.md.sha1.create(),n=t.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=v.toDer(L.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=v.toDer(L.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}r.start(),r.update(i);var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};L.certificationRequestFromPem=function(e,t,r){var n=z.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=v.fromDer(n.body,r);return L.certificationRequestFromAsn1(a,t)};L.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:v.toDer(L.certificationRequestToAsn1(e)).getBytes()};return z.pem.encode(r,{maxline:t})};L.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Jr(e.issuer,t)},e.issuer.addField=function(t){kt([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Jr(e.subject,t)},e.subject.addField=function(t){kt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){kt(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){kt(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)Od(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r=null,n,i=0;r===null&&i<e.extensions.length;++i)n=e.extensions[i],(t.id&&n.id===t.id||t.name&&n.name===t.name)&&(r=n);return r},e.sign=function(t,r){e.md=r||z.md.sha1.create();var n=he[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=L.getTBSCertificate(e);var a=v.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=t.md;if(s===null){s=Ps({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||L.getTBSCertificate(t),u=v.toDer(o);s.update(u.getBytes())}return s!==null&&(r=Rd({certificate:e,md:s,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,o=0;r&&o<n.attributes.length;++o)a=n.attributes[o],s=i.attributes[o],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return L.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=he.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return z.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e};L.certificateFromAsn1=function(e,t){var r={},n=[];if(!v.validate(e,iT,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=v.derToOid(r.publicKeyOid);if(a!==L.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=L.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=z.util.createBuffer(r.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=z.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Ds(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=z.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Ds(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(v.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(v.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(v.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(v.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,t){s.md=Ps({signatureOid:s.signatureOid,type:"certificate"});var c=v.toDer(s.tbsCertificate);s.md.update(c.getBytes())}var l=z.md.sha1.create(),f=v.toDer(r.certIssuer);l.update(f.getBytes()),s.issuer.getField=function(d){return Jr(s.issuer,d)},s.issuer.addField=function(d){kt([d]),s.issuer.attributes.push(d)},s.issuer.attributes=L.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=l.digest().toHex();var h=z.md.sha1.create(),p=v.toDer(r.certSubject);return h.update(p.getBytes()),s.subject.getField=function(d){return Jr(s.subject,d)},s.subject.addField=function(d){kt([d]),s.subject.attributes.push(d)},s.subject.attributes=L.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=h.digest().toHex(),r.certExtensions?s.extensions=L.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=L.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};L.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(L.certificateExtensionFromAsn1(n.value[i]));return t};L.certificateExtensionFromAsn1=function(e){var t={};if(t.id=v.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===v.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in he){if(t.name=he[t.id],t.name==="keyUsage"){var r=v.fromDer(t.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),t.digitalSignature=(n&128)===128,t.nonRepudiation=(n&64)===64,t.keyEncipherment=(n&32)===32,t.dataEncipherment=(n&16)===16,t.keyAgreement=(n&8)===8,t.keyCertSign=(n&4)===4,t.cRLSign=(n&2)===2,t.encipherOnly=(n&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var r=v.fromDer(t.value);r.value.length>0&&r.value[0].type===v.Type.BOOLEAN?t.cA=r.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;r.value.length>0&&r.value[0].type===v.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(t.pathLenConstraint=v.derToInteger(a))}else if(t.name==="extKeyUsage")for(var r=v.fromDer(t.value),s=0;s<r.value.length;++s){var o=v.derToOid(r.value[s].value);o in he?t[he[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var r=v.fromDer(t.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),t.client=(n&128)===128,t.server=(n&64)===64,t.email=(n&32)===32,t.objsign=(n&16)===16,t.reserved=(n&8)===8,t.sslCA=(n&4)===4,t.emailCA=(n&2)===2,t.objCA=(n&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var u,r=v.fromDer(t.value),c=0;c<r.value.length;++c){u=r.value[c];var l={type:u.type,value:u.value};switch(t.altNames.push(l),u.type){case 1:case 2:case 6:break;case 7:l.ip=z.util.bytesToIP(u.value);break;case 8:l.oid=v.derToOid(u.value);break;default:}}}else if(t.name==="subjectKeyIdentifier"){var r=v.fromDer(t.value);t.subjectKeyIdentifier=z.util.bytesToHex(r.value)}}return t};L.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!v.validate(e,oT,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=v.derToOid(r.publicKeyOid);if(a!==L.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=L.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=z.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Ds(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=z.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Ds(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,t){s.md=Ps({signatureOid:s.signatureOid,type:"certification request"});var o=v.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var u=z.md.sha1.create();return s.subject.getField=function(c){return Jr(s.subject,c)},s.subject.addField=function(c){kt([c]),s.subject.attributes.push(c)},s.subject.attributes=L.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=L.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(c){return Jr(s,c)},s.addAttribute=function(c){kt([c]),s.attributes.push(c)},s.attributes=L.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};L.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Jr(e.subject,t)},e.subject.addField=function(t){kt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Jr(e,t)},e.addAttribute=function(t){kt([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){kt(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){kt(t),e.attributes=t},e.sign=function(t,r){e.md=r||z.md.sha1.create();var n=he[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=L.getCertificationRequestInfo(e);var a=v.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=Ps({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||L.getCertificationRequestInfo(e),i=v.toDer(n);r.update(i.getBytes())}return r!==null&&(t=Rd({certificate:e,md:r,signature:e.signature})),t},e};function li(e){for(var t=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),r,n,i=e.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,o=v.Type.PRINTABLESTRING;"valueTagClass"in r&&(o=r.valueTagClass,o===v.Type.UTF8&&(s=z.util.encodeUtf8(s))),n=v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(r.type).getBytes()),v.create(v.Class.UNIVERSAL,o,!1,s)])]),t.value.push(n)}return t}function kt(e){for(var t,r=0;r<e.length;++r){if(t=e[r],typeof t.name=="undefined"&&(t.type&&t.type in L.oids?t.name=L.oids[t.type]:t.shortName&&t.shortName in we&&(t.name=L.oids[we[t.shortName]])),typeof t.type=="undefined")if(t.name&&t.name in L.oids)t.type=L.oids[t.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=t,n}if(typeof t.shortName=="undefined"&&t.name&&t.name in we&&(t.shortName=we[t.name]),t.type===he.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=v.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(L.certificateExtensionToAsn1(Od(t.extensions[i])))}if(typeof t.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=t,n}}}function Od(e,t){if(t=t||{},typeof e.name=="undefined"&&e.id&&e.id in L.oids&&(e.name=L.oids[e.id]),typeof e.id=="undefined")if(e.name&&e.name in L.oids)e.id=L.oids[e.name];else{var r=new Error("Extension ID not specified.");throw r.extension=e,r}if(typeof e.value!="undefined")return e;if(e.name==="keyUsage"){var n=0,i=0,a=0;e.digitalSignature&&(i|=128,n=7),e.nonRepudiation&&(i|=64,n=6),e.keyEncipherment&&(i|=32,n=5),e.dataEncipherment&&(i|=16,n=4),e.keyAgreement&&(i|=8,n=3),e.keyCertSign&&(i|=4,n=2),e.cRLSign&&(i|=2,n=1),e.encipherOnly&&(i|=1,n=0),e.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),e.value=v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(v.create(v.Class.UNIVERSAL,v.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in e&&e.value.value.push(v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var u in e)e[u]===!0&&(u in he?o.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(he[u]).getBytes())):u.indexOf(".")!==-1&&o.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(u).getBytes())))}else if(e.name==="nsCertType"){var n=0,i=0;e.client&&(i|=128,n=7),e.server&&(i|=64,n=6),e.email&&(i|=32,n=5),e.objsign&&(i|=16,n=4),e.reserved&&(i|=8,n=3),e.sslCA&&(i|=4,n=2),e.emailCA&&(i|=2,n=1),e.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),e.value=v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);for(var c,l=0;l<e.altNames.length;++l){c=e.altNames[l];var s=c.value;if(c.type===7&&c.ip){if(s=z.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?s=v.oidToDer(v.oidToDer(c.oid)):s=v.oidToDer(s));e.value.value.push(v.create(v.Class.CONTEXT_SPECIFIC,c.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=v.create(v.Class.UNIVERSAL,v.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,f.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var h=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(v.create(v.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var p=[v.create(v.Class.CONTEXT_SPECIFIC,4,!0,[li(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(v.create(v.Class.CONTEXT_SPECIFIC,1,!0,p))}if(e.serialNumber){var d=z.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(v.create(v.Class.CONTEXT_SPECIFIC,2,!1,d))}}else if(e.name==="cRLDistributionPoints"){e.value=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);for(var o=e.value.value,m=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),S=v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[]),c,l=0;l<e.altNames.length;++l){c=e.altNames[l];var s=c.value;if(c.type===7&&c.ip){if(s=z.util.bytesFromIP(c.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=e,r}}else c.type===8&&(c.oid?s=v.oidToDer(v.oidToDer(c.oid)):s=v.oidToDer(s));S.value.push(v.create(v.Class.CONTEXT_SPECIFIC,c.type,!1,s))}m.value.push(v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[S])),o.push(m)}if(typeof e.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=e,r}return e}function pu(e,t){switch(e){case he["RSASSA-PSS"]:var r=[];return t.hash.algorithmOid!==void 0&&r.push(v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(t.hash.algorithmOid).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(v.create(v.Class.CONTEXT_SPECIFIC,1,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(t.mgf.algorithmOid).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(t.mgf.hash.algorithmOid).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(v.create(v.Class.CONTEXT_SPECIFIC,2,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(t.saltLength).getBytes())])),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,r);default:return v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")}}function cT(e){var t=v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=v.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===v.Type.UTF8&&(a=z.util.encodeUtf8(a));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var u=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(i.type).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SET,!0,[v.create(v.Class.UNIVERSAL,s,o,a)])]);t.value.push(u)}return t}var uT=new Date("1950-01-01T00:00:00Z"),lT=new Date("2050-01-01T00:00:00Z");function wd(e){return e>=uT&&e<lT?v.create(v.Class.UNIVERSAL,v.Type.UTCTIME,!1,v.dateToUtcTime(e)):v.create(v.Class.UNIVERSAL,v.Type.GENERALIZEDTIME,!1,v.dateToGeneralizedTime(e))}L.getTBSCertificate=function(e){var t=wd(e.validity.notBefore),r=wd(e.validity.notAfter),n=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.CONTEXT_SPECIFIC,0,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(e.version).getBytes())]),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,z.util.hexToBytes(e.serialNumber)),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.siginfo.algorithmOid).getBytes()),pu(e.siginfo.algorithmOid,e.siginfo.parameters)]),li(e.issuer),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[t,r]),li(e.subject),L.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(v.create(v.Class.CONTEXT_SPECIFIC,1,!0,[v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(v.create(v.Class.CONTEXT_SPECIFIC,2,!0,[v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(L.certificateExtensionsToAsn1(e.extensions)),n};L.getCertificationRequestInfo=function(e){var t=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(e.version).getBytes()),li(e.subject),L.publicKeyToAsn1(e.publicKey),cT(e)]);return t};L.distinguishedNameToAsn1=function(e){return li(e)};L.certificateToAsn1=function(e){var t=e.tbsCertificate||L.getTBSCertificate(e);return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[t,v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.signatureOid).getBytes()),pu(e.signatureOid,e.signatureParameters)]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.signature)])};L.certificateExtensionsToAsn1=function(e){var t=v.create(v.Class.CONTEXT_SPECIFIC,3,!0,[]),r=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(L.certificateExtensionToAsn1(e[n]));return t};L.certificateExtensionToAsn1=function(e){var t=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);t.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.id).getBytes())),e.critical&&t.value.push(v.create(v.Class.UNIVERSAL,v.Type.BOOLEAN,!1,"\xFF"));var r=e.value;return typeof e.value!="string"&&(r=v.toDer(r).getBytes()),t.value.push(v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,r)),t};L.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||L.getCertificationRequestInfo(e);return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[t,v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(e.signatureOid).getBytes()),pu(e.signatureOid,e.signatureParameters)]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,"\0"+e.signature)])};L.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var o=r(s.issuer);return o},t.addCertificate=function(s){if(typeof s=="string"&&(s=z.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var o=t.certs[s.subject.hash];z.util.isArray(o)||(o=[o]),o.push(s),t.certs[s.subject.hash]=o}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=z.pki.certificateFromPem(s));var o=r(s.subject);if(!o)return!1;z.util.isArray(o)||(o=[o]);for(var u=v.toDer(L.certificateToAsn1(s)).getBytes(),c=0;c<o.length;++c){var l=v.toDer(L.certificateToAsn1(o[c])).getBytes();if(u===l)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var u=t.certs[o];if(!z.util.isArray(u))s.push(u);else for(var c=0;c<u.length;++c)s.push(u[c])}return s},t.removeCertificate=function(s){var o;if(typeof s=="string"&&(s=z.pki.certificateFromPem(s)),n(s.subject),!t.hasCertificate(s))return null;var u=r(s.subject);if(!z.util.isArray(u))return o=t.certs[s.subject.hash],delete t.certs[s.subject.hash],o;for(var c=v.toDer(L.certificateToAsn1(s)).getBytes(),l=0;l<u.length;++l){var f=v.toDer(L.certificateToAsn1(u[l])).getBytes();c===f&&(o=u[l],u.splice(l,1))}return u.length===0&&delete t.certs[s.subject.hash],o};function r(s){return n(s),t.certs[s.hash]||null}function n(s){if(!s.hash){var o=z.md.sha1.create();s.attributes=L.RDNAttributesAsArray(li(s),o),s.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};L.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};L.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{},t=t.slice(0);var n=t.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,o=0;do{var u=t.shift(),c=null,l=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:L.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),s===null){if(c=t[0]||e.getIssuer(u),c===null&&u.isIssuer(u)&&(l=!0,c=u),c){var f=c;z.util.isArray(f)||(f=[f]);for(var h=!1;!h&&f.length>0;){c=f.shift();try{h=c.verify(u)}catch(R){}}h||(s={message:"Certificate signature is invalid.",error:L.certificateError.bad_certificate})}s===null&&(!c||l)&&!e.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:L.certificateError.unknown_ca})}if(s===null&&c&&!u.isIssuer(c)&&(s={message:"Certificate issuer is invalid.",error:L.certificateError.bad_certificate}),s===null)for(var p={keyUsage:!0,basicConstraints:!0},d=0;s===null&&d<u.extensions.length;++d){var m=u.extensions[d];m.critical&&!(m.name in p)&&(s={message:"Certificate has an unsupported critical extension.",error:L.certificateError.unsupported_certificate})}if(s===null&&(!a||t.length===0&&(!c||l))){var S=u.getExtension("basicConstraints"),b=u.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||S===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:L.certificateError.bad_certificate}),s===null&&S!==null&&!S.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:L.certificateError.bad_certificate}),s===null&&b!==null&&"pathLenConstraint"in S){var _=o-1;_>S.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:L.certificateError.bad_certificate})}}var I=s===null?!0:s.error,O=r.verify?r.verify(I,o,n):I;if(O===!0)s=null;else throw I===!0&&(s={message:"The application rejected the certificate.",error:L.certificateError.bad_certificate}),(O||O===0)&&(typeof O=="object"&&!z.util.isArray(O)?(O.message&&(s.message=O.message),O.error&&(s.error=O.error)):typeof O=="string"&&(s.error=O)),s;a=!1,++o}while(t.length>0);return!0}});var yu=C((LP,Pd)=>{var xe=ee();jt();ni();Qr();hu();fu();Dt();va();oi();de();Ls();var E=xe.asn1,ae=xe.pki,ga=Pd.exports=xe.pkcs12=xe.pkcs12||{},Dd={name:"ContentInfo",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:E.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},fT={name:"PFX",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,capture:"version"},Dd,{name:"PFX.macData",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:E.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:E.Class.UNIVERSAL,type:E.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:E.Class.UNIVERSAL,type:E.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},hT={name:"SafeBag",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:E.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:E.Class.UNIVERSAL,type:E.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},dT={name:"Attribute",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:E.Class.UNIVERSAL,type:E.Type.SET,constructed:!0,capture:"values"}]},pT={name:"CertBag",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:E.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:E.Class.UNIVERSAL,type:E.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function ya(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var o=e[a].safeBags[s];if(!(n!==void 0&&o.type!==n)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(r)>=0&&i.push(o)}}return i}ga.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={},i=[];if(!E.validate(e,fT,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(S){var b={},_;return"localKeyId"in S?_=S.localKeyId:"localKeyIdHex"in S&&(_=xe.util.hexToBytes(S.localKeyIdHex)),_===void 0&&!("friendlyName"in S)&&"bagType"in S&&(b[S.bagType]=ya(s.safeContents,null,null,S.bagType)),_!==void 0&&(b.localKeyId=ya(s.safeContents,"localKeyId",_,S.bagType)),"friendlyName"in S&&(b.friendlyName=ya(s.safeContents,"friendlyName",S.friendlyName,S.bagType)),b},getBagsByFriendlyName:function(S,b){return ya(s.safeContents,"friendlyName",S,b)},getBagsByLocalKeyId:function(S,b){return ya(s.safeContents,"localKeyId",S,b)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(E.derToOid(n.contentType)!==ae.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=E.derToOid(n.contentType),a}var o=n.content.value[0];if(o.tagClass!==E.Class.UNIVERSAL||o.type!==E.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=vu(o),n.mac){var u=null,c=0,l=E.derToOid(n.macAlgorithm);switch(l){case ae.oids.sha1:u=xe.md.sha1.create(),c=20;break;case ae.oids.sha256:u=xe.md.sha256.create(),c=32;break;case ae.oids.sha384:u=xe.md.sha384.create(),c=48;break;case ae.oids.sha512:u=xe.md.sha512.create(),c=64;break;case ae.oids.md5:u=xe.md.md5.create(),c=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+l);var f=new xe.util.ByteBuffer(n.macSalt),h="macIterations"in n?parseInt(xe.util.bytesToHex(n.macIterations),16):1,p=ga.generateKey(r,f,3,h,c,u),d=xe.hmac.create();d.start(u,p),d.update(o.value);var m=d.getMac();if(m.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return vT(s,o.value,t,r),s};function vu(e){if(e.composed||e.constructed){for(var t=xe.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function vT(e,t,r,n){if(t=E.fromDer(t,r),t.tagClass!==E.Class.UNIVERSAL||t.type!==E.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},o=[];if(!E.validate(a,Dd,s,o)){var u=new Error("Cannot read ContentInfo.");throw u.errors=o,u}var c={encrypted:!1},l=null,f=s.content.value[0];switch(E.derToOid(s.contentType)){case ae.oids.data:if(f.tagClass!==E.Class.UNIVERSAL||f.type!==E.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");l=vu(f).value;break;case ae.oids.encryptedData:l=yT(f,n),c.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=E.derToOid(s.contentType),u}c.safeBags=gT(l,r,n),e.safeContents.push(c)}}function yT(e,t){var r={},n=[];if(!E.validate(e,xe.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=E.derToOid(r.contentType);if(a!==ae.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=E.derToOid(r.encAlgorithm);var s=ae.pbe.getCipher(a,r.encParameter,t),o=vu(r.encryptedContentAsn1),u=xe.util.createBuffer(o.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function gT(e,t,r){if(!t&&e.length===0)return[];if(e=E.fromDer(e,t),e.tagClass!==E.Class.UNIVERSAL||e.type!==E.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},o=[];if(!E.validate(a,hT,s,o)){var u=new Error("Cannot read SafeBag.");throw u.errors=o,u}var c={type:E.derToOid(s.bagId),attributes:mT(s.bagAttributes)};n.push(c);var l,f,h=s.bagValue.value[0];switch(c.type){case ae.oids.pkcs8ShroudedKeyBag:if(h=ae.decryptPrivateKeyInfo(h,r),h===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case ae.oids.keyBag:try{c.key=ae.privateKeyFromAsn1(h)}catch(d){c.key=null,c.asn1=h}continue;case ae.oids.certBag:l=pT,f=function(){if(E.derToOid(s.certId)!==ae.oids.x509Certificate){var d=new Error("Unsupported certificate type, only X.509 supported.");throw d.oid=E.derToOid(s.certId),d}var m=E.fromDer(s.cert,t);try{c.cert=ae.certificateFromAsn1(m,!0)}catch(S){c.cert=null,c.asn1=m}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=c.type,u}if(l!==void 0&&!E.validate(h,l,s,o)){var u=new Error("Cannot read PKCS#12 "+l.name);throw u.errors=o,u}f()}return n}function mT(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!E.validate(e[r],dT,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=E.derToOid(n.oid);if(ae.oids[s]!==void 0){t[ae.oids[s]]=[];for(var o=0;o<n.values.length;++o)t[ae.oids[s]].push(n.values[o].value)}}return t}ga.toPkcs12Asn1=function(e,t,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=xe.util.hexToBytes(i);else if(n.generateLocalKeyId)if(t){var s=xe.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=ae.certificateFromPem(s));var o=xe.md.sha1.create();o.update(E.toDer(ae.certificateToAsn1(s)).getBytes()),i=o.digest().getBytes()}else i=xe.random.getBytes(20);var u=[];i!==null&&u.push(E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.localKeyId).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.SET,!0,[E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.friendlyName).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.SET,!0,[E.create(E.Class.UNIVERSAL,E.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(a=E.create(E.Class.UNIVERSAL,E.Type.SET,!0,u));var c=[],l=[];t!==null&&(xe.util.isArray(t)?l=t:l=[t]);for(var f=[],h=0;h<l.length;++h){t=l[h],typeof t=="string"&&(t=ae.certificateFromPem(t));var p=h===0?a:void 0,d=ae.certificateToAsn1(t),m=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.certBag).getBytes()),E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.x509Certificate).getBytes()),E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,E.toDer(d).getBytes())])])]),p]);f.push(m)}if(f.length>0){var S=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,f),b=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.data).getBytes()),E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,E.toDer(S).getBytes())])]);c.push(b)}var _=null;if(e!==null){var I=ae.wrapRsaPrivateKey(ae.privateKeyToAsn1(e));r===null?_=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.keyBag).getBytes()),E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[I]),a]):_=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.pkcs8ShroudedKeyBag).getBytes()),E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[ae.encryptPrivateKeyInfo(I,r,n)]),a]);var O=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[_]),R=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.data).getBytes()),E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,E.toDer(O).getBytes())])]);c.push(R)}var B=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,c),V;if(n.useMac){var o=xe.md.sha1.create(),K=new xe.util.ByteBuffer(xe.random.getBytes(n.saltSize)),W=n.count,e=ga.generateKey(r,K,3,W,20),Z=xe.hmac.create();Z.start(o,e),Z.update(E.toDer(B).getBytes());var re=Z.getMac();V=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.sha1).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.NULL,!1,"")]),E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,re.getBytes())]),E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,K.getBytes()),E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,E.integerToDer(W).getBytes())])}return E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,E.integerToDer(3).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(ae.oids.data).getBytes()),E.create(E.Class.CONTEXT_SPECIFIC,0,!0,[E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,E.toDer(B).getBytes())])]),V])};ga.generateKey=xe.pbe.generatePkcs12Key});var mu=C((kP,Ld)=>{var Zr=ee();jt();Qr();fu();wn();As();yu();Ns();va();de();Ls();var gu=Zr.asn1,fi=Ld.exports=Zr.pki=Zr.pki||{};fi.pemToDer=function(e){var t=Zr.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Zr.util.createBuffer(t.body)};fi.privateKeyFromPem=function(e){var t=Zr.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=gu.fromDer(t.body);return fi.privateKeyFromAsn1(n)};fi.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:gu.toDer(fi.privateKeyToAsn1(e)).getBytes()};return Zr.pem.encode(r,{maxline:t})};fi.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:gu.toDer(e).getBytes()};return Zr.pem.encode(r,{maxline:t})}});var Tu=C((UP,Gd)=>{var D=ee();jt();ni();Es();wn();mu();Dt();oi();de();var Ms=function(e,t,r,n){var i=D.util.createBuffer(),a=e.length>>1,s=a+(e.length&1),o=e.substr(0,s),u=e.substr(a,s),c=D.util.createBuffer(),l=D.hmac.create();r=t+r;var f=Math.ceil(n/16),h=Math.ceil(n/20);l.start("MD5",o);var p=D.util.createBuffer();c.putBytes(r);for(var d=0;d<f;++d)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+r),p.putBuffer(l.digest());l.start("SHA1",u);var m=D.util.createBuffer();c.clear(),c.putBytes(r);for(var d=0;d<h;++d)l.start(null,null),l.update(c.getBytes()),c.putBuffer(l.digest()),l.start(null,null),l.update(c.bytes()+r),m.putBuffer(l.digest());return i.putBytes(D.util.xorBytes(p.getBytes(),m.getBytes(),n)),i},ST=function(e,t,r){var n=D.hmac.create();n.start("SHA1",e);var i=D.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},CT=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=D.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},ET=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=D.util.createBuffer(i),t.length=i.length,n=!0}catch(a){}return n},xt=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32();break}return D.util.createBuffer(e.getBytes(r))},Ut=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},g={};g.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};g.SupportedVersions=[g.Versions.TLS_1_1,g.Versions.TLS_1_0];g.Version=g.SupportedVersions[0];g.MaxFragment=15360;g.ConnectionEnd={server:0,client:1};g.PRFAlgorithm={tls_prf_sha256:0};g.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};g.CipherType={stream:0,block:1,aead:2};g.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};g.CompressionMethod={none:0,deflate:1};g.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};g.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};g.Alert={};g.Alert.Level={warning:1,fatal:2};g.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};g.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};g.CipherSuites={};g.getCipherSuite=function(e){var t=null;for(var r in g.CipherSuites){var n=g.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t};g.handleUnexpected=function(e,t){var r=!e.open&&e.entity===g.ConnectionEnd.client;r||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unexpected_message}})};g.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(g.queue(e,g.createAlert(e,{level:g.Alert.Level.warning,description:g.Alert.Description.no_renegotiation})),g.flush(e)),e.process()};g.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===g.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:D.util.createBuffer(a.getBytes(32)),session_id:xt(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=xt(a,2),n.compression_methods=xt(a,1)),s=r-(s-a.length()),s>0){for(var o=xt(a,2);o.length()>0;)n.extensions.push({type:[o.getByte(),o.getByte()],data:xt(o,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var c=n.extensions[u];if(c.type[0]===0&&c.type[1]===0)for(var l=xt(c.data,2);l.length()>0;){var f=l.getByte();if(f!==0)break;e.session.extensions.server_name.serverNameList.push(xt(l,2).getBytes())}}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=g.getCipherSuite(n.cipher_suite);else for(var h=D.util.createBuffer(n.cipher_suites.bytes());h.length()>0&&(e.session.cipherSuite=g.getCipherSuite(h.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.handshake_failure},cipherSuite:D.util.bytesToHex(n.cipher_suite)});i?e.session.compressionMethod=n.compression_method:e.session.compressionMethod=g.CompressionMethod.none}return n};g.createSecurityParameters=function(e,t){var r=e.entity===g.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,a=r?n:g.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:g.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};g.handleServerHello=function(e,t,r){var n=g.parseHelloMessage(e,t,r);if(!e.fail){if(n.version.minor<=e.version.minor)e.version.minor=n.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.protocol_version}});e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=qd,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=xT,e.session.resuming=!1,g.createSecurityParameters(e,n)),e.session.id=i,e.process()}};g.handleClientHello=function(e,t,r){var n=g.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=D.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,o=1;o<g.SupportedVersions.length&&(s=g.SupportedVersions[o],!(s.minor<=n.version.minor));++o);e.version={major:s.major,minor:s.minor},e.session.version=e.version}a!==null?(e.expect=bu,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?RT:Eu,e.session.resuming=!1,g.createSecurityParameters(e,n)),e.open=!0,g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createServerHello(e)})),e.session.resuming?(g.queue(e,g.createRecord(e,{type:g.ContentType.change_cipher_spec,data:g.createChangeCipherSpec()})),e.state.pending=g.createConnectionState(e),e.state.current.write=e.state.pending.write,g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createFinished(e)}))):(g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createCertificate(e)})),e.fail||(g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createServerKeyExchange(e)})),e.verifyClient!==!1&&g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createCertificateRequest(e)})),g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createServerHelloDone(e)})))),g.flush(e),e.process()}};g.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_list:xt(n,3)},a,s,o=[];try{for(;i.certificate_list.length()>0;)a=xt(i.certificate_list,3),s=D.asn1.fromDer(a),a=D.pki.certificateFromAsn1(s,!0),o.push(a)}catch(c){return e.error(e,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.bad_certificate}})}var u=e.entity===g.ConnectionEnd.client;(u||e.verifyClient===!0)&&o.length===0?e.error(e,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}}):o.length===0?e.expect=u?kd:Eu:(u?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],g.verifyCertificateChain(e,o)&&(e.expect=u?kd:Eu)),e.process()};g.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unsupported_certificate}});e.expect=TT,e.process()};g.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:xt(n,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=D.pki.privateKeyFromPem(a)}catch(u){e.error(e,{message:"Could not get private key.",cause:u,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==s.pre_master_secret.charCodeAt(0)||o.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){s.pre_master_secret=D.random.getBytes(48)}e.expect=bu,e.session.clientCertificate!==null&&(e.expect=OT),e.process()};g.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:xt(n,1),certificate_authorities:xt(n,2)};e.session.certificateRequest=i,e.expect=AT,e.process()};g.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:xt(n,2).getBytes()},s=D.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch(u){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.handshake_failure}})}e.expect=bu,e.process()};g.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.insufficient_security}},i=0,a=e.verify(e,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!D.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),e.error(e,n)}e.session.certificateRequest!==null&&(t=g.createRecord(e,{type:g.ContentType.handshake,data:g.createCertificate(e)}),g.queue(e,t)),t=g.createRecord(e,{type:g.ContentType.handshake,data:g.createClientKeyExchange(e)}),g.queue(e,t),e.expect=wT;var s=function(o,u){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&g.queue(o,g.createRecord(o,{type:g.ContentType.handshake,data:g.createCertificateVerify(o,u)})),g.queue(o,g.createRecord(o,{type:g.ContentType.change_cipher_spec,data:g.createChangeCipherSpec()})),o.state.pending=g.createConnectionState(o),o.state.current.write=o.state.pending.write,g.queue(o,g.createRecord(o,{type:g.ContentType.handshake,data:g.createFinished(o)})),o.expect=qd,g.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);g.getClientSignature(e,s)};g.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.illegal_parameter}});var r=e.entity===g.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=g.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?_T:NT,e.process()};g.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=t.fragment.getBytes();n=D.util.createBuffer(),n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var s=e.entity===g.ConnectionEnd.client,o=s?"server finished":"client finished",u=e.session.sp,c=12,l=Ms;if(n=l(u.master_secret,o,n.getBytes(),c),n.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&s||!e.session.resuming&&!s)&&(g.queue(e,g.createRecord(e,{type:g.ContentType.change_cipher_spec,data:g.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,g.queue(e,g.createRecord(e,{type:g.ContentType.handshake,data:g.createFinished(e)}))),e.expect=s?IT:DT,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,g.flush(e),e.isConnected=!0,e.connected(e),e.process()};g.handleAlert=function(e,t){var r=t.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case g.Alert.Description.close_notify:i="Connection closed.";break;case g.Alert.Description.unexpected_message:i="Unexpected message.";break;case g.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case g.Alert.Description.decryption_failed:i="Decryption failed.";break;case g.Alert.Description.record_overflow:i="Record overflow.";break;case g.Alert.Description.decompression_failure:i="Decompression failed.";break;case g.Alert.Description.handshake_failure:i="Handshake failure.";break;case g.Alert.Description.bad_certificate:i="Bad certificate.";break;case g.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case g.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case g.Alert.Description.certificate_expired:i="Certificate expired.";break;case g.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case g.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case g.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case g.Alert.Description.access_denied:i="Access denied.";break;case g.Alert.Description.decode_error:i="Decode error.";break;case g.Alert.Description.decrypt_error:i="Decrypt error.";break;case g.Alert.Description.export_restriction:i="Export restriction.";break;case g.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case g.Alert.Description.insufficient_security:i="Insufficient security.";break;case g.Alert.Description.internal_error:i="Internal error.";break;case g.Alert.Description.user_canceled:i="User canceled.";break;case g.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===g.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===g.ConnectionEnd.client?"server":"client",alert:n}),e.process()};g.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=D.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in qs[e.entity][e.expect]?(e.entity===g.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:D.md.md5.create(),sha1:D.md.sha1.create()}),n!==g.HandshakeType.hello_request&&n!==g.HandshakeType.certificate_verify&&n!==g.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),qs[e.entity][e.expect][n](e,t,i)):g.handleUnexpected(e,t)};g.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};g.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===g.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();g.queue(e,g.createRecord(e,{type:g.ContentType.heartbeat,data:g.createHeartbeat(g.HeartbeatMessageType.heartbeat_response,a)})),g.flush(e)}else if(n===g.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,D.util.createBuffer(a))}e.process()};var bT=0,xT=1,kd=2,TT=3,AT=4,qd=5,_T=6,IT=7,wT=8,BT=0,RT=1,Eu=2,OT=3,bu=4,NT=5,DT=6,y=g.handleUnexpected,Md=g.handleChangeCipherSpec,He=g.handleAlert,vt=g.handleHandshake,Fd=g.handleApplicationData,$e=g.handleHeartbeat,xu=[];xu[g.ConnectionEnd.client]=[[y,He,vt,y,$e],[y,He,vt,y,$e],[y,He,vt,y,$e],[y,He,vt,y,$e],[y,He,vt,y,$e],[Md,He,y,y,$e],[y,He,vt,y,$e],[y,He,vt,Fd,$e],[y,He,vt,y,$e]];xu[g.ConnectionEnd.server]=[[y,He,vt,y,$e],[y,He,vt,y,$e],[y,He,vt,y,$e],[y,He,vt,y,$e],[Md,He,y,y,$e],[y,He,vt,y,$e],[y,He,vt,Fd,$e],[y,He,vt,y,$e]];var en=g.handleHelloRequest,PT=g.handleServerHello,Vd=g.handleCertificate,Ud=g.handleServerKeyExchange,Su=g.handleCertificateRequest,ks=g.handleServerHelloDone,Kd=g.handleFinished,qs=[];qs[g.ConnectionEnd.client]=[[y,y,PT,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[en,y,y,y,y,y,y,y,y,y,y,Vd,Ud,Su,ks,y,y,y,y,y,y],[en,y,y,y,y,y,y,y,y,y,y,y,Ud,Su,ks,y,y,y,y,y,y],[en,y,y,y,y,y,y,y,y,y,y,y,y,Su,ks,y,y,y,y,y,y],[en,y,y,y,y,y,y,y,y,y,y,y,y,y,ks,y,y,y,y,y,y],[en,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[en,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Kd],[en,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[en,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y]];var LT=g.handleClientHello,kT=g.handleClientKeyExchange,UT=g.handleCertificateVerify;qs[g.ConnectionEnd.server]=[[y,LT,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,Vd,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,kT,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,UT,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Kd],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y]];g.generateKeys=function(e,t){var r=Ms,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===g.Versions.TLS_1_0.major&&e.version.minor===g.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=r(t.master_secret,"key expansion",n,i),o={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(o.client_write_IV=s.getBytes(t.fixed_iv_length),o.server_write_IV=s.getBytes(t.fixed_iv_length)),o};g.createConnectionState=function(e){var t=e.entity===g.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=g.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case g.CompressionMethod.none:break;case g.CompressionMethod.deflate:n.read.compressFunction=ET,n.write.compressFunction=CT;break;default:throw new Error("Unsupported compression algorithm.")}}return n};g.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,r=D.util.createBuffer();return r.putInt32(t),r.putBytes(D.random.getBytes(28)),r};g.createRecord=function(e,t){if(!t.data)return null;var r={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return r};g.createAlert=function(e,t){var r=D.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),g.createRecord(e,{type:g.ContentType.alert,data:r})};g.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=D.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),a=D.util.createBuffer();a.putByte(g.CompressionMethod.none);var s=a.length(),o=D.util.createBuffer();if(e.virtualHost){var u=D.util.createBuffer();u.putByte(0),u.putByte(0);var c=D.util.createBuffer();c.putByte(0),Ut(c,2,D.util.createBuffer(e.virtualHost));var l=D.util.createBuffer();Ut(l,2,c),Ut(u,2,l),o.putBuffer(u)}var f=o.length();f>0&&(f+=2);var h=e.session.id,p=h.length+1+2+4+28+2+i+1+s+f,d=D.util.createBuffer();return d.putByte(g.HandshakeType.client_hello),d.putInt24(p),d.putByte(e.version.major),d.putByte(e.version.minor),d.putBytes(e.session.sp.client_random),Ut(d,1,D.util.createBuffer(h)),Ut(d,2,t),Ut(d,1,a),f>0&&Ut(d,2,o),d};g.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=D.util.createBuffer();return n.putByte(g.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),Ut(n,1,D.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n};g.createCertificate=function(e){var t=e.entity===g.ConnectionEnd.client,r=null;if(e.getCertificate){var n;t?n=e.session.certificateRequest:n=e.session.extensions.server_name.serverNameList,r=e.getCertificate(e,n)}var i=D.util.createBuffer();if(r!==null)try{D.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var o=D.pem.decode(r[s])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=o.type,u}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=D.util.createBuffer(o.body);a===null&&(a=D.asn1.fromDer(c.bytes(),!1));var l=D.util.createBuffer();Ut(l,3,c),i.putBuffer(l)}r=D.pki.certificateFromAsn1(a),t?e.session.clientCertificate=r:e.session.serverCertificate=r}catch(p){return e.error(e,{message:"Could not send certificate list.",cause:p,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.bad_certificate}})}var f=3+i.length(),h=D.util.createBuffer();return h.putByte(g.HandshakeType.certificate),h.putInt24(f),Ut(h,3,i),h};g.createClientKeyExchange=function(e){var t=D.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(D.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=e.session.serverCertificate.publicKey;t=n.encrypt(r.pre_master_secret);var i=t.length+2,a=D.util.createBuffer();return a.putByte(g.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};g.createServerKeyExchange=function(e){var t=0,r=D.util.createBuffer();return t>0&&(r.putByte(g.HandshakeType.server_key_exchange),r.putInt24(t)),r};g.getClientSignature=function(e,t){var r=D.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=D.pki.privateKeyFromPem(s)}catch(o){n.error(n,{message:"Could not get private key.",cause:o,send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},e.getSignature(e,r,t)};g.createCertificateVerify=function(e,t){var r=t.length+2,n=D.util.createBuffer();return n.putByte(g.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n};g.createCertificateRequest=function(e){var t=D.util.createBuffer();t.putByte(1);var r=D.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],a=D.pki.distinguishedNameToAsn1(i.subject),s=D.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var o=1+t.length()+2+r.length(),u=D.util.createBuffer();return u.putByte(g.HandshakeType.certificate_request),u.putInt24(o),Ut(u,1,t),Ut(u,2,r),u};g.createServerHelloDone=function(e){var t=D.util.createBuffer();return t.putByte(g.HandshakeType.server_hello_done),t.putInt24(0),t};g.createChangeCipherSpec=function(){var e=D.util.createBuffer();return e.putByte(1),e};g.createFinished=function(e){var t=D.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===g.ConnectionEnd.client,n=e.session.sp,i=12,a=Ms,s=r?"client finished":"server finished";t=a(n.master_secret,s,t.getBytes(),i);var o=D.util.createBuffer();return o.putByte(g.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};g.createHeartbeat=function(e,t,r){typeof r=="undefined"&&(r=t.length);var n=D.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(D.random.getBytes(a)),n};g.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===g.ContentType.handshake||t.type===g.ContentType.alert||t.type===g.ContentType.change_cipher_spec))){if(t.type===g.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=g.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>g.MaxFragment;)n.push(g.createRecord(e,{type:t.type,data:D.util.createBuffer(i.slice(0,g.MaxFragment))})),i=i.slice(g.MaxFragment);i.length>0&&n.push(g.createRecord(e,{type:t.type,data:D.util.createBuffer(i)}))}for(var a=0;a<n.length&&!e.fail;++a){var s=n[a],o=e.state.current.write;o.update(e,s)&&e.records.push(s)}}};g.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var Cu=function(e){switch(e){case!0:return!0;case D.pki.certificateError.bad_certificate:return g.Alert.Description.bad_certificate;case D.pki.certificateError.unsupported_certificate:return g.Alert.Description.unsupported_certificate;case D.pki.certificateError.certificate_revoked:return g.Alert.Description.certificate_revoked;case D.pki.certificateError.certificate_expired:return g.Alert.Description.certificate_expired;case D.pki.certificateError.certificate_unknown:return g.Alert.Description.certificate_unknown;case D.pki.certificateError.unknown_ca:return g.Alert.Description.unknown_ca;default:return g.Alert.Description.bad_certificate}},qT=function(e){switch(e){case!0:return!0;case g.Alert.Description.bad_certificate:return D.pki.certificateError.bad_certificate;case g.Alert.Description.unsupported_certificate:return D.pki.certificateError.unsupported_certificate;case g.Alert.Description.certificate_revoked:return D.pki.certificateError.certificate_revoked;case g.Alert.Description.certificate_expired:return D.pki.certificateError.certificate_expired;case g.Alert.Description.certificate_unknown:return D.pki.certificateError.certificate_unknown;case g.Alert.Description.unknown_ca:return D.pki.certificateError.unknown_ca;default:return D.pki.certificateError.bad_certificate}};g.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(a,s,o){var u=Cu(a),c=e.verify(e,a,s,o);if(c!==!0){if(typeof c=="object"&&!D.util.isArray(c)){var l=new Error("The application rejected the certificate.");throw l.send=!0,l.alert={level:g.Alert.Level.fatal,description:g.Alert.Description.bad_certificate},c.message&&(l.message=c.message),c.alert&&(l.alert.description=c.alert),l}c!==a&&(c=qT(c))}return c},D.pki.verifyCertificateChain(e.caStore,t,r)}catch(a){var i=a;(typeof i!="object"||D.util.isArray(i))&&(i={send:!0,alert:{level:g.Alert.Level.fatal,description:Cu(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:g.Alert.Level.fatal,description:Cu(i.error)}),e.error(e,i)}return!e.fail};g.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{r={},r.cache=e||{},r.capacity=Math.max(t||100,1),r.order=[];for(var n in e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var a=null,s=null;if(i?s=D.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var o in r.order)if(r.order[o]===s){r.order.splice(o,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=D.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};g.createConnection=function(e){var t=null;e.caStore?D.util.isArray(e.caStore)?t=D.pki.createCaStore(e.caStore):t=e.caStore:t=D.pki.createCaStore();var r=e.cipherSuites||null;if(r===null){r=[];for(var n in g.CipherSuites)r.push(g.CipherSuites[n])}var i=e.server?g.ConnectionEnd.server:g.ConnectionEnd.client,a=e.sessionCache?g.createSessionCache(e.sessionCache):null,s={version:{major:g.Version.major,minor:g.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(l,f,h,p){return f},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:D.util.createBuffer(),tlsData:D.util.createBuffer(),data:D.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(l,f){f.origin=f.origin||(l.entity===g.ConnectionEnd.client?"client":"server"),f.send&&(g.queue(l,g.createAlert(l,f.alert)),g.flush(l));var h=f.fatal!==!1;h&&(l.fail=!0),e.error(l,f),h&&l.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(l){s.version={major:g.Version.major,minor:g.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===g.ConnectionEnd.client?bT:BT,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(l||typeof l=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=g.createConnectionState(s)},s.reset();var o=function(l,f){var h=f.type-g.ContentType.change_cipher_spec,p=xu[l.entity][l.expect];h in p?p[h](l,f):g.handleUnexpected(l,f)},u=function(l){var f=0,h=l.input,p=h.length();if(p<5)f=5-p;else{l.record={type:h.getByte(),version:{major:h.getByte(),minor:h.getByte()},length:h.getInt16(),fragment:D.util.createBuffer(),ready:!1};var d=l.record.version.major===l.version.major;d&&l.session&&l.session.version&&(d=l.record.version.minor===l.version.minor),d||l.error(l,{message:"Incompatible TLS version.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.protocol_version}})}return f},c=function(l){var f=0,h=l.input,p=h.length();if(p<l.record.length)f=l.record.length-p;else{l.record.fragment.putBytes(h.getBytes(l.record.length)),h.compact();var d=l.state.current.read;d.update(l,l.record)&&(l.fragmented!==null&&(l.fragmented.type===l.record.type?(l.fragmented.fragment.putBuffer(l.record.fragment),l.record=l.fragmented):l.error(l,{message:"Invalid fragmented record.",send:!0,alert:{level:g.Alert.Level.fatal,description:g.Alert.Description.unexpected_message}})),l.record.ready=!0)}return f};return s.handshake=function(l){if(s.entity!==g.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,l=l||"";var f=null;l.length>0&&(s.sessionCache&&(f=s.sessionCache.getSession(l)),f===null&&(l="")),l.length===0&&s.sessionCache&&(f=s.sessionCache.getSession(),f!==null&&(l=f.id)),s.session={id:l,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:D.md.md5.create(),sha1:D.md.sha1.create()},f&&(s.version=f.version,s.session.sp=f.sp),s.session.sp.client_random=g.createRandom().getBytes(),s.open=!0,g.queue(s,g.createRecord(s,{type:g.ContentType.handshake,data:g.createClientHello(s)})),g.flush(s)}},s.process=function(l){var f=0;return l&&s.input.putBytes(l),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(f=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(f=c(s)),!s.fail&&s.record!==null&&s.record.ready&&o(s,s.record)),f},s.prepare=function(l){return g.queue(s,g.createRecord(s,{type:g.ContentType.application_data,data:D.util.createBuffer(l)})),g.flush(s)},s.prepareHeartbeatRequest=function(l,f){return l instanceof D.util.ByteBuffer&&(l=l.bytes()),typeof f=="undefined"&&(f=l.length),s.expectedHeartbeatPayload=l,g.queue(s,g.createRecord(s,{type:g.ContentType.heartbeat,data:g.createHeartbeat(g.HeartbeatMessageType.heartbeat_request,l,f)})),g.flush(s)},s.close=function(l){if(!s.fail&&s.sessionCache&&s.session){var f={id:s.session.id,version:s.session.version,sp:s.session.sp};f.sp.keys=null,s.sessionCache.setSession(f.id,f)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,g.queue(s,g.createAlert(s,{level:g.Alert.Level.warning,description:g.Alert.Description.close_notify})),g.flush(s)),s.closed(s)),s.reset(l)},s};Gd.exports=D.tls=D.tls||{};for(Us in g)typeof g[Us]!="function"&&(D.tls[Us]=g[Us]);var Us;D.tls.prf_tls1=Ms;D.tls.hmac_sha1=ST;D.tls.createSessionCache=g.createSessionCache;D.tls.createConnection=g.createConnection});var $d=C((qP,Hd)=>{var tn=ee();Wr();Tu();var qt=Hd.exports=tn.tls;qt.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=qt.BulkCipherAlgorithm.aes,e.cipher_type=qt.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=qt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:jd};qt.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=qt.BulkCipherAlgorithm.aes,e.cipher_type=qt.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=qt.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:jd};function jd(e,t,r){var n=t.entity===tn.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:tn.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:tn.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=KT,e.write.cipherFunction=MT,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=qt.hmac_sha1}function MT(e,t){var r=!1,n=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(n),t.updateSequenceNumber();var i;e.version.minor===qt.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=tn.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=qt.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(FT)&&(e.fragment=a.output,e.length=e.fragment.length(),r=!0),r}function FT(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function VT(e,t,r){var n=!0;if(r){for(var i=t.length(),a=t.last(),s=i-1-a;s<i-1;++s)n=n&&t.at(s)==a;n&&t.truncate(a+1)}return n}function KT(e,t){var r=!1,n;e.version.minor===qt.Versions.TLS_1_0.minor?n=t.cipherState.init?null:t.cipherState.iv:n=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:n}),i.update(e.fragment),r=i.finish(VT);var a=t.macLength,s=tn.random.getBytesSync(a),o=i.output.length();o>=a?(e.fragment=i.output.getBytes(o-a),s=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=tn.util.createBuffer(e.fragment),e.length=e.fragment.length();var u=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),r=GT(t.macKey,s,u)&&r,r}function GT(e,t,r){var n=tn.hmac.create();return n.start("SHA1",e),n.update(t),t=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),t===r}});var Iu=C((MP,Yd)=>{var _e=ee();ar();de();var ma=Yd.exports=_e.sha512=_e.sha512||{};_e.md.sha512=_e.md.algorithms.sha512=ma;var Wd=_e.sha384=_e.sha512.sha384=_e.sha512.sha384||{};Wd.create=function(){return ma.create("SHA-384")};_e.md.sha384=_e.md.algorithms.sha384=Wd;_e.sha512.sha256=_e.sha512.sha256||{create:function(){return ma.create("SHA-512/256")}};_e.md["sha512/256"]=_e.md.algorithms["sha512/256"]=_e.sha512.sha256;_e.sha512.sha224=_e.sha512.sha224||{create:function(){return ma.create("SHA-512/224")}};_e.md["sha512/224"]=_e.md.algorithms["sha512/224"]=_e.sha512.sha224;ma.create=function(e){if(Qd||jT(),typeof e=="undefined"&&(e="SHA-512"),!(e in Pn))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Pn[e],r=null,n=_e.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var u=o.messageLengthSize/4,c=0;c<u;++c)o.fullMessageLength.push(0);n=_e.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return o},o.start(),o.update=function(u,c){c==="utf8"&&(u=_e.util.encodeUtf8(u));var l=u.length;o.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var f=o.fullMessageLength.length-1;f>=0;--f)o.fullMessageLength[f]+=l[1],l[1]=l[0]+(o.fullMessageLength[f]/4294967296>>>0),o.fullMessageLength[f]=o.fullMessageLength[f]>>>0,l[0]=l[1]/4294967296>>>0;return n.putBytes(u),zd(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var u=_e.util.createBuffer();u.putBytes(n.bytes());var c=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,l=c&o.blockLength-1;u.putBytes(Au.substr(0,o.blockLength-l));for(var f,h,p=o.fullMessageLength[0]*8,d=0;d<o.fullMessageLength.length-1;++d)f=o.fullMessageLength[d+1]*8,h=f/4294967296>>>0,p+=h,u.putInt32(p>>>0),p=f>>>0;u.putInt32(p);for(var m=new Array(r.length),d=0;d<r.length;++d)m[d]=r[d].slice(0);zd(m,i,u);var S=_e.util.createBuffer(),b;e==="SHA-512"?b=m.length:e==="SHA-384"?b=m.length-2:b=m.length-4;for(var d=0;d<b;++d)S.putInt32(m[d][0]),(d!==b-1||e!=="SHA-512/224")&&S.putInt32(m[d][1]);return S},o};var Au=null,Qd=!1,_u=null,Pn=null;function jT(){Au="\x80",Au+=_e.util.fillString("\0",128),_u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Pn={},Pn["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Pn["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Pn["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Pn["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Qd=!0}function zd(e,t,r){for(var n,i,a,s,o,u,c,l,f,h,p,d,m,S,b,_,I,O,R,B,V,K,W,Z,re,le,ye,Be,ne,ve,G,Ot,Nt,Se,Te,Q=r.length();Q>=128;){for(ne=0;ne<16;++ne)t[ne][0]=r.getInt32()>>>0,t[ne][1]=r.getInt32()>>>0;for(;ne<80;++ne)Ot=t[ne-2],ve=Ot[0],G=Ot[1],n=((ve>>>19|G<<13)^(G>>>29|ve<<3)^ve>>>6)>>>0,i=((ve<<13|G>>>19)^(G<<3|ve>>>29)^(ve<<26|G>>>6))>>>0,Se=t[ne-15],ve=Se[0],G=Se[1],a=((ve>>>1|G<<31)^(ve>>>8|G<<24)^ve>>>7)>>>0,s=((ve<<31|G>>>1)^(ve<<24|G>>>8)^(ve<<25|G>>>7))>>>0,Nt=t[ne-7],Te=t[ne-16],G=i+Nt[1]+s+Te[1],t[ne][0]=n+Nt[0]+a+Te[0]+(G/4294967296>>>0)>>>0,t[ne][1]=G>>>0;for(m=e[0][0],S=e[0][1],b=e[1][0],_=e[1][1],I=e[2][0],O=e[2][1],R=e[3][0],B=e[3][1],V=e[4][0],K=e[4][1],W=e[5][0],Z=e[5][1],re=e[6][0],le=e[6][1],ye=e[7][0],Be=e[7][1],ne=0;ne<80;++ne)c=((V>>>14|K<<18)^(V>>>18|K<<14)^(K>>>9|V<<23))>>>0,l=((V<<18|K>>>14)^(V<<14|K>>>18)^(K<<23|V>>>9))>>>0,f=(re^V&(W^re))>>>0,h=(le^K&(Z^le))>>>0,o=((m>>>28|S<<4)^(S>>>2|m<<30)^(S>>>7|m<<25))>>>0,u=((m<<4|S>>>28)^(S<<30|m>>>2)^(S<<25|m>>>7))>>>0,p=(m&b|I&(m^b))>>>0,d=(S&_|O&(S^_))>>>0,G=Be+l+h+_u[ne][1]+t[ne][1],n=ye+c+f+_u[ne][0]+t[ne][0]+(G/4294967296>>>0)>>>0,i=G>>>0,G=u+d,a=o+p+(G/4294967296>>>0)>>>0,s=G>>>0,ye=re,Be=le,re=W,le=Z,W=V,Z=K,G=B+i,V=R+n+(G/4294967296>>>0)>>>0,K=G>>>0,R=I,B=O,I=b,O=_,b=m,_=S,G=i+s,m=n+a+(G/4294967296>>>0)>>>0,S=G>>>0;G=e[0][1]+S,e[0][0]=e[0][0]+m+(G/4294967296>>>0)>>>0,e[0][1]=G>>>0,G=e[1][1]+_,e[1][0]=e[1][0]+b+(G/4294967296>>>0)>>>0,e[1][1]=G>>>0,G=e[2][1]+O,e[2][0]=e[2][0]+I+(G/4294967296>>>0)>>>0,e[2][1]=G>>>0,G=e[3][1]+B,e[3][0]=e[3][0]+R+(G/4294967296>>>0)>>>0,e[3][1]=G>>>0,G=e[4][1]+K,e[4][0]=e[4][0]+V+(G/4294967296>>>0)>>>0,e[4][1]=G>>>0,G=e[5][1]+Z,e[5][0]=e[5][0]+W+(G/4294967296>>>0)>>>0,e[5][1]=G>>>0,G=e[6][1]+le,e[6][0]=e[6][0]+re+(G/4294967296>>>0)>>>0,e[6][1]=G>>>0,G=e[7][1]+Be,e[7][0]=e[7][0]+ye+(G/4294967296>>>0)>>>0,e[7][1]=G>>>0,Q-=128}}});var Xd=C(wu=>{var HT=ee();jt();var Fe=HT.asn1;wu.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};wu.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Fe.Class.UNIVERSAL,type:Fe.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var lp=C((VP,up)=>{var ze=ee();pa();Dt();Iu();de();var np=Xd(),$T=np.publicKeyValidator,zT=np.privateKeyValidator;typeof Jd=="undefined"&&(Jd=ze.jsbn.BigInteger);var Jd,Ou=ze.util.ByteBuffer,Et=typeof Buffer=="undefined"?Uint8Array:Buffer;ze.pki=ze.pki||{};up.exports=ze.pki.ed25519=ze.ed25519=ze.ed25519||{};var se=ze.ed25519;se.constants={};se.constants.PUBLIC_KEY_BYTE_LENGTH=32;se.constants.PRIVATE_KEY_BYTE_LENGTH=64;se.constants.SEED_BYTE_LENGTH=32;se.constants.SIGN_BYTE_LENGTH=64;se.constants.HASH_BYTE_LENGTH=64;se.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=ze.random.getBytesSync(se.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==se.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+se.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Rr({message:t,encoding:"binary"});for(var r=new Et(se.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Et(se.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return XT(r,n),{publicKey:r,privateKey:n}};se.privateKeyFromAsn1=function(e){var t={},r=[],n=ze.asn1.validate(e,zT,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=ze.asn1.derToOid(t.privateKeyOid),s=ze.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.privateKey,u=Rr({message:ze.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:u}};se.publicKeyFromAsn1=function(e){var t={},r=[],n=ze.asn1.validate(e,$T,t,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=ze.asn1.derToOid(t.publicKeyOid),s=ze.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==se.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Rr({message:o,encoding:"binary"})};se.publicKeyFromPrivateKey=function(e){e=e||{};var t=Rr({message:e.privateKey,encoding:"binary"});if(t.length!==se.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+se.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Et(se.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r};se.sign=function(e){e=e||{};var t=Rr(e),r=Rr({message:e.privateKey,encoding:"binary"});if(r.length===se.constants.SEED_BYTE_LENGTH){var n=se.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==se.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+se.constants.SEED_BYTE_LENGTH+" or "+se.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Et(se.constants.SIGN_BYTE_LENGTH+t.length);JT(i,t,t.length,r);for(var a=new Et(se.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};se.verify=function(e){e=e||{};var t=Rr(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Rr({message:e.signature,encoding:"binary"});if(r.length!==se.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+se.constants.SIGN_BYTE_LENGTH);var n=Rr({message:e.publicKey,encoding:"binary"});if(n.length!==se.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+se.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Et(se.constants.SIGN_BYTE_LENGTH+t.length),a=new Et(se.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<se.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<t.length;++s)i[s+se.constants.SIGN_BYTE_LENGTH]=t[s];return ZT(a,i,i.length,n)>=0};function Rr(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Et)return t;var r=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof Buffer!="undefined")return Buffer.from(t,r);t=new Ou(t,r)}else if(!(t instanceof Ou))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Et(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}var Nu=Y(),Fs=Y([1]),WT=Y([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),QT=Y([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Zd=Y([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ep=Y([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Bu=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),YT=Y([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Sa(e,t){var r=ze.md.sha512.create(),n=new Ou(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new Et(se.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function XT(e,t){var r=[Y(),Y(),Y(),Y()],n,i=Sa(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,ku(r,i),Lu(e,r),n=0;n<32;++n)t[n+32]=e[n];return 0}function JT(e,t,r,n){var i,a,s=new Float64Array(64),o=[Y(),Y(),Y(),Y()],u=Sa(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var c=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=u[32+i];var l=Sa(e.subarray(32),r+32);for(Du(l),ku(o,l),Lu(e,o),i=32;i<64;++i)e[i]=n[i];var f=Sa(e,r+64);for(Du(f),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=l[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=f[i]*u[a];return ip(e.subarray(32),s),c}function ZT(e,t,r,n){var i,a,s=new Et(32),o=[Y(),Y(),Y(),Y()],u=[Y(),Y(),Y(),Y()];if(a=-1,r<64||eA(u,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var c=Sa(e,r);if(Du(c),op(o,u,c),ku(u,t.subarray(32)),Pu(o,u),Lu(s,o),r-=64,ap(t,0,s,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return a=r,a}function ip(e,t){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)t[i]+=r-16*t[n]*Bu[i-(n-32)],r=t[i]+128>>8,t[i]-=r*256;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*Bu[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*Bu[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=t[n]&255}function Du(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;ip(e,t)}function Pu(e,t){var r=Y(),n=Y(),i=Y(),a=Y(),s=Y(),o=Y(),u=Y(),c=Y(),l=Y();di(r,e[1],e[0]),di(l,t[1],t[0]),Ce(r,r,l),hi(n,e[0],e[1]),hi(l,t[0],t[1]),Ce(n,n,l),Ce(i,e[3],t[3]),Ce(i,i,QT),Ce(a,e[2],t[2]),hi(a,a,a),di(s,n,r),di(o,a,i),hi(u,a,i),hi(c,n,r),Ce(e[0],s,o),Ce(e[1],c,u),Ce(e[2],u,o),Ce(e[3],s,c)}function tp(e,t,r){for(var n=0;n<4;++n)cp(e[n],t[n],r)}function Lu(e,t){var r=Y(),n=Y(),i=Y();iA(i,t[2]),Ce(r,t[0],i),Ce(n,t[1],i),Vs(e,n),e[31]^=sp(r)<<7}function Vs(e,t){var r,n,i,a=Y(),s=Y();for(r=0;r<16;++r)s[r]=t[r];for(Ru(s),Ru(s),Ru(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,cp(s,a,1-i)}for(r=0;r<16;r++)e[2*r]=s[r]&255,e[2*r+1]=s[r]>>8}function eA(e,t){var r=Y(),n=Y(),i=Y(),a=Y(),s=Y(),o=Y(),u=Y();return rn(e[2],Fs),tA(e[1],t),Ln(i,e[1]),Ce(a,i,WT),di(i,i,e[2]),hi(a,e[2],a),Ln(s,a),Ln(o,s),Ce(u,o,s),Ce(r,u,i),Ce(r,r,a),rA(r,r),Ce(r,r,i),Ce(r,r,a),Ce(r,r,a),Ce(e[0],r,a),Ln(n,e[0]),Ce(n,n,a),rp(n,i)&&Ce(e[0],e[0],YT),Ln(n,e[0]),Ce(n,n,a),rp(n,i)?-1:(sp(e[0])===t[31]>>7&&di(e[0],Nu,e[0]),Ce(e[3],e[0],e[1]),0)}function tA(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function rA(e,t){var r=Y(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=250;n>=0;--n)Ln(r,r),n!==1&&Ce(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function rp(e,t){var r=new Et(32),n=new Et(32);return Vs(r,e),Vs(n,t),ap(r,0,n,0)}function ap(e,t,r,n){return nA(e,t,r,n,32)}function nA(e,t,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=e[t+a]^r[n+a];return(1&s-1>>>8)-1}function sp(e){var t=new Et(32);return Vs(t,e),t[0]&1}function op(e,t,r){var n,i;for(rn(e[0],Nu),rn(e[1],Fs),rn(e[2],Fs),rn(e[3],Nu),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,tp(e,t,n),Pu(t,e),Pu(e,e),tp(e,t,n)}function ku(e,t){var r=[Y(),Y(),Y(),Y()];rn(r[0],Zd),rn(r[1],ep),rn(r[2],Fs),Ce(r[3],Zd,ep),op(e,r,t)}function rn(e,t){var r;for(r=0;r<16;r++)e[r]=t[r]|0}function iA(e,t){var r=Y(),n;for(n=0;n<16;++n)r[n]=t[n];for(n=253;n>=0;--n)Ln(r,r),n!==2&&n!==4&&Ce(r,r,t);for(n=0;n<16;++n)e[n]=r[n]}function Ru(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-n*65536;e[0]+=n-1+37*(n-1)}function cp(e,t,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(e[a]^t[a]),e[a]^=n,t[a]^=n}function Y(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function hi(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function di(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function Ln(e,t){Ce(e,t,t)}function Ce(e,t,r){var n,i,a=0,s=0,o=0,u=0,c=0,l=0,f=0,h=0,p=0,d=0,m=0,S=0,b=0,_=0,I=0,O=0,R=0,B=0,V=0,K=0,W=0,Z=0,re=0,le=0,ye=0,Be=0,ne=0,ve=0,G=0,Ot=0,Nt=0,Se=r[0],Te=r[1],Q=r[2],Xe=r[3],Je=r[4],Ze=r[5],et=r[6],tt=r[7],rt=r[8],nt=r[9],it=r[10],at=r[11],st=r[12],ot=r[13],ct=r[14],ut=r[15];n=t[0],a+=n*Se,s+=n*Te,o+=n*Q,u+=n*Xe,c+=n*Je,l+=n*Ze,f+=n*et,h+=n*tt,p+=n*rt,d+=n*nt,m+=n*it,S+=n*at,b+=n*st,_+=n*ot,I+=n*ct,O+=n*ut,n=t[1],s+=n*Se,o+=n*Te,u+=n*Q,c+=n*Xe,l+=n*Je,f+=n*Ze,h+=n*et,p+=n*tt,d+=n*rt,m+=n*nt,S+=n*it,b+=n*at,_+=n*st,I+=n*ot,O+=n*ct,R+=n*ut,n=t[2],o+=n*Se,u+=n*Te,c+=n*Q,l+=n*Xe,f+=n*Je,h+=n*Ze,p+=n*et,d+=n*tt,m+=n*rt,S+=n*nt,b+=n*it,_+=n*at,I+=n*st,O+=n*ot,R+=n*ct,B+=n*ut,n=t[3],u+=n*Se,c+=n*Te,l+=n*Q,f+=n*Xe,h+=n*Je,p+=n*Ze,d+=n*et,m+=n*tt,S+=n*rt,b+=n*nt,_+=n*it,I+=n*at,O+=n*st,R+=n*ot,B+=n*ct,V+=n*ut,n=t[4],c+=n*Se,l+=n*Te,f+=n*Q,h+=n*Xe,p+=n*Je,d+=n*Ze,m+=n*et,S+=n*tt,b+=n*rt,_+=n*nt,I+=n*it,O+=n*at,R+=n*st,B+=n*ot,V+=n*ct,K+=n*ut,n=t[5],l+=n*Se,f+=n*Te,h+=n*Q,p+=n*Xe,d+=n*Je,m+=n*Ze,S+=n*et,b+=n*tt,_+=n*rt,I+=n*nt,O+=n*it,R+=n*at,B+=n*st,V+=n*ot,K+=n*ct,W+=n*ut,n=t[6],f+=n*Se,h+=n*Te,p+=n*Q,d+=n*Xe,m+=n*Je,S+=n*Ze,b+=n*et,_+=n*tt,I+=n*rt,O+=n*nt,R+=n*it,B+=n*at,V+=n*st,K+=n*ot,W+=n*ct,Z+=n*ut,n=t[7],h+=n*Se,p+=n*Te,d+=n*Q,m+=n*Xe,S+=n*Je,b+=n*Ze,_+=n*et,I+=n*tt,O+=n*rt,R+=n*nt,B+=n*it,V+=n*at,K+=n*st,W+=n*ot,Z+=n*ct,re+=n*ut,n=t[8],p+=n*Se,d+=n*Te,m+=n*Q,S+=n*Xe,b+=n*Je,_+=n*Ze,I+=n*et,O+=n*tt,R+=n*rt,B+=n*nt,V+=n*it,K+=n*at,W+=n*st,Z+=n*ot,re+=n*ct,le+=n*ut,n=t[9],d+=n*Se,m+=n*Te,S+=n*Q,b+=n*Xe,_+=n*Je,I+=n*Ze,O+=n*et,R+=n*tt,B+=n*rt,V+=n*nt,K+=n*it,W+=n*at,Z+=n*st,re+=n*ot,le+=n*ct,ye+=n*ut,n=t[10],m+=n*Se,S+=n*Te,b+=n*Q,_+=n*Xe,I+=n*Je,O+=n*Ze,R+=n*et,B+=n*tt,V+=n*rt,K+=n*nt,W+=n*it,Z+=n*at,re+=n*st,le+=n*ot,ye+=n*ct,Be+=n*ut,n=t[11],S+=n*Se,b+=n*Te,_+=n*Q,I+=n*Xe,O+=n*Je,R+=n*Ze,B+=n*et,V+=n*tt,K+=n*rt,W+=n*nt,Z+=n*it,re+=n*at,le+=n*st,ye+=n*ot,Be+=n*ct,ne+=n*ut,n=t[12],b+=n*Se,_+=n*Te,I+=n*Q,O+=n*Xe,R+=n*Je,B+=n*Ze,V+=n*et,K+=n*tt,W+=n*rt,Z+=n*nt,re+=n*it,le+=n*at,ye+=n*st,Be+=n*ot,ne+=n*ct,ve+=n*ut,n=t[13],_+=n*Se,I+=n*Te,O+=n*Q,R+=n*Xe,B+=n*Je,V+=n*Ze,K+=n*et,W+=n*tt,Z+=n*rt,re+=n*nt,le+=n*it,ye+=n*at,Be+=n*st,ne+=n*ot,ve+=n*ct,G+=n*ut,n=t[14],I+=n*Se,O+=n*Te,R+=n*Q,B+=n*Xe,V+=n*Je,K+=n*Ze,W+=n*et,Z+=n*tt,re+=n*rt,le+=n*nt,ye+=n*it,Be+=n*at,ne+=n*st,ve+=n*ot,G+=n*ct,Ot+=n*ut,n=t[15],O+=n*Se,R+=n*Te,B+=n*Q,V+=n*Xe,K+=n*Je,W+=n*Ze,Z+=n*et,re+=n*tt,le+=n*rt,ye+=n*nt,Be+=n*it,ne+=n*at,ve+=n*st,G+=n*ot,Ot+=n*ct,Nt+=n*ut,a+=38*R,s+=38*B,o+=38*V,u+=38*K,c+=38*W,l+=38*Z,f+=38*re,h+=38*le,p+=38*ye,d+=38*Be,m+=38*ne,S+=38*ve,b+=38*G,_+=38*Ot,I+=38*Nt,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=S+i+65535,i=Math.floor(n/65536),S=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=I+i+65535,i=Math.floor(n/65536),I=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=s,e[2]=o,e[3]=u,e[4]=c,e[5]=l,e[6]=f,e[7]=h,e[8]=p,e[9]=d,e[10]=m,e[11]=S,e[12]=b,e[13]=_,e[14]=I,e[15]=O}});var pp=C((KP,dp)=>{var Tt=ee();de();Dt();pa();dp.exports=Tt.kem=Tt.kem||{};var fp=Tt.jsbn.BigInteger;Tt.kem.rsa={};Tt.kem.rsa.create=function(e,t){t=t||{};var r=t.prng||Tt.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),o;do o=new fp(Tt.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(o.compareTo(fp.ONE)<=0);o=Tt.util.hexToBytes(o.toString(16));var u=s-o.length;u>0&&(o=Tt.util.fillString("\0",u)+o);var c=i.encrypt(o,"NONE"),l=e.generate(o,a);return{encapsulation:c,key:l}},n.decrypt=function(i,a,s){var o=i.decrypt(a,"NONE");return e.generate(o,s)},n};Tt.kem.kdf1=function(e,t){hp(this,e,0,t||e.digestLength)};Tt.kem.kdf2=function(e,t){hp(this,e,1,t||e.digestLength)};function hp(e,t,r,n){e.generate=function(i,a){for(var s=new Tt.util.ByteBuffer,o=Math.ceil(a/n)+r,u=new Tt.util.ByteBuffer,c=r;c<o;++c){u.putInt32(c),t.start(),t.update(i+u.getBytes());var l=t.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var mp=C((GP,gp)=>{var ce=ee();de();gp.exports=ce.log=ce.log||{};ce.log.levels=["none","error","warning","info","debug","verbose","max"];var Ks={},Mu=[],Ea=null;ce.log.LEVEL_LOCKED=2;ce.log.NO_LEVEL_CHECK=4;ce.log.INTERPOLATE=8;for(dr=0;dr<ce.log.levels.length;++dr)Uu=ce.log.levels[dr],Ks[Uu]={index:dr,name:Uu.toUpperCase()};var Uu,dr;ce.log.logMessage=function(e){for(var t=Ks[e.level].index,r=0;r<Mu.length;++r){var n=Mu[r];if(n.flags&ce.log.NO_LEVEL_CHECK)n.f(e);else{var i=Ks[n.level].index;t<=i&&n.f(n,e)}}};ce.log.prepareStandard=function(e){"standard"in e||(e.standard=Ks[e.level].name+" ["+e.category+"] "+e.message)};ce.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=ce.util.format.apply(this,t)}};ce.log.prepareStandardFull=function(e){"standardFull"in e||(ce.log.prepareStandard(e),e.standardFull=e.standard)};for(qu=["error","warning","info","debug","verbose"],dr=0;dr<qu.length;++dr)(function(t){ce.log[t]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:r,message:n,arguments:i};ce.log.logMessage(a)}})(qu[dr]);var qu,dr;ce.log.makeLogger=function(e){var t={flags:0,f:e};return ce.log.setLevel(t,"none"),t};ce.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&ce.log.LEVEL_LOCKED))for(var n=0;n<ce.log.levels.length;++n){var i=ce.log.levels[n];if(t==i){e.level=t,r=!0;break}}return r};ce.log.lock=function(e,t){typeof t=="undefined"||t?e.flags|=ce.log.LEVEL_LOCKED:e.flags&=~ce.log.LEVEL_LOCKED};ce.log.addLogger=function(e){Mu.push(e)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(vp={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},ba=function(e,t){ce.log.prepareStandard(t);var r=vp[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)},pi=ce.log.makeLogger(ba)):(ba=function(t,r){ce.log.prepareStandardFull(r),console.log(r.standardFull)},pi=ce.log.makeLogger(ba)),ce.log.setLevel(pi,"debug"),ce.log.addLogger(pi),Ea=pi):console={log:function(){}};var pi,vp,ba;Ea!==null&&typeof window!="undefined"&&window.location&&(Ca=new URL(window.location.href).searchParams,Ca.has("console.level")&&ce.log.setLevel(Ea,Ca.get("console.level").slice(-1)[0]),Ca.has("console.lock")&&(yp=Ca.get("console.lock").slice(-1)[0],yp=="true"&&ce.log.lock(Ea)));var Ca,yp;ce.log.consoleLogger=Ea});var Cp=C((jP,Sp)=>{Sp.exports=ar();Es();oi();Jc();Iu()});var xp=C((HP,bp)=>{var k=ee();Wr();jt();ha();Qr();wn();hu();Dt();de();Ls();var x=k.asn1,yt=bp.exports=k.pkcs7=k.pkcs7||{};yt.messageFromPem=function(e){var t=k.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=x.fromDer(t.body);return yt.messageFromAsn1(n)};yt.messageToPem=function(e,t){var r={type:"PKCS7",body:x.toDer(e.toAsn1()).getBytes()};return k.pem.encode(r,{maxline:t})};yt.messageFromAsn1=function(e){var t={},r=[];if(!x.validate(e,yt.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=x.derToOid(t.contentType),a;switch(i){case k.pki.oids.envelopedData:a=yt.createEnvelopedData();break;case k.pki.oids.encryptedData:a=yt.createEncryptedData();break;case k.pki.oids.signedData:a=yt.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};yt.createSignedData=function(){var e=null;return e={type:k.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if(Vu(e,n,yt.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(k.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var n=[],i=0;i<e.certificates.length;++i)n.push(k.pki.certificateToAsn1(e.certificates[i]));var a=[],s=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(e.version).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return n.length>0&&s.value[0].value.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(x.create(x.Class.UNIVERSAL,x.Type.SET,!0,e.signerInfos)),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=k.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var o=n.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=k.pki.privateKeyFromPem(o));var u=n.digestAlgorithm||k.pki.oids.sha1;switch(u){case k.pki.oids.sha1:case k.pki.oids.sha256:case k.pki.oids.sha384:case k.pki.oids.sha512:case k.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var c=n.authenticatedAttributes||[];if(c.length>0){for(var l=!1,f=!1,h=0;h<c.length;++h){var p=c[h];if(!l&&p.type===k.pki.oids.contentType){if(l=!0,f)break;continue}if(!f&&p.type===k.pki.oids.messageDigest){if(f=!0,l)break;continue}}if(!l||!f)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:a,digestAlgorithm:u,signatureAlgorithm:k.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:c,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(k.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof k.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=k.util.encodeUtf8(e.content)),n.detached?e.detachedContent=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=k.pki.certificateFromPem(n)),e.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var n={},i=0;i<e.signers.length;++i){var a=e.signers[i],s=a.digestAlgorithm;s in n||(n[s]=k.md[k.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=k.md[k.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in n)e.digestAlgorithmIdentifiers.push(x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(s).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]));return n}function r(n){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=x.derToOid(e.contentInfo.value[0].value),s=x.toDer(i);s.getByte(),x.getBerValueLength(s),s=s.getBytes();for(var o in n)n[o].start().update(s);for(var u=new Date,c=0;c<e.signers.length;++c){var l=e.signers[c];if(l.authenticatedAttributes.length===0){if(a!==k.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{l.authenticatedAttributesAsn1=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[]),h=0;h<l.authenticatedAttributes.length;++h){var p=l.authenticatedAttributes[h];p.type===k.pki.oids.messageDigest?p.value=n[l.digestAlgorithm].digest():p.type===k.pki.oids.signingTime&&(p.value||(p.value=u)),f.value.push(Fu(p)),l.authenticatedAttributesAsn1.value.push(Fu(p))}s=x.toDer(f).getBytes(),l.md.start().update(s)}l.signature=l.key.sign(l.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=lA(e.signers)}};yt.createEncryptedData=function(){var e=null;return e={type:k.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:k.pki.oids["aes256-CBC"]},fromAsn1:function(t){Vu(e,t,yt.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),Ep(e)}},e};yt.createEnvelopedData=function(){var e=null;return e={type:k.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:k.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Vu(e,t,yt.asn1.envelopedDataValidator);e.recipients=oA(r.recipientInfos.value)},toAsn1:function(){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.type).getBytes()),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(e.version).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,cA(e.recipients)),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,fA(e.encryptedContent))])])])},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===r.length){for(var s=!0,o=0;o<r.length;++o)if(a[o].type!==r[o].type||a[o].value!==r[o].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case k.pki.oids.rsaEncryption:case k.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=k.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}Ep(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:k.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var n,i,a;switch(r){case k.pki.oids["aes128-CBC"]:n=16,i=16,a=k.aes.createEncryptionCipher;break;case k.pki.oids["aes192-CBC"]:n=24,i=16,a=k.aes.createEncryptionCipher;break;case k.pki.oids["aes256-CBC"]:n=32,i=16,a=k.aes.createEncryptionCipher;break;case k.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=k.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=k.util.createBuffer(k.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=k.util.createBuffer(k.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var u=e.recipients[o];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case k.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},e};function aA(e){var t={},r=[];if(!x.validate(e,yt.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:k.pki.RDNAttributesAsArray(t.issuer),serialNumber:k.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:x.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function sA(e){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(e.version).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[k.pki.distinguishedNameToAsn1({attributes:e.issuer}),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,k.util.hexToBytes(e.serialNumber))]),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.encryptedContent.algorithm).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function oA(e){for(var t=[],r=0;r<e.length;++r)t.push(aA(e[r]));return t}function cA(e){for(var t=[],r=0;r<e.length;++r)t.push(sA(e[r]));return t}function uA(e){var t=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(e.version).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[k.pki.distinguishedNameToAsn1({attributes:e.issuer}),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,k.util.hexToBytes(e.serialNumber))]),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.digestAlgorithm).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.signatureAlgorithm).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])),t.value.push(x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=x.create(x.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(Fu(i))}t.value.push(r)}return t}function lA(e){for(var t=[],r=0;r<e.length;++r)t.push(uA(e[r]));return t}function Fu(e){var t;if(e.type===k.pki.oids.contentType)t=x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.value).getBytes());else if(e.type===k.pki.oids.messageDigest)t=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===k.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=x.utcTimeToDate(i):i=x.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?t=x.create(x.Class.UNIVERSAL,x.Type.UTCTIME,!1,x.dateToUtcTime(i)):t=x.create(x.Class.UNIVERSAL,x.Type.GENERALIZEDTIME,!1,x.dateToGeneralizedTime(i))}return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.type).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[t])])}function fA(e){return[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(k.pki.oids.data).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.algorithm).getBytes()),e.parameter?x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,e.content.getBytes())])]}function Vu(e,t,r){var n={},i=[];if(!x.validate(t,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=x.derToOid(n.contentType);if(s!==k.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var o="";if(k.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==x.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=n.encryptedContent[u].value}else o=n.encryptedContent;e.encryptedContent={algorithm:x.derToOid(n.encAlgorithm),parameter:k.util.createBuffer(n.encParameter.value),content:k.util.createBuffer(o)}}if(n.content){var o="";if(k.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==x.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=n.content[u].value}else o=n.content;e.content=k.util.createBuffer(o)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function Ep(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case k.pki.oids["aes128-CBC"]:case k.pki.oids["aes192-CBC"]:case k.pki.oids["aes256-CBC"]:t=k.aes.createDecryptionCipher(e.encryptedContent.key);break;case k.pki.oids.desCBC:case k.pki.oids["des-EDE3-CBC"]:t=k.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}});var Ap=C(($P,Tp)=>{var Oe=ee();Wr();ni();Es();oi();de();var js=Tp.exports=Oe.ssh=Oe.ssh||{};js.privateKeyToPutty=function(e,t,r){r=r||"",t=t||"";var n="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=Oe.util.createBuffer();vi(s,n),pr(s,e.e),pr(s,e.n);var o=Oe.util.encode64(s.bytes(),64),u=Math.floor(o.length/66)+1;a+="Public-Lines: "+u+`\r
`,a+=o;var c=Oe.util.createBuffer();pr(c,e.d),pr(c,e.p),pr(c,e.q),pr(c,e.qInv);var l;if(!t)l=Oe.util.encode64(c.bytes(),64);else{var f=c.length()+16-1;f-=f%16;var h=Gs(c.bytes());h.truncate(h.length()-f+c.length()),c.putBuffer(h);var p=Oe.util.createBuffer();p.putBuffer(Gs("\0\0\0\0",t)),p.putBuffer(Gs("\0\0\0",t));var d=Oe.aes.createEncryptionCipher(p.truncate(8),"CBC");d.start(Oe.util.createBuffer().fillWithByte(0,16)),d.update(c.copy()),d.finish();var m=d.output;m.truncate(16),l=Oe.util.encode64(m.bytes(),64)}u=Math.floor(l.length/66)+1,a+=`\r
Private-Lines: `+u+`\r
`,a+=l;var S=Gs("putty-private-key-file-mac-key",t),b=Oe.util.createBuffer();vi(b,n),vi(b,i),vi(b,r),b.putInt32(s.length()),b.putBuffer(s),b.putInt32(c.length()),b.putBuffer(c);var _=Oe.hmac.create();return _.start("sha1",S),_.update(b.bytes()),a+=`\r
Private-MAC: `+_.digest().toHex()+`\r
`,a};js.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=Oe.util.createBuffer();return vi(n,r),pr(n,e.e),pr(n,e.n),r+" "+Oe.util.encode64(n.bytes())+" "+t};js.privateKeyToOpenSSH=function(e,t){return t?Oe.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Oe.pki.privateKeyToPem(e)};js.getPublicKeyFingerprint=function(e,t){t=t||{};var r=t.md||Oe.md.md5.create(),n="ssh-rsa",i=Oe.util.createBuffer();vi(i,n),pr(i,e.e),pr(i,e.n),r.start(),r.update(i.getBytes());var a=r.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function pr(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=Oe.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function vi(e,t){e.putInt32(t.length),e.putString(t)}function Gs(){for(var e=Oe.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}});var Ku=C((zP,_p)=>{_p.exports=ee();Wr();$d();jt();ps();ha();lp();ni();pp();mp();Cp();du();As();wn();ou();yu();xp();mu();uu();Zc();Ns();Dt();ru();Ap();Tu();de()});var Pe=C((WP,Op)=>{var Gu=Object.defineProperty,hA=Object.getOwnPropertyDescriptor,dA=Object.getOwnPropertyNames,pA=Object.prototype.hasOwnProperty,vA=(e,t)=>{for(var r in t)Gu(e,r,{get:t[r],enumerable:!0})},yA=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of dA(t))!pA.call(e,i)&&i!==r&&Gu(e,i,{get:()=>t[i],enumerable:!(n=hA(t,i))||n.enumerable});return e},gA=e=>yA(Gu({},"__esModule",{value:!0}),e),Ip={};vA(Ip,{DeviceType:()=>wp,HostAddressFamily:()=>Bp,TriggerState:()=>Rp});Op.exports=gA(Ip);var wp=(e=>(e.Contact="Contact",e.Dimmer="Dimmer",e.Fan="Fan",e.Humidity="Humidity",e.Keypad="Keypad",e.Occupancy="Occupancy",e.Remote="Remote",e.Shade="Shade",e.Strip="Strip",e.Switch="Switch",e.Timeclock="Timeclock",e.Thermostat="Thermostat",e.Temperature="Temperature",e.Unknown="Unknown",e))(wp||{}),Bp=(e=>(e[e.IPv4=4]="IPv4",e[e.IPv6=6]="IPv6",e))(Bp||{}),Rp=(e=>(e[e.Idle=0]="Idle",e[e.Down=1]="Down",e[e.Up=2]="Up",e))(Rp||{})});function xa(){return Hs>$s.length-16&&(Np.default.randomFillSync($s),Hs=0),$s.slice(Hs,Hs+=16)}var Np,$s,Hs,ju=lt(()=>{Np=ei(require("crypto")),$s=new Uint8Array(256),Hs=$s.length});var Dp,Pp=lt(()=>{Dp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function mA(e){return typeof e=="string"&&Dp.test(e)}var nn,Ta=lt(()=>{Pp();nn=mA});function kn(e,t=0){return We[e[t+0]]+We[e[t+1]]+We[e[t+2]]+We[e[t+3]]+"-"+We[e[t+4]]+We[e[t+5]]+"-"+We[e[t+6]]+We[e[t+7]]+"-"+We[e[t+8]]+We[e[t+9]]+"-"+We[e[t+10]]+We[e[t+11]]+We[e[t+12]]+We[e[t+13]]+We[e[t+14]]+We[e[t+15]]}function SA(e,t=0){let r=kn(e,t);if(!nn(r))throw TypeError("Stringified UUID is invalid");return r}var We,Lp,Aa=lt(()=>{Ta();We=[];for(let e=0;e<256;++e)We.push((e+256).toString(16).slice(1));Lp=SA});function CA(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let a=e.node||kp,s=e.clockseq!==void 0?e.clockseq:Hu;if(a==null||s==null){let h=e.random||(e.rng||xa)();a==null&&(a=kp=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),s==null&&(s=Hu=(h[6]<<8|h[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:zu+1,c=o-$u+(u-zu)/1e4;if(c<0&&e.clockseq===void 0&&(s=s+1&16383),(c<0||o>$u)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");$u=o,zu=u,Hu=s,o+=122192928e5;let l=((o&268435455)*1e4+u)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;let f=o/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=f&255,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let h=0;h<6;++h)i[n+h]=a[h];return t||kn(i)}var kp,Hu,$u,zu,Up,qp=lt(()=>{ju();Aa();$u=0,zu=0;Up=CA});function EA(e){if(!nn(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var zs,Wu=lt(()=>{Ta();zs=EA});function bA(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function _a(e,t,r){function n(i,a,s,o){var u;if(typeof i=="string"&&(i=bA(i)),typeof a=="string"&&(a=zs(a)),((u=a)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(a),c.set(i,a.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,s){o=o||0;for(let l=0;l<16;++l)s[o+l]=c[l];return s}return kn(c)}try{n.name=e}catch(i){}return n.DNS=xA,n.URL=TA,n}var xA,TA,Qu=lt(()=>{Aa();Wu();xA="6ba7b810-9dad-11d1-80b4-00c04fd430c8",TA="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function AA(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Mp.default.createHash("md5").update(e).digest()}var Mp,Fp,Vp=lt(()=>{Mp=ei(require("crypto"));Fp=AA});var _A,Kp,Gp=lt(()=>{Qu();Vp();_A=_a("v3",48,Fp),Kp=_A});var jp,Yu,Hp=lt(()=>{jp=ei(require("crypto")),Yu={randomUUID:jp.default.randomUUID}});function IA(e,t,r){if(Yu.randomUUID&&!t&&!e)return Yu.randomUUID();e=e||{};let n=e.random||(e.rng||xa)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return kn(n)}var $p,zp=lt(()=>{Hp();ju();Aa();$p=IA});function wA(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Wp.default.createHash("sha1").update(e).digest()}var Wp,Qp,Yp=lt(()=>{Wp=ei(require("crypto"));Qp=wA});var BA,Xp,Jp=lt(()=>{Qu();Yp();BA=_a("v5",80,Qp),Xp=BA});var Zp,ev=lt(()=>{Zp="00000000-0000-0000-0000-000000000000"});function RA(e){if(!nn(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var tv,rv=lt(()=>{Ta();tv=RA});var nv={};wb(nv,{NIL:()=>Zp,parse:()=>zs,stringify:()=>Lp,v1:()=>Up,v3:()=>Kp,v4:()=>$p,v5:()=>Xp,validate:()=>nn,version:()=>tv});var iv=lt(()=>{qp();Gp();zp();Jp();ev();rv();Ta();Aa();Wu()});var Ia=C((av,Ws)=>{(function(e){"use strict";var t={};t.VERSION="1.6.1";var r,n={},i=function(c,l){return function(){return l.apply(c,arguments)}},a=function(){var c=arguments,l=c[0],f,h;for(h=1;h<c.length;h++)for(f in c[h])!(f in l)&&c[h].hasOwnProperty(f)&&(l[f]=c[h][f]);return l},s=function(c,l){return{value:c,name:l}};t.TRACE=s(1,"TRACE"),t.DEBUG=s(2,"DEBUG"),t.INFO=s(3,"INFO"),t.TIME=s(4,"TIME"),t.WARN=s(5,"WARN"),t.ERROR=s(8,"ERROR"),t.OFF=s(99,"OFF");var o=function(c){this.context=c,this.setLevel(c.filterLevel),this.log=this.info};o.prototype={setLevel:function(c){c&&"value"in c&&(this.context.filterLevel=c)},getLevel:function(){return this.context.filterLevel},enabledFor:function(c){var l=this.context.filterLevel;return c.value>=l.value},trace:function(){this.invoke(t.TRACE,arguments)},debug:function(){this.invoke(t.DEBUG,arguments)},info:function(){this.invoke(t.INFO,arguments)},warn:function(){this.invoke(t.WARN,arguments)},error:function(){this.invoke(t.ERROR,arguments)},time:function(c){typeof c=="string"&&c.length>0&&this.invoke(t.TIME,[c,"start"])},timeEnd:function(c){typeof c=="string"&&c.length>0&&this.invoke(t.TIME,[c,"end"])},invoke:function(c,l){r&&this.enabledFor(c)&&r(l,a({level:c},this.context))}};var u=new o({filterLevel:t.OFF});(function(){var c=t;c.enabledFor=i(u,u.enabledFor),c.trace=i(u,u.trace),c.debug=i(u,u.debug),c.time=i(u,u.time),c.timeEnd=i(u,u.timeEnd),c.info=i(u,u.info),c.warn=i(u,u.warn),c.error=i(u,u.error),c.log=c.info})(),t.setHandler=function(c){r=c},t.setLevel=function(c){u.setLevel(c);for(var l in n)n.hasOwnProperty(l)&&n[l].setLevel(c)},t.getLevel=function(){return u.getLevel()},t.get=function(c){return n[c]||(n[c]=new o(a({name:c},u.context)))},t.createDefaultHandler=function(c){c=c||{},c.formatter=c.formatter||function(p,d){d.name&&p.unshift("["+d.name+"]")};var l={},f=function(h,p){Function.prototype.apply.call(h,console,p)};return typeof console=="undefined"?function(){}:function(h,p){h=Array.prototype.slice.call(h);var d=console.log,m;p.level===t.TIME?(m=(p.name?"["+p.name+"] ":"")+h[0],h[1]==="start"?console.time?console.time(m):l[m]=new Date().getTime():console.timeEnd?console.timeEnd(m):f(d,[m+": "+(new Date().getTime()-l[m])+"ms"])):(p.level===t.WARN&&console.warn?d=console.warn:p.level===t.ERROR&&console.error?d=console.error:p.level===t.INFO&&console.info?d=console.info:p.level===t.DEBUG&&console.debug?d=console.debug:p.level===t.TRACE&&console.trace&&(d=console.trace),c.formatter(h,p),f(d,h))}},t.useDefaults=function(c){t.setLevel(c&&c.defaultLevel||t.DEBUG),t.setHandler(t.createDefaultHandler(c))},t.setDefaults=t.useDefaults,typeof define=="function"&&define.amd?define(t):typeof Ws!="undefined"&&Ws.exports?Ws.exports=t:(t._prevLogger=e.Logger,t.noConflict=function(){return e.Logger=t._prevLogger,t},e.Logger=t)})(av)});var an=C((PL,lv)=>{var OA=Object.create,Qs=Object.defineProperty,NA=Object.getOwnPropertyDescriptor,DA=Object.getOwnPropertyNames,PA=Object.getPrototypeOf,LA=Object.prototype.hasOwnProperty,kA=(e,t)=>{for(var r in t)Qs(e,r,{get:t[r],enumerable:!0})},ov=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of DA(t))!LA.call(e,i)&&i!==r&&Qs(e,i,{get:()=>t[i],enumerable:!(n=NA(t,i))||n.enumerable});return e},UA=(e,t,r)=>(r=e!=null?OA(PA(e)):{},ov(t||!e||!e.__esModule?Qs(r,"default",{value:e,enumerable:!0}):r,e)),qA=e=>ov(Qs({},"__esModule",{value:!0}),e),cv={};kA(cv,{EventEmitter:()=>uv,default:()=>FA});lv.exports=qA(cv);var MA=UA(Ia()),sv=MA.get("EventEmitter"),uv=class{constructor(e){this.handlers={},this.maxListeners=e||10}on(e,t,r){return this.handlers[e]==null&&(this.handlers[e]=[]),this.handlers[e].length>=this.maxListeners&&sv.warn(`exceeded maximum (${this.maxListeners}) number of listeners`),r?this.handlers[e].unshift({listener:t,persistent:!0}):this.handlers[e].push({listener:t,persistent:!0}),this}once(e,t,r){return this.handlers[e]==null&&(this.handlers[e]=[]),r?this.handlers[e].unshift({listener:t,persistent:!1}):this.handlers[e].push({listener:t,persistent:!1}),this}off(e,t){let r=this.events().filter(n=>e==null?!0:n===e);for(let n=0;n<r.length;n++){if(t==null||this.handlers[r[n]].length===0){delete this.handlers[r[n]];continue}let i=this.handlers[r[n]].findIndex(a=>a.listener===t);if(i>=0)return this.handlers[r[n]].splice(i,1),this.handlers[r[n]].length===0&&delete this.handlers[r[n]],this}return this}emit(e,...t){if(this.handlers[e]==null||this.handlers[e].length===0)return!1;for(let r=0;r<this.handlers[e].length;r++)try{this.handlers[e][r].listener(...t)}catch(n){sv.error(n)}return this.handlers[e]=this.handlers[e].filter(r=>r.persistent),this.handlers[e].length===0&&delete this.handlers[e],!0}listeners(e){return[...this.handlers[e]||[]].map(t=>t.listener)}events(){return Object.keys(this.handlers)}},FA=uv});var fv=C(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.ResponseHeader=void 0;var Xu=class{};Ys.ResponseHeader=Xu});var hv=C(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.ResponseStatus=void 0;var Ju=class e{constructor(t,r){this.message=t,this.code=r}static fromString(t){let r=t==null?void 0:t.split(" ",2);if(r==null||r.length===1)return new e(t);let n=parseInt(r[0],10);return Number.isNaN(n)?new e(t):new e(r[1],n)}isSuccessful(){return this.code!==void 0&&this.code>=200&&this.code<300}};Xs.ResponseStatus=Ju});var el=C(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.Response=void 0;var VA=fv(),KA=hv(),Zu=class e{constructor(){this.Header=new VA.ResponseHeader}static parse(t){let r=JSON.parse(t),n=r.Header.StatusCode==null?void 0:KA.ResponseStatus.fromString(r.Header.StatusCode),i=Object.assign({},r.Header,{StatusCode:n,MessageBodyType:r.Header.MessageBodyType});if(i.MessageBodyType==null)return Object.assign(new e,{Header:i});let a=Object.keys(r.Body||{})[0],s=a!=null&&r.Body[a]||void 0;return Object.assign(new e,r,{Header:i,Body:s})}};Js.Response=Zu});var dv=C(Zs=>{"use strict";Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Parser=void 0;var GA=an(),jA=el(),tl=class extends GA.EventEmitter{constructor(){super(...arguments),this.buffer=""}parse(t,r){let n=this.buffer+t.toString(),i=n.split(/\r?\n/);if(i.length-1===0){this.buffer=n;return}this.buffer=i[i.length-1]||"";for(let a of i.slice(0,i.length-1))r(jA.Response.parse(a))}};Zs.Parser=tl});var pv=C(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.ExceptionDetail=void 0;var rl=class{constructor(){this.Message=""}};eo.ExceptionDetail=rl});var yv=C(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.Socket=void 0;var HA=an(),vv=require("tls"),$A=1e4,zA=3e4,nl=class extends HA.EventEmitter{constructor(t,r,n){super(),this.onSocketData=i=>{this.emit("Data",i)},this.onSocketTimeout=()=>{this.emit("Error",new Error("connect ETIMEDOUT"))},this.onSocketClose=()=>{this.emit("Disconnect")},this.onSocketError=i=>{this.emit("Error",i)},this.host=t,this.port=r,this.certificate=n}connect(){return new Promise((t,r)=>{let n=(0,vv.connect)(this.port,this.host,{secureContext:(0,vv.createSecureContext)(this.certificate),secureProtocol:"TLS_method",rejectUnauthorized:!1});n.once("secureConnect",()=>{this.connection=n,this.connection.off("error",r),this.connection.on("timeout",this.onSocketTimeout),this.connection.on("error",this.onSocketError),this.connection.on("close",this.onSocketClose),this.connection.on("data",this.onSocketData),this.connection.setKeepAlive(!0,$A),this.connection.setTimeout(zA),t(this.connection.getProtocol()||"Unknown")}),n.once("error",r)})}disconnect(){var t,r;(t=this.connection)===null||t===void 0||t.end(),(r=this.connection)===null||r===void 0||r.destroy()}write(t){return new Promise((r,n)=>{if(this.connection==null)return n(new Error("connection not established"));this.connection.write(`${JSON.stringify(t)}
`,i=>i!=null?n(i):r())})}};to.Socket=nl});var sl=C(yi=>{"use strict";var al=yi&&yi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yi,"__esModule",{value:!0});yi.Connection=void 0;var gv=al(require("fs")),WA=al(require("path")),QA=al(require("net")),YA=require("bson"),XA=Ku(),ro=(iv(),Bb(nv)),JA=dv(),mv=pv(),ZA=el(),e_=yv(),Sv=8083,t_=8081,r_=1e3,il=class extends JA.Parser{constructor(t,r){super(),this.secure=!1,this.teardown=!1,this.requests=new Map,this.subscriptions=new Map,this.onResponse=n=>{let i=n.Header.ClientTag;if(i==null){this.emit("Message",n);return}let a=this.requests.get(i);a!=null&&(clearTimeout(a.timeout),this.requests.delete(i),a.resolve(n));let s=this.subscriptions.get(i);s!=null&&s.callback(n)},this.onSocketData=n=>{this.secure?this.parse(n,this.onResponse):this.emit("Message",JSON.parse(n.toString()))},this.onSocketDisconnect=()=>{this.teardown||this.emit("Disconnect")},this.onSocketError=n=>{this.emit("Error",n)},this.host=t,this.secure=r!=null,this.certificate=Object.assign({ca:"",cert:"",key:""},r!=null?r:this.authorityCertificate())}static reachable(t){return new Promise(r=>{let n=new QA.default.Socket,i=a=>{n.destroy(),r(a)};n.setTimeout(r_),n.once("error",()=>i(!1)),n.once("timeout",()=>i(!1)),n.connect(Sv,t,()=>i(!0))})}connect(){return new Promise((t,r)=>{this.teardown=!1,this.socket=void 0;let n=[...this.subscriptions.values()],i=new e_.Socket(this.host,this.secure?t_:Sv,this.certificate);i.on("Data",this.onSocketData),i.on("Error",this.onSocketError),i.on("Disconnect",this.onSocketDisconnect),i.connect().then(a=>{this.physicalAccess(this.secure).then(()=>{let s=[];if(this.subscriptions.clear(),this.socket=i,this.secure)for(let o of n)s.push(this.subscribe(o.url,o.listener));Promise.all(s).then(()=>{this.emit("Connect",a),t()})})}).catch(a=>r(a))})}disconnect(){var t;this.teardown=!0,this.secure&&this.drainRequests(),this.subscriptions.clear(),(t=this.socket)===null||t===void 0||t.disconnect()}read(t){return new Promise((r,n)=>{let i=(0,ro.v4)();if(!this.secure)return n(new Error("Only available for secure connections"));this.sendRequest(i,"ReadRequest",t).then(a=>a.Body==null?n(new Error(`${t} no body`)):a.Body instanceof mv.ExceptionDetail?n(new Error(a.Body.Message)):r(a.Body)).catch(a=>n(a))})}authenticate(t){return new Promise((r,n)=>{var i;if(this.secure)return n(new Error("Only available for physical connections"));let a={Header:{RequestType:"Execute",Url:"/pair",ClientTag:"get-cert"},Body:{CommandType:"CSR",Parameters:{CSR:t.cert,DisplayName:"get_lutron_cert.py",DeviceUID:"000000000000",Role:"Admin"}}},s=setTimeout(()=>n(new Error("Authentication timeout exceeded")),5e3);this.once("Message",o=>{clearTimeout(s),r({ca:o.Body.SigningResult.RootCertificate,cert:o.Body.SigningResult.Certificate,key:XA.pki.privateKeyToPem(t.key)})}),(i=this.socket)===null||i===void 0||i.write(a)})}update(t,r){return new Promise((n,i)=>{let a=(0,ro.v4)();if(!this.secure)return i(new Error("Only available for secure connections"));this.sendRequest(a,"UpdateRequest",t,r).then(s=>s.Body instanceof mv.ExceptionDetail?i(new Error(s.Body.Message)):n(s.Body)).catch(s=>i(s))})}command(t,r){return new Promise((n,i)=>{let a=(0,ro.v4)();if(!this.secure)return i(new Error("Only available for secure connections"));this.sendRequest(a,"CreateRequest",t,r).then(()=>n()).catch(s=>i(s))})}subscribe(t,r){return new Promise((n,i)=>{if(!this.secure)return i(new Error("Only available for secure connections"));let a=(0,ro.v4)();this.sendRequest(a,"SubscribeRequest",t).then(s=>{s.Header.StatusCode!=null&&s.Header.StatusCode.isSuccessful()&&this.subscriptions.set(a,{url:t,listener:r,callback:o=>r(o.Body)}),n()}).catch(s=>i(s))})}drainRequests(){for(let t of this.requests.keys()){let r=this.requests.get(t);clearTimeout(r.timeout)}this.requests.clear()}sendRequest(t,r,n,i){return new Promise((a,s)=>{if(this.requests.has(t)){let u=this.requests.get(t);u.reject(new Error(`tag "${t}" reused`)),clearTimeout(u.timeout),this.requests.delete(t)}let o={CommuniqueType:r,Header:{ClientTag:t,Url:n},Body:i};if(this.socket==null)return s(new Error("Connection not established"));this.socket.write(o).then(()=>{this.requests.set(t,{message:o,resolve:a,reject:s,timeout:setTimeout(()=>a(ZA.Response.parse(JSON.stringify({Header:{MessageBodyType:"ExceptionDetail"},Body:{Message:"Request timeout"}}))),5e3)})}).catch(u=>s(u))})}authorityCertificate(){let t=WA.default.resolve(__dirname,"../authority");if(gv.default.existsSync(t)){let r=gv.default.readFileSync(t);if(r==null)return null;let n=YA.BSON.deserialize(r);return n.ca=Buffer.from(n.ca,"base64").toString("utf8"),n.key=Buffer.from(n.key,"base64").toString("utf8"),n.cert=Buffer.from(n.cert,"base64").toString("utf8"),n}return null}physicalAccess(t){return new Promise((r,n)=>{if(t)return r();let i=setTimeout(()=>n(new Error("Physical timeout exceeded")),6e4);this.once("Message",a=>a.Body.Status.Permissions.includes("PhysicalAccess")?(clearTimeout(i),r()):n(new Error("Unknown pairing error")))})}};yi.Connection=il});var Cv=C(gi=>{"use strict";var n_=gi&&gi.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(l){try{c(n.next(l))}catch(f){s(f)}}function u(l){try{c(n.throw(l))}catch(f){s(f)}}function c(l){l.done?a(l.value):i(l.value).then(o,u)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(gi,"__esModule",{value:!0});gi.Association=void 0;var ol=Ku(),i_=Pe(),a_=sl(),cl=class{constructor(t){let r=t.addresses.find(n=>n.family===i_.HostAddressFamily.IPv4)||t.addresses[0];this.connection=new a_.Connection(r.address)}authenticate(){return n_(this,void 0,void 0,function*(){return new Promise((t,r)=>{this.connection.connect().then(()=>{this.createCertificateRequest("mkellsy-mqtt-lutron").then(n=>{this.connection.authenticate(n).then(i=>t(i)).catch(i=>r(i))}).catch(n=>r(n))}).catch(n=>r(n))})})}createCertificateRequest(t){return new Promise((r,n)=>{ol.pki.rsa.generateKeyPair({bits:2048},(i,a)=>{if(i==null){let s=ol.pki.createCertificationRequest();return s.publicKey=a.publicKey,s.setSubject([{name:"commonName",value:t}]),s.sign(a.privateKey),r({key:a.privateKey,cert:ol.pki.certificationRequestToPem(s)})}return n(new Error("Error generating RSA keys"))})})}};gi.Association=cl});var fl=C(mi=>{"use strict";var ll=mi&&mi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mi,"__esModule",{value:!0});mi.Context=void 0;var Un=ll(require("fs")),wa=ll(require("path")),Ev=ll(require("os")),bv=require("bson"),ul=class{constructor(){this.context={};let t=this.open("pairing")||{},r=Object.keys(t);for(let n=0;n<r.length;n++)t[r[n]]=this.decrypt(t[r[n]]);this.context=t}get processors(){return Object.keys(this.context).filter(t=>t!=="authority")}has(t){return this.context[t]!=null}get(t){return this.context[t]}set(t,r){this.context[t.id]=Object.assign({},r),this.save("pairing",this.context)}decrypt(t){return t==null?null:(t.ca=Buffer.from(t.ca,"base64").toString("utf8"),t.key=Buffer.from(t.key,"base64").toString("utf8"),t.cert=Buffer.from(t.cert,"base64").toString("utf8"),t)}encrypt(t){return t==null?null:(t.ca=Buffer.from(t.ca).toString("base64"),t.key=Buffer.from(t.key).toString("base64"),t.cert=Buffer.from(t.cert).toString("base64"),t)}open(t){let r=wa.default.join(Ev.default.homedir(),".leap");if(Un.default.existsSync(r)||Un.default.mkdirSync(r),Un.default.existsSync(wa.default.join(r,t))){let n=Un.default.readFileSync(wa.default.join(r,t));return bv.BSON.deserialize(n)}return null}save(t,r){let n=wa.default.join(Ev.default.homedir(),".leap");Un.default.existsSync(n)||Un.default.mkdirSync(n);let i=Object.assign({},r),a=Object.keys(i);for(let s=0;s<a.length;s++)i[a[s]]=this.encrypt(i[a[s]]);Un.default.writeFileSync(wa.default.join(n,t),bv.BSON.serialize(i))}};mi.Context=ul});var hl=C((HL,Tv)=>{"use strict";var xv=Object.prototype.toString;Tv.exports=function(t){var r=xv.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&xv.call(t.callee)==="[object Function]"),n}});var Dv=C(($L,Nv)=>{"use strict";var Ov;Object.keys||(Ba=Object.prototype.hasOwnProperty,dl=Object.prototype.toString,Av=hl(),pl=Object.prototype.propertyIsEnumerable,_v=!pl.call({toString:null},"toString"),Iv=pl.call(function(){},"prototype"),Ra=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],no=function(e){var t=e.constructor;return t&&t.prototype===e},wv={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Bv=function(){if(typeof window=="undefined")return!1;for(var e in window)try{if(!wv["$"+e]&&Ba.call(window,e)&&window[e]!==null&&typeof window[e]=="object")try{no(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),Rv=function(e){if(typeof window=="undefined"||!Bv)return no(e);try{return no(e)}catch(t){return!1}},Ov=function(t){var r=t!==null&&typeof t=="object",n=dl.call(t)==="[object Function]",i=Av(t),a=r&&dl.call(t)==="[object String]",s=[];if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var o=Iv&&n;if(a&&t.length>0&&!Ba.call(t,0))for(var u=0;u<t.length;++u)s.push(String(u));if(i&&t.length>0)for(var c=0;c<t.length;++c)s.push(String(c));else for(var l in t)!(o&&l==="prototype")&&Ba.call(t,l)&&s.push(String(l));if(_v)for(var f=Rv(t),h=0;h<Ra.length;++h)!(f&&Ra[h]==="constructor")&&Ba.call(t,Ra[h])&&s.push(Ra[h]);return s});var Ba,dl,Av,pl,_v,Iv,Ra,no,wv,Bv,Rv;Nv.exports=Ov});var ao=C((zL,kv)=>{"use strict";var s_=Array.prototype.slice,o_=hl(),Pv=Object.keys,io=Pv?function(t){return Pv(t)}:Dv(),Lv=Object.keys;io.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return o_(n)?Lv(s_.call(n)):Lv(n)})}else Object.keys=io;return Object.keys||io};kv.exports=io});var so=C((WL,Uv)=>{"use strict";Uv.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}});var vl=C((QL,Mv)=>{"use strict";var qv=typeof Symbol!="undefined"&&Symbol,c_=so();Mv.exports=function(){return typeof qv!="function"||typeof Symbol!="function"||typeof qv("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:c_()}});var Kv=C((YL,Vv)=>{"use strict";var Fv={foo:{}},u_=Object;Vv.exports=function(){return{__proto__:Fv}.foo===Fv.foo&&!({__proto__:null}instanceof u_)}});var Hv=C((XL,jv)=>{"use strict";var l_="Function.prototype.bind called on incompatible ",f_=Object.prototype.toString,h_=Math.max,d_="[object Function]",Gv=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var a=0;a<r.length;a+=1)n[a+t.length]=r[a];return n},p_=function(t,r){for(var n=[],i=r||0,a=0;i<t.length;i+=1,a+=1)n[a]=t[i];return n},v_=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};jv.exports=function(t){var r=this;if(typeof r!="function"||f_.apply(r)!==d_)throw new TypeError(l_+r);for(var n=p_(arguments,1),i,a=function(){if(this instanceof i){var l=r.apply(this,Gv(n,arguments));return Object(l)===l?l:this}return r.apply(t,Gv(n,arguments))},s=h_(0,r.length-n.length),o=[],u=0;u<s;u++)o[u]="$"+u;if(i=Function("binder","return function ("+v_(o,",")+"){ return binder.apply(this,arguments); }")(a),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var oo=C((JL,$v)=>{"use strict";var y_=Hv();$v.exports=Function.prototype.bind||y_});var Wv=C((ZL,zv)=>{"use strict";var g_=Function.prototype.call,m_=Object.prototype.hasOwnProperty,S_=oo();zv.exports=S_.call(g_,m_)});var $t=C((e6,Zv)=>{"use strict";var ue,bi=SyntaxError,Jv=Function,Ei=TypeError,yl=function(e){try{return Jv('"use strict"; return ('+e+").constructor;")()}catch(t){}},qn=Object.getOwnPropertyDescriptor;if(qn)try{qn({},"")}catch(e){qn=null}var gl=function(){throw new Ei},C_=qn?function(){try{return arguments.callee,gl}catch(e){try{return qn(arguments,"callee").get}catch(t){return gl}}}():gl,Si=vl()(),E_=Kv()(),Ve=Object.getPrototypeOf||(E_?function(e){return e.__proto__}:null),Ci={},b_=typeof Uint8Array=="undefined"||!Ve?ue:Ve(Uint8Array),Mn={"%AggregateError%":typeof AggregateError=="undefined"?ue:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer=="undefined"?ue:ArrayBuffer,"%ArrayIteratorPrototype%":Si&&Ve?Ve([][Symbol.iterator]()):ue,"%AsyncFromSyncIteratorPrototype%":ue,"%AsyncFunction%":Ci,"%AsyncGenerator%":Ci,"%AsyncGeneratorFunction%":Ci,"%AsyncIteratorPrototype%":Ci,"%Atomics%":typeof Atomics=="undefined"?ue:Atomics,"%BigInt%":typeof BigInt=="undefined"?ue:BigInt,"%BigInt64Array%":typeof BigInt64Array=="undefined"?ue:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array=="undefined"?ue:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView=="undefined"?ue:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array=="undefined"?ue:Float32Array,"%Float64Array%":typeof Float64Array=="undefined"?ue:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry=="undefined"?ue:FinalizationRegistry,"%Function%":Jv,"%GeneratorFunction%":Ci,"%Int8Array%":typeof Int8Array=="undefined"?ue:Int8Array,"%Int16Array%":typeof Int16Array=="undefined"?ue:Int16Array,"%Int32Array%":typeof Int32Array=="undefined"?ue:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Si&&Ve?Ve(Ve([][Symbol.iterator]())):ue,"%JSON%":typeof JSON=="object"?JSON:ue,"%Map%":typeof Map=="undefined"?ue:Map,"%MapIteratorPrototype%":typeof Map=="undefined"||!Si||!Ve?ue:Ve(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise=="undefined"?ue:Promise,"%Proxy%":typeof Proxy=="undefined"?ue:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect=="undefined"?ue:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set=="undefined"?ue:Set,"%SetIteratorPrototype%":typeof Set=="undefined"||!Si||!Ve?ue:Ve(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer=="undefined"?ue:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Si&&Ve?Ve(""[Symbol.iterator]()):ue,"%Symbol%":Si?Symbol:ue,"%SyntaxError%":bi,"%ThrowTypeError%":C_,"%TypedArray%":b_,"%TypeError%":Ei,"%Uint8Array%":typeof Uint8Array=="undefined"?ue:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray=="undefined"?ue:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array=="undefined"?ue:Uint16Array,"%Uint32Array%":typeof Uint32Array=="undefined"?ue:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap=="undefined"?ue:WeakMap,"%WeakRef%":typeof WeakRef=="undefined"?ue:WeakRef,"%WeakSet%":typeof WeakSet=="undefined"?ue:WeakSet};if(Ve)try{null.error}catch(e){Qv=Ve(Ve(e)),Mn["%Error.prototype%"]=Qv}var Qv,x_=function e(t){var r;if(t==="%AsyncFunction%")r=yl("async function () {}");else if(t==="%GeneratorFunction%")r=yl("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=yl("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ve&&(r=Ve(i.prototype))}return Mn[t]=r,r},Yv={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Oa=oo(),co=Wv(),T_=Oa.call(Function.call,Array.prototype.concat),A_=Oa.call(Function.apply,Array.prototype.splice),Xv=Oa.call(Function.call,String.prototype.replace),uo=Oa.call(Function.call,String.prototype.slice),__=Oa.call(Function.call,RegExp.prototype.exec),I_=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,w_=/\\(\\)?/g,B_=function(t){var r=uo(t,0,1),n=uo(t,-1);if(r==="%"&&n!=="%")throw new bi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new bi("invalid intrinsic syntax, expected opening `%`");var i=[];return Xv(t,I_,function(a,s,o,u){i[i.length]=o?Xv(u,w_,"$1"):s||a}),i},R_=function(t,r){var n=t,i;if(co(Yv,n)&&(i=Yv[n],n="%"+i[0]+"%"),co(Mn,n)){var a=Mn[n];if(a===Ci&&(a=x_(n)),typeof a=="undefined"&&!r)throw new Ei("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:a}}throw new bi("intrinsic "+t+" does not exist!")};Zv.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Ei("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ei('"allowMissing" argument must be a boolean');if(__(/^%?[^%]*%?$/,t)===null)throw new bi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=B_(t),i=n.length>0?n[0]:"",a=R_("%"+i+"%",r),s=a.name,o=a.value,u=!1,c=a.alias;c&&(i=c[0],A_(n,T_([0,1],c)));for(var l=1,f=!0;l<n.length;l+=1){var h=n[l],p=uo(h,0,1),d=uo(h,-1);if((p==='"'||p==="'"||p==="`"||d==='"'||d==="'"||d==="`")&&p!==d)throw new bi("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(u=!0),i+="."+h,s="%"+i+"%",co(Mn,s))o=Mn[s];else if(o!=null){if(!(h in o)){if(!r)throw new Ei("base intrinsic for "+t+" exists, but the property is not available.");return}if(qn&&l+1>=n.length){var m=qn(o,h);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?o=m.get:o=o[h]}else f=co(o,h),o=o[h];f&&!u&&(Mn[s]=o)}}return o}});var Na=C((t6,ey)=>{"use strict";var O_=$t(),ml=O_("%Object.defineProperty%",!0),Sl=function(){if(ml)try{return ml({},"a",{value:1}),!0}catch(t){return!1}return!1};Sl.hasArrayLengthDefineBug=function(){if(!Sl())return null;try{return ml([],"length",{value:1}).length!==1}catch(t){return!0}};ey.exports=Sl});var fo=C((r6,ty)=>{"use strict";var N_=$t(),lo=N_("%Object.getOwnPropertyDescriptor%",!0);if(lo)try{lo([],"length")}catch(e){lo=null}ty.exports=lo});var ho=C((n6,ny)=>{"use strict";var D_=Na()(),Cl=$t(),Da=D_&&Cl("%Object.defineProperty%",!0);if(Da)try{Da({},"a",{value:1})}catch(e){Da=!1}var P_=Cl("%SyntaxError%"),xi=Cl("%TypeError%"),ry=fo();ny.exports=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new xi("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new xi("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new xi("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new xi("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new xi("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new xi("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,a=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,u=!!ry&&ry(t,r);if(Da)Da(t,r,{configurable:s===null&&u?u.configurable:!s,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:a===null&&u?u.writable:!a});else if(o||!i&&!a&&!s)t[r]=n;else throw new P_("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var sn=C((i6,oy)=>{"use strict";var L_=ao(),k_=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",U_=Object.prototype.toString,q_=Array.prototype.concat,iy=ho(),M_=function(e){return typeof e=="function"&&U_.call(e)==="[object Function]"},ay=Na()(),F_=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!M_(n)||!n())return}ay?iy(e,t,r,!0):iy(e,t,r)},sy=function(e,t){var r=arguments.length>2?arguments[2]:{},n=L_(t);k_&&(n=q_.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)F_(e,n[i],t[n[i]],r[n[i]])};sy.supportsDescriptors=!!ay;oy.exports=sy});var dy=C((a6,hy)=>{"use strict";var fy=$t(),cy=ho(),V_=Na()(),uy=fo(),ly=fy("%TypeError%"),K_=fy("%Math.floor%");hy.exports=function(t,r){if(typeof t!="function")throw new ly("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||K_(r)!==r)throw new ly("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,a=!0;if("length"in t&&uy){var s=uy(t,"length");s&&!s.configurable&&(i=!1),s&&!s.writable&&(a=!1)}return(i||a||!n)&&(V_?cy(t,"length",r,!0,!0):cy(t,"length",r)),t}});var Fn=C((s6,po)=>{"use strict";var El=oo(),Ti=$t(),G_=dy(),j_=Ti("%TypeError%"),vy=Ti("%Function.prototype.apply%"),yy=Ti("%Function.prototype.call%"),gy=Ti("%Reflect.apply%",!0)||El.call(yy,vy),Pa=Ti("%Object.defineProperty%",!0),H_=Ti("%Math.max%");if(Pa)try{Pa({},"a",{value:1})}catch(e){Pa=null}po.exports=function(t){if(typeof t!="function")throw new j_("a function is required");var r=gy(El,yy,arguments);return G_(r,1+H_(0,t.length-(arguments.length-1)),!0)};var py=function(){return gy(El,vy,arguments)};Pa?Pa(po.exports,"apply",{value:py}):po.exports.apply=py});var Mt=C((o6,Cy)=>{"use strict";var my=$t(),Sy=Fn(),$_=Sy(my("String.prototype.indexOf"));Cy.exports=function(t,r){var n=my(t,!!r);return typeof n=="function"&&$_(t,".prototype.")>-1?Sy(n):n}});var bl=C((c6,Ay)=>{"use strict";var z_=ao(),xy=so()(),Ty=Mt(),Ey=Object,W_=Ty("Array.prototype.push"),by=Ty("Object.prototype.propertyIsEnumerable"),Q_=xy?Object.getOwnPropertySymbols:null;Ay.exports=function(t,r){if(t==null)throw new TypeError("target must be an object");var n=Ey(t);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var a=Ey(arguments[i]),s=z_(a),o=xy&&(Object.getOwnPropertySymbols||Q_);if(o)for(var u=o(a),c=0;c<u.length;++c){var l=u[c];by(a,l)&&W_(s,l)}for(var f=0;f<s.length;++f){var h=s[f];if(by(a,h)){var p=a[h];n[h]=p}}}return n}});var Tl=C((u6,_y)=>{"use strict";var xl=bl(),Y_=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),r={},n=0;n<t.length;++n)r[t[n]]=t[n];var i=Object.assign({},r),a="";for(var s in i)a+=s;return e!==a},X_=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}return!1};_y.exports=function(){return!Object.assign||Y_()||X_()?xl:Object.assign}});var wy=C((l6,Iy)=>{"use strict";var J_=sn(),Z_=Tl();Iy.exports=function(){var t=Z_();return J_(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}});var Ny=C((f6,Oy)=>{"use strict";var eI=sn(),tI=Fn(),rI=bl(),By=Tl(),nI=wy(),iI=tI.apply(By()),Ry=function(t,r){return iI(Object,arguments)};eI(Ry,{getPolyfill:By,implementation:rI,shim:nI});Oy.exports=Ry});var Py=C((h6,Dy)=>{"use strict";var ka=function(){return typeof function(){}.name=="string"},La=Object.getOwnPropertyDescriptor;if(La)try{La([],"length")}catch(e){La=null}ka.functionsHaveConfigurableNames=function(){if(!ka()||!La)return!1;var t=La(function(){},"name");return!!t&&!!t.configurable};var aI=Function.prototype.bind;ka.boundFunctionsHaveNames=function(){return ka()&&typeof aI=="function"&&function(){}.bind().name!==""};Dy.exports=ka});var Uy=C((d6,ky)=>{"use strict";var Ly=ho(),sI=Na()(),oI=Py().functionsHaveConfigurableNames(),cI=TypeError;ky.exports=function(t,r){if(typeof t!="function")throw new cI("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||oI)&&(sI?Ly(t,"name",r,!0,!0):Ly(t,"name",r)),t}});var Al=C((p6,qy)=>{"use strict";var uI=Uy(),lI=Object,fI=TypeError;qy.exports=uI(function(){if(this!=null&&this!==lI(this))throw new fI("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t},"get flags",!0)});var _l=C((v6,My)=>{"use strict";var hI=Al(),dI=sn().supportsDescriptors,pI=Object.getOwnPropertyDescriptor;My.exports=function(){if(dI&&/a/mig.flags==="gim"){var t=pI(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return t.get}}return hI}});var Ky=C((y6,Vy)=>{"use strict";var vI=sn().supportsDescriptors,yI=_l(),gI=Object.getOwnPropertyDescriptor,mI=Object.defineProperty,SI=TypeError,Fy=Object.getPrototypeOf,CI=/a/;Vy.exports=function(){if(!vI||!Fy)throw new SI("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=yI(),r=Fy(CI),n=gI(r,"flags");return(!n||n.get!==t)&&mI(r,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var $y=C((g6,Hy)=>{"use strict";var EI=sn(),bI=Fn(),xI=Al(),Gy=_l(),TI=Ky(),jy=bI(Gy());EI(jy,{getPolyfill:Gy,implementation:xI,shim:TI});Hy.exports=jy});var Qy=C((m6,Wy)=>{"use strict";var zy=Symbol.iterator;Wy.exports=function(t){if(t!=null&&typeof t[zy]!="undefined")return t[zy]()}});var Xy=C((S6,Yy)=>{Yy.exports=require("util").inspect});var gg=C((C6,yg)=>{var kl=typeof Map=="function"&&Map.prototype,Il=Object.getOwnPropertyDescriptor&&kl?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,yo=kl&&Il&&typeof Il.get=="function"?Il.get:null,Jy=kl&&Map.prototype.forEach,Ul=typeof Set=="function"&&Set.prototype,wl=Object.getOwnPropertyDescriptor&&Ul?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,go=Ul&&wl&&typeof wl.get=="function"?wl.get:null,Zy=Ul&&Set.prototype.forEach,AI=typeof WeakMap=="function"&&WeakMap.prototype,qa=AI?WeakMap.prototype.has:null,_I=typeof WeakSet=="function"&&WeakSet.prototype,Ma=_I?WeakSet.prototype.has:null,II=typeof WeakRef=="function"&&WeakRef.prototype,eg=II?WeakRef.prototype.deref:null,wI=Boolean.prototype.valueOf,BI=Object.prototype.toString,RI=Function.prototype.toString,OI=String.prototype.match,ql=String.prototype.slice,cn=String.prototype.replace,NI=String.prototype.toUpperCase,tg=String.prototype.toLowerCase,lg=RegExp.prototype.test,rg=Array.prototype.concat,vr=Array.prototype.join,DI=Array.prototype.slice,ng=Math.floor,Ol=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Bl=Object.getOwnPropertySymbols,Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ft=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ai||!0)?Symbol.toStringTag:null,fg=Object.prototype.propertyIsEnumerable,ig=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function ag(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||lg.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-ng(-e):ng(e);if(n!==e){var i=String(n),a=ql.call(t,i.length+1);return cn.call(i,r,"$&_")+"."+cn.call(cn.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return cn.call(t,r,"$&_")}var Dl=Xy(),sg=Dl.custom,og=dg(sg)?sg:null;yg.exports=function e(t,r,n,i){var a=r||{};if(on(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(on(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=on(a,"customInspect")?a.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(on(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(on(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=a.numericSeparator;if(typeof t=="undefined")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return vg(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return o?ag(t,u):u}if(typeof t=="bigint"){var c=String(t)+"n";return o?ag(t,c):c}var l=typeof a.depth=="undefined"?5:a.depth;if(typeof n=="undefined"&&(n=0),n>=l&&l>0&&typeof t=="object")return Pl(t)?"[Array]":"[Object]";var f=XI(a,n);if(typeof i=="undefined")i=[];else if(pg(i,t)>=0)return"[Circular]";function h(ye,Be,ne){if(Be&&(i=DI.call(i),i.push(Be)),ne){var ve={depth:a.depth};return on(a,"quoteStyle")&&(ve.quoteStyle=a.quoteStyle),e(ye,ve,n+1,i)}return e(ye,a,n+1,i)}if(typeof t=="function"&&!cg(t)){var p=KI(t),d=vo(t,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(d.length>0?" { "+vr.call(d,", ")+" }":"")}if(dg(t)){var m=Ai?cn.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Nl.call(t);return typeof t=="object"&&!Ai?Ua(m):m}if(WI(t)){for(var S="<"+tg.call(String(t.nodeName)),b=t.attributes||[],_=0;_<b.length;_++)S+=" "+b[_].name+"="+hg(PI(b[_].value),"double",a);return S+=">",t.childNodes&&t.childNodes.length&&(S+="..."),S+="</"+tg.call(String(t.nodeName))+">",S}if(Pl(t)){if(t.length===0)return"[]";var I=vo(t,h);return f&&!YI(I)?"["+Ll(I,f)+"]":"[ "+vr.call(I,", ")+" ]"}if(kI(t)){var O=vo(t,h);return!("cause"in Error.prototype)&&"cause"in t&&!fg.call(t,"cause")?"{ ["+String(t)+"] "+vr.call(rg.call("[cause]: "+h(t.cause),O),", ")+" }":O.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+vr.call(O,", ")+" }"}if(typeof t=="object"&&s){if(og&&typeof t[og]=="function"&&Dl)return Dl(t,{depth:l-n});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(GI(t)){var R=[];return Jy&&Jy.call(t,function(ye,Be){R.push(h(Be,t,!0)+" => "+h(ye,t))}),ug("Map",yo.call(t),R,f)}if($I(t)){var B=[];return Zy&&Zy.call(t,function(ye){B.push(h(ye,t))}),ug("Set",go.call(t),B,f)}if(jI(t))return Rl("WeakMap");if(zI(t))return Rl("WeakSet");if(HI(t))return Rl("WeakRef");if(qI(t))return Ua(h(Number(t)));if(FI(t))return Ua(h(Ol.call(t)));if(MI(t))return Ua(wI.call(t));if(UI(t))return Ua(h(String(t)));if(typeof window!="undefined"&&t===window)return"{ [object Window] }";if(t===global)return"{ [object globalThis] }";if(!LI(t)&&!cg(t)){var V=vo(t,h),K=ig?ig(t)===Object.prototype:t instanceof Object||t.constructor===Object,W=t instanceof Object?"":"null prototype",Z=!K&&ft&&Object(t)===t&&ft in t?ql.call(un(t),8,-1):W?"Object":"",re=K||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",le=re+(Z||W?"["+vr.call(rg.call([],Z||[],W||[]),": ")+"] ":"");return V.length===0?le+"{}":f?le+"{"+Ll(V,f)+"}":le+"{ "+vr.call(V,", ")+" }"}return String(t)};function hg(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function PI(e){return cn.call(String(e),/"/g,"&quot;")}function Pl(e){return un(e)==="[object Array]"&&(!ft||!(typeof e=="object"&&ft in e))}function LI(e){return un(e)==="[object Date]"&&(!ft||!(typeof e=="object"&&ft in e))}function cg(e){return un(e)==="[object RegExp]"&&(!ft||!(typeof e=="object"&&ft in e))}function kI(e){return un(e)==="[object Error]"&&(!ft||!(typeof e=="object"&&ft in e))}function UI(e){return un(e)==="[object String]"&&(!ft||!(typeof e=="object"&&ft in e))}function qI(e){return un(e)==="[object Number]"&&(!ft||!(typeof e=="object"&&ft in e))}function MI(e){return un(e)==="[object Boolean]"&&(!ft||!(typeof e=="object"&&ft in e))}function dg(e){if(Ai)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!Nl)return!1;try{return Nl.call(e),!0}catch(t){}return!1}function FI(e){if(!e||typeof e!="object"||!Ol)return!1;try{return Ol.call(e),!0}catch(t){}return!1}var VI=Object.prototype.hasOwnProperty||function(e){return e in this};function on(e,t){return VI.call(e,t)}function un(e){return BI.call(e)}function KI(e){if(e.name)return e.name;var t=OI.call(RI.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function pg(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function GI(e){if(!yo||!e||typeof e!="object")return!1;try{yo.call(e);try{go.call(e)}catch(t){return!0}return e instanceof Map}catch(t){}return!1}function jI(e){if(!qa||!e||typeof e!="object")return!1;try{qa.call(e,qa);try{Ma.call(e,Ma)}catch(t){return!0}return e instanceof WeakMap}catch(t){}return!1}function HI(e){if(!eg||!e||typeof e!="object")return!1;try{return eg.call(e),!0}catch(t){}return!1}function $I(e){if(!go||!e||typeof e!="object")return!1;try{go.call(e);try{yo.call(e)}catch(t){return!0}return e instanceof Set}catch(t){}return!1}function zI(e){if(!Ma||!e||typeof e!="object")return!1;try{Ma.call(e,Ma);try{qa.call(e,qa)}catch(t){return!0}return e instanceof WeakSet}catch(t){}return!1}function WI(e){return!e||typeof e!="object"?!1:typeof HTMLElement!="undefined"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function vg(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return vg(ql.call(e,0,t.maxStringLength),t)+n}var i=cn.call(cn.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,QI);return hg(i,"single",t)}function QI(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+NI.call(t.toString(16))}function Ua(e){return"Object("+e+")"}function Rl(e){return e+" { ? }"}function ug(e,t,r,n){var i=n?Ll(r,n):vr.call(r,", ");return e+" ("+t+") {"+i+"}"}function YI(e){for(var t=0;t<e.length;t++)if(pg(e[t],`
`)>=0)return!1;return!0}function XI(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=vr.call(Array(e.indent+1)," ");else return null;return{base:r,prev:vr.call(Array(t+1),r)}}function Ll(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+vr.call(e,","+r)+`
`+t.prev}function vo(e,t){var r=Pl(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=on(e,i)?t(e[i],e):""}var a=typeof Bl=="function"?Bl(e):[],s;if(Ai){s={};for(var o=0;o<a.length;o++)s["$"+a[o]]=a[o]}for(var u in e)on(e,u)&&(r&&String(Number(u))===u&&u<e.length||Ai&&s["$"+u]instanceof Symbol||(lg.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e))));if(typeof Bl=="function")for(var c=0;c<a.length;c++)fg.call(e,a[c])&&n.push("["+t(a[c])+"]: "+t(e[a[c]],e));return n}});var Sg=C((E6,mg)=>{"use strict";var Ml=$t(),_i=Mt(),JI=gg(),ZI=Ml("%TypeError%"),mo=Ml("%WeakMap%",!0),So=Ml("%Map%",!0),ew=_i("WeakMap.prototype.get",!0),tw=_i("WeakMap.prototype.set",!0),rw=_i("WeakMap.prototype.has",!0),nw=_i("Map.prototype.get",!0),iw=_i("Map.prototype.set",!0),aw=_i("Map.prototype.has",!0),Fl=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},sw=function(e,t){var r=Fl(e,t);return r&&r.value},ow=function(e,t,r){var n=Fl(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},cw=function(e,t){return!!Fl(e,t)};mg.exports=function(){var t,r,n,i={assert:function(a){if(!i.has(a))throw new ZI("Side channel does not contain "+JI(a))},get:function(a){if(mo&&a&&(typeof a=="object"||typeof a=="function")){if(t)return ew(t,a)}else if(So){if(r)return nw(r,a)}else if(n)return sw(n,a)},has:function(a){if(mo&&a&&(typeof a=="object"||typeof a=="function")){if(t)return rw(t,a)}else if(So){if(r)return aw(r,a)}else if(n)return cw(n,a);return!1},set:function(a,s){mo&&a&&(typeof a=="object"||typeof a=="function")?(t||(t=new mo),tw(t,a,s)):So?(r||(r=new So),iw(r,a,s)):(n||(n={key:{},next:null}),ow(n,a,s))}};return i}});var Vl=C((b6,Eg)=>{"use strict";var Cg=function(e){return e!==e};Eg.exports=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Cg(t)&&Cg(r))}});var Kl=C((x6,bg)=>{"use strict";var uw=Vl();bg.exports=function(){return typeof Object.is=="function"?Object.is:uw}});var Tg=C((T6,xg)=>{"use strict";var lw=Kl(),fw=sn();xg.exports=function(){var t=lw();return fw(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var wg=C((A6,Ig)=>{"use strict";var hw=sn(),dw=Fn(),pw=Vl(),Ag=Kl(),vw=Tg(),_g=dw(Ag(),Object);hw(_g,{getPolyfill:Ag,implementation:pw,shim:vw});Ig.exports=_g});var ln=C((_6,Bg)=>{"use strict";var yw=so();Bg.exports=function(){return yw()&&!!Symbol.toStringTag}});var Ng=C((I6,Og)=>{"use strict";var gw=ln()(),mw=Mt(),Gl=mw("Object.prototype.toString"),Co=function(t){return gw&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Gl(t)==="[object Arguments]"},Rg=function(t){return Co(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Gl(t)!=="[object Array]"&&Gl(t.callee)==="[object Function]"},Sw=function(){return Co(arguments)}();Co.isLegacyArguments=Rg;Og.exports=Sw?Co:Rg});var Pg=C((w6,Dg)=>{var Cw={}.toString;Dg.exports=Array.isArray||function(e){return Cw.call(e)=="[object Array]"}});var qg=C((B6,Ug)=>{"use strict";var kg=Function.prototype.toString,Ii=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Hl,Eo;if(typeof Ii=="function"&&typeof Object.defineProperty=="function")try{Hl=Object.defineProperty({},"length",{get:function(){throw Eo}}),Eo={},Ii(function(){throw 42},null,Hl)}catch(e){e!==Eo&&(Ii=null)}else Ii=null;var Ew=/^\s*class\b/,$l=function(t){try{var r=kg.call(t);return Ew.test(r)}catch(n){return!1}},jl=function(t){try{return $l(t)?!1:(kg.call(t),!0)}catch(r){return!1}},bo=Object.prototype.toString,bw="[object Object]",xw="[object Function]",Tw="[object GeneratorFunction]",Aw="[object HTMLAllCollection]",_w="[object HTML document.all class]",Iw="[object HTMLCollection]",ww=typeof Symbol=="function"&&!!Symbol.toStringTag,Bw=!(0 in[,]),zl=function(){return!1};typeof document=="object"&&(Lg=document.all,bo.call(Lg)===bo.call(document.all)&&(zl=function(t){if((Bw||!t)&&(typeof t=="undefined"||typeof t=="object"))try{var r=bo.call(t);return(r===Aw||r===_w||r===Iw||r===bw)&&t("")==null}catch(n){}return!1}));var Lg;Ug.exports=Ii?function(t){if(zl(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Ii(t,null,Hl)}catch(r){if(r!==Eo)return!1}return!$l(t)&&jl(t)}:function(t){if(zl(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(ww)return jl(t);if($l(t))return!1;var r=bo.call(t);return r!==xw&&r!==Tw&&!/^\[object HTML/.test(r)?!1:jl(t)}});var Vg=C((R6,Fg)=>{"use strict";var Rw=qg(),Ow=Object.prototype.toString,Mg=Object.prototype.hasOwnProperty,Nw=function(t,r,n){for(var i=0,a=t.length;i<a;i++)Mg.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},Dw=function(t,r,n){for(var i=0,a=t.length;i<a;i++)n==null?r(t.charAt(i),i,t):r.call(n,t.charAt(i),i,t)},Pw=function(t,r,n){for(var i in t)Mg.call(t,i)&&(n==null?r(t[i],i,t):r.call(n,t[i],i,t))},Lw=function(t,r,n){if(!Rw(r))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),Ow.call(t)==="[object Array]"?Nw(t,r,i):typeof t=="string"?Dw(t,r,i):Pw(t,r,i)};Fg.exports=Lw});var Gg=C((O6,Kg)=>{"use strict";var Wl=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],kw=typeof globalThis=="undefined"?global:globalThis;Kg.exports=function(){for(var t=[],r=0;r<Wl.length;r++)typeof kw[Wl[r]]=="function"&&(t[t.length]=Wl[r]);return t}});var Zl=C((N6,zg)=>{"use strict";var To=Vg(),Uw=Gg(),jg=Fn(),Xl=Mt(),xo=fo(),qw=Xl("Object.prototype.toString"),$g=ln()(),Hg=typeof globalThis=="undefined"?global:globalThis,Yl=Uw(),Jl=Xl("String.prototype.slice"),Ql=Object.getPrototypeOf,Mw=Xl("Array.prototype.indexOf",!0)||function(t,r){for(var n=0;n<t.length;n+=1)if(t[n]===r)return n;return-1},Ao={__proto__:null};$g&&xo&&Ql?To(Yl,function(e){var t=new Hg[e];if(Symbol.toStringTag in t){var r=Ql(t),n=xo(r,Symbol.toStringTag);if(!n){var i=Ql(r);n=xo(i,Symbol.toStringTag)}Ao["$"+e]=jg(n.get)}}):To(Yl,function(e){var t=new Hg[e],r=t.slice||t.set;r&&(Ao["$"+e]=jg(r))});var Fw=function(t){var r=!1;return To(Ao,function(n,i){if(!r)try{"$"+n(t)===i&&(r=Jl(i,1))}catch(a){}}),r},Vw=function(t){var r=!1;return To(Ao,function(n,i){if(!r)try{n(t),r=Jl(i,1)}catch(a){}}),r};zg.exports=function(t){if(!t||typeof t!="object")return!1;if(!$g){var r=Jl(qw(t),8,-1);return Mw(Yl,r)>-1?r:r!=="Object"?!1:Vw(t)}return xo?Fw(t):null}});var Qg=C((D6,Wg)=>{"use strict";var Kw=Zl();Wg.exports=function(t){return!!Kw(t)}});var ef=C((P6,tm)=>{"use strict";var Gw=Fn(),jw=Mt(),em=$t(),Hw=Qg(),Yg=em("ArrayBuffer",!0),Xg=em("Float32Array",!0),_o=jw("ArrayBuffer.prototype.byteLength",!0),Jg=Yg&&!_o&&new Yg().slice,Zg=Jg&&Gw(Jg);tm.exports=_o||Zg?function(t){if(!t||typeof t!="object")return!1;try{return _o?_o(t):Zg(t,0),!0}catch(r){return!1}}:Xg?function(t){try{return new Xg(t).buffer===t&&!Hw(t)}catch(r){return typeof t=="object"&&r.name==="RangeError"}}:function(t){return!1}});var nm=C((L6,rm)=>{"use strict";var $w=Date.prototype.getDay,zw=function(t){try{return $w.call(t),!0}catch(r){return!1}},Ww=Object.prototype.toString,Qw="[object Date]",Yw=ln()();rm.exports=function(t){return typeof t!="object"||t===null?!1:Yw?zw(t):Ww.call(t)===Qw}});var cm=C((k6,om)=>{"use strict";var tf=Mt(),im=ln()(),am,sm,rf,nf;im&&(am=tf("Object.prototype.hasOwnProperty"),sm=tf("RegExp.prototype.exec"),rf={},Io=function(){throw rf},nf={toString:Io,valueOf:Io},typeof Symbol.toPrimitive=="symbol"&&(nf[Symbol.toPrimitive]=Io));var Io,Xw=tf("Object.prototype.toString"),Jw=Object.getOwnPropertyDescriptor,Zw="[object RegExp]";om.exports=im?function(t){if(!t||typeof t!="object")return!1;var r=Jw(t,"lastIndex"),n=r&&am(r,"value");if(!n)return!1;try{sm(t,nf)}catch(i){return i===rf}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:Xw(t)===Zw}});var fm=C((U6,lm)=>{"use strict";var eB=Mt(),um=eB("SharedArrayBuffer.prototype.byteLength",!0);lm.exports=um?function(t){if(!t||typeof t!="object")return!1;try{return um(t),!0}catch(r){return!1}}:function(t){return!1}});var dm=C((q6,hm)=>{"use strict";var tB=String.prototype.valueOf,rB=function(t){try{return tB.call(t),!0}catch(r){return!1}},nB=Object.prototype.toString,iB="[object String]",aB=ln()();hm.exports=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:aB?rB(t):nB.call(t)===iB}});var vm=C((M6,pm)=>{"use strict";var sB=Number.prototype.toString,oB=function(t){try{return sB.call(t),!0}catch(r){return!1}},cB=Object.prototype.toString,uB="[object Number]",lB=ln()();pm.exports=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:lB?oB(t):cB.call(t)===uB}});var mm=C((F6,gm)=>{"use strict";var ym=Mt(),fB=ym("Boolean.prototype.toString"),hB=ym("Object.prototype.toString"),dB=function(t){try{return fB(t),!0}catch(r){return!1}},pB="[object Boolean]",vB=ln()();gm.exports=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:vB&&Symbol.toStringTag in t?dB(t):hB(t)===pB}});var bm=C((V6,af)=>{"use strict";var yB=Object.prototype.toString,gB=vl()();gB?(Sm=Symbol.prototype.toString,Cm=/^Symbol\(.*\)$/,Em=function(t){return typeof t.valueOf()!="symbol"?!1:Cm.test(Sm.call(t))},af.exports=function(t){if(typeof t=="symbol")return!0;if(yB.call(t)!=="[object Symbol]")return!1;try{return Em(t)}catch(r){return!1}}):af.exports=function(t){return!1};var Sm,Cm,Em});var Am=C((K6,Tm)=>{"use strict";var xm=typeof BigInt!="undefined"&&BigInt;Tm.exports=function(){return typeof xm=="function"&&typeof BigInt=="function"&&typeof xm(42)=="bigint"&&typeof BigInt(42)=="bigint"}});var wm=C((G6,sf)=>{"use strict";var mB=Am()();mB?(_m=BigInt.prototype.valueOf,Im=function(t){try{return _m.call(t),!0}catch(r){}return!1},sf.exports=function(t){return t===null||typeof t=="undefined"||typeof t=="boolean"||typeof t=="string"||typeof t=="number"||typeof t=="symbol"||typeof t=="function"?!1:typeof t=="bigint"?!0:Im(t)}):sf.exports=function(t){return!1};var _m,Im});var Rm=C((j6,Bm)=>{"use strict";var SB=dm(),CB=vm(),EB=mm(),bB=bm(),xB=wm();Bm.exports=function(t){if(t==null||typeof t!="object"&&typeof t!="function")return null;if(SB(t))return"String";if(CB(t))return"Number";if(EB(t))return"Boolean";if(bB(t))return"Symbol";if(xB(t))return"BigInt"}});var Pm=C((H6,Dm)=>{"use strict";var of=typeof Map=="function"&&Map.prototype?Map:null,TB=typeof Set=="function"&&Set.prototype?Set:null,wo;of||(wo=function(t){return!1});var Nm=of?Map.prototype.has:null,Om=TB?Set.prototype.has:null;!wo&&!Nm&&(wo=function(t){return!1});Dm.exports=wo||function(t){if(!t||typeof t!="object")return!1;try{if(Nm.call(t),Om)try{Om.call(t)}catch(r){return!0}return t instanceof of}catch(r){}return!1}});var qm=C(($6,Um)=>{"use strict";var AB=typeof Map=="function"&&Map.prototype?Map:null,cf=typeof Set=="function"&&Set.prototype?Set:null,Bo;cf||(Bo=function(t){return!1});var Lm=AB?Map.prototype.has:null,km=cf?Set.prototype.has:null;!Bo&&!km&&(Bo=function(t){return!1});Um.exports=Bo||function(t){if(!t||typeof t!="object")return!1;try{if(km.call(t),Lm)try{Lm.call(t)}catch(r){return!0}return t instanceof cf}catch(r){}return!1}});var Vm=C((z6,Fm)=>{"use strict";var Ro=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,Mm=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,Oo;Ro||(Oo=function(t){return!1});var lf=Ro?Ro.prototype.has:null,uf=Mm?Mm.prototype.has:null;!Oo&&!lf&&(Oo=function(t){return!1});Fm.exports=Oo||function(t){if(!t||typeof t!="object")return!1;try{if(lf.call(t,lf),uf)try{uf.call(t,uf)}catch(r){return!0}return t instanceof Ro}catch(r){}return!1}});var Gm=C((W6,hf)=>{"use strict";var _B=$t(),Km=Mt(),IB=_B("%WeakSet%",!0),ff=Km("WeakSet.prototype.has",!0);ff?(No=Km("WeakMap.prototype.has",!0),hf.exports=function(t){if(!t||typeof t!="object")return!1;try{if(ff(t,ff),No)try{No(t,No)}catch(r){return!0}return t instanceof IB}catch(r){}return!1}):hf.exports=function(t){return!1};var No});var Hm=C((Q6,jm)=>{"use strict";var wB=Pm(),BB=qm(),RB=Vm(),OB=Gm();jm.exports=function(t){if(t&&typeof t=="object"){if(wB(t))return"Map";if(BB(t))return"Set";if(RB(t))return"WeakMap";if(OB(t))return"WeakSet"}return!1}});var Wm=C((Y6,zm)=>{"use strict";var NB=Mt(),$m=NB("ArrayBuffer.prototype.byteLength",!0),DB=ef();zm.exports=function(t){return DB(t)?$m?$m(t):t.byteLength:NaN}});var gr=C((X6,m1)=>{"use strict";var v1=Ny(),yr=Mt(),Qm=$y(),PB=$t(),wi=Qy(),LB=Sg(),Ym=wg(),Xm=Ng(),Jm=Pg(),Zm=ef(),e1=nm(),t1=cm(),r1=fm(),n1=ao(),i1=Rm(),a1=Hm(),s1=Zl(),o1=Wm(),c1=yr("SharedArrayBuffer.prototype.byteLength",!0),u1=yr("Date.prototype.getTime"),df=Object.getPrototypeOf,l1=yr("Object.prototype.toString"),Po=PB("%Set%",!0),pf=yr("Map.prototype.has",!0),Lo=yr("Map.prototype.get",!0),f1=yr("Map.prototype.size",!0),ko=yr("Set.prototype.add",!0),y1=yr("Set.prototype.delete",!0),Uo=yr("Set.prototype.has",!0),Do=yr("Set.prototype.size",!0);function h1(e,t,r,n){for(var i=wi(e),a;(a=i.next())&&!a.done;)if(zt(t,a.value,r,n))return y1(e,a.value),!0;return!1}function g1(e){if(typeof e=="undefined")return null;if(typeof e!="object")return typeof e=="symbol"?!1:typeof e=="string"||typeof e=="number"?+e==+e:!0}function kB(e,t,r,n,i,a){var s=g1(r);if(s!=null)return s;var o=Lo(t,s),u=v1({},i,{strict:!1});return typeof o=="undefined"&&!pf(t,s)||!zt(n,o,u,a)?!1:!pf(e,s)&&zt(n,o,u,a)}function UB(e,t,r){var n=g1(r);return n!=null?n:Uo(t,n)&&!Uo(e,n)}function d1(e,t,r,n,i,a){for(var s=wi(e),o,u;(o=s.next())&&!o.done;)if(u=o.value,zt(r,u,i,a)&&zt(n,Lo(t,u),i,a))return y1(e,u),!0;return!1}function zt(e,t,r,n){var i=r||{};if(i.strict?Ym(e,t):e===t)return!0;var a=i1(e),s=i1(t);if(a!==s)return!1;if(!e||!t||typeof e!="object"&&typeof t!="object")return i.strict?Ym(e,t):e==t;var o=n.has(e),u=n.has(t),c;if(o&&u){if(n.get(e)===n.get(t))return!0}else c={};return o||n.set(e,c),u||n.set(t,c),FB(e,t,i,n)}function p1(e){return!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function qB(e,t,r,n){if(Do(e)!==Do(t))return!1;for(var i=wi(e),a=wi(t),s,o,u;(s=i.next())&&!s.done;)if(s.value&&typeof s.value=="object")u||(u=new Po),ko(u,s.value);else if(!Uo(t,s.value)){if(r.strict||!UB(e,t,s.value))return!1;u||(u=new Po),ko(u,s.value)}if(u){for(;(o=a.next())&&!o.done;)if(o.value&&typeof o.value=="object"){if(!h1(u,o.value,r.strict,n))return!1}else if(!r.strict&&!Uo(e,o.value)&&!h1(u,o.value,r.strict,n))return!1;return Do(u)===0}return!0}function MB(e,t,r,n){if(f1(e)!==f1(t))return!1;for(var i=wi(e),a=wi(t),s,o,u,c,l,f;(s=i.next())&&!s.done;)if(c=s.value[0],l=s.value[1],c&&typeof c=="object")u||(u=new Po),ko(u,c);else if(f=Lo(t,c),typeof f=="undefined"&&!pf(t,c)||!zt(l,f,r,n)){if(r.strict||!kB(e,t,c,l,r,n))return!1;u||(u=new Po),ko(u,c)}if(u){for(;(o=a.next())&&!o.done;)if(c=o.value[0],f=o.value[1],c&&typeof c=="object"){if(!d1(u,e,c,f,r,n))return!1}else if(!r.strict&&(!e.has(c)||!zt(Lo(e,c),f,r,n))&&!d1(u,e,c,f,v1({},r,{strict:!1}),n))return!1;return Do(u)===0}return!0}function FB(e,t,r,n){var i,a;if(typeof e!=typeof t||e==null||t==null||l1(e)!==l1(t)||Xm(e)!==Xm(t))return!1;var s=Jm(e),o=Jm(t);if(s!==o)return!1;var u=e instanceof Error,c=t instanceof Error;if(u!==c||(u||c)&&(e.name!==t.name||e.message!==t.message))return!1;var l=t1(e),f=t1(t);if(l!==f||(l||f)&&(e.source!==t.source||Qm(e)!==Qm(t)))return!1;var h=e1(e),p=e1(t);if(h!==p||(h||p)&&u1(e)!==u1(t)||r.strict&&df&&df(e)!==df(t))return!1;var d=s1(e),m=s1(t);if(d!==m)return!1;if(d||m){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var S=p1(e),b=p1(t);if(S!==b)return!1;if(S||b){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var _=Zm(e),I=Zm(t);if(_!==I)return!1;if(_||I)return o1(e)!==o1(t)?!1:typeof Uint8Array=="function"&&zt(new Uint8Array(e),new Uint8Array(t),r,n);var O=r1(e),R=r1(t);if(O!==R)return!1;if(O||R)return c1(e)!==c1(t)?!1:typeof Uint8Array=="function"&&zt(new Uint8Array(e),new Uint8Array(t),r,n);if(typeof e!=typeof t)return!1;var B=n1(e),V=n1(t);if(B.length!==V.length)return!1;for(B.sort(),V.sort(),i=B.length-1;i>=0;i--)if(B[i]!=V[i])return!1;for(i=B.length-1;i>=0;i--)if(a=B[i],!zt(e[a],t[a],r,n))return!1;var K=a1(e),W=a1(t);return K!==W?!1:K==="Set"||W==="Set"?qB(e,t,r,n):K==="Map"?MB(e,t,r,n):!0}m1.exports=function(t,r,n){return zt(t,r,n,LB())}});var S1=C(vf=>{vf.stringify=function e(t){if(typeof t=="undefined")return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&typeof t=="object"){var r="",n=Array.isArray(t);r=n?"[":"{";var i=!0;for(var a in t){var s=typeof t[a]=="function"||!n&&typeof t[a]=="undefined";Object.hasOwnProperty.call(t,a)&&!s&&(i||(r+=","),i=!1,n?t[a]==null?r+="null":r+=e(t[a]):t[a]!==void 0&&(r+=e(a)+":"+e(t[a])))}return r+=n?"]":"}",r}else return typeof t=="string"?JSON.stringify(/^:/.test(t)?":"+t:t):typeof t=="undefined"?"null":JSON.stringify(t)};vf.parse=function(e){return JSON.parse(e,function(t,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var x1=C((Z6,b1)=>{"use strict";var VB=require("events"),C1=S1(),KB=e=>{let t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){let r=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(require(t[r]))(e)}return new Map},E1=["sqlite","postgres","mysql","mongo","redis","tiered"],yf=class extends VB{constructor(t,i={}){var a=i,{emitErrors:r=!0}=a,n=c0(a,["emitErrors"]);if(super(),this.opts=_n(_n({namespace:"keyv",serialize:C1.stringify,deserialize:C1.parse},typeof t=="string"?{uri:t}:t),n),!this.opts.store){let o=_n({},this.opts);this.opts.store=KB(o)}if(this.opts.compression){let o=this.opts.compression;this.opts.serialize=o.serialize.bind(o),this.opts.deserialize=o.deserialize.bind(o)}typeof this.opts.store.on=="function"&&r&&this.opts.store.on("error",o=>this.emit("error",o)),this.opts.store.namespace=this.opts.namespace;let s=o=>function(){return l0(this,null,function*(){try{for(var u=f0(typeof o=="function"?o(this.opts.store.namespace):o),c,l,f;c=!(l=yield new oa(u.next())).done;c=!1){let[h,p]=l.value;let d=yield new oa(this.opts.deserialize(p));if(!(this.opts.store.namespace&&!h.includes(this.opts.store.namespace))){if(typeof d.expires=="number"&&Date.now()>d.expires){this.delete(h);continue}yield[this._getKeyUnprefix(h),d.value]}}}catch(l){f=[l]}finally{try{c&&(l=u.return)&&(yield new oa(l.call(u)))}finally{if(f)throw f[0]}}})};typeof this.opts.store[Symbol.iterator]=="function"&&this.opts.store instanceof Map?this.iterator=s(this.opts.store):typeof this.opts.store.iterator=="function"&&this.opts.store.opts&&this._checkIterableAdaptar()&&(this.iterator=s(this.opts.store.iterator.bind(this.opts.store)))}_checkIterableAdaptar(){return E1.includes(this.opts.store.opts.dialect)||E1.findIndex(t=>this.opts.store.opts.url.includes(t))>=0}_getKeyPrefix(t){return`${this.opts.namespace}:${t}`}_getKeyPrefixArray(t){return t.map(r=>`${this.opts.namespace}:${r}`)}_getKeyUnprefix(t){return t.split(":").splice(1).join(":")}get(t,r){let{store:n}=this.opts,i=Array.isArray(t),a=i?this._getKeyPrefixArray(t):this._getKeyPrefix(t);if(i&&n.getMany===void 0){let s=[];for(let o of a)s.push(Promise.resolve().then(()=>n.get(o)).then(u=>typeof u=="string"?this.opts.deserialize(u):this.opts.compression?this.opts.deserialize(u):u).then(u=>{if(u!=null)return typeof u.expires=="number"&&Date.now()>u.expires?this.delete(o).then(()=>{}):r&&r.raw?u:u.value}));return Promise.allSettled(s).then(o=>{let u=[];for(let c of o)u.push(c.value);return u})}return Promise.resolve().then(()=>i?n.getMany(a):n.get(a)).then(s=>typeof s=="string"?this.opts.deserialize(s):this.opts.compression?this.opts.deserialize(s):s).then(s=>{if(s!=null)return i?s.map((o,u)=>{if(typeof o=="string"&&(o=this.opts.deserialize(o)),o!=null){if(typeof o.expires=="number"&&Date.now()>o.expires){this.delete(t[u]).then(()=>{});return}return r&&r.raw?o:o.value}}):typeof s.expires=="number"&&Date.now()>s.expires?this.delete(t).then(()=>{}):r&&r.raw?s:s.value})}set(t,r,n){let i=this._getKeyPrefix(t);typeof n=="undefined"&&(n=this.opts.ttl),n===0&&(n=void 0);let{store:a}=this.opts;return Promise.resolve().then(()=>{let s=typeof n=="number"?Date.now()+n:null;return typeof r=="symbol"&&this.emit("error","symbol cannot be serialized"),r={value:r,expires:s},this.opts.serialize(r)}).then(s=>a.set(i,s,n)).then(()=>!0)}delete(t){let{store:r}=this.opts;if(Array.isArray(t)){let i=this._getKeyPrefixArray(t);if(r.deleteMany===void 0){let a=[];for(let s of i)a.push(r.delete(s));return Promise.allSettled(a).then(s=>s.every(o=>o.value===!0))}return Promise.resolve().then(()=>r.deleteMany(i))}let n=this._getKeyPrefix(t);return Promise.resolve().then(()=>r.delete(n))}clear(){let{store:t}=this.opts;return Promise.resolve().then(()=>t.clear())}has(t){let r=this._getKeyPrefix(t),{store:n}=this.opts;return Promise.resolve().then(()=>ke(this,null,function*(){return typeof n.has=="function"?n.has(r):(yield n.get(r))!==void 0}))}disconnect(){let{store:t}=this.opts;if(typeof t.disconnect=="function")return t.disconnect()}};b1.exports=yf});var D1=C(Va=>{"use strict";var{parse:_1,stringify:I1}=JSON,{keys:GB}=Object,Fa=String,w1="string",T1={},qo="object",B1=(e,t)=>t,jB=e=>e instanceof Fa?Fa(e):e,HB=(e,t)=>typeof t===w1?new Fa(t):t,R1=(e,t,r,n)=>{let i=[];for(let a=GB(r),{length:s}=a,o=0;o<s;o++){let u=a[o],c=r[u];if(c instanceof Fa){let l=e[c];typeof l===qo&&!t.has(l)?(t.add(l),r[u]=T1,i.push({k:u,a:[e,t,l,n]})):r[u]=n.call(r,u,l)}else r[u]!==T1&&(r[u]=n.call(r,u,c))}for(let{length:a}=i,s=0;s<a;s++){let{k:o,a:u}=i[s];r[o]=n.call(r,o,R1.apply(null,u))}return r},A1=(e,t,r)=>{let n=Fa(t.push(r)-1);return e.set(r,n),n},O1=(e,t)=>{let r=_1(e,HB).map(jB),n=r[0],i=t||B1,a=typeof n===qo&&n?R1(r,new Set,n,i):n;return i.call({"":a},"",a)};Va.parse=O1;var N1=(e,t,r)=>{let n=t&&typeof t===qo?(l,f)=>l===""||-1<t.indexOf(l)?f:void 0:t||B1,i=new Map,a=[],s=[],o=+A1(i,a,n.call({"":e},"",e)),u=!o;for(;o<a.length;)u=!0,s[o]=I1(a[o++],c,r);return"["+s.join(",")+"]";function c(l,f){if(u)return u=!u,f;let h=n.call(this,l,f);switch(typeof h){case qo:if(h===null)return h;case w1:return i.get(h)||A1(i,a,h)}return h}};Va.stringify=N1;var $B=e=>_1(N1(e));Va.toJSON=$B;var zB=e=>O1(I1(e));Va.fromJSON=zB});var k1=C((r8,L1)=>{var gf=require("fs"),WB=require("path"),P1=D1();L1.exports={tryParse:function(e,t){var r;try{r=this.readJSON(e)}catch(n){r=t}return r},readJSON:function(e){return P1.parse(gf.readFileSync(e,{encoding:"utf8"}))},writeJSON:function(e,t){gf.mkdirSync(WB.dirname(e),{recursive:!0}),gf.writeFileSync(e,P1.stringify(t))}}});var U1=C(mf=>{var Vn=require("path"),hn=process.platform==="win32",fn=require("fs"),QB=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function YB(){var e;if(QB){var t=new Error;e=r}else e=n;return e;function r(i){i&&(t.message=i.message,i=t,n(i))}function n(i){if(i){if(process.throwDeprecation)throw i;if(!process.noDeprecation){var a="fs: missing callback "+(i.stack||i.message);process.traceDeprecation?console.trace(a):console.error(a)}}}}function XB(e){return typeof e=="function"?e:YB()}var n8=Vn.normalize;hn?Or=/(.*?)(?:[\/\\]+|$)/g:Or=/(.*?)(?:[\/]+|$)/g;var Or;hn?Ka=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:Ka=/^[\/]*/;var Ka;mf.realpathSync=function(t,r){if(t=Vn.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];var n=t,i={},a={},s,o,u,c;l();function l(){var S=Ka.exec(t);s=S[0].length,o=S[0],u=S[0],c="",hn&&!a[u]&&(fn.lstatSync(u),a[u]=!0)}for(;s<t.length;){Or.lastIndex=s;var f=Or.exec(t);if(c=o,o+=f[0],u=c+f[1],s=Or.lastIndex,!(a[u]||r&&r[u]===u)){var h;if(r&&Object.prototype.hasOwnProperty.call(r,u))h=r[u];else{var p=fn.lstatSync(u);if(!p.isSymbolicLink()){a[u]=!0,r&&(r[u]=u);continue}var d=null;if(!hn){var m=p.dev.toString(32)+":"+p.ino.toString(32);i.hasOwnProperty(m)&&(d=i[m])}d===null&&(fn.statSync(u),d=fn.readlinkSync(u)),h=Vn.resolve(c,d),r&&(r[u]=h),hn||(i[m]=d)}t=Vn.resolve(h,t.slice(s)),l()}}return r&&(r[n]=t),t};mf.realpath=function(t,r,n){if(typeof n!="function"&&(n=XB(r),r=null),t=Vn.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return process.nextTick(n.bind(null,null,r[t]));var i=t,a={},s={},o,u,c,l;f();function f(){var S=Ka.exec(t);o=S[0].length,u=S[0],c=S[0],l="",hn&&!s[c]?fn.lstat(c,function(b){if(b)return n(b);s[c]=!0,h()}):process.nextTick(h)}function h(){if(o>=t.length)return r&&(r[i]=t),n(null,t);Or.lastIndex=o;var S=Or.exec(t);return l=u,u+=S[0],c=l+S[1],o=Or.lastIndex,s[c]||r&&r[c]===c?process.nextTick(h):r&&Object.prototype.hasOwnProperty.call(r,c)?m(r[c]):fn.lstat(c,p)}function p(S,b){if(S)return n(S);if(!b.isSymbolicLink())return s[c]=!0,r&&(r[c]=c),process.nextTick(h);if(!hn){var _=b.dev.toString(32)+":"+b.ino.toString(32);if(a.hasOwnProperty(_))return d(null,a[_],c)}fn.stat(c,function(I){if(I)return n(I);fn.readlink(c,function(O,R){hn||(a[_]=R),d(O,R)})})}function d(S,b,_){if(S)return n(S);var I=Vn.resolve(l,b);r&&(r[_]=I),m(I)}function m(S){t=Vn.resolve(S,t.slice(o)),f()}}});var bf=C((a8,V1)=>{V1.exports=dn;dn.realpath=dn;dn.sync=Ef;dn.realpathSync=Ef;dn.monkeypatch=ZB;dn.unmonkeypatch=e4;var Bi=require("fs"),Sf=Bi.realpath,Cf=Bi.realpathSync,JB=process.version,q1=/^v[0-5]\./.test(JB),M1=U1();function F1(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function dn(e,t,r){if(q1)return Sf(e,t,r);typeof t=="function"&&(r=t,t=null),Sf(e,t,function(n,i){F1(n)?M1.realpath(e,t,r):r(n,i)})}function Ef(e,t){if(q1)return Cf(e,t);try{return Cf(e,t)}catch(r){if(F1(r))return M1.realpathSync(e,t);throw r}}function ZB(){Bi.realpath=dn,Bi.realpathSync=Ef}function e4(){Bi.realpath=Sf,Bi.realpathSync=Cf}});var G1=C((s8,K1)=>{K1.exports=function(e,t){for(var r=[],n=0;n<e.length;n++){var i=t(e[n],n);t4(i)?r.push.apply(r,i):r.push(i)}return r};var t4=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var W1=C((o8,z1)=>{"use strict";z1.exports=H1;function H1(e,t,r){e instanceof RegExp&&(e=j1(e,r)),t instanceof RegExp&&(t=j1(t,r));var n=$1(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function j1(e,t){var r=t.match(e);return r?r[0]:null}H1.range=$1;function $1(e,t,r){var n,i,a,s,o,u=r.indexOf(e),c=r.indexOf(t,u+1),l=u;if(u>=0&&c>0){if(e===t)return[u,c];for(n=[],a=r.length;l>=0&&!o;)l==u?(n.push(l),u=r.indexOf(e,l+1)):n.length==1?o=[n.pop(),c]:(i=n.pop(),i<a&&(a=i,s=c),c=r.indexOf(t,l+1)),l=u<c&&u>=0?u:c;n.length&&(o=[a,s])}return o}});var rS=C((c8,tS)=>{var r4=G1(),Q1=W1();tS.exports=a4;var Y1="\0SLASH"+Math.random()+"\0",X1="\0OPEN"+Math.random()+"\0",Tf="\0CLOSE"+Math.random()+"\0",J1="\0COMMA"+Math.random()+"\0",Z1="\0PERIOD"+Math.random()+"\0";function xf(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function n4(e){return e.split("\\\\").join(Y1).split("\\{").join(X1).split("\\}").join(Tf).split("\\,").join(J1).split("\\.").join(Z1)}function i4(e){return e.split(Y1).join("\\").split(X1).join("{").split(Tf).join("}").split(J1).join(",").split(Z1).join(".")}function eS(e){if(!e)return[""];var t=[],r=Q1("{","}",e);if(!r)return e.split(",");var n=r.pre,i=r.body,a=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var o=eS(a);return a.length&&(s[s.length-1]+=o.shift(),s.push.apply(s,o)),t.push.apply(t,s),t}function a4(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Ri(n4(e),!0).map(i4)):[]}function s4(e){return"{"+e+"}"}function o4(e){return/^-?0\d/.test(e)}function c4(e,t){return e<=t}function u4(e,t){return e>=t}function Ri(e,t){var r=[],n=Q1("{","}",e);if(!n||/\$$/.test(n.pre))return[e];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=i||a,o=n.body.indexOf(",")>=0;if(!s&&!o)return n.post.match(/,.*\}/)?(e=n.pre+"{"+n.body+Tf+n.post,Ri(e)):[e];var u;if(s)u=n.body.split(/\.\./);else if(u=eS(n.body),u.length===1&&(u=Ri(u[0],!1).map(s4),u.length===1)){var l=n.post.length?Ri(n.post,!1):[""];return l.map(function(re){return n.pre+u[0]+re})}var c=n.pre,l=n.post.length?Ri(n.post,!1):[""],f;if(s){var h=xf(u[0]),p=xf(u[1]),d=Math.max(u[0].length,u[1].length),m=u.length==3?Math.abs(xf(u[2])):1,S=c4,b=p<h;b&&(m*=-1,S=u4);var _=u.some(o4);f=[];for(var I=h;S(I,p);I+=m){var O;if(a)O=String.fromCharCode(I),O==="\\"&&(O="");else if(O=String(I),_){var R=d-O.length;if(R>0){var B=new Array(R+1).join("0");I<0?O="-"+B+O.slice(1):O=B+O}}f.push(O)}}else f=r4(u,function(Z){return Ri(Z,!1)});for(var V=0;V<f.length;V++)for(var K=0;K<l.length;K++){var W=c+f[V]+l[K];(!t||s||W)&&r.push(W)}return r}});var Vo=C((u8,oS)=>{oS.exports=At;At.Minimatch=Qe;var Ga=function(){try{return require("path")}catch(e){}}()||{sep:"/"};At.sep=Ga.sep;var If=At.GLOBSTAR=Qe.GLOBSTAR={},l4=rS(),nS={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Af="[^/]",_f=Af+"*?",f4="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",h4="(?:(?!(?:\\/|^)\\.).)*?",iS=d4("().*{}+?[]^$\\!");function d4(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var aS=/\/+/;At.filter=p4;function p4(e,t){return t=t||{},function(r,n,i){return At(r,e,t)}}function pn(e,t){t=t||{};var r={};return Object.keys(e).forEach(function(n){r[n]=e[n]}),Object.keys(t).forEach(function(n){r[n]=t[n]}),r}At.defaults=function(e){if(!e||typeof e!="object"||!Object.keys(e).length)return At;var t=At,r=function(i,a,s){return t(i,a,pn(e,s))};return r.Minimatch=function(i,a){return new t.Minimatch(i,pn(e,a))},r.Minimatch.defaults=function(i){return t.defaults(pn(e,i)).Minimatch},r.filter=function(i,a){return t.filter(i,pn(e,a))},r.defaults=function(i){return t.defaults(pn(e,i))},r.makeRe=function(i,a){return t.makeRe(i,pn(e,a))},r.braceExpand=function(i,a){return t.braceExpand(i,pn(e,a))},r.match=function(n,i,a){return t.match(n,i,pn(e,a))},r};Qe.defaults=function(e){return At.defaults(e).Minimatch};function At(e,t,r){return Fo(t),r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:new Qe(t,r).match(e)}function Qe(e,t){if(!(this instanceof Qe))return new Qe(e,t);Fo(e),t||(t={}),e=e.trim(),!t.allowWindowsEscape&&Ga.sep!=="/"&&(e=e.split(Ga.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}Qe.prototype.debug=function(){};Qe.prototype.make=v4;function v4(){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,r),r=this.globParts=r.map(function(n){return n.split(aS)}),this.debug(this.pattern,r),r=r.map(function(n,i,a){return n.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(n){return n.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}Qe.prototype.parseNegate=y4;function y4(){var e=this.pattern,t=!1,r=this.options,n=0;if(!r.nonegate){for(var i=0,a=e.length;i<a&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.substr(n)),this.negate=t}}At.braceExpand=function(e,t){return sS(e,t)};Qe.prototype.braceExpand=sS;function sS(e,t){return t||(this instanceof Qe?t=this.options:t={}),e=typeof e=="undefined"?this.pattern:e,Fo(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:l4(e)}var g4=1024*64,Fo=function(e){if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>g4)throw new TypeError("pattern is too long")};Qe.prototype.parse=m4;var Mo={};function m4(e,t){Fo(e);var r=this.options;if(e==="**")if(r.noglobstar)e="*";else return If;if(e==="")return"";var n="",i=!!r.nocase,a=!1,s=[],o=[],u,c=!1,l=-1,f=-1,h=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",p=this;function d(){if(u){switch(u){case"*":n+=_f,i=!0;break;case"?":n+=Af,i=!0;break;default:n+="\\"+u;break}p.debug("clearStateChar %j %j",u,n),u=!1}}for(var m=0,S=e.length,b;m<S&&(b=e.charAt(m));m++){if(this.debug("%s	%s %s %j",e,m,n,b),a&&iS[b]){n+="\\"+b,a=!1;continue}switch(b){case"/":return!1;case"\\":d(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,m,n,b),c){this.debug("  in class"),b==="!"&&m===f+1&&(b="^"),n+=b;continue}p.debug("call clearStateChar %j",u),d(),u=b,r.noext&&d();continue;case"(":if(c){n+="(";continue}if(!u){n+="\\(";continue}s.push({type:u,start:m-1,reStart:n.length,open:nS[u].open,close:nS[u].close}),n+=u==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",u,n),u=!1;continue;case")":if(c||!s.length){n+="\\)";continue}d(),i=!0;var _=s.pop();n+=_.close,_.type==="!"&&o.push(_),_.reEnd=n.length;continue;case"|":if(c||!s.length||a){n+="\\|",a=!1;continue}d(),n+="|";continue;case"[":if(d(),c){n+="\\"+b;continue}c=!0,f=m,l=n.length,n+=b;continue;case"]":if(m===f+1||!c){n+="\\"+b,a=!1;continue}var I=e.substring(f+1,m);try{RegExp("["+I+"]")}catch(Se){var O=this.parse(I,Mo);n=n.substr(0,l)+"\\["+O[0]+"\\]",i=i||O[1],c=!1;continue}i=!0,c=!1,n+=b;continue;default:d(),a?a=!1:iS[b]&&!(b==="^"&&c)&&(n+="\\"),n+=b}}for(c&&(I=e.substr(f+1),O=this.parse(I,Mo),n=n.substr(0,l)+"\\["+O[0],i=i||O[1]),_=s.pop();_;_=s.pop()){var R=n.slice(_.reStart+_.open.length);this.debug("setting tail",n,_),R=R.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Se,Te,Q){return Q||(Q="\\"),Te+Te+Q+"|"}),this.debug(`tail=%j
   %s`,R,R,_,n);var B=_.type==="*"?_f:_.type==="?"?Af:"\\"+_.type;i=!0,n=n.slice(0,_.reStart)+B+"\\("+R}d(),a&&(n+="\\\\");var V=!1;switch(n.charAt(0)){case"[":case".":case"(":V=!0}for(var K=o.length-1;K>-1;K--){var W=o[K],Z=n.slice(0,W.reStart),re=n.slice(W.reStart,W.reEnd-8),le=n.slice(W.reEnd-8,W.reEnd),ye=n.slice(W.reEnd);le+=ye;var Be=Z.split("(").length-1,ne=ye;for(m=0;m<Be;m++)ne=ne.replace(/\)[+*?]?/,"");ye=ne;var ve="";ye===""&&t!==Mo&&(ve="$");var G=Z+re+ye+ve+le;n=G}if(n!==""&&i&&(n="(?=.)"+n),V&&(n=h+n),t===Mo)return[n,i];if(!i)return C4(e);var Ot=r.nocase?"i":"";try{var Nt=new RegExp("^"+n+"$",Ot)}catch(Se){return new RegExp("$.")}return Nt._glob=e,Nt._src=n,Nt}At.makeRe=function(e,t){return new Qe(e,t||{}).makeRe()};Qe.prototype.makeRe=S4;function S4(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?_f:t.dot?f4:h4,n=t.nocase?"i":"",i=e.map(function(a){return a.map(function(s){return s===If?r:typeof s=="string"?E4(s):s._src}).join("\\/")}).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(a){this.regexp=!1}return this.regexp}At.match=function(e,t,r){r=r||{};var n=new Qe(t,r);return e=e.filter(function(i){return n.match(i)}),n.options.nonull&&!e.length&&e.push(t),e};Qe.prototype.match=function(t,r){if(typeof r=="undefined"&&(r=this.partial),this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&r)return!0;var n=this.options;Ga.sep!=="/"&&(t=t.split(Ga.sep).join("/")),t=t.split(aS),this.debug(this.pattern,"split",t);var i=this.set;this.debug(this.pattern,"set",i);var a,s;for(s=t.length-1;s>=0&&(a=t[s],!a);s--);for(s=0;s<i.length;s++){var o=i[s],u=t;n.matchBase&&o.length===1&&(u=[a]);var c=this.matchOne(u,o,r);if(c)return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate};Qe.prototype.matchOne=function(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,a=0,s=e.length,o=t.length;i<s&&a<o;i++,a++){this.debug("matchOne loop");var u=t[a],c=e[i];if(this.debug(t,u,c),u===!1)return!1;if(u===If){this.debug("GLOBSTAR",[t,u,c]);var l=i,f=a+1;if(f===o){for(this.debug("** at the end");i<s;i++)if(e[i]==="."||e[i]===".."||!n.dot&&e[i].charAt(0)===".")return!1;return!0}for(;l<s;){var h=e[l];if(this.debug(`
globstar while`,e,l,t,f,h),this.matchOne(e.slice(l),t.slice(f),r))return this.debug("globstar found match!",l,s,h),!0;if(h==="."||h===".."||!n.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,l,t,f);break}this.debug("globstar swallow a segment, and continue"),l++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,l,t,f),l===s))}var p;if(typeof u=="string"?(p=c===u,this.debug("string match",u,c,p)):(p=c.match(u),this.debug("pattern match",u,c,p)),!p)return!1}if(i===s&&a===o)return!0;if(i===s)return r;if(a===o)return i===s-1&&e[i]==="";throw new Error("wtf?")};function C4(e){return e.replace(/\\(.)/g,"$1")}function E4(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var cS=C((l8,wf)=>{typeof Object.create=="function"?wf.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:wf.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}});var uS=C((f8,Rf)=>{try{if(Bf=require("util"),typeof Bf.inherits!="function")throw"";Rf.exports=Bf.inherits}catch(e){Rf.exports=cS()}var Bf});var Go=C((h8,Ko)=>{"use strict";function lS(e){return e.charAt(0)==="/"}function fS(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=t.exec(e),n=r[1]||"",i=!!(n&&n.charAt(1)!==":");return!!(r[2]||i)}Ko.exports=process.platform==="win32"?fS:lS;Ko.exports.posix=lS;Ko.exports.win32=fS});var Nf=C(vn=>{vn.setopts=I4;vn.ownProp=hS;vn.makeAbs=ja;vn.finish=w4;vn.mark=B4;vn.isIgnored=pS;vn.childrenIgnored=R4;function hS(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var b4=require("fs"),Oi=require("path"),x4=Vo(),dS=Go(),Of=x4.Minimatch;function T4(e,t){return e.localeCompare(t,"en")}function A4(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(_4))}function _4(e){var t=null;if(e.slice(-3)==="/**"){var r=e.replace(/(\/\*\*)+$/,"");t=new Of(r,{dot:!0})}return{matcher:new Of(e,{dot:!0}),gmatcher:t}}function I4(e,t,r){if(r||(r={}),r.matchBase&&t.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=r.strict!==!1,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.fs=r.fs||b4,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),A4(e,r),e.changedCwd=!1;var n=process.cwd();hS(r,"cwd")?(e.cwd=Oi.resolve(r.cwd),e.changedCwd=e.cwd!==n):e.cwd=n,e.root=r.root||Oi.resolve(e.cwd,"/"),e.root=Oi.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=dS(e.cwd)?e.cwd:ja(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,r.allowWindowsEscape=!1,e.minimatch=new Of(t,r),e.options=e.minimatch.options}function w4(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var a=e.matches[n];if(!a||Object.keys(a).length===0){if(e.nonull){var s=e.minimatch.globSet[n];t?r.push(s):r[s]=!0}}else{var o=Object.keys(a);t?r.push.apply(r,o):o.forEach(function(u){r[u]=!0})}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(T4)),e.mark){for(var n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter(function(u){var c=!/\/$/.test(u),l=e.cache[u]||e.cache[ja(e,u)];return c&&l&&(c=l!=="DIR"&&!Array.isArray(l)),c}))}e.ignore.length&&(r=r.filter(function(u){return!pS(e,u)})),e.found=r}function B4(e,t){var r=ja(e,t),n=e.cache[r],i=t;if(n){var a=n==="DIR"||Array.isArray(n),s=t.slice(-1)==="/";if(a&&!s?i+="/":!a&&s&&(i=i.slice(0,-1)),i!==t){var o=ja(e,i);e.statCache[o]=e.statCache[r],e.cache[o]=e.cache[r]}}return i}function ja(e,t){var r=t;return t.charAt(0)==="/"?r=Oi.join(e.root,t):dS(t)||t===""?r=t:e.changedCwd?r=Oi.resolve(e.cwd,t):r=Oi.resolve(t),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function pS(e,t){return e.ignore.length?e.ignore.some(function(r){return r.matcher.match(t)||!!(r.gmatcher&&r.gmatcher.match(t))}):!1}function R4(e,t){return e.ignore.length?e.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(t))}):!1}});var SS=C((g8,mS)=>{mS.exports=gS;gS.GlobSync=Le;var O4=bf(),vS=Vo(),p8=vS.Minimatch,v8=Lf().Glob,y8=require("util"),Df=require("path"),yS=require("assert"),jo=Go(),Kn=Nf(),N4=Kn.setopts,Pf=Kn.ownProp,D4=Kn.childrenIgnored,P4=Kn.isIgnored;function gS(e,t){if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new Le(e,t).found}function Le(e,t){if(!e)throw new Error("must provide pattern");if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof Le))return new Le(e,t);if(N4(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}Le.prototype._finish=function(){if(yS.ok(this instanceof Le),this.realpath){var e=this;this.matches.forEach(function(t,r){var n=e.matches[r]=Object.create(null);for(var i in t)try{i=e._makeAbs(i);var a=O4.realpathSync(i,e.realpathCache);n[a]=!0}catch(s){if(s.syscall==="stat")n[e._makeAbs(i)]=!0;else throw s}})}Kn.finish(this)};Le.prototype._process=function(e,t,r){yS.ok(this instanceof Le);for(var n=0;typeof e[n]=="string";)n++;var i;switch(n){case e.length:this._processSimple(e.join("/"),t);return;case 0:i=null;break;default:i=e.slice(0,n).join("/");break}var a=e.slice(n),s;i===null?s=".":((jo(i)||jo(e.map(function(c){return typeof c=="string"?c:"[*]"}).join("/")))&&(!i||!jo(i))&&(i="/"+i),s=i);var o=this._makeAbs(s);if(!D4(this,s)){var u=a[0]===vS.GLOBSTAR;u?this._processGlobStar(i,s,o,a,t,r):this._processReaddir(i,s,o,a,t,r)}};Le.prototype._processReaddir=function(e,t,r,n,i,a){var s=this._readdir(r,a);if(s){for(var o=n[0],u=!!this.minimatch.negate,c=o._glob,l=this.dot||c.charAt(0)===".",f=[],h=0;h<s.length;h++){var p=s[h];if(p.charAt(0)!=="."||l){var d;u&&!e?d=!p.match(o):d=p.match(o),d&&f.push(p)}}var m=f.length;if(m!==0){if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var h=0;h<m;h++){var p=f[h];e&&(e.slice(-1)!=="/"?p=e+"/"+p:p=e+p),p.charAt(0)==="/"&&!this.nomount&&(p=Df.join(this.root,p)),this._emitMatch(i,p)}return}n.shift();for(var h=0;h<m;h++){var p=f[h],S;e?S=[e,p]:S=[p],this._process(S.concat(n),i,a)}}}};Le.prototype._emitMatch=function(e,t){if(!P4(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}};Le.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r,n;try{r=this.fs.lstatSync(e)}catch(a){if(a.code==="ENOENT")return null}var i=r&&r.isSymbolicLink();return this.symlinks[e]=i,!i&&r&&!r.isDirectory()?this.cache[e]="FILE":t=this._readdir(e,!1),t};Le.prototype._readdir=function(e,t){var r;if(t&&!Pf(this.symlinks,e))return this._readdirInGlobStar(e);if(Pf(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(i){return this._readdirError(e,i),null}};Le.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t};Le.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t);break}};Le.prototype._processGlobStar=function(e,t,r,n,i,a){var s=this._readdir(r,a);if(s){var o=n.slice(1),u=e?[e]:[],c=u.concat(o);this._process(c,i,!1);var l=s.length,f=this.symlinks[r];if(!(f&&a))for(var h=0;h<l;h++){var p=s[h];if(!(p.charAt(0)==="."&&!this.dot)){var d=u.concat(s[h],o);this._process(d,i,!0);var m=u.concat(s[h],n);this._process(m,i,!0)}}}};Le.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),!!r){if(e&&jo(e)&&!this.nomount){var n=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Df.join(this.root,e):(e=Df.resolve(this.root,e),n&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}};Le.prototype._stat=function(e){var t=this._makeAbs(e),r=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&Pf(this.cache,t)){var s=this.cache[t];if(Array.isArray(s)&&(s="DIR"),!r||s==="DIR")return s;if(r&&s==="FILE")return!1}var n,i=this.statCache[t];if(!i){var a;try{a=this.fs.lstatSync(t)}catch(o){if(o&&(o.code==="ENOENT"||o.code==="ENOTDIR"))return this.statCache[t]=!1,!1}if(a&&a.isSymbolicLink())try{i=this.fs.statSync(t)}catch(o){i=a}else i=a}this.statCache[t]=i;var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,r&&s==="FILE"?!1:s};Le.prototype._mark=function(e){return Kn.mark(this,e)};Le.prototype._makeAbs=function(e){return Kn.makeAbs(this,e)}});var kf=C((m8,ES)=>{ES.exports=CS;function CS(e,t){if(e&&t)return CS(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(n){r[n]=e[n]}),r;function r(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];var a=e.apply(this,n),s=n[n.length-1];return typeof a=="function"&&a!==s&&Object.keys(s).forEach(function(o){a[o]=s[o]}),a}}});var qf=C((S8,Uf)=>{var bS=kf();Uf.exports=bS(Ho);Uf.exports.strict=bS(xS);Ho.proto=Ho(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ho(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return xS(this)},configurable:!0})});function Ho(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function xS(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var AS=C((C8,TS)=>{var L4=kf(),Ha=Object.create(null),k4=qf();TS.exports=L4(U4);function U4(e,t){return Ha[e]?(Ha[e].push(t),null):(Ha[e]=[t],q4(e))}function q4(e){return k4(function t(){var r=Ha[e],n=r.length,i=M4(arguments);try{for(var a=0;a<n;a++)r[a].apply(null,i)}finally{r.length>n?(r.splice(0,n),process.nextTick(function(){t.apply(null,i)})):delete Ha[e]}})}function M4(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}});var Lf=C((x8,IS)=>{IS.exports=Gn;var F4=bf(),_S=Vo(),E8=_S.Minimatch,V4=uS(),K4=require("events").EventEmitter,Mf=require("path"),Ff=require("assert"),$a=Go(),Kf=SS(),jn=Nf(),G4=jn.setopts,Vf=jn.ownProp,Gf=AS(),b8=require("util"),j4=jn.childrenIgnored,H4=jn.isIgnored,$4=qf();function Gn(e,t,r){if(typeof t=="function"&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return Kf(e,t)}return new me(e,t,r)}Gn.sync=Kf;var z4=Gn.GlobSync=Kf.GlobSync;Gn.glob=Gn;function W4(e,t){if(t===null||typeof t!="object")return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}Gn.hasMagic=function(e,t){var r=W4({},t);r.noprocess=!0;var n=new me(e,r),i=n.minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var a=0;a<i[0].length;a++)if(typeof i[0][a]!="string")return!0;return!1};Gn.Glob=me;V4(me,K4);function me(e,t,r){if(typeof t=="function"&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new z4(e,t)}if(!(this instanceof me))return new me(e,t,r);G4(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),typeof r=="function"&&(r=$4(r),this.on("error",r),this.on("end",function(u){r(null,u)}));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(n===0)return o();for(var a=!0,s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,o);a=!1;function o(){--i._processing,i._processing<=0&&(a?process.nextTick(function(){i._finish()}):i._finish())}}me.prototype._finish=function(){if(Ff(this instanceof me),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();jn.finish(this),this.emit("end",this.found)}};me.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n);function n(){--e===0&&t._finish()}};me.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var n=Object.keys(r),i=this,a=n.length;if(a===0)return t();var s=this.matches[e]=Object.create(null);n.forEach(function(o,u){o=i._makeAbs(o),F4.realpath(o,i.realpathCache,function(c,l){c?c.syscall==="stat"?s[o]=!0:i.emit("error",c):s[l]=!0,--a===0&&(i.matches[e]=s,t())})})};me.prototype._mark=function(e){return jn.mark(this,e)};me.prototype._makeAbs=function(e){return jn.makeAbs(this,e)};me.prototype.abort=function(){this.aborted=!0,this.emit("abort")};me.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};me.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}};me.prototype._process=function(e,t,r,n){if(Ff(this instanceof me),Ff(typeof n=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,t,r,n]);return}for(var i=0;typeof e[i]=="string";)i++;var a;switch(i){case e.length:this._processSimple(e.join("/"),t,n);return;case 0:a=null;break;default:a=e.slice(0,i).join("/");break}var s=e.slice(i),o;a===null?o=".":(($a(a)||$a(e.map(function(l){return typeof l=="string"?l:"[*]"}).join("/")))&&(!a||!$a(a))&&(a="/"+a),o=a);var u=this._makeAbs(o);if(j4(this,o))return n();var c=s[0]===_S.GLOBSTAR;c?this._processGlobStar(a,o,u,s,t,r,n):this._processReaddir(a,o,u,s,t,r,n)}};me.prototype._processReaddir=function(e,t,r,n,i,a,s){var o=this;this._readdir(r,a,function(u,c){return o._processReaddir2(e,t,r,n,i,a,c,s)})};me.prototype._processReaddir2=function(e,t,r,n,i,a,s,o){if(!s)return o();for(var u=n[0],c=!!this.minimatch.negate,l=u._glob,f=this.dot||l.charAt(0)===".",h=[],p=0;p<s.length;p++){var d=s[p];if(d.charAt(0)!=="."||f){var m;c&&!e?m=!d.match(u):m=d.match(u),m&&h.push(d)}}var S=h.length;if(S===0)return o();if(n.length===1&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(var p=0;p<S;p++){var d=h[p];e&&(e!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=Mf.join(this.root,d)),this._emitMatch(i,d)}return o()}n.shift();for(var p=0;p<S;p++){var d=h[p],b;e&&(e!=="/"?d=e+"/"+d:d=e+d),this._process([d].concat(n),i,a,o)}o()};me.prototype._emitMatch=function(e,t){if(!this.aborted&&!H4(this,t)){if(this.paused){this._emitQueue.push([e,t]);return}var r=$a(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if(n==="DIR"||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}};me.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,t);var r="lstat\0"+e,n=this,i=Gf(r,a);i&&n.fs.lstat(e,i);function a(s,o){if(s&&s.code==="ENOENT")return t();var u=o&&o.isSymbolicLink();n.symlinks[e]=u,!u&&o&&!o.isDirectory()?(n.cache[e]="FILE",t()):n._readdir(e,!1,t)}};me.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=Gf("readdir\0"+e+"\0"+t,r),!!r)){if(t&&!Vf(this.symlinks,e))return this._readdirInGlobStar(e,r);if(Vf(this.cache,e)){var n=this.cache[e];if(!n||n==="FILE")return r();if(Array.isArray(n))return r(null,n)}var i=this;i.fs.readdir(e,Q4(this,e,r))}};function Q4(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}me.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}};me.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t);break}return r()}};me.prototype._processGlobStar=function(e,t,r,n,i,a,s){var o=this;this._readdir(r,a,function(u,c){o._processGlobStar2(e,t,r,n,i,a,c,s)})};me.prototype._processGlobStar2=function(e,t,r,n,i,a,s,o){if(!s)return o();var u=n.slice(1),c=e?[e]:[],l=c.concat(u);this._process(l,i,!1,o);var f=this.symlinks[r],h=s.length;if(f&&a)return o();for(var p=0;p<h;p++){var d=s[p];if(!(d.charAt(0)==="."&&!this.dot)){var m=c.concat(s[p],u);this._process(m,i,!0,o);var S=c.concat(s[p],n);this._process(S,i,!0,o)}}o()};me.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,function(i,a){n._processSimple2(e,t,i,a,r)})};me.prototype._processSimple2=function(e,t,r,n,i){if(this.matches[t]||(this.matches[t]=Object.create(null)),!n)return i();if(e&&$a(e)&&!this.nomount){var a=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Mf.join(this.root,e):(e=Mf.resolve(this.root,e),a&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),i()};me.prototype._stat=function(e,t){var r=this._makeAbs(e),n=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&Vf(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||i==="DIR")return t(null,i);if(n&&i==="FILE")return t()}var a,s=this.statCache[r];if(s!==void 0){if(s===!1)return t(null,s);var o=s.isDirectory()?"DIR":"FILE";return n&&o==="FILE"?t():t(null,o,s)}var u=this,c=Gf("stat\0"+r,l);c&&u.fs.lstat(r,c);function l(f,h){if(h&&h.isSymbolicLink())return u.fs.stat(r,function(p,d){p?u._stat2(e,r,null,h,t):u._stat2(e,r,p,d,t)});u._stat2(e,r,f,h,t)}};me.prototype._stat2=function(e,t,r,n,i){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[t]=!1,i();var a=e.slice(-1)==="/";if(this.statCache[t]=n,t.slice(-1)==="/"&&n&&!n.isDirectory())return i(null,!1,n);var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,a&&s==="FILE"?i():i(null,s,n)}});var LS=C((T8,PS)=>{var Ee=require("assert"),OS=require("path"),wS=require("fs"),Ni;try{Ni=Lf()}catch(e){}var Y4={nosort:!0,silent:!0},jf=0,za=process.platform==="win32",NS=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||wS[r],r=r+"Sync",e[r]=e[r]||wS[r]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,e.glob===!1&&(e.disableGlob=!0),e.disableGlob!==!0&&Ni===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||Y4},$f=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),Ee(e,"rimraf: missing path"),Ee.equal(typeof e,"string","rimraf: path should be a string"),Ee.equal(typeof r,"function","rimraf: callback function required"),Ee(t,"rimraf: invalid options argument provided"),Ee.equal(typeof t,"object","rimraf: options should be object"),NS(t);let n=0,i=null,a=0,s=u=>{i=i||u,--a===0&&r(i)},o=(u,c)=>{if(u)return r(u);if(a=c.length,a===0)return r();c.forEach(l=>{let f=h=>{if(h){if((h.code==="EBUSY"||h.code==="ENOTEMPTY"||h.code==="EPERM")&&n<t.maxBusyTries)return n++,setTimeout(()=>Hf(l,t,f),n*100);if(h.code==="EMFILE"&&jf<t.emfileWait)return setTimeout(()=>Hf(l,t,f),jf++);h.code==="ENOENT"&&(h=null)}jf=0,s(h)};Hf(l,t,f)})};if(t.disableGlob||!Ni.hasMagic(e))return o(null,[e]);t.lstat(e,(u,c)=>{if(!u)return o(null,[e]);Ni(e,t.glob,o)})},Hf=(e,t,r)=>{Ee(e),Ee(t),Ee(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&za&&BS(e,t,n,r),i&&i.isDirectory())return $o(e,t,n,r);t.unlink(e,a=>{if(a){if(a.code==="ENOENT")return r(null);if(a.code==="EPERM")return za?BS(e,t,a,r):$o(e,t,a,r);if(a.code==="EISDIR")return $o(e,t,a,r)}return r(a)})})},BS=(e,t,r,n)=>{Ee(e),Ee(t),Ee(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(a,s)=>{a?n(a.code==="ENOENT"?null:r):s.isDirectory()?$o(e,t,r,n):t.unlink(e,n)})})},RS=(e,t,r)=>{Ee(e),Ee(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}let n;try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?zo(e,t,r):t.unlinkSync(e)},$o=(e,t,r,n)=>{Ee(e),Ee(t),Ee(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?X4(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})},X4=(e,t,r)=>{Ee(e),Ee(t),Ee(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let a=i.length;if(a===0)return t.rmdir(e,r);let s;i.forEach(o=>{$f(OS.join(e,o),t,u=>{if(!s){if(u)return r(s=u);--a===0&&t.rmdir(e,r)}})})})},DS=(e,t)=>{t=t||{},NS(t),Ee(e,"rimraf: missing path"),Ee.equal(typeof e,"string","rimraf: path should be a string"),Ee(t,"rimraf: missing options"),Ee.equal(typeof t,"object","rimraf: options should be object");let r;if(t.disableGlob||!Ni.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(n){r=Ni.sync(e,t.glob)}if(r.length)for(let n=0;n<r.length;n++){let i=r[n],a;try{a=t.lstatSync(i)}catch(s){if(s.code==="ENOENT")return;s.code==="EPERM"&&za&&RS(i,t,s)}try{a&&a.isDirectory()?zo(i,t,null):t.unlinkSync(i)}catch(s){if(s.code==="ENOENT")return;if(s.code==="EPERM")return za?RS(i,t,s):zo(i,t,s);if(s.code!=="EISDIR")throw s;zo(i,t,s)}}},zo=(e,t,r)=>{Ee(e),Ee(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="ENOTDIR")throw r;(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")&&J4(e,t)}},J4=(e,t)=>{Ee(e),Ee(t),t.readdirSync(e).forEach(i=>DS(OS.join(e,i),t));let r=za?100:1,n=0;do{let i=!0;try{let a=t.rmdirSync(e,t);return i=!1,a}finally{if(++n<r&&i)continue}}while(!0)};PS.exports=$f;$f.sync=DS});var US=C((A8,kS)=>{var Z4=LS().sync,eR=require("fs");kS.exports=function(t){return eR.existsSync(t)?(Z4(t,{glob:!1}),!0):!1}});var Wf=C((_8,FS)=>{var yn=require("path"),tR=require("fs"),rR=x1(),MS=k1(),zf=US(),nR=MS.writeJSON,qS={load:function(e,t){var r=this;r.keyv=new rR,r.__visited={},r.__persisted={},r._pathToFile=t?yn.resolve(t,e):yn.resolve(__dirname,"../.cache/",e),tR.existsSync(r._pathToFile)&&(r._persisted=MS.tryParse(r._pathToFile,{}))},get _persisted(){return this.__persisted},set _persisted(e){this.__persisted=e,this.keyv.set("persisted",e)},get _visited(){return this.__visited},set _visited(e){this.__visited=e,this.keyv.set("visited",e)},loadFile:function(e){var t=this,r=yn.dirname(e),n=yn.basename(e);t.load(n,r)},all:function(){return this._persisted},keys:function(){return Object.keys(this._persisted)},setKey:function(e,t){this._visited[e]=!0,this._persisted[e]=t},removeKey:function(e){delete this._visited[e],delete this._persisted[e]},getKey:function(e){return this._visited[e]=!0,this._persisted[e]},_prune:function(){var e=this,t={},r=Object.keys(e._visited);r.length!==0&&(r.forEach(function(n){t[n]=e._persisted[n]}),e._visited={},e._persisted=t)},save:function(e){var t=this;!e&&t._prune(),nR(t._pathToFile,t._persisted)},removeCacheFile:function(){return zf(this._pathToFile)},destroy:function(){var e=this;e._visited={},e._persisted={},e.removeCacheFile()}};FS.exports={load:function(e,t){return this.create(e,t)},create:function(e,t){var r=Object.create(qS);return r.load(e,t),r},createFromFile:function(e){var t=Object.create(qS);return t.loadFile(e),t},clearCacheById:function(e,t){var r=t?yn.resolve(t,e):yn.resolve(__dirname,"../.cache/",e);return zf(r)},clearAll:function(e){var t=e?yn.resolve(e):yn.resolve(__dirname,"../.cache/");return zf(t)}}});var VS=C(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var iR;(function(e){e.TCP="tcp",e.UDP="udp"})(iR=Wo.Protocol||(Wo.Protocol={}))});var Yf=C(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});function aR(e){return typeof e=="object"&&typeof e.create=="function"}Qf.isAdvancedMapper=aR});var GS=C((B8,KS)=>{var Di=1e3,Pi=Di*60,Li=Pi*60,Hn=Li*24,sR=Hn*7,oR=Hn*365.25;KS.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return cR(e);if(r==="number"&&isFinite(e))return t.long?lR(e):uR(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function cR(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*oR;case"weeks":case"week":case"w":return r*sR;case"days":case"day":case"d":return r*Hn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Li;case"minutes":case"minute":case"mins":case"min":case"m":return r*Pi;case"seconds":case"second":case"secs":case"sec":case"s":return r*Di;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function uR(e){var t=Math.abs(e);return t>=Hn?Math.round(e/Hn)+"d":t>=Li?Math.round(e/Li)+"h":t>=Pi?Math.round(e/Pi)+"m":t>=Di?Math.round(e/Di)+"s":e+"ms"}function lR(e){var t=Math.abs(e);return t>=Hn?Qo(e,t,Hn,"day"):t>=Li?Qo(e,t,Li,"hour"):t>=Pi?Qo(e,t,Pi,"minute"):t>=Di?Qo(e,t,Di,"second"):e+" ms"}function Qo(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Xf=C((R8,jS)=>{function fR(e){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=GS(),r.destroy=c,Object.keys(e).forEach(l=>{r[l]=e[l]}),r.names=[],r.skips=[],r.formatters={};function t(l){let f=0;for(let h=0;h<l.length;h++)f=(f<<5)-f+l.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(l){let f,h=null,p,d;function m(...S){if(!m.enabled)return;let b=m,_=Number(new Date),I=_-(f||_);b.diff=I,b.prev=f,b.curr=_,f=_,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let O=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(B,V)=>{if(B==="%%")return"%";O++;let K=r.formatters[V];if(typeof K=="function"){let W=S[O];B=K.call(b,W),S.splice(O,1),O--}return B}),r.formatArgs.call(b,S),(b.log||r.log).apply(b,S)}return m.namespace=l,m.useColors=r.useColors(),m.color=r.selectColor(l),m.extend=n,m.destroy=r.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(p!==r.namespaces&&(p=r.namespaces,d=r.enabled(l)),d),set:S=>{h=S}}),typeof r.init=="function"&&r.init(m),m}function n(l,f){let h=r(this.namespace+(typeof f=="undefined"?":":f)+l);return h.log=this.log,h}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f,h=(typeof l=="string"?l:"").split(/[\s,]+/),p=h.length;for(f=0;f<p;f++)h[f]&&(l=h[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.slice(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function a(){let l=[...r.names.map(o),...r.skips.map(o).map(f=>"-"+f)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(l))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}jS.exports=fR});var HS=C((_t,Yo)=>{_t.formatArgs=dR;_t.save=pR;_t.load=vR;_t.useColors=hR;_t.storage=yR();_t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();_t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function hR(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function dR(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Yo.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}_t.log=console.debug||console.log||(()=>{});function pR(e){try{e?_t.storage.setItem("debug",e):_t.storage.removeItem("debug")}catch(t){}}function vR(){let e;try{e=_t.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function yR(){try{return localStorage}catch(e){}}Yo.exports=Xf()(_t);var{formatters:gR}=Yo.exports;gR.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var zS=C((O8,$S)=>{"use strict";$S.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return n!==-1&&(i===-1||n<i)}});var YS=C((N8,QS)=>{"use strict";var mR=require("os"),WS=require("tty"),Ft=zS(),{env:Ke}=process,gn;Ft("no-color")||Ft("no-colors")||Ft("color=false")||Ft("color=never")?gn=0:(Ft("color")||Ft("colors")||Ft("color=true")||Ft("color=always"))&&(gn=1);"FORCE_COLOR"in Ke&&(Ke.FORCE_COLOR==="true"?gn=1:Ke.FORCE_COLOR==="false"?gn=0:gn=Ke.FORCE_COLOR.length===0?1:Math.min(parseInt(Ke.FORCE_COLOR,10),3));function Jf(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function Zf(e,t){if(gn===0)return 0;if(Ft("color=16m")||Ft("color=full")||Ft("color=truecolor"))return 3;if(Ft("color=256"))return 2;if(e&&!t&&gn===void 0)return 0;let r=gn||0;if(Ke.TERM==="dumb")return r;if(process.platform==="win32"){let n=mR.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Ke)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in Ke)||Ke.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Ke)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ke.TEAMCITY_VERSION)?1:0;if(Ke.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ke){let n=parseInt((Ke.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ke.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ke.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ke.TERM)||"COLORTERM"in Ke?1:r}function SR(e){let t=Zf(e,e&&e.isTTY);return Jf(t)}QS.exports={supportsColor:SR,stdout:Jf(Zf(!0,WS.isatty(1))),stderr:Jf(Zf(!0,WS.isatty(2)))}});var JS=C((Ge,Jo)=>{var CR=require("tty"),Xo=require("util");Ge.init=IR;Ge.log=TR;Ge.formatArgs=bR;Ge.save=AR;Ge.load=_R;Ge.useColors=ER;Ge.destroy=Xo.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ge.colors=[6,2,3,4,5,1];try{let e=YS();e&&(e.stderr||e).level>=2&&(Ge.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}Ge.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(i,a)=>a.toUpperCase()),n=process.env[t];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),e[r]=n,e},{});function ER(){return"colors"in Ge.inspectOpts?!!Ge.inspectOpts.colors:CR.isatty(process.stderr.fd)}function bR(e){let{namespace:t,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),a=`  ${i};1m${t} \x1B[0m`;e[0]=a+e[0].split(`
`).join(`
`+a),e.push(i+"m+"+Jo.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=xR()+t+" "+e[0]}function xR(){return Ge.inspectOpts.hideDate?"":new Date().toISOString()+" "}function TR(...e){return process.stderr.write(Xo.formatWithOptions(Ge.inspectOpts,...e)+`
`)}function AR(e){e?process.env.DEBUG=e:delete process.env.DEBUG}function _R(){return process.env.DEBUG}function IR(e){e.inspectOpts={};let t=Object.keys(Ge.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=Ge.inspectOpts[t[r]]}Jo.exports=Xf()(Ge);var{formatters:XS}=Jo.exports;XS.o=function(e){return this.inspectOpts.colors=this.useColors,Xo.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};XS.O=function(e){return this.inspectOpts.colors=this.useColors,Xo.inspect(e,this.inspectOpts)}});var Zo=C((D8,eh)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?eh.exports=HS():eh.exports=JS()});var eC=C(Nr=>{"use strict";var wR=Nr&&Nr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},BR=Nr&&Nr.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},ZS=Nr&&Nr.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(BR(arguments[t]));return e};Object.defineProperty(Nr,"__esModule",{value:!0});var RR=function(){function e(t){var r=this;this.parent=t;var n=function(i){return r.subscribe(i)};n.subscribe=n,n.unsubscribe=function(i){return r.unsubscribe(i)},n.once=function(){return r.once()},this.subscribable=n}return e.prototype.emit=function(){for(var t,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(Array.isArray(this.registeredListeners))try{for(var a=wR(this.registeredListeners),s=a.next();!s.done;s=a.next()){var o=s.value;o.apply(this.parent,n)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else this.registeredListeners&&this.registeredListeners.apply(this.parent,n)},e.prototype.subscribe=function(t){Array.isArray(this.registeredListeners)?this.registeredListeners=ZS(this.registeredListeners,[t]):this.registeredListeners?this.registeredListeners=[this.registeredListeners,t]:this.registeredListeners=t,this.monitor&&this.monitor(this);var r=this;return{unsubscribe:function(){return r.unsubscribe(t)}}},e.prototype.unsubscribe=function(t){if(Array.isArray(this.registeredListeners)){var r=this.registeredListeners.indexOf(t);if(r<0)return!1;var n=ZS(this.registeredListeners);return n.splice(r),this.registeredListeners=t,this.registeredListeners.length===0&&(this.registeredListeners=void 0),this.monitor&&this.monitor(this),!0}else if(this.registeredListeners===t)return this.registeredListeners=void 0,this.monitor&&this.monitor(this),!0;return!1},e.prototype.once=function(){var t=this;return new Promise(function(r,n){var i=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];t.unsubscribe(i),r(a)};t.subscribe(i)})},Object.defineProperty(e.prototype,"hasListeners",{get:function(){return this.registeredListeners!==void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listeners",{get:function(){return Array.isArray(this.registeredListeners)?this.registeredListeners.slice(0):[this.registeredListeners]},enumerable:!0,configurable:!0}),e.prototype.monitorListeners=function(t){if(this.monitor)throw new Error("A monitor is already registered, call removeMonitor before registering a new monitor");this.monitor=t},e.prototype.removeMonitor=function(){this.monitor=void 0},e}();Nr.Event=RR});var Wa=C(ec=>{"use strict";function OR(e){for(var t in e)ec.hasOwnProperty(t)||(ec[t]=e[t])}Object.defineProperty(ec,"__esModule",{value:!0});OR(eC())});var rC=C($n=>{"use strict";var tC=$n&&$n.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},NR=$n&&$n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($n,"__esModule",{value:!0});var DR=NR(Zo()),Qa=Wa(),PR=Yf(),tc=mr(),LR=function(){function e(t){this.debug=DR.default("th:discovery:"+t),this.errorEvent=new Qa.Event(this),this.availableEvent=new Qa.Event(this),this.unavailableEvent=new Qa.Event(this),this.updateEvent=new Qa.Event(this),this._destroyed=!1,this.destroyEvent=new Qa.Event(this)}return Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.logAndEmitError=function(t,r){r===void 0&&(r="An error occurred:"),this.debug(r,t),this.errorEvent.emit(t)},Object.defineProperty(e.prototype,"onAvailable",{get:function(){return this.availableEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUnavailable",{get:function(){return this.unavailableEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUpdate",{get:function(){return this.updateEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.find=function(t){var r,n;try{for(var i=tC(this.services),a=i.next();!a.done;a=i.next()){var s=a.value;if(t(s))return s}}catch(o){r={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return null},e.prototype.findAll=function(t){var r,n,i=[];try{for(var a=tC(this.services),s=a.next();!s.done;s=a.next()){var o=s.value;t(o)&&i.push(o)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},e.prototype.filter=function(t){return new tc.FilteredServiceDiscovery(this,t)},e.prototype.map=function(t){return PR.isAdvancedMapper(t)?new tc.MappedDiscovery(this,t):new tc.MappedDiscovery(this,{create:t})},e.prototype.and=function(t){throw new tc.MergedServiceDiscovery([this,t])},e.prototype.destroy=function(){return this.destroyed||(this._destroyed=!0,this.destroyEvent.emit()),Promise.resolve()},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDestroy",{get:function(){return this.destroyEvent.subscribable},enumerable:!0,configurable:!0}),e}();$n.AbstractServiceDiscovery=LR});var th=C((U8,aC)=>{"use strict";var nC=Array.isArray,iC=Object.keys,kR=Object.prototype.hasOwnProperty;aC.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){var n=nC(t),i=nC(r),a,s,o;if(n&&i){if(s=t.length,s!=r.length)return!1;for(a=s;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(n!=i)return!1;var u=t instanceof Date,c=r instanceof Date;if(u!=c)return!1;if(u&&c)return t.getTime()==r.getTime();var l=t instanceof RegExp,f=r instanceof RegExp;if(l!=f)return!1;if(l&&f)return t.toString()==r.toString();var h=iC(t);if(s=h.length,s!==iC(r).length)return!1;for(a=s;a--!==0;)if(!kR.call(r,h[a]))return!1;for(a=s;a--!==0;)if(o=h[a],!e(t[o],r[o]))return!1;return!0}return t!==t&&r!==r}});var oC=C(Dr=>{"use strict";var UR=Dr&&Dr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sC=Dr&&Dr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},qR=Dr&&Dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dr,"__esModule",{value:!0});var MR=mr(),FR=qR(th()),VR=function(e){UR(t,e);function t(r){var n=e.call(this,r)||this;return n.serviceMap=new Map,n}return Object.defineProperty(t.prototype,"services",{get:function(){return Array.from(this.serviceMap.values())},enumerable:!0,configurable:!0}),t.prototype.get=function(r){return this.serviceMap.get(r)||null},t.prototype.updateService=function(r){if(typeof r!="object"||r===null)throw new Error("A service object is required");if(!r.id)throw new Error("Services must have an identifier");var n=this.serviceMap.get(r.id);return n?FR.default(n,r)?null:(this.debug("Service with id",r.id,"has been updated"),this.serviceMap.set(r.id,r),this.updateEvent.emit(r,n),n):(this.debug("Service with id",r.id,"is now available"),this.serviceMap.set(r.id,r),this.availableEvent.emit(r),null)},t.prototype.removeService=function(r){if(typeof r=="undefined"||r===null)return null;var n=typeof r=="string"?r:r.id,i=this.serviceMap.get(n);return i?(this.debug("Service with id",n,"is no longer available"),this.serviceMap.delete(n),this.unavailableEvent.emit(i),i):null},t.prototype.setServices=function(r){var n,i,a,s,o=new Set;try{for(var u=sC(r),c=u.next();!c.done;c=u.next()){var l=c.value;o.add(l.id),this.updateService(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}try{for(var f=sC(this.serviceMap.keys()),h=f.next();!h.done;h=f.next()){var p=h.value;o.has(p)||this.removeService(p)}}catch(d){a={error:d}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}},t}(MR.AbstractServiceDiscovery);Dr.BasicServiceDiscovery=VR});var lC=C(Wt=>{"use strict";var KR=Wt&&Wt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cC=Wt&&Wt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{u(n.next(c))}catch(l){a(l)}}function o(c){try{u(n.throw(c))}catch(l){a(l)}}function u(c){c.done?i(c.value):new r(function(l){l(c.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},uC=Wt&&Wt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},GR=Wt&&Wt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Wt,"__esModule",{value:!0});var jR=mr(),HR=function(e){KR(t,e);function t(r,n){var i,a,s=e.call(this,r)||this;s.parent=n,s.handleParentServiceAvailable=s.handleParentServiceAvailable.bind(s),s.handleParentServiceUnavailable=s.handleParentServiceUnavailable.bind(s),s.handleParentServiceUpdate=s.handleParentServiceUpdate.bind(s),s.destroy=s.destroy.bind(s),s.parent.onAvailable(s.handleParentServiceAvailable),s.parent.onUnavailable(s.handleParentServiceUnavailable),s.parent.onUpdate(s.handleParentServiceUpdate),s.parent.onDestroy(s.destroy);try{for(var o=GR(n.services),u=o.next();!u.done;u=o.next()){var c=u.value;s.handleParentServiceAvailable(c)}}catch(l){i={error:l}}finally{try{u&&!u.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}return s}return t.prototype.release=function(){return cC(this,void 0,void 0,function(){return uC(this,function(r){switch(r.label){case 0:return this.destroyed?[2]:(this.parent.onAvailable.unsubscribe(this.handleParentServiceAvailable),this.parent.onUnavailable.unsubscribe(this.handleParentServiceUnavailable),this.parent.onUpdate.unsubscribe(this.handleParentServiceUpdate),this.parent.onDestroy.unsubscribe(this.destroy),[4,e.prototype.destroy.call(this)]);case 1:return r.sent(),[2]}})})},t.prototype.destroy=function(){return cC(this,void 0,void 0,function(){return uC(this,function(r){switch(r.label){case 0:return this.destroyed?[2]:[4,this.parent.destroy()];case 1:return r.sent(),[4,this.release()];case 2:return r.sent(),[2]}})})},t}(jR.BasicServiceDiscovery);Wt.LayeredServiceDiscovery=HR});var fC=C(Ya=>{"use strict";var $R=Ya&&Ya.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ya,"__esModule",{value:!0});var zR=mr(),WR=function(e){$R(t,e);function t(r,n){var i=e.call(this,"filtered",r)||this;return i.predicate=n,i}return Object.defineProperty(t.prototype,"services",{get:function(){return this.parent.services.filter(this.predicate)},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=this.parent.get(r);return n&&this.predicate(n)?n:null},t.prototype.handleParentServiceAvailable=function(r){this.predicate(r)&&this.updateService(r)},t.prototype.handleParentServiceUnavailable=function(r){this.removeService(r)},t.prototype.handleParentServiceUpdate=function(r){this.predicate(r)?this.updateService(r):this.removeService(r.id)},t}(zR.LayeredServiceDiscovery);Ya.FilteredServiceDiscovery=WR});var hC=C(Xa=>{"use strict";var QR=Xa&&Xa.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Xa,"__esModule",{value:!0});var YR=mr(),XR=function(e){QR(t,e);function t(r,n){var i=e.call(this,"mapped",r)||this;return i.mappedServices=new Map,i.mapper=n,i}return t.prototype.handleParentServiceAvailable=function(r){var n=this,i=this.mappedServices.get(r.id);if(i){this.debug("Warning: Received available event for already existing service",r.id);return}var a=Promise.resolve(this.mapper.create(r)).then(function(s){var o=n.mappedServices.get(r.id);!o||o.promise!==a||(o.promise=void 0,s&&(o.service=s,n.updateService(s)))}).catch(function(s){n.logAndEmitError(s,"An error occurred during mapping of "+r.id+":")});this.mappedServices.set(r.id,{promise:a})},t.prototype.handleParentServiceUnavailable=function(r){var n=this.mappedServices.get(r.id);if(n&&(this.mappedServices.delete(r.id),n.service)){var i=n.service.id;this.removeService(i)}},t.prototype.handleParentServiceUpdate=function(r,n){var i=this,a=this.mappedServices.get(r.id);if(!a){this.debug("Warning: Received an update for a service that was not available:",r.id);return}if(a.service&&this.mapper.update){a.promise&&this.debug("Update received for",r.id," while service was being updated, replacing with new update");var s=a.service.id,o=Promise.resolve(this.mapper.update({service:r,previousService:n,previousMappedService:a.service})).then(function(c){var l=i.mappedServices.get(r.id);!l||l.promise!==o||(l.promise=void 0,c&&c?(l.service=c,c.id!==s&&i.removeService(s),i.updateService(c)):(l.service=void 0,i.removeService(s)))}).catch(function(c){i.logAndEmitError(c,"An error occurred during update of "+r.id+":")});a.promise=o}else if(!a.service){var u=Promise.resolve(this.mapper.create(r)).then(function(c){var l=i.mappedServices.get(r.id);!l||l.promise!==u||(l.promise=void 0,c&&(l.service=c,i.updateService(c)))}).catch(function(c){i.logAndEmitError(c,"An error occurred during mapping of "+r.id+":")});a.promise=u}},t.prototype.updateService=function(r){var n=e.prototype.updateService.call(this,r);return n&&this.destroyService(n),n},t.prototype.removeService=function(r){var n=e.prototype.removeService.call(this,r);return n&&this.destroyService(n),n},t.prototype.destroyService=function(r){var n=this;if(this.mapper.destroy){var i=r.id;Promise.resolve(this.mapper.destroy(r)).catch(function(a){n.logAndEmitError(a,"An error occurred during destruction of mapped service with id "+i+":")})}},t}(YR.LayeredServiceDiscovery);Xa.MappedDiscovery=XR});var vC=C(Qt=>{"use strict";var JR=Qt&&Qt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dC=Qt&&Qt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{u(n.next(c))}catch(l){a(l)}}function o(c){try{u(n.throw(c))}catch(l){a(l)}}function u(c){c.done?i(c.value):new r(function(l){l(c.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},pC=Qt&&Qt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},rc=Qt&&Qt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Qt,"__esModule",{value:!0});var ZR=mr(),eO=function(e){JR(t,e);function t(r){var n,i,a=e.call(this,"combined")||this;a.combinedServiceData=new Map,a.instances=[];var s=function(f){var h=function(m){return a.handleAvailableOrUpdate(f,m)},p=function(m){return a.handleUnavailable(f,m)},d={discovery:f,handles:[f.onAvailable(h),f.onUpdate(h),f.onUnavailable(p),f.onError(o.handleError)]};o.instances.push(d)},o=this;try{for(var u=rc(r),c=u.next();!c.done;c=u.next()){var l=c.value;s(l)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return a}return t.prototype.release=function(){return dC(this,void 0,void 0,function(){var r,n,i,a,s,o,u,c,l,f;return pC(this,function(h){switch(h.label){case 0:if(!this.destroyed)try{for(r=rc(this.instances),n=r.next();!n.done;n=r.next()){i=n.value;try{for(a=(l=void 0,rc(i.handles)),s=a.next();!s.done;s=a.next())o=s.value,o.unsubscribe()}catch(p){l={error:p}}finally{try{s&&!s.done&&(f=a.return)&&f.call(a)}finally{if(l)throw l.error}}}}catch(p){u={error:p}}finally{try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}}return[4,e.prototype.destroy.call(this)];case 1:return h.sent(),[2]}})})},t.prototype.destroy=function(){return dC(this,void 0,void 0,function(){var r,n,i,a,s,o;return pC(this,function(u){switch(u.label){case 0:if(this.destroyed)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=rc(this.instances),n=r.next(),u.label=2;case 2:return n.done?[3,5]:(i=n.value,[4,i.discovery.destroy()]);case 3:u.sent(),u.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return a=u.sent(),s={error:a},[3,8];case 7:try{n&&!n.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 8:return[4,this.release()];case 9:return u.sent(),[2]}})})},t.prototype.handleError=function(r){e.prototype.logAndEmitError.call(this,r)},t.prototype.handleAvailableOrUpdate=function(r,n){var i=this.combinedServiceData.get(n.id);if(i){var a=i.discoveries.indexOf(r);a<0?(i.services.push(n),i.discoveries.push(r)):i.services[a]=n,(a===0||i.discoveries.length===1)&&this.updateService(n)}else i={services:[n],discoveries:[r]},this.combinedServiceData.set(n.id,i),this.updateService(n)},t.prototype.handleUnavailable=function(r,n){var i=this.combinedServiceData.get(n.id);if(i){var a=i.discoveries.indexOf(r);a<0||(i.discoveries.splice(a,1),i.services.splice(a,1),a===0&&(i.discoveries.length===0?(this.removeService(n),this.combinedServiceData.delete(n.id)):this.updateService(i.services[0])))}},t}(ZR.BasicServiceDiscovery);Qt.MergedServiceDiscovery=eO});var mr=C(nc=>{"use strict";function ki(e){for(var t in e)nc.hasOwnProperty(t)||(nc[t]=e[t])}Object.defineProperty(nc,"__esModule",{value:!0});ki(rC());ki(oC());ki(lC());ki(fC());ki(hC());ki(vC())});var yC=C(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});var tO=function(){function e(t){this.data=t,this.previous=this,this.next=this,this.time=Number.MAX_SAFE_INTEGER}return e.prototype.remove=function(){this.previous.next=this.next,this.next.previous=this.previous,this.next=this.previous=this},e.prototype.appendToTail=function(t){var r=t.previous;t.previous=this,r.next=this,this.next=t,this.previous=r},e.prototype.moveToTail=function(t){this.remove(),this.appendToTail(t)},e}();rh.TimerNode=tO});var ac=C(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});var gC=yC();function Ui(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}var nh=[64,64,32,4,1],qi=[Ui(1e3),Ui(6e4),Ui(36e5),Ui(864e5),nh[3]*Ui(864e5),nh[3]*Ui(864e5)],ic=qi.slice(0,qi.length-1).map(function(e){return 1+Math.floor(Math.log(e-1)*Math.LOG2E)}),rO=function(){return!1},nO=function(){function e(){this.base=Date.now(),this.layers=nh.map(function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=new gC.TimerNode(rO);return r}),this.time=0}return Object.defineProperty(e.prototype,"localTime",{get:function(){return Date.now()-this.base},enumerable:!0,configurable:!0}),e.prototype.findBucket=function(t){var r=this.layers,n=t.time-this.time;if(n<=0)return r[0][0];for(var i=0,a=r.length-1;i<a;i++)if(!(n>=qi[i+1])){var s=t.time>>>ic[i],o=s&r[i].length-1;return r[i][o]}return r[r.length-1][0]},e.prototype.advance=function(t){var r=this.time,n=t||this.localTime;this.time=n;for(var i=this.layers,a=[],s=0,o=ic.length;s<o;s++){var u=r>>>ic[s],c=n>>>ic[s];if(c<=u)break;var l=i[s],f=void 0,h=void 0;n-r>=qi[s+1]?(f=0,h=l.length-1):(f=u&qi[s]-1,h=c&qi[s]-1);for(var p=f;p<=h;p++){var d=l[p&l.length-1],m=d.next;for(d.previous=d,d.next=d;m!==d;){var S=m.next;if(m.time<=n)this.expireNode(m),a.push(m.data);else{var b=this.findBucket(m);m.moveToTail(b)}m=S}}}return a},e.prototype.schedule=function(t,r){var n=new gC.TimerNode(t);return n.time=this.localTime+r,this.scheduleNode(n)},e.prototype.scheduleNode=function(t){var r=this.findBucket(t);t.appendToTail(r);var n=this;return{remove:function(){n.expireNode(t)}}},e.prototype.expireNode=function(t){t.remove()},e}();ih.TimerWheel=nO});var mC=C(Ja=>{"use strict";var iO=Ja&&Ja.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Ja,"__esModule",{value:!0});var aO=ac(),sO=function(e){iO(t,e);function t(){var r=e.call(this)||this;return r.items=new Map,r}return t.prototype.unschedule=function(r){var n=this.items.get(r);return n?(n.remove(),this.items.delete(r),!0):!1},t.prototype.expireNode=function(r){this.items.delete(r.data),e.prototype.expireNode.call(this,r)},t.prototype.scheduleNode=function(r){var n=this.items.get(r.data);return n&&n.remove(),this.items.set(r.data,r),e.prototype.scheduleNode.call(this,r)},t}(aO.TimerWheel);Ja.ReschedulingTimerWheel=sO});var SC=C(Za=>{"use strict";var oO=Za&&Za.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Za,"__esModule",{value:!0});var cO=ac(),uO=function(){function e(){this.timerWheel=new cO.TimerWheel}return e.prototype.advance=function(){var t,r,n=this.timerWheel.advance();try{for(var i=oO(n),a=i.next();!a.done;a=i.next()){var s=a.value;s()}}catch(o){t={error:o}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.schedule=function(t,r){return this.timerWheel.schedule(t,r)},e}();Za.ActionTimerWheel=uO});var oc=C(sc=>{"use strict";function ah(e){for(var t in e)sc.hasOwnProperty(t)||(sc[t]=e[t])}Object.defineProperty(sc,"__esModule",{value:!0});ah(ac());ah(mC());ah(SC())});var sh=C(Yt=>{"use strict";var lO=Yt&&Yt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fO=Yt&&Yt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{u(n.next(c))}catch(l){a(l)}}function o(c){try{u(n.throw(c))}catch(l){a(l)}}function u(c){c.done?i(c.value):new r(function(l){l(c.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},hO=Yt&&Yt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},dO=Yt&&Yt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(Yt,"__esModule",{value:!0});var pO=oc(),vO=mr(),yO=function(e){lO(t,e);function t(r,n){var i=this;if(!n)throw new Error("options must be specified");if(!n.expirationTime||n.expirationTime<=0)throw new Error("expirationTime option is required and needs to be a positive number");return i=e.call(this,r)||this,i.expirationTime=n.expirationTime,i.expirationWheel=new pO.ReschedulingTimerWheel,i.expirationTimer=setInterval(i.removeExpiredServices.bind(i),1e3),i}return t.prototype.updateService=function(r,n){var i=e.prototype.updateService.call(this,r);return this.expirationWheel.schedule(r.id,n||this.expirationTime),i},t.prototype.removeService=function(r){var n=e.prototype.removeService.call(this,r);return n&&this.expirationWheel.unschedule(n.id),n},t.prototype.removeExpiredServices=function(r){var n,i,a=this.expirationWheel.advance(r);try{for(var s=dO(a),o=s.next();!o.done;o=s.next()){var u=o.value;this.removeService(u)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.destroy=function(){return fO(this,void 0,void 0,function(){return hO(this,function(r){switch(r.label){case 0:return clearInterval(this.expirationTimer),this.expirationTimer=void 0,[4,e.prototype.destroy.call(this)];case 1:return r.sent(),[2]}})})},t}(vO.BasicServiceDiscovery);Yt.ExpiringServiceDiscovery=yO});var CC=C(Pr=>{"use strict";var gO=Pr&&Pr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mO=Pr&&Pr.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{u(n.next(c))}catch(l){a(l)}}function o(c){try{u(n.throw(c))}catch(l){a(l)}}function u(c){c.done?i(c.value):new r(function(l){l(c.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},SO=Pr&&Pr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Pr,"__esModule",{value:!0});var CO=sh(),EO=function(e){gO(t,e);function t(r,n){var i=e.call(this,r,n)||this,a=n.searchTime;return i.debug("Searching every",a,"ms"),i.searchInterval=setInterval(function(){i.debug("Searching for services");try{i.search()}catch(s){i.logAndEmitError(s,"Caught error during search")}},a),i}return t.prototype.destroy=function(){return mO(this,void 0,void 0,function(){return SO(this,function(r){switch(r.label){case 0:return clearInterval(this.searchInterval),[4,e.prototype.destroy.call(this)];case 1:return r.sent(),[2]}})})},t}(CO.ExpiringServiceDiscovery);Pr.TimedServiceDiscovery=EO});var EC=C(es=>{"use strict";var bO=es&&es.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(es,"__esModule",{value:!0});var xO=mr(),TO=function(e){bO(t,e);function t(r){return r===void 0&&(r="manual"),e.call(this,r)||this}return t.prototype.add=function(r){return this.updateService(r)},t.prototype.remove=function(r){return this.removeService(r)},t.prototype.set=function(r){return this.setServices(r)},t}(xO.BasicServiceDiscovery);es.ManualDiscovery=TO});var bC=C(mn=>{"use strict";function oh(e){for(var t in e)mn.hasOwnProperty(t)||(mn[t]=e[t])}Object.defineProperty(mn,"__esModule",{value:!0});var cc=mr();mn.AbstractServiceDiscovery=cc.AbstractServiceDiscovery;mn.BasicServiceDiscovery=cc.BasicServiceDiscovery;mn.LayeredServiceDiscovery=cc.LayeredServiceDiscovery;mn.MergedServiceDiscovery=cc.MergedServiceDiscovery;oh(sh());oh(CC());oh(EC())});var xC=C(ts=>{"use strict";var AO=ts&&ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ts,"__esModule",{value:!0});var _O=AO(Zo()),IO=Wa(),wO=function(){function e(t){this.debug=_O.default("th:discovery:publisher:"+t),this.errorEvent=new IO.Event(this)}return Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.logAndEmitError=function(t,r){r===void 0&&(r="An error occurred:"),this.debug(r,t),this.errorEvent.emit(t)},e}();ts.AbstractServicePublisher=wO});var TC=C(uc=>{"use strict";function BO(e){for(var t in e)uc.hasOwnProperty(t)||(uc[t]=e[t])}Object.defineProperty(uc,"__esModule",{value:!0});BO(xC())});var IC=C((t5,_C)=>{"use strict";var AC="[a-fA-F\\d:]",Sn=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${AC})|(?<=${AC})(?=\\s|$))`:"",Xt="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Ne="[a-fA-F\\d]{1,4}",lc=`
(?:
(?:${Ne}:){7}(?:${Ne}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Ne}:){6}(?:${Xt}|:${Ne}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Ne}:){5}(?::${Xt}|(?::${Ne}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Ne}:){4}(?:(?::${Ne}){0,1}:${Xt}|(?::${Ne}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Ne}:){3}(?:(?::${Ne}){0,2}:${Xt}|(?::${Ne}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Ne}:){2}(?:(?::${Ne}){0,3}:${Xt}|(?::${Ne}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Ne}:){1}(?:(?::${Ne}){0,4}:${Xt}|(?::${Ne}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Ne}){0,5}:${Xt}|(?::${Ne}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),RO=new RegExp(`(?:^${Xt}$)|(?:^${lc}$)`),OO=new RegExp(`^${Xt}$`),NO=new RegExp(`^${lc}$`),ch=e=>e&&e.exact?RO:new RegExp(`(?:${Sn(e)}${Xt}${Sn(e)})|(?:${Sn(e)}${lc}${Sn(e)})`,"g");ch.v4=e=>e&&e.exact?OO:new RegExp(`${Sn(e)}${Xt}${Sn(e)}`,"g");ch.v6=e=>e&&e.exact?NO:new RegExp(`${Sn(e)}${lc}${Sn(e)}`,"g");_C.exports=ch});var BC=C(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});var DO=IC(),wC=DO.v6({exact:!0}),PO=function(){function e(t,r){this.host=t,this.port=r}return Object.defineProperty(e.prototype,"hasPort",{get:function(){return this.port>=0},enumerable:!0,configurable:!0}),e.fromString=function(t){if(t=t.trim(),t[0]==="["){var r=t.lastIndexOf("]");if(r<=0)return null;var n=t.substring(1,r);if(!wC.test(n))return null;if(t.length===r+1)return new e(n,0);if(t[r+1]===":"){var i=t.substring(r+2),a=parseInt(i,10);return new e(n,a)}else return null}else{var s=t.lastIndexOf(":"),o=t.indexOf(":")!==s;if(o)return wC.test(t)?new e(t,0):null;var n=s>=0?t.substring(0,s):t,a=0;if(s>=0){var i=t.substring(s+1);a=parseInt(i,10)}return new e(n,a)}},e.compare=function(t,r){return t.host<r.host?-1:t.host>r.host?1:t.port<r.port?-1:t.port===r.port?0:1},e}();uh.HostAndPort=PO});var RC=C(fc=>{"use strict";function LO(e){for(var t in e)fc.hasOwnProperty(t)||(fc[t]=e[t])}Object.defineProperty(fc,"__esModule",{value:!0});LO(BC())});var lh=C(hc=>{"use strict";function dc(e){for(var t in e)hc.hasOwnProperty(t)||(hc[t]=e[t])}Object.defineProperty(hc,"__esModule",{value:!0});dc(Yf());dc(bC());dc(TC());dc(RC())});var fh=C(Cn=>{var kO=function(e){return"_"+e},UO=function(e){return e};Cn.stringify=function(e){return typeof e=="object"&&e&&e.name?Cn.stringify(e.name,e.protocol,e.subtypes):Array.prototype.concat.apply([],arguments).filter(UO).map(kO).join(".")};Cn.parse=function(e){for(var t=e.split("."),r=0;r<t.length;r++)t[r][0]==="_"&&(t[r]=t[r].slice(1));return{name:t.shift(),protocol:t.shift()||null,subtypes:t}};Cn.tcp=function(e){return Cn.stringify(e,"tcp",Array.prototype.concat.apply([],Array.prototype.slice.call(arguments,1)))};Cn.udp=function(e){return Cn.stringify(e,"udp",Array.prototype.concat.apply([],Array.prototype.slice.call(arguments,1)))}});var OC=C(hh=>{"use strict";hh.toString=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e};hh.toType=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}});var NC=C(dh=>{"use strict";dh.toString=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e};dh.toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}});var DC=C(ph=>{"use strict";ph.toString=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e};ph.toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}});var PC=C(vh=>{"use strict";vh.toString=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e};vh.toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}});var LC=C(yh=>{"use strict";yh.toString=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:`OPTION_${e}`};yh.toCode=function(e){if(typeof e=="number")return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let t=e.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}});var qC=C((UC,gh)=>{var kC=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=f,e.encode=l,e.familyOf=c,e.name=void 0,e.sizeOf=u,e.v6=e.v4=void 0;let t=/^(\d{1,3}\.){3,3}\d{1,3}$/,r=4,n=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,i=16,a={name:"v4",size:r,isFormat:h=>t.test(h),encode(h,p,d){d=~~d,p=p||new Uint8Array(d+r);let m=h.length,S=0;for(let b=0;b<m;){let _=h.charCodeAt(b++);_===46?(p[d++]=S,S=0):S=S*10+(_-48)}return p[d]=S,p},decode(h,p){return p=~~p,`${h[p++]}.${h[p++]}.${h[p++]}.${h[p]}`}};e.v4=a;let s={name:"v6",size:i,isFormat:h=>h.length>0&&n.test(h),encode(h,p,d){d=~~d;let m=d+i,S=-1,b=0,_=0,I=!0,O=!1;p=p||new Uint8Array(d+i);for(let R=0;R<h.length;R++){let B=h.charCodeAt(R);B===58?(I?S!==-1?(d<m&&(p[d]=0),d<m-1&&(p[d+1]=0),d+=2):d<m&&(S=d):(O===!0?(d<m&&(p[d]=_),d++):(d<m&&(p[d]=b>>8),d<m-1&&(p[d+1]=b&255),d+=2),b=0,_=0),I=!0,O=!1):B===46?(d<m&&(p[d]=_),d++,_=0,b=0,I=!1,O=!0):(I=!1,B>=97?B-=87:B>=65?B-=55:(B-=48,_=_*10+B),b=(b<<4)+B)}if(I===!1)O===!0?(d<m&&(p[d]=_),d++):(d<m&&(p[d]=b>>8),d<m-1&&(p[d+1]=b&255),d+=2);else if(S===0)d<m&&(p[d]=0),d<m-1&&(p[d+1]=0),d+=2;else if(S!==-1){d+=2;for(let R=Math.min(d-1,m-1);R>=S+2;R--)p[R]=p[R-2];p[S]=0,p[S+1]=0,S=d}if(S!==d&&S!==-1)for(d>m-2&&(d=m-2);m>S;)p[--m]=d<m&&d>S?p[--d]:0;else for(;d<m;)p[d++]=0;return p},decode(h,p){p=~~p;let d="";for(let m=0;m<i;m+=2)m!==0&&(d+=":"),d+=(h[p+m]<<8|h[p+m+1]).toString(16);return d.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};e.v6=s;let o="ip";e.name=o;function u(h){if(a.isFormat(h))return a.size;if(s.isFormat(h))return s.size;throw Error(`Invalid ip address: ${h}`)}function c(h){return u(h)===a.size?1:2}function l(h,p,d){d=~~d;let m=u(h);return typeof p=="function"&&(p=p(d+m)),m===a.size?a.encode(h,p,d):s.encode(h,p,d)}function f(h,p,d){if(p=~~p,d=d||h.length-p,d===a.size)return a.decode(h,p,d);if(d===s.size)return s.decode(h,p,d);throw Error(`Invalid buffer size needs to be ${a.size} for v4 or ${s.size} for v6.`)}return"default"in e?e.default:e}({});typeof define=="function"&&define.amd?define([],function(){return kC}):typeof gh=="object"&&typeof UC=="object"&&(gh.exports=kC)});var VC=C(j=>{"use strict";var H=require("buffer").Buffer,jr=OC(),qO=NC(),MO=DC(),vc=PC(),mh=LC(),zn=qC(),FO=0,MC=32768,Sh=32768,VO=~Sh,FC=32768,KO=~FC,M=j.name={};M.encode=function(e,t,r,{mail:n=!1}={}){t||(t=H.alloc(M.encodingLength(e))),r||(r=0);let i=r,a=e.replace(/^\.|\.$/gm,"");if(a.length){let s=[];if(n){let o="";a.split(".").forEach(u=>{u.endsWith("\\")?o+=(o.length?".":"")+u.slice(0,-1):s.length===0&&o.length?s.push(o+"."+u):s.push(u)})}else s=a.split(".");for(let o=0;o<s.length;o++){let u=t.write(s[o],r+1);t[r]=u,r+=u+1}}return t[r++]=0,M.encode.bytes=r-i,t};M.encode.bytes=0;M.decode=function(e,t,{mail:r=!1}={}){t||(t=0);let n=[],i=t,a=0,s=0,o=!1;for(;;){if(t>=e.length)throw new Error("Cannot decode name (buffer overflow)");let u=e[t++];if(s+=o?0:1,u===0)break;if(u&192)if((u&192)===192){if(t+1>e.length)throw new Error("Cannot decode name (buffer overflow)");let c=e.readUInt16BE(t-1)-49152;if(c>=i)throw new Error("Cannot decode name (bad pointer)");t=c,i=c,s+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(t+u>e.length)throw new Error("Cannot decode name (buffer overflow)");if(a+=u+1,a>254)throw new Error("Cannot decode name (name too long)");let c=e.toString("utf-8",t,t+u);r&&(c=c.replace(/\./g,"\\.")),n.push(c),t+=u,s+=o?0:u}}return M.decode.bytes=s,n.length===0?".":n.join(".")};M.decode.bytes=0;M.encodingLength=function(e){return e==="."||e===".."?1:H.byteLength(e.replace(/^\.|\.$/gm,""))+2};var te={};te.encode=function(e,t,r){t||(t=H.alloc(te.encodingLength(e))),r||(r=0);let n=t.write(e,r+1);return t[r]=n,te.encode.bytes=n+1,t};te.encode.bytes=0;te.decode=function(e,t){t||(t=0);let r=e[t],n=e.toString("utf-8",t+1,t+1+r);return te.decode.bytes=r+1,n};te.decode.bytes=0;te.encodingLength=function(e){return H.byteLength(e)+1};var er={};er.encode=function(e,t,r){t||(t=er.encodingLength(e)),r||(r=0);let n=(e.flags||0)&32767,i=e.type==="response"?MC:FO;return t.writeUInt16BE(e.id||0,r),t.writeUInt16BE(n|i,r+2),t.writeUInt16BE(e.questions.length,r+4),t.writeUInt16BE(e.answers.length,r+6),t.writeUInt16BE(e.authorities.length,r+8),t.writeUInt16BE(e.additionals.length,r+10),t};er.encode.bytes=12;er.decode=function(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");let r=e.readUInt16BE(t+2);return{id:e.readUInt16BE(t),type:r&MC?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:MO.toString(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:qO.toString(r&15),questions:new Array(e.readUInt16BE(t+4)),answers:new Array(e.readUInt16BE(t+6)),authorities:new Array(e.readUInt16BE(t+8)),additionals:new Array(e.readUInt16BE(t+10))}};er.decode.bytes=12;er.encodingLength=function(){return 12};var Lr=j.unknown={};Lr.encode=function(e,t,r){return t||(t=H.alloc(Lr.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.length,r),e.copy(t,r+2),Lr.encode.bytes=e.length+2,t};Lr.encode.bytes=0;Lr.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n=e.slice(t+2,t+2+r);return Lr.decode.bytes=r+2,n};Lr.decode.bytes=0;Lr.encodingLength=function(e){return e.length+2};var kr=j.ns={};kr.encode=function(e,t,r){return t||(t=H.alloc(kr.encodingLength(e))),r||(r=0),M.encode(e,t,r+2),t.writeUInt16BE(M.encode.bytes,r),kr.encode.bytes=M.encode.bytes+2,t};kr.encode.bytes=0;kr.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n=M.decode(e,t+2);return kr.decode.bytes=r+2,n};kr.decode.bytes=0;kr.encodingLength=function(e){return M.encodingLength(e)+2};var Ur=j.soa={};Ur.encode=function(e,t,r){t||(t=H.alloc(Ur.encodingLength(e))),r||(r=0);let n=r;return r+=2,M.encode(e.mname,t,r),r+=M.encode.bytes,M.encode(e.rname,t,r,{mail:!0}),r+=M.encode.bytes,t.writeUInt32BE(e.serial||0,r),r+=4,t.writeUInt32BE(e.refresh||0,r),r+=4,t.writeUInt32BE(e.retry||0,r),r+=4,t.writeUInt32BE(e.expire||0,r),r+=4,t.writeUInt32BE(e.minimum||0,r),r+=4,t.writeUInt16BE(r-n-2,n),Ur.encode.bytes=r-n,t};Ur.encode.bytes=0;Ur.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.mname=M.decode(e,t),t+=M.decode.bytes,n.rname=M.decode(e,t,{mail:!0}),t+=M.decode.bytes,n.serial=e.readUInt32BE(t),t+=4,n.refresh=e.readUInt32BE(t),t+=4,n.retry=e.readUInt32BE(t),t+=4,n.expire=e.readUInt32BE(t),t+=4,n.minimum=e.readUInt32BE(t),t+=4,Ur.decode.bytes=t-r,n};Ur.decode.bytes=0;Ur.encodingLength=function(e){return 22+M.encodingLength(e.mname)+M.encodingLength(e.rname)};var qr=j.txt={};qr.encode=function(e,t,r){Array.isArray(e)||(e=[e]);for(let i=0;i<e.length;i++)if(typeof e[i]=="string"&&(e[i]=H.from(e[i])),!H.isBuffer(e[i]))throw new Error("Must be a Buffer");t||(t=H.alloc(qr.encodingLength(e))),r||(r=0);let n=r;return r+=2,e.forEach(function(i){t[r++]=i.length,i.copy(t,r,0,i.length),r+=i.length}),t.writeUInt16BE(r-n-2,n),qr.encode.bytes=r-n,t};qr.encode.bytes=0;qr.decode=function(e,t){t||(t=0);let r=t,n=e.readUInt16BE(t);t+=2;let i=[];for(;n>0;){let a=e[t++];if(--n,n<a)throw new Error("Buffer overflow");i.push(e.slice(t,t+a)),t+=a,n-=a}return qr.decode.bytes=t-r,i};qr.decode.bytes=0;qr.encodingLength=function(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach(function(r){typeof r=="string"?t+=H.byteLength(r)+1:t+=r.length+1}),t};var Mr=j.null={};Mr.encode=function(e,t,r){t||(t=H.alloc(Mr.encodingLength(e))),r||(r=0),typeof e=="string"&&(e=H.from(e)),e||(e=H.alloc(0));let n=r;r+=2;let i=e.length;return e.copy(t,r,0,i),r+=i,t.writeUInt16BE(r-n-2,n),Mr.encode.bytes=r-n,t};Mr.encode.bytes=0;Mr.decode=function(e,t){t||(t=0);let r=t,n=e.readUInt16BE(t);t+=2;let i=e.slice(t,t+n);return t+=n,Mr.decode.bytes=t-r,i};Mr.decode.bytes=0;Mr.encodingLength=function(e){return e?(H.isBuffer(e)?e.length:H.byteLength(e))+2:2};var Fr=j.hinfo={};Fr.encode=function(e,t,r){t||(t=H.alloc(Fr.encodingLength(e))),r||(r=0);let n=r;return r+=2,te.encode(e.cpu,t,r),r+=te.encode.bytes,te.encode(e.os,t,r),r+=te.encode.bytes,t.writeUInt16BE(r-n-2,n),Fr.encode.bytes=r-n,t};Fr.encode.bytes=0;Fr.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.cpu=te.decode(e,t),t+=te.decode.bytes,n.os=te.decode(e,t),t+=te.decode.bytes,Fr.decode.bytes=t-r,n};Fr.decode.bytes=0;Fr.encodingLength=function(e){return te.encodingLength(e.cpu)+te.encodingLength(e.os)+2};var Jt=j.ptr={},GO=j.cname=Jt,jO=j.dname=Jt;Jt.encode=function(e,t,r){return t||(t=H.alloc(Jt.encodingLength(e))),r||(r=0),M.encode(e,t,r+2),t.writeUInt16BE(M.encode.bytes,r),Jt.encode.bytes=M.encode.bytes+2,t};Jt.encode.bytes=0;Jt.decode=function(e,t){t||(t=0);let r=M.decode(e,t+2);return Jt.decode.bytes=M.decode.bytes+2,r};Jt.decode.bytes=0;Jt.encodingLength=function(e){return M.encodingLength(e)+2};var Vr=j.srv={};Vr.encode=function(e,t,r){t||(t=H.alloc(Vr.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.priority||0,r+2),t.writeUInt16BE(e.weight||0,r+4),t.writeUInt16BE(e.port||0,r+6),M.encode(e.target,t,r+8);let n=M.encode.bytes+6;return t.writeUInt16BE(n,r),Vr.encode.bytes=n+2,t};Vr.encode.bytes=0;Vr.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n={};return n.priority=e.readUInt16BE(t+2),n.weight=e.readUInt16BE(t+4),n.port=e.readUInt16BE(t+6),n.target=M.decode(e,t+8),Vr.decode.bytes=r+2,n};Vr.decode.bytes=0;Vr.encodingLength=function(e){return 8+M.encodingLength(e.target)};var It=j.caa={};It.ISSUER_CRITICAL=128;It.encode=function(e,t,r){let n=It.encodingLength(e);return t||(t=H.alloc(It.encodingLength(e))),r||(r=0),e.issuerCritical&&(e.flags=It.ISSUER_CRITICAL),t.writeUInt16BE(n-2,r),r+=2,t.writeUInt8(e.flags||0,r),r+=1,te.encode(e.tag,t,r),r+=te.encode.bytes,t.write(e.value,r),r+=H.byteLength(e.value),It.encode.bytes=n,t};It.encode.bytes=0;It.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t);t+=2;let n=t,i={};return i.flags=e.readUInt8(t),t+=1,i.tag=te.decode(e,t),t+=te.decode.bytes,i.value=e.toString("utf-8",t,n+r),i.issuerCritical=!!(i.flags&It.ISSUER_CRITICAL),It.decode.bytes=r+2,i};It.decode.bytes=0;It.encodingLength=function(e){return te.encodingLength(e.tag)+te.encodingLength(e.value)+2};var En=j.mx={};En.encode=function(e,t,r){t||(t=H.alloc(En.encodingLength(e))),r||(r=0);let n=r;return r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,M.encode(e.exchange,t,r),r+=M.encode.bytes,t.writeUInt16BE(r-n-2,n),En.encode.bytes=r-n,t};En.encode.bytes=0;En.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.preference=e.readUInt16BE(t),t+=2,n.exchange=M.decode(e,t),t+=M.decode.bytes,En.decode.bytes=t-r,n};En.encodingLength=function(e){return 4+M.encodingLength(e.exchange)};var Kr=j.a={};Kr.encode=function(e,t,r){return t||(t=H.alloc(Kr.encodingLength(e))),r||(r=0),t.writeUInt16BE(4,r),r+=2,zn.v4.encode(e,t,r),Kr.encode.bytes=6,t};Kr.encode.bytes=0;Kr.decode=function(e,t){t||(t=0),t+=2;let r=zn.v4.decode(e,t);return Kr.decode.bytes=6,r};Kr.decode.bytes=0;Kr.encodingLength=function(){return 6};var Gr=j.aaaa={};Gr.encode=function(e,t,r){return t||(t=H.alloc(Gr.encodingLength(e))),r||(r=0),t.writeUInt16BE(16,r),r+=2,zn.v6.encode(e,t,r),Gr.encode.bytes=18,t};Gr.encode.bytes=0;Gr.decode=function(e,t){t||(t=0),t+=2;let r=zn.v6.decode(e,t);return Gr.decode.bytes=18,r};Gr.decode.bytes=0;Gr.encodingLength=function(){return 18};var bt=j.option={};bt.encode=function(e,t,r){t||(t=H.alloc(bt.encodingLength(e))),r||(r=0);let n=r,i=mh.toCode(e.code);if(t.writeUInt16BE(i,r),r+=2,e.data)t.writeUInt16BE(e.data.length,r),r+=2,e.data.copy(t,r),r+=e.data.length;else switch(i){case 8:let a=e.sourcePrefixLength||0,s=e.family||zn.familyOf(e.ip),o=zn.encode(e.ip,H.alloc),u=Math.ceil(a/8);t.writeUInt16BE(u+4,r),r+=2,t.writeUInt16BE(s,r),r+=2,t.writeUInt8(a,r++),t.writeUInt8(e.scopePrefixLength||0,r++),o.copy(t,r,0,u),r+=u;break;case 11:e.timeout?(t.writeUInt16BE(2,r),r+=2,t.writeUInt16BE(e.timeout,r),r+=2):(t.writeUInt16BE(0,r),r+=2);break;case 12:let c=e.length||0;t.writeUInt16BE(c,r),r+=2,t.fill(0,r,r+c),r+=c;break;case 14:let l=e.tags.length*2;t.writeUInt16BE(l,r),r+=2;for(let f of e.tags)t.writeUInt16BE(f,r),r+=2;break;default:throw new Error(`Unknown roption code: ${e.code}`)}return bt.encode.bytes=r-n,t};bt.encode.bytes=0;bt.decode=function(e,t){t||(t=0);let r={};r.code=e.readUInt16BE(t),r.type=mh.toString(r.code),t+=2;let n=e.readUInt16BE(t);switch(t+=2,r.data=e.slice(t,t+n),r.code){case 8:r.family=e.readUInt16BE(t),t+=2,r.sourcePrefixLength=e.readUInt8(t++),r.scopePrefixLength=e.readUInt8(t++);let i=H.alloc(r.family===1?4:16);e.copy(i,0,t,t+n-4),r.ip=zn.decode(i);break;case 11:n>0&&(r.timeout=e.readUInt16BE(t),t+=2);break;case 14:r.tags=[];for(let a=0;a<n;a+=2)r.tags.push(e.readUInt16BE(t)),t+=2}return bt.decode.bytes=n+4,r};bt.decode.bytes=0;bt.encodingLength=function(e){if(e.data)return e.data.length+4;switch(mh.toCode(e.code)){case 8:let r=e.sourcePrefixLength||0;return Math.ceil(r/8)+8;case 11:return typeof e.timeout=="number"?6:4;case 12:return e.length+4;case 14:return 4+e.tags.length*2}throw new Error(`Unknown roption code: ${e.code}`)};var Bt=j.opt={};Bt.encode=function(e,t,r){t||(t=H.alloc(Bt.encodingLength(e))),r||(r=0);let n=r,i=Mi(e,bt);return t.writeUInt16BE(i,r),r=rs(e,bt,t,r+2),Bt.encode.bytes=r-n,t};Bt.encode.bytes=0;Bt.decode=function(e,t){t||(t=0);let r=t,n=[],i=e.readUInt16BE(t);t+=2;let a=0;for(;i>0;)n[a++]=bt.decode(e,t),t+=bt.decode.bytes,i-=bt.decode.bytes;return Bt.decode.bytes=t-r,n};Bt.decode.bytes=0;Bt.encodingLength=function(e){return 2+Mi(e||[],bt)};var gt=j.dnskey={};gt.PROTOCOL_DNSSEC=3;gt.ZONE_KEY=128;gt.SECURE_ENTRYPOINT=32768;gt.encode=function(e,t,r){t||(t=H.alloc(gt.encodingLength(e))),r||(r=0);let n=r,i=e.key;if(!H.isBuffer(i))throw new Error("Key must be a Buffer");return r+=2,t.writeUInt16BE(e.flags,r),r+=2,t.writeUInt8(gt.PROTOCOL_DNSSEC,r),r+=1,t.writeUInt8(e.algorithm,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,gt.encode.bytes=r-n,t.writeUInt16BE(gt.encode.bytes-2,n),t};gt.encode.bytes=0;gt.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);if(t+=2,n.flags=e.readUInt16BE(t),t+=2,e.readUInt8(t)!==gt.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return t+=1,n.algorithm=e.readUInt8(t),t+=1,n.key=e.slice(t,r+i+2),t+=n.key.length,gt.decode.bytes=t-r,n};gt.decode.bytes=0;gt.encodingLength=function(e){return 6+H.byteLength(e.key)};var Sr=j.rrsig={};Sr.encode=function(e,t,r){t||(t=H.alloc(Sr.encodingLength(e))),r||(r=0);let n=r,i=e.signature;if(!H.isBuffer(i))throw new Error("Signature must be a Buffer");return r+=2,t.writeUInt16BE(jr.toType(e.typeCovered),r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.labels,r),r+=1,t.writeUInt32BE(e.originalTTL,r),r+=4,t.writeUInt32BE(e.expiration,r),r+=4,t.writeUInt32BE(e.inception,r),r+=4,t.writeUInt16BE(e.keyTag,r),r+=2,M.encode(e.signersName,t,r),r+=M.encode.bytes,i.copy(t,r,0,i.length),r+=i.length,Sr.encode.bytes=r-n,t.writeUInt16BE(Sr.encode.bytes-2,n),t};Sr.encode.bytes=0;Sr.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.typeCovered=jr.toString(e.readUInt16BE(t)),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.labels=e.readUInt8(t),t+=1,n.originalTTL=e.readUInt32BE(t),t+=4,n.expiration=e.readUInt32BE(t),t+=4,n.inception=e.readUInt32BE(t),t+=4,n.keyTag=e.readUInt16BE(t),t+=2,n.signersName=M.decode(e,t),t+=M.decode.bytes,n.signature=e.slice(t,r+i+2),t+=n.signature.length,Sr.decode.bytes=t-r,n};Sr.decode.bytes=0;Sr.encodingLength=function(e){return 20+M.encodingLength(e.signersName)+H.byteLength(e.signature)};var Cr=j.rp={};Cr.encode=function(e,t,r){t||(t=H.alloc(Cr.encodingLength(e))),r||(r=0);let n=r;return r+=2,M.encode(e.mbox||".",t,r,{mail:!0}),r+=M.encode.bytes,M.encode(e.txt||".",t,r),r+=M.encode.bytes,Cr.encode.bytes=r-n,t.writeUInt16BE(Cr.encode.bytes-2,n),t};Cr.encode.bytes=0;Cr.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.mbox=M.decode(e,t,{mail:!0})||".",t+=M.decode.bytes,n.txt=M.decode(e,t)||".",t+=M.decode.bytes,Cr.decode.bytes=t-r,n};Cr.decode.bytes=0;Cr.encodingLength=function(e){return 2+M.encodingLength(e.mbox||".")+M.encodingLength(e.txt||".")};var je={};je.encode=function(e,t,r){t||(t=H.alloc(je.encodingLength(e))),r||(r=0);let n=r;for(var i=[],a=0;a<e.length;a++){var s=jr.toType(e[a]);i[s>>8]===void 0&&(i[s>>8]=[]),i[s>>8][s>>3&31]|=1<<7-(s&7)}for(a=0;a<i.length;a++)if(i[a]!==void 0){var o=H.from(i[a]);t.writeUInt8(a,r),r+=1,t.writeUInt8(o.length,r),r+=1,o.copy(t,r),r+=o.length}return je.encode.bytes=r-n,t};je.encode.bytes=0;je.decode=function(e,t,r){t||(t=0);let n=t;for(var i=[];t-n<r;){var a=e.readUInt8(t);t+=1;var s=e.readUInt8(t);t+=1;for(var o=0;o<s;o++)for(var u=e.readUInt8(t+o),c=0;c<8;c++)if(u&1<<7-c){var l=jr.toString(a<<8|o<<3|c);i.push(l)}t+=s}return je.decode.bytes=t-n,i};je.decode.bytes=0;je.encodingLength=function(e){for(var t=[],r=0;r<e.length;r++){var n=jr.toType(e[r]);t[n>>8]=Math.max(t[n>>8]||0,n&255)}var i=0;for(r=0;r<t.length;r++)t[r]!==void 0&&(i+=2+Math.ceil((t[r]+1)/8));return i};var Er=j.nsec={};Er.encode=function(e,t,r){t||(t=H.alloc(Er.encodingLength(e))),r||(r=0);let n=r;return r+=2,M.encode(e.nextDomain,t,r),r+=M.encode.bytes,je.encode(e.rrtypes,t,r),r+=je.encode.bytes,Er.encode.bytes=r-n,t.writeUInt16BE(Er.encode.bytes-2,n),t};Er.encode.bytes=0;Er.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.nextDomain=M.decode(e,t),t+=M.decode.bytes,n.rrtypes=je.decode(e,t,i-(t-r)),t+=je.decode.bytes,Er.decode.bytes=t-r,n};Er.decode.bytes=0;Er.encodingLength=function(e){return 2+M.encodingLength(e.nextDomain)+je.encodingLength(e.rrtypes)};var br=j.nsec3={};br.encode=function(e,t,r){t||(t=H.alloc(br.encodingLength(e))),r||(r=0);let n=r,i=e.salt;if(!H.isBuffer(i))throw new Error("salt must be a Buffer");let a=e.nextDomain;if(!H.isBuffer(a))throw new Error("nextDomain must be a Buffer");return r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.flags,r),r+=1,t.writeUInt16BE(e.iterations,r),r+=2,t.writeUInt8(i.length,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,t.writeUInt8(a.length,r),r+=1,a.copy(t,r,0,a.length),r+=a.length,je.encode(e.rrtypes,t,r),r+=je.encode.bytes,br.encode.bytes=r-n,t.writeUInt16BE(br.encode.bytes-2,n),t};br.encode.bytes=0;br.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);t+=2,n.algorithm=e.readUInt8(t),t+=1,n.flags=e.readUInt8(t),t+=1,n.iterations=e.readUInt16BE(t),t+=2;let a=e.readUInt8(t);t+=1,n.salt=e.slice(t,t+a),t+=a;let s=e.readUInt8(t);return t+=1,n.nextDomain=e.slice(t,t+s),t+=s,n.rrtypes=je.decode(e,t,i-(t-r)),t+=je.decode.bytes,br.decode.bytes=t-r,n};br.decode.bytes=0;br.encodingLength=function(e){return 8+e.salt.length+e.nextDomain.length+je.encodingLength(e.rrtypes)};var xr=j.ds={};xr.encode=function(e,t,r){t||(t=H.alloc(xr.encodingLength(e))),r||(r=0);let n=r,i=e.digest;if(!H.isBuffer(i))throw new Error("Digest must be a Buffer");return r+=2,t.writeUInt16BE(e.keyTag,r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.digestType,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,xr.encode.bytes=r-n,t.writeUInt16BE(xr.encode.bytes-2,n),t};xr.encode.bytes=0;xr.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.keyTag=e.readUInt16BE(t),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.digestType=e.readUInt8(t),t+=1,n.digest=e.slice(t,r+i+2),t+=n.digest.length,xr.decode.bytes=t-r,n};xr.decode.bytes=0;xr.encodingLength=function(e){return 6+H.byteLength(e.digest)};var wt=j.sshfp={};wt.getFingerprintLengthForHashType=function(t){switch(t){case 1:return 20;case 2:return 32}};wt.encode=function(t,r,n){r||(r=H.alloc(wt.encodingLength(t))),n||(n=0);let i=n;n+=2,r[n]=t.algorithm,n+=1,r[n]=t.hash,n+=1;let a=H.from(t.fingerprint.toUpperCase(),"hex");if(a.length!==wt.getFingerprintLengthForHashType(t.hash))throw new Error("Invalid fingerprint length");return a.copy(r,n),n+=a.byteLength,wt.encode.bytes=n-i,r.writeUInt16BE(wt.encode.bytes-2,i),r};wt.encode.bytes=0;wt.decode=function(t,r){r||(r=0);let n=r,i={};r+=2,i.algorithm=t[r],r+=1,i.hash=t[r],r+=1;let a=wt.getFingerprintLengthForHashType(i.hash);return i.fingerprint=t.slice(r,r+a).toString("hex").toUpperCase(),r+=a,wt.decode.bytes=r-n,i};wt.decode.bytes=0;wt.encodingLength=function(e){return 4+H.from(e.fingerprint,"hex").byteLength};var Tr=j.naptr={};Tr.encode=function(e,t,r){t||(t=H.alloc(Tr.encodingLength(e))),r||(r=0);let n=r;return r+=2,t.writeUInt16BE(e.order||0,r),r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,te.encode(e.flags,t,r),r+=te.encode.bytes,te.encode(e.services,t,r),r+=te.encode.bytes,te.encode(e.regexp,t,r),r+=te.encode.bytes,M.encode(e.replacement,t,r),r+=M.encode.bytes,Tr.encode.bytes=r-n,t.writeUInt16BE(Tr.encode.bytes-2,n),t};Tr.encode.bytes=0;Tr.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.order=e.readUInt16BE(t),t+=2,n.preference=e.readUInt16BE(t),t+=2,n.flags=te.decode(e,t),t+=te.decode.bytes,n.services=te.decode(e,t),t+=te.decode.bytes,n.regexp=te.decode(e,t),t+=te.decode.bytes,n.replacement=M.decode(e,t),t+=M.decode.bytes,Tr.decode.bytes=t-r,n};Tr.decode.bytes=0;Tr.encodingLength=function(e){return te.encodingLength(e.flags)+te.encodingLength(e.services)+te.encodingLength(e.regexp)+M.encodingLength(e.replacement)+6};var Ar=j.tlsa={};Ar.encode=function(e,t,r){t||(t=H.alloc(Ar.encodingLength(e))),r||(r=0);let n=r,i=e.certificate;if(!H.isBuffer(i))throw new Error("Certificate must be a Buffer");return r+=2,t.writeUInt8(e.usage,r),r+=1,t.writeUInt8(e.selector,r),r+=1,t.writeUInt8(e.matchingType,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,Ar.encode.bytes=r-n,t.writeUInt16BE(Ar.encode.bytes-2,n),t};Ar.encode.bytes=0;Ar.decode=function(e,t){t||(t=0);let r=t,n={},i=e.readUInt16BE(t);return t+=2,n.usage=e.readUInt8(t),t+=1,n.selector=e.readUInt8(t),t+=1,n.matchingType=e.readUInt8(t),t+=1,n.certificate=e.slice(t,r+i+2),t+=n.certificate.length,Ar.decode.bytes=t-r,n};Ar.decode.bytes=0;Ar.encodingLength=function(e){return 5+H.byteLength(e.certificate)};var Ch=j.record=function(e){switch(e.toUpperCase()){case"A":return Kr;case"PTR":return Jt;case"CNAME":return GO;case"DNAME":return jO;case"TXT":return qr;case"NULL":return Mr;case"AAAA":return Gr;case"SRV":return Vr;case"HINFO":return Fr;case"CAA":return It;case"NS":return kr;case"SOA":return Ur;case"MX":return En;case"OPT":return Bt;case"DNSKEY":return gt;case"RRSIG":return Sr;case"RP":return Cr;case"NSEC":return Er;case"NSEC3":return br;case"SSHFP":return wt;case"DS":return xr;case"NAPTR":return Tr;case"TLSA":return Ar}return Lr},Ye=j.answer={};Ye.encode=function(e,t,r){t||(t=H.alloc(Ye.encodingLength(e))),r||(r=0);let n=r;if(M.encode(e.name,t,r),r+=M.encode.bytes,t.writeUInt16BE(jr.toType(e.type),r),e.type.toUpperCase()==="OPT"){if(e.name!==".")throw new Error("OPT name must be root.");t.writeUInt16BE(e.udpPayloadSize||4096,r+2),t.writeUInt8(e.extendedRcode||0,r+4),t.writeUInt8(e.ednsVersion||0,r+5),t.writeUInt16BE(e.flags||0,r+6),r+=8,Bt.encode(e.options||[],t,r),r+=Bt.encode.bytes}else{let i=vc.toClass(e.class===void 0?"IN":e.class);e.flush&&(i|=Sh),t.writeUInt16BE(i,r+2),t.writeUInt32BE(e.ttl||0,r+4),r+=8;let a=Ch(e.type);a.encode(e.data,t,r),r+=a.encode.bytes}return Ye.encode.bytes=r-n,t};Ye.encode.bytes=0;Ye.decode=function(e,t){t||(t=0);let r={},n=t;if(r.name=M.decode(e,t),t+=M.decode.bytes,r.type=jr.toString(e.readUInt16BE(t)),r.type==="OPT")r.udpPayloadSize=e.readUInt16BE(t+2),r.extendedRcode=e.readUInt8(t+4),r.ednsVersion=e.readUInt8(t+5),r.flags=e.readUInt16BE(t+6),r.flag_do=(r.flags>>15&1)===1,r.options=Bt.decode(e,t+8),t+=8+Bt.decode.bytes;else{let i=e.readUInt16BE(t+2);r.ttl=e.readUInt32BE(t+4),r.class=vc.toString(i&VO),r.flush=!!(i&Sh);let a=Ch(r.type);r.data=a.decode(e,t+8),t+=8+a.decode.bytes}return Ye.decode.bytes=t-n,r};Ye.decode.bytes=0;Ye.encodingLength=function(e){let t=e.data!==null&&e.data!==void 0?e.data:e.options;return M.encodingLength(e.name)+8+Ch(e.type).encodingLength(t)};var Zt=j.question={};Zt.encode=function(e,t,r){t||(t=H.alloc(Zt.encodingLength(e))),r||(r=0);let n=r;return M.encode(e.name,t,r),r+=M.encode.bytes,t.writeUInt16BE(jr.toType(e.type),r),r+=2,t.writeUInt16BE(vc.toClass(e.class===void 0?"IN":e.class),r),r+=2,Zt.encode.bytes=r-n,e};Zt.encode.bytes=0;Zt.decode=function(e,t){t||(t=0);let r=t,n={};return n.name=M.decode(e,t),t+=M.decode.bytes,n.type=jr.toString(e.readUInt16BE(t)),t+=2,n.class=vc.toString(e.readUInt16BE(t)),t+=2,!!(n.class&FC)&&(n.class&=KO),Zt.decode.bytes=t-r,n};Zt.decode.bytes=0;Zt.encodingLength=function(e){return M.encodingLength(e.name)+4};j.AUTHORITATIVE_ANSWER=1024;j.TRUNCATED_RESPONSE=512;j.RECURSION_DESIRED=256;j.RECURSION_AVAILABLE=128;j.AUTHENTIC_DATA=32;j.CHECKING_DISABLED=16;j.DNSSEC_OK=32768;j.encode=function(e,t,r){let n=!t;n&&(t=H.alloc(j.encodingLength(e))),r||(r=0);let i=r;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),er.encode(e,t,r),r+=er.encode.bytes,r=rs(e.questions,Zt,t,r),r=rs(e.answers,Ye,t,r),r=rs(e.authorities,Ye,t,r),r=rs(e.additionals,Ye,t,r),j.encode.bytes=r-i,n&&j.encode.bytes!==t.length?t.slice(0,j.encode.bytes):t};j.encode.bytes=0;j.decode=function(e,t){t||(t=0);let r=t,n=er.decode(e,t);return t+=er.decode.bytes,t=pc(n.questions,Zt,e,t),t=pc(n.answers,Ye,e,t),t=pc(n.authorities,Ye,e,t),t=pc(n.additionals,Ye,e,t),j.decode.bytes=t-r,n};j.decode.bytes=0;j.encodingLength=function(e){return er.encodingLength(e)+Mi(e.questions||[],Zt)+Mi(e.answers||[],Ye)+Mi(e.authorities||[],Ye)+Mi(e.additionals||[],Ye)};j.streamEncode=function(e){let t=j.encode(e),r=H.alloc(2);r.writeUInt16BE(t.byteLength);let n=H.concat([r,t]);return j.streamEncode.bytes=n.byteLength,n};j.streamEncode.bytes=0;j.streamDecode=function(e){let t=e.readUInt16BE(0);if(e.byteLength<t+2)return null;let r=j.decode(e.slice(2));return j.streamDecode.bytes=j.decode.bytes,r};j.streamDecode.bytes=0;function Mi(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function rs(e,t,r,n){for(let i=0;i<e.length;i++)t.encode(e[i],r,n),n+=t.encode.bytes;return n}function pc(e,t,r,n){for(let i=0;i<e.length;i++)e[i]=t.decode(r,n),n+=t.decode.bytes;return n}});var jC=C((h5,GC)=>{"use strict";var KC=YO;process.nextTick(QO,42);GC.exports=HO;function HO(e){var t=n;return r;function r(i){t(i||zO)}function n(i){var a=[i];t=s,e(o);function s(u){a.push(u)}function o(u){var c=arguments;for(t=$O(u)?n:l;a.length;)l(a.shift());function l(f){KC(WO,f,c)}}}}function $O(e){return Object.prototype.toString.call(e)==="[object Error]"}function zO(){}function WO(e,t){e.apply(null,t)}function QO(e){e===42&&(KC=process.nextTick)}function YO(e,t,r){process.nextTick(function(){e(t,r)})}});var zC=C((d5,$C)=>{var Eh=VC(),XO=require("dgram"),JO=jC(),ZO=require("events"),xh=require("os"),bh=function(){};$C.exports=function(e){e||(e={});var t=new ZO.EventEmitter,r=typeof e.port=="number"?e.port:5353,n=e.type||"udp4",i=e.ip||e.host||(n==="udp4"?"224.0.0.251":null),a={address:i,port:r},s={},o=!1,u=null;if(n==="udp6"&&(!i||!e.interface))throw new Error("For IPv6 multicast you must specify `ip` and `interface`");var c=e.socket||XO.createSocket({type:n,reuseAddr:e.reuseAddr!==!1,toString:function(){return n}});c.on("error",function(f){f.code==="EACCES"||f.code==="EADDRINUSE"?t.emit("error",f):t.emit("warning",f)}),c.on("message",function(f,h){try{f=Eh.decode(f)}catch(p){t.emit("warning",p);return}t.emit("packet",f,h),f.type==="query"&&t.emit("query",f,h),f.type==="response"&&t.emit("response",f,h)}),c.on("listening",function(){r||(r=a.port=c.address().port),e.multicast!==!1&&(t.update(),u=setInterval(t.update,5e3),c.setMulticastTTL(e.ttl||255),c.setMulticastLoopback(e.loopback!==!1))});var l=JO(function(f){if(!r||e.bind===!1)return f(null);c.once("error",f),c.bind(r,e.bind||e.interface,function(){c.removeListener("error",f),f(null)})});return l(function(f){if(f)return t.emit("error",f);t.emit("ready")}),t.send=function(f,h,p){if(typeof h=="function")return t.send(f,null,h);p||(p=bh),h?!h.host&&!h.address&&(h.address=a.address):h=a,l(d);function d(m){if(o)return p();if(m)return p(m);var S=Eh.encode(f);c.send(S,0,S.length,h.port,h.address||h.host,p)}},t.response=t.respond=function(f,h,p){Array.isArray(f)&&(f={answers:f}),f.type="response",f.flags=(f.flags||0)|Eh.AUTHORITATIVE_ANSWER,t.send(f,h,p)},t.query=function(f,h,p,d){if(typeof h=="function")return t.query(f,null,null,h);if(typeof h=="object"&&h&&h.port)return t.query(f,null,h,p);if(typeof p=="function")return t.query(f,h,null,p);d||(d=bh),typeof f=="string"&&(f=[{name:f,type:h||"ANY"}]),Array.isArray(f)&&(f={type:"query",questions:f}),f.type="query",t.send(f,p,d)},t.destroy=function(f){if(f||(f=bh),o)return process.nextTick(f);o=!0,clearInterval(u);for(var h in s)try{c.dropMembership(i,h)}catch(p){}s={},c.close(f)},t.update=function(){for(var f=e.interface?[].concat(e.interface):t3(),h=!1,p=0;p<f.length;p++){var d=f[p];if(!s[d])try{c.addMembership(i,d),s[d]=!0,h=!0}catch(m){t.emit("warning",m)}}if(h){if(c.setMulticastInterface)try{c.setMulticastInterface(e.interface||e3())}catch(m){t.emit("warning",m)}t.emit("networkInterface")}},t};function e3(){for(var e=xh.networkInterfaces(),t=Object.keys(e),r=0;r<t.length;r++)for(var n=e[t[r]],i=0;i<n.length;i++){var a=n[i];if(HC(a.family)&&!a.internal)return xh.platform()==="darwin"&&t[r]==="en0"?a.address:"0.0.0.0"}return"127.0.0.1"}function t3(){for(var e=xh.networkInterfaces(),t=Object.keys(e),r=[],n=0;n<t.length;n++)for(var i=e[t[n]],a=0;a<i.length;a++){var s=i[a];if(HC(s.family)){r.push(s.address);break}}return r}function HC(e){return e===4||e==="IPv4"}});var Ah=C(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});var r3=function(){function e(t){this.mapRecord=t.mapRecord,this.onQuery=t.onQuery,this.onResponse=t.onResponse,this.onError=t.onError}return e}();Th.AbstractTransport=r3});var YC=C(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});var WC=96,QC=61;function n3(e,t,r){t===void 0&&(t=0),r===void 0&&(r=e.length);for(var n=t,i=!1,a=!1,s=[],o=[];n<r;){var u=e[n];i?(u===WC?s.push("`"):u===QC?s.push("="):(s.push("`"),s.push(String.fromCharCode(u))),i=!1):a?o.push(String.fromCharCode(u)):u===WC?i=!0:u===QC?a=!0:s.push(String.fromCharCode(u)),n++}if(s.length===0)return null;var c=s.join("").toLowerCase();return o.length===0?{key:c,value:!0}:{key:c,value:o.join("")}}_h.decodeTXT=n3});var Ih=C(mt=>{"use strict";var Fi=mt&&mt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),i3=mt&&mt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},a3=mt&&mt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mt,"__esModule",{value:!0});var XC=Wa(),JC=a3(th()),s3=YC(),Wn=function(){function e(t){this.name=t.name||"",this.class=t.class||"IN",this.flush=t.flush||!1,this.ttl=t.ttl,this.lastRefresh=Date.now(),this.expireEvent=new XC.Event(this),this.refreshEvent=new XC.Event(this)}return e.prototype.destroy=function(){this.expireEvent.emit()},e.prototype.refresh=function(t){this.ttl=t,this.lastRefresh=Date.now(),this.refreshEvent.emit()},Object.defineProperty(e.prototype,"remainingTTL",{get:function(){if(this.ttl){var t=Math.floor((Date.now()-this.lastRefresh)/1e3);return this.ttl-t}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onExpire",{get:function(){return this.expireEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onRefresh",{get:function(){return this.refreshEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t.type!==this.type||t.name!==this.name?!1:this.isDataEqual(t)},e}();mt.Record=Wn;var o3=function(e){Fi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="A",n.ip=r.ip,n}return t.prototype.isDataEqual=function(r){return this.ip===r.ip},t}(Wn);mt.ARecord=o3;var c3=function(e){Fi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="AAAA",n.ip=r.ip,n}return t.prototype.isDataEqual=function(r){return this.ip===r.ip},t}(Wn);mt.AAAARecord=c3;var u3=function(e){Fi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="SRV",n.target=r.target,n.port=r.port,n}return t.prototype.isDataEqual=function(r){return this.target===r.target&&this.port===r.port},t}(Wn);mt.SRVRecord=u3;var l3=function(e){Fi(t,e);function t(r){var n=e.call(this,r)||this;return n.type="PTR",n.hostname=r.hostname,n}return t.prototype.isDataEqual=function(r){return this.hostname===r.hostname},t.prototype.toData=function(){return this.hostname},t}(Wn);mt.PTRRecord=l3;var f3=function(e){Fi(t,e);function t(r){var n,i,a=e.call(this,r)||this;if(a.type="TXT",a.binaryData=r.data,a.data=new Map,r.decode)try{for(var s=i3(a.binaryData),o=s.next();!o.done;o=s.next()){var u=o.value,c=s3.decodeTXT(u);c&&a.data.set(c.key,c.value)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}return t.prototype.isDataEqual=function(r){return JC.default(this.binaryData,this.binaryData)},t.prototype.toData=function(){return this.binaryData},t}(Wn);mt.TXTRecord=f3;var h3=function(e){Fi(t,e);function t(r){var n=e.call(this,r)||this;return n.type=r.type,n.data=r.data,n}return t.prototype.isDataEqual=function(r){return JC.default(this.data,r.data)},t.prototype.toData=function(){return this.data},t}(Wn);mt.UnknownRecord=h3});var wh=C(Qn=>{"use strict";var d3=Qn&&Qn.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a},p3=Qn&&Qn.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d3(arguments[t]));return e};Object.defineProperty(Qn,"__esModule",{value:!0});var v3=function(){function e(t,r){r===void 0&&(r=[]),this.answers=t,this.additionals=r}return Object.defineProperty(e.prototype,"mergedRecords",{get:function(){return p3(this.answers,this.additionals)},enumerable:!0,configurable:!0}),e}();Qn.AbstractPacket=v3});var Bh=C(ns=>{"use strict";var y3=ns&&ns.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ns,"__esModule",{value:!0});var g3=wh(),m3=function(e){y3(t,e);function t(r,n,i){n===void 0&&(n=[]),i===void 0&&(i=[]);var a=e.call(this,n,i)||this;return a.questions=r,a}return t}(g3.AbstractPacket);ns.MDNSQuery=m3});var Rh=C(is=>{"use strict";var S3=is&&is.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(is,"__esModule",{value:!0});var C3=wh(),E3=function(e){S3(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(C3.AbstractPacket);is.MDNSResponse=E3});var eE=C(_r=>{"use strict";var b3=_r&&_r.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x3=_r&&_r.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},T3=_r&&_r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_r,"__esModule",{value:!0});var A3=T3(zC()),_3=Ah(),Vt=Ih(),I3=Bh(),w3=Rh(),B3=function(e){b3(t,e);function t(r){var n=e.call(this,r)||this;return n.mdns=A3.default(),n.mdns.on("error",function(i){n.onError(i)}),n.mdns.on("response",function(i,a){var s=new w3.MDNSResponse(n.fromTransportsRecords(i.answers||[]),n.fromTransportsRecords(i.additionals||[]));n.onResponse(s)}),n.mdns.on("query",function(i,a){var s=new I3.MDNSQuery(i.questions||[],n.fromTransportsRecords(i.answers||[]),n.fromTransportsRecords(i.additionals||[]));n.onQuery(s)}),n}return t.prototype.fromTransportsRecords=function(r){var n,i,a=[];try{for(var s=x3(r),o=s.next();!o.done;o=s.next()){var u=o.value;a.push(this.mapRecord(ZC(u)))}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},t.prototype.query=function(r){var n=this,i={questions:r.questions.map(function(a){return{name:a.name,type:a.type,class:a.class}}),answers:r.answers.map(yc),additionals:r.additionals.map(yc)};return new Promise(function(a,s){return n.mdns.query(i,function(o){o&&s(o),a()})})},t.prototype.respond=function(r){var n=this,i={answers:r.answers.map(yc),additionals:r.additionals.map(yc)};return new Promise(function(a,s){return n.mdns.respond(i,function(o){o&&s(o),a()})})},t.prototype.destroy=function(){this.mdns.destroy()},t}(_3.AbstractTransport);_r.MulticastDNSTransport=B3;function yc(e){var t;return e instanceof Vt.ARecord||e instanceof Vt.AAAARecord?t=e.ip:e instanceof Vt.TXTRecord?t=e.binaryData:e instanceof Vt.PTRRecord?t=e.hostname:e instanceof Vt.SRVRecord?t={target:e.target,port:e.port}:e instanceof Vt.UnknownRecord?t=e.data:t=void 0,{type:e.type,name:e.name,ttl:e.ttl,class:e.class,flush:e.flush,data:t}}function ZC(e){switch(e.type){case"A":return new Vt.ARecord(Object.assign(e,{ip:e.data}));case"AAAA":return new Vt.AAAARecord(Object.assign(e,{ip:e.data}));case"TXT":return new Vt.TXTRecord(Object.assign(e,{data:e.data,decode:!0}));case"SRV":return new Vt.SRVRecord(Object.assign(e,{target:e.data.target,port:e.data.port}));case"PTR":return new Vt.PTRRecord(Object.assign(e,{hostname:e.data}));default:return new Vt.UnknownRecord(e)}}_r.fromTransportRecord=ZC});var tE=C(as=>{"use strict";function R3(e){for(var t in e)as.hasOwnProperty(t)||(as[t]=e[t])}Object.defineProperty(as,"__esModule",{value:!0});var O3=eE();R3(Ah());var N3=function(e){return new O3.MulticastDNSTransport(e)};function D3(e){return N3(e)}as.createTransport=D3});var Dh=C(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});var Oh=Wa(),P3=function(){function e(t){this.manager=t,this.queryEvent=new Oh.Event(this),this.responseEvent=new Oh.Event(this),this.errorEvent=new Oh.Event(this)}return Object.defineProperty(e.prototype,"onResponse",{get:function(){return this.responseEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onQuery",{get:function(){return this.queryEvent.subscribable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorEvent.subscribable},enumerable:!0,configurable:!0}),e.prototype.query=function(t){return this.manager.query(t)},e.prototype.respond=function(t){return this.manager.respond(t)},e.prototype.destroy=function(){this.manager.release(this)},e.prototype.receiveQuery=function(t){this.queryEvent.emit(t)},e.prototype.receiveResponse=function(t){this.responseEvent.emit(t)},e.prototype.receiveError=function(t){this.errorEvent.emit(t)},e.prototype.find=function(t){return this.manager.find(t)},e.prototype.findAll=function(t){return this.manager.findAll(t)},e}();Nh.MDNS=P3});var iE=C(tr=>{"use strict";var rE=tr&&tr.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{u(n.next(c))}catch(l){a(l)}}function o(c){try{u(n.throw(c))}catch(l){a(l)}}function u(c){c.done?i(c.value):new r(function(l){l(c.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},nE=tr&&tr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Yn=tr&&tr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},L3=tr&&tr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tr,"__esModule",{value:!0});var k3=oc(),U3=tE(),q3=Dh(),M3=L3(Zo()),gc=M3.default("th:mdns:manager"),F3=function(){function e(){this.instances=[],this.records=[],this.recordExpirer=new k3.ReschedulingTimerWheel,this.mapRecord=this.mapRecord.bind(this)}return e.prototype.removeRecord=function(t){var r=this.records.findIndex(function(n){return n===t});r>=0&&(this.recordExpirer.unschedule(t),this.records.splice(r,1),t.destroy(),gc("REMOVED",t.type,t.name," total=",this.records.length))},e.prototype.mapRecord=function(t){var r,n;if(t.flush){var i=0,a=Date.now()-1e3;try{for(var s=Yn(this.records),o=s.next();!o.done;o=s.next()){var u=o.value;u.type===t.type&&u.class===t.class&&u.name===t.name&&u.lastRefresh<a&&(this.scheduleRemoval(u,0),i++)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}gc("FLUSH",t.type,t.class,t.name,"records=",i)}if(typeof t.ttl!="number")return t;var c=this.records.find(function(l){return l.isEqual(t)});return c?(c.refresh(t.ttl),this.scheduleRemoval(c,t.ttl),gc("REFRESH",t.type,t.class,t.name,"ttl=",t.ttl,"total=",this.records.length),c):(this.records.push(t),this.scheduleRemoval(t,t.ttl),gc("ADDED",t.type,t.class,t.name,"ttl=",t.ttl,"total=",this.records.length),t)},e.prototype.scheduleRemoval=function(t,r){return this.recordExpirer.schedule(t,r*1e3)},e.prototype.advanceAndExpire=function(){var t,r;try{for(var n=Yn(this.recordExpirer.advance()),i=n.next();!i.done;i=n.next()){var a=i.value;this.removeRecord(a)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.createMulticastDNS=function(){var t=this;this.transport=U3.createTransport({mapRecord:function(r){return t.mapRecord(r)},onError:function(r){var n,i;try{for(var a=Yn(t.instances),s=a.next();!s.done;s=a.next()){var o=s.value;o.receiveError(r)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},onQuery:function(r){var n,i;try{for(var a=Yn(t.instances),s=a.next();!s.done;s=a.next()){var o=s.value;o.receiveQuery(r)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},onResponse:function(r){var n,i;try{for(var a=Yn(t.instances),s=a.next();!s.done;s=a.next()){var o=s.value;o.receiveResponse(r)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}}}),this.recordExpirerInterval=setInterval(function(){return t.advanceAndExpire()},1e3)},e.prototype.requestHandle=function(){this.instances.length===0&&this.createMulticastDNS();var t=new q3.MDNS(this);return this.instances.push(t),t},e.prototype.release=function(t){var r=this.instances.indexOf(t);r<0||(this.instances.splice(r,1),this.instances.length===0&&this.transport&&(this.transport.destroy(),this.transport=void 0,clearInterval(this.recordExpirerInterval)))},e.prototype.query=function(t){return rE(this,void 0,void 0,function(){return nE(this,function(r){switch(r.label){case 0:if(!this.transport)throw new Error("No mDNS transport instance available");return[4,this.transport.query(t)];case 1:return[2,r.sent()]}})})},e.prototype.respond=function(t){return rE(this,void 0,void 0,function(){return nE(this,function(r){if(!this.transport)throw new Error("No mDNS transport instance available");return[2,this.transport.respond(t)]})})},e.prototype.find=function(t){var r,n;this.advanceAndExpire();try{for(var i=Yn(this.records),a=i.next();!a.done;a=i.next()){var s=a.value;if(t(s))return s}}catch(o){r={error:o}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.findAll=function(t){var r,n;this.advanceAndExpire();var i=[];try{for(var a=Yn(this.records),s=a.next();!s.done;s=a.next()){var o=s.value;t(o)&&i.push(o)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},e}();tr.Manager=F3});var Ph=C(ss=>{"use strict";function mc(e){for(var t in e)ss.hasOwnProperty(t)||(ss[t]=e[t])}Object.defineProperty(ss,"__esModule",{value:!0});var V3=iE();mc(Dh());mc(Ih());mc(Bh());mc(Rh());var K3=new V3.Manager;function G3(){return K3.requestHandle()}ss.createMDNS=G3});var aE=C(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});var j3=function(){function e(t,r){this.onSet=t,this.onRemove=r}return Object.defineProperty(e.prototype,"record",{get:function(){return this._record||null},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this._record!==t&&(this._record&&this.onRemove(this._record),this._record=t||void 0,t&&this.onSet(t))},e}();Lh.RecordHandle=j3});var oE=C(os=>{"use strict";var sE=os&&os.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(os,"__esModule",{value:!0});var H3=function(){function e(t){this.refresher=t,this._items=[],this._handles=[]}return Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){var r,n,i,a,s=[],o=[],u=new Set(this._handles);try{for(var c=sE(t),l=c.next();!l.done;l=c.next()){var f=l.value;s.push(f);var h=this._items.indexOf(f);if(h<0)o.push(f.onExpire(this.refresher));else{var p=this._handles[h];u.delete(p),o.push(p)}}}catch(S){r={error:S}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}try{for(var d=sE(u),m=d.next();!m.done;m=d.next()){var p=m.value;p.unsubscribe()}}catch(S){i={error:S}}finally{try{m&&!m.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}this._items=s,this._handles=o},enumerable:!0,configurable:!0}),e}();os.RecordArray=H3});var cE=C(cs=>{"use strict";var $3=cs&&cs.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(cs,"__esModule",{value:!0});var z3=oc(),W3=function(){function e(t){var r=this;this.query=t,this.records=new z3.ReschedulingTimerWheel,this.interval=setInterval(function(){return r.check()},1e3);var n=this;this.listener=function(){n.scheduleRefresh(this)}}return e.prototype.destroy=function(){clearInterval(this.interval)},e.prototype.add=function(t){t.onRefresh.unsubscribe(this.listener),t.onRefresh.subscribe(this.listener),this.scheduleRefresh(t)},e.prototype.remove=function(t){t.onRefresh.unsubscribe(this.listener),this.records.unschedule(t)},e.prototype.check=function(){var t,r,n=this.records.advance(),i=Date.now();try{for(var a=$3(n),s=a.next();!s.done;s=a.next()){var o=s.value;if(o.ttl){var u=(i-o.lastRefresh)/1e3,c=o.ttl-u;if(!(c<=0)){var l=(o.ttl-c)/o.ttl,f=l+.05;if(f>.97)return;var h=f*o.ttl-u;this.records.schedule(o,h*1e3)}}}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}n.length>0&&this.query()},e.prototype.scheduleRefresh=function(t){if(t.ttl){var r=.8+Math.random()*.02;this.records.schedule(t,t.ttl*r*1e3)}},e}();cs.TTLRefreshHelper=W3});var dE=C(Rt=>{"use strict";var Q3=Rt&&Rt.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y3=Rt&&Rt.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{u(n.next(c))}catch(l){a(l)}}function o(c){try{u(n.throw(c))}catch(l){a(l)}}function u(c){c.done?i(c.value):new r(function(l){l(c.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},X3=Rt&&Rt.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Vi=Rt&&Rt.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},J3=Rt&&Rt.__read||function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a};Object.defineProperty(Rt,"__esModule",{value:!0});var kh=lh(),uE=fh(),bn=Ph(),lE=aE(),fE=oE(),Z3=cE(),hE=1e3,eN=60*60*1e3,tN=3,rN=function(e){Q3(t,e);function t(r){var n=e.call(this,"mdns")||this;n.serviceData=new Map,n.queuedRefreshes=new Set,n.ttlRefreshHelper=new Z3.TTLRefreshHelper(function(){return n.search(!1)}),n.searchName=uE.stringify(r.type,r.protocol||"tcp")+".local",n.normalizedSearchName=Uh(n.searchName),n.mdns=bn.createMDNS(),n.mdns.onResponse(n.handleResponse.bind(n)),n.mdns.onQuery(n.handleQuery.bind(n));var i=20+Math.random()*100;return n.searchTime=0,n.searchLastInvoke=0,n.searchTimeout=setTimeout(function(){return n.search(!0)},i),n}return t.prototype.destroy=function(){return Y3(this,void 0,void 0,function(){return X3(this,function(r){switch(r.label){case 0:return clearTimeout(this.searchTimeout),this.ttlRefreshHelper.destroy(),this.mdns.destroy(),[4,e.prototype.destroy.call(this)];case 1:return r.sent(),[2]}})})},t.prototype.search=function(r){var n=this,i=Date.now();if(r)this.debug("Searching for services on schedule");else{if(i-this.searchLastInvoke<hE)return;this.debug("Searching for services due to near-end TTL")}this.searchLastInvoke=i;var a=new bn.MDNSQuery([{type:"PTR",name:this.searchName}]);this.mdns.query(a).catch(function(s){return n.logAndEmitError(s,"Caught error during search")}),r&&(this.searchTime===0?this.searchTime=hE:this.searchTime=Math.min(this.searchTime*tN,eN)),this.rescheduleSearch()},t.prototype.rescheduleSearch=function(){var r=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){return r.search(!0)},this.searchTime)},t.prototype.handleQuery=function(r){this.isSameQuery(r)&&Date.now()-this.searchLastInvoke>500&&(this.debug("Rescheduling search due to incoming query"),this.rescheduleSearch())},t.prototype.isSameQuery=function(r){var n,i,a,s;try{for(var o=Vi(r.questions),u=o.next();!u.done;u=o.next()){var c=u.value;if(c.type==="PTR"&&Uh(c.name)===this.normalizedSearchName){if(r.answers){var l=function(S){var b=f.mdns.find(function(_){return _.isEqual(S)});if(!b)return{value:!1}},f=this;try{for(var h=(a=void 0,Vi(r.answers)),p=h.next();!p.done;p=h.next()){var d=p.value,m=l(d);if(typeof m=="object")return m.value}}catch(S){a={error:S}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}return!0}}}catch(S){n={error:S}}finally{try{u&&!u.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.isMatching=function(r){var n=Uh(r.name);return n===this.normalizedSearchName},t.prototype.handleResponse=function(r){var n,i,a=this,s=function(f){if(f instanceof bn.PTRRecord&&o.isMatching(f)){if(o.queuedRefreshes.has(f.hostname))return"continue";o.queuedRefreshes.add(f.hostname),setTimeout(function(){return a.refreshService(f.hostname)},500)}},o=this;try{for(var u=Vi(r.mergedRecords),c=u.next();!c.done;c=u.next()){var l=c.value;s(l)}}catch(f){n={error:f}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}},t.prototype.refreshService=function(r){var n,i,a,s,o,u,c=this;this.debug("Refreshing service",r),this.queuedRefreshes.delete(r);var l=this.serviceData.get(r),f=this.mdns.find(function(Q){return Q instanceof bn.PTRRecord&&Q.hostname===r});if(l)if(f)l.PTR.record!==f&&(this.debug("Updating",r,"with new PTR"),l.PTR.update(f));else{this.debug("Removing",r,"due to no PTR"),this.invalidateService(r,l);return}else{if(!f){this.debug("Requested refresh of non-existent service",r,"without an initial PTR record");return}var h=function(){c.queuedRefreshes.has(r)||(c.queuedRefreshes.add(r),setTimeout(function(){return c.refreshService(r)},500))},p=function(Q){Q.onExpire(h),c.ttlRefreshHelper.add(Q)},d=function(Q){Q.onExpire.unsubscribe(h),c.ttlRefreshHelper.remove(Q)};l={PTR:new lE.RecordHandle(p,d),SRV:new lE.RecordHandle(p,d),addressRecords:new fE.RecordArray(h),txtRecords:new fE.RecordArray(h)},l.PTR.update(f),this.serviceData.set(r,l)}var m=this.mdns.find(function(Q){return Q instanceof bn.SRVRecord&&Q.name===r});if(m)l.SRV.record!==m&&(this.debug("Updating",r,"with new SRV"),l.SRV.update(m));else{this.debug("Removing",r,"due to no SRV"),this.invalidateService(r,l);return}var S=m.port,b=m.target,_=this.mdns.findAll(function(Q){return(Q instanceof bn.ARecord||Q instanceof bn.AAAARecord)&&Q.name===b});if(l.addressRecords.items=_,_.length===0){this.debug("Removing",r,"due to no addresses available"),this.invalidateService(r,l);return}var I=_.map(function(Q){return new kh.HostAndPort(Q.ip,S)}).sort(kh.HostAndPort.compare),O=new Map,R=[],B=this.mdns.findAll(function(Q){return Q instanceof bn.TXTRecord&&Q.name===r});try{for(var V=Vi(B),K=V.next();!K.done;K=V.next()){var W=K.value;try{for(var Z=(a=void 0,Vi(W.data.entries())),re=Z.next();!re.done;re=Z.next()){var le=J3(re.value,2),ye=le[0],Be=le[1];O.set(ye,Be)}}catch(Q){a={error:Q}}finally{try{re&&!re.done&&(s=Z.return)&&s.call(Z)}finally{if(a)throw a.error}}try{for(var ne=(o=void 0,Vi(W.binaryData)),ve=ne.next();!ve.done;ve=ne.next()){var G=ve.value;R.push(G)}}catch(Q){o={error:Q}}finally{try{ve&&!ve.done&&(u=ne.return)&&u.call(ne)}finally{if(o)throw o.error}}}}catch(Q){n={error:Q}}finally{try{K&&!K.done&&(i=V.return)&&i.call(V)}finally{if(n)throw n.error}}var Ot=r.indexOf("."),Nt=r.substring(0,Ot),Se=uE.parse(r.substring(Ot+1,r.length-6)),Te={id:r,name:Nt,type:Se.name||"unknown",protocol:Se.protocol,subtypes:Se.subtypes||[],addresses:I,data:O,binaryData:R};this.updateService(Te)},t.prototype.invalidateService=function(r,n){n.PTR.update(null),n.SRV.update(null),this.removeService(r),this.serviceData.delete(r)},t}(kh.BasicServiceDiscovery);Rt.MDNSServiceDiscovery=rN;function Uh(e){return e&&e.toLowerCase()}});var pE=C(Sc=>{"use strict";function nN(e){for(var t in e)Sc.hasOwnProperty(t)||(Sc[t]=e[t])}Object.defineProperty(Sc,"__esModule",{value:!0});nN(dE())});var yE=C(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});var qh="0123456789abcdefghijlkmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function vE(e){for(var t=qh.length,r=[];e>t;)r.push(qh[e%t]),e=Math.floor(e/t);return r.push(qh[e]),r.reverse().join("")}var iN=Date.UTC(2017,1,1);function aN(){return vE(Date.now()-iN)+vE(Math.floor((1+Math.random())*65536))}Mh.randomId=aN});var CE=C(rr=>{"use strict";var sN=rr&&rr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oN=rr&&rr.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function s(c){try{u(n.next(c))}catch(l){a(l)}}function o(c){try{u(n.throw(c))}catch(l){a(l)}}function u(c){c.done?i(c.value):new r(function(l){l(c.value)}).then(s,o)}u((n=n.apply(e,t||[])).next())})},cN=rr&&rr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Cc=rr&&rr.__values||function(e){var t=typeof Symbol=="function"&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(rr,"__esModule",{value:!0});var gE=require("os"),uN=lh(),lN=fh(),Hr=Ph(),fN=yE(),hN=1e3,dN=8,pN=3,mE=".local",SE="_services._dns-sd._udp.local",vN=function(e){sN(t,e);function t(r){var n=e.call(this,"mdns")||this;n.name=r.name||fN.randomId(),n.port=r.port,n.type=lN.stringify(r.type,r.protocol||"tcp",r.subtypes)+mE,n.qualifiedName=n.name+"."+n.type,n.ttl=r.ttl||4500,n.mdns=Hr.createMDNS(),n.mdns.onQuery(function(a){return n.handleQuery(a)});var i=20+Math.random()*100;return n.broadcastTime=0,n.broadcastNumber=0,n.broadcastTimeout=setTimeout(function(){return n.broadcast()},i),n}return t.prototype.handleQuery=function(r){var n,i;try{for(var a=Cc(r.questions),s=a.next();!s.done;s=a.next()){var o=s.value;o.type==="PTR"&&(o.name===SE?this.hasService(r.answers)||this.announce(!0):o.name===this.type&&(this.hasService(r.answers)||this.announce(!1)))}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.hasService=function(r){var n,i;try{for(var a=Cc(r),s=a.next();!s.done;s=a.next()){var o=s.value;if(o instanceof Hr.PTRRecord&&o.name===this.type&&o.hostname===this.qualifiedName&&o.ttl&&o.ttl>this.ttl/2)return!0}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},t.prototype.broadcast=function(){var r=this;this.announce(!1),!(++this.broadcastNumber>=dN)&&(this.broadcastTime===0?this.broadcastTime=hN:this.broadcastTime=this.broadcastTime*pN,this.broadcastTimeout=setTimeout(function(){return r.broadcast()},this.broadcastTime))},t.prototype.announce=function(r){var n,i,a,s;r?this.debug("Responding to query for any services",this.qualifiedName):this.debug("Announcing availability of service",this.qualifiedName);var o=[new Hr.PTRRecord({name:r?SE:this.type,ttl:this.ttl,flush:!1,hostname:this.qualifiedName})],u=gE.hostname()+mE,c=[new Hr.SRVRecord({name:this.qualifiedName,ttl:this.ttl,flush:!0,target:u,port:this.port})],l=gE.networkInterfaces();try{for(var f=Cc(Object.keys(l)),h=f.next();!h.done;h=f.next()){var p=h.value;try{for(var d=(a=void 0,Cc(l[p])),m=d.next();!m.done;m=d.next()){var S=m.value;if(!S.internal)switch(S.family){case"IPv4":c.push(new Hr.ARecord({name:u,ttl:this.ttl,flush:!0,ip:S.address}));break;case"IPv6":c.push(new Hr.AAAARecord({name:u,ttl:this.ttl,flush:!0,ip:S.address}));break}}}catch(b){a={error:b}}finally{try{m&&!m.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}}}catch(b){n={error:b}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}this.mdns.respond(new Hr.MDNSResponse(o,c))},t.prototype.destroy=function(){return oN(this,void 0,void 0,function(){var r=this;return cN(this,function(n){switch(n.label){case 0:return clearTimeout(this.broadcastTimeout),[4,this.sendGoodbye()];case 1:return n.sent(),[4,new Promise(function(i,a){setTimeout(function(){return r.sendGoodbye().catch(a)},250),setTimeout(function(){try{r.mdns.destroy(),i()}catch(s){a(s)}},500)})];case 2:return[2,n.sent()]}})})},t.prototype.sendGoodbye=function(){return this.mdns.respond(new Hr.MDNSResponse([new Hr.PTRRecord({name:this.type,ttl:0,hostname:this.qualifiedName})]))},t}(uN.AbstractServicePublisher);rr.MDNSServicePublisher=vN});var EE=C(Ec=>{"use strict";function Fh(e){for(var t in e)Ec.hasOwnProperty(t)||(Ec[t]=e[t])}Object.defineProperty(Ec,"__esModule",{value:!0});Fh(VS());Fh(pE());Fh(CE())});var Kh=C(Ki=>{"use strict";var bc=Ki&&Ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Discovery=void 0;var yN=bc(require("os")),gN=bc(require("path")),mN=bc(gr()),SN=bc(Wf()),CN=an(),bE=EE(),xE=Pe(),Vh=class extends CN.EventEmitter{constructor(){super(),this.onAvailable=t=>{if(!this.isProcessorService(t))return;let r=this.parseProcessorAddress(t);this.isProcessorCached(r)||this.emit("Discovered",r),this.cacheProcessor(r)},this.cache=SN.default.load("discovery",gN.default.join(yN.default.homedir(),".leap")),this.cached=this.cache.getKey("/hosts")||[],this.cache.setKey("/hosts",this.cached),this.cache.save(!0)}search(){this.stop();for(let t=0;t<this.cached.length;t++)this.emit("Discovered",this.cached[t]);this.discovery=new bE.MDNSServiceDiscovery({type:"lutron",protocol:bE.Protocol.TCP}),this.discovery.onAvailable(this.onAvailable)}stop(){var t;(t=this.discovery)===null||t===void 0||t.destroy()}isProcessorCached(t){return this.cached.find(r=>(0,mN.default)(r,t))!=null}isProcessorService(t){let r=t.data.get("systype");return!(r==null||typeof r=="boolean")}cacheProcessor(t){let r=this.cached.findIndex(n=>n.id===t.id);r>=0?this.cached[r]=t:this.cached.push(t),this.cache.setKey("/hosts",this.cached),this.cache.save()}parseProcessorAddress(t){var r;let n=this.discovery.serviceData.get(t.id).SRV._record.target,i=[];for(let a=0;a<((r=t.addresses)===null||r===void 0?void 0:r.length);a++)i.push({address:t.addresses[a].host,family:/^([\da-f]{1,4}:){7}[\da-f]{1,4}$/i.test(t.addresses[a].host)?xE.HostAddressFamily.IPv6:xE.HostAddressFamily.IPv4});return{id:n.match(new RegExp("[Ll]utron-(?<id>\\w+)\\.local")).groups.id.toUpperCase(),type:String(t.data.get("systype")),addresses:i}}};Ki.Discovery=Vh});var IE=C((P5,_E)=>{var AE={};_E.exports=AE;var TE={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(TE).forEach(function(e){var t=TE[e],r=AE[e]=[];r.open="\x1B["+t[0]+"m",r.close="\x1B["+t[1]+"m"})});var BE=C((L5,wE)=>{"use strict";wE.exports=function(e,t){t=t||process.argv;var r=t.indexOf("--"),n=/^-{1,2}/.test(e)?"":"--",i=t.indexOf(n+e);return i!==-1&&(r===-1?!0:i<r)}});var OE=C((k5,RE)=>{"use strict";var EN=require("os"),nr=BE(),St=process.env,Gi=void 0;nr("no-color")||nr("no-colors")||nr("color=false")?Gi=!1:(nr("color")||nr("colors")||nr("color=true")||nr("color=always"))&&(Gi=!0);"FORCE_COLOR"in St&&(Gi=St.FORCE_COLOR.length===0||parseInt(St.FORCE_COLOR,10)!==0);function bN(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function xN(e){if(Gi===!1)return 0;if(nr("color=16m")||nr("color=full")||nr("color=truecolor"))return 3;if(nr("color=256"))return 2;if(e&&!e.isTTY&&Gi!==!0)return 0;var t=Gi?1:0;if(process.platform==="win32"){var r=EN.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in St)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in St})||St.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in St)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(St.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in St){var n=parseInt((St.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(St.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(St.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(St.TERM)||"COLORTERM"in St?1:(St.TERM==="dumb",t)}function Gh(e){var t=xN(e);return bN(t)}RE.exports={supportsColor:Gh,stdout:Gh(process.stdout),stderr:Gh(process.stderr)}});var DE=C((U5,NE)=>{NE.exports=function(t,r){var n="";t=t||"Run the trap, drop the bass",t=t.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return t.forEach(function(a){a=a.toLowerCase();var s=i[a]||[" "],o=Math.floor(Math.random()*s.length);typeof i[a]!="undefined"?n+=i[a][o]:n+=a}),n}});var LE=C((q5,PE)=>{PE.exports=function(t,r){t=t||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function a(u){var c=Math.floor(Math.random()*u);return c}function s(u){var c=!1;return i.filter(function(l){c=l===u}),c}function o(u,c){var l="",f,h;c=c||{},c.up=typeof c.up!="undefined"?c.up:!0,c.mid=typeof c.mid!="undefined"?c.mid:!0,c.down=typeof c.down!="undefined"?c.down:!0,c.size=typeof c.size!="undefined"?c.size:"maxi",u=u.split("");for(h in u)if(!s(h)){switch(l=l+u[h],f={up:0,down:0,mid:0},c.size){case"mini":f.up=a(8),f.mid=a(2),f.down=a(8);break;case"maxi":f.up=a(16)+3,f.mid=a(4)+1,f.down=a(64)+3;break;default:f.up=a(8)+1,f.mid=a(6)/2,f.down=a(8)+1;break}var p=["up","mid","down"];for(var d in p)for(var m=p[d],S=0;S<=f[m];S++)c[m]&&(l=l+n[m][a(n[m].length)])}return l}return o(t,r)}});var UE=C((M5,kE)=>{kE.exports=function(e){return function(t,r,n){if(t===" ")return t;switch(r%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}});var ME=C((F5,qE)=>{qE.exports=function(e){return function(t,r,n){return r%2===0?t:e.inverse(t)}}});var VE=C((V5,FE)=>{FE.exports=function(e){var t=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:e[t[n++%t.length]](r)}}});var GE=C((K5,KE)=>{KE.exports=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:e[t[Math.round(Math.random()*(t.length-2))]](r)}}});var jh=C((j5,WE)=>{var oe={};WE.exports=oe;oe.themes={};var TN=require("util"),Xn=oe.styles=IE(),HE=Object.defineProperties,AN=new RegExp(/[\r\n]+/g);oe.supportsColor=OE().supportsColor;typeof oe.enabled=="undefined"&&(oe.enabled=oe.supportsColor()!==!1);oe.enable=function(){oe.enabled=!0};oe.disable=function(){oe.enabled=!1};oe.stripColors=oe.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var G5=oe.stylize=function(t,r){if(!oe.enabled)return t+"";var n=Xn[r];return!n&&r in oe?oe[r](t):n.open+t+n.close},_N=/[|\\{}()[\]^$+*?.]/g,IN=function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(_N,"\\$&")};function $E(e){var t=function r(){return BN.apply(r,arguments)};return t._styles=e,t.__proto__=wN,t}var zE=function(){var e={};return Xn.grey=Xn.gray,Object.keys(Xn).forEach(function(t){Xn[t].closeRe=new RegExp(IN(Xn[t].close),"g"),e[t]={get:function(){return $E(this._styles.concat(t))}}}),e}(),wN=HE(function(){},zE);function BN(){var e=Array.prototype.slice.call(arguments),t=e.map(function(s){return s!=null&&s.constructor===String?s:TN.inspect(s)}).join(" ");if(!oe.enabled||!t)return t;for(var r=t.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var a=Xn[n[i]];t=a.open+t.replace(a.closeRe,a.open)+a.close,r&&(t=t.replace(AN,function(s){return a.close+s+a.open}))}return t}oe.setTheme=function(e){if(typeof e=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var t in e)(function(r){oe[r]=function(n){if(typeof e[r]=="object"){var i=n;for(var a in e[r])i=oe[e[r][a]](i);return i}return oe[e[r]](n)}})(t)};function RN(){var e={};return Object.keys(zE).forEach(function(t){e[t]={get:function(){return $E([t])}}}),e}var ON=function(t,r){var n=r.split("");return n=n.map(t),n.join("")};oe.trap=DE();oe.zalgo=LE();oe.maps={};oe.maps.america=UE()(oe);oe.maps.zebra=ME()(oe);oe.maps.rainbow=VE()(oe);oe.maps.random=GE()(oe);for(jE in oe.maps)(function(e){oe[e]=function(t){return ON(oe.maps[e],t)}})(jE);var jE;HE(oe,RN())});var YE=C((H5,QE)=>{var ht=jh();QE.exports=function(){var e=function(n,i){String.prototype.__defineGetter__(n,i)};e("strip",function(){return ht.strip(this)}),e("stripColors",function(){return ht.strip(this)}),e("trap",function(){return ht.trap(this)}),e("zalgo",function(){return ht.zalgo(this)}),e("zebra",function(){return ht.zebra(this)}),e("rainbow",function(){return ht.rainbow(this)}),e("random",function(){return ht.random(this)}),e("america",function(){return ht.america(this)});var t=Object.keys(ht.styles);t.forEach(function(n){e(n,function(){return ht.stylize(this,n)})});function r(n){var i=["__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","charAt","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf","charCodeAt","indexOf","lastIndexOf","length","localeCompare","match","repeat","replace","search","slice","split","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim","trimLeft","trimRight"];Object.keys(n).forEach(function(a){if(i.indexOf(a)!==-1)console.log("warn: ".red+("String.prototype"+a).magenta+" is probably something you don't want to override.  Ignoring style name");else if(typeof n[a]=="string")ht[a]=ht[n[a]],e(a,function(){return ht[a](this)});else{var s=function(o){for(var u=o||this,c=0;c<n[a].length;c++)u=ht[n[a][c]](u);return u};e(a,s),ht[a]=function(o){return s(o)}}})}ht.setTheme=function(n){if(typeof n=="string"){console.log("colors.setTheme now only accepts an object, not a string. If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}else r(n)}}});var ji=C(($5,XE)=>{var NN=jh();XE.exports=NN;YE()()});var JE=C(Hi=>{"use strict";var xc=Hi&&Hi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.ProcessorController=void 0;var DN=Ia(),PN=xc(Wf()),LN=xc(ji()),kN=xc(require("os")),UN=xc(require("path")),qN=an(),MN=2e4,Hh=class extends qN.EventEmitter{constructor(t,r){super(),this.discovered=new Map,this.onConnect=()=>{this.log.info("connected"),this.emit("Connect",this.connection)},this.onMessage=n=>{this.log.debug("message"),this.emit("Message",n)},this.onDisconnect=()=>{this.log.info("disconnected"),this.emit("Disconnect")},this.onError=n=>{this.emit("Error",n)},this.uuid=t,this.logger=(0,DN.get)(`Processor ${LN.default.dim(this.id)}`),this.connection=r,this.cache=PN.default.load(t,UN.default.join(kN.default.homedir(),".leap")),this.connection.on("Connect",this.onConnect),this.connection.on("Message",this.onMessage),this.connection.on("Error",this.onError),this.connection.once("Disconnect",this.onDisconnect)}get id(){return this.uuid}get log(){return this.logger}get devices(){return this.discovered}connect(){return new Promise((t,r)=>{this.connection.connect().then(()=>{this.startHeartbeat(),t()}).catch(n=>r(n))})}disconnect(){this.stopHeartbeat(),this.connection.disconnect()}clear(){for(let t of this.cache.keys())this.cache.removeKey(t);this.cache.removeCacheFile(),this.cache.save()}ping(){return this.read("/server/1/status/ping")}read(t){return this.connection.read(t)}project(){return new Promise((t,r)=>{let n=this.cache.getKey("/project");if(n!=null)return t(n);this.connection.read("/project").then(i=>{this.cache.setKey("/project",i),this.cache.save(!0),t(i)}).catch(i=>r(i))})}system(){return new Promise((t,r)=>{let n=this.cache.getKey("/device?where=IsThisDevice:true");if(n!=null)return t(n);this.connection.read("/device?where=IsThisDevice:true").then(i=>{if(i[0]!=null)return this.cache.setKey("/device?where=IsThisDevice:true",i[0]),this.cache.save(!0),t(i[0]);r(new Error("No system device found"))}).catch(i=>r(i))})}areas(){return new Promise((t,r)=>{let n=this.cache.getKey("/area");if(n!=null)return t(n);this.connection.read("/area").then(i=>{this.cache.setKey("/area",i),this.cache.save(!0),t(i)}).catch(i=>r(i))})}timeclocks(){return new Promise((t,r)=>{let n=this.cache.getKey("/timeclock");if(n!=null)return t(n);this.connection.read("/timeclock").then(i=>{this.cache.setKey("/timeclock",i),this.cache.save(!0),t(i)}).catch(i=>r(i))})}zones(t){return new Promise((r,n)=>{let i=this.cache.getKey(`${t.href}/associatedzone`);if(i!=null)return r(i);this.connection.read(`${t.href}/associatedzone`).then(a=>{this.cache.setKey(`${t.href}/associatedzone`,a),this.cache.save(!0),r(a)}).catch(a=>n(a))})}status(t){return this.read(`${t.href}/status`)}statuses(t){return new Promise((r,n)=>{let i=[];i.push(this.read("/zone/status")),i.push(this.read("/area/status")),t==="RadioRa3Processor"&&i.push(this.read("/timeclock/status")),Promise.all(i).then(([a,s,o])=>r([...a,...s,...o||[]])).catch(a=>n(a))})}controls(t){return new Promise((r,n)=>{let i=this.cache.getKey(`${t.href}/associatedcontrolstation`);if(i!=null)return r(i);this.connection.read(`${t.href}/associatedcontrolstation`).then(a=>{this.cache.setKey(`${t.href}/associatedcontrolstation`,a),this.cache.save(!0),r(a)}).catch(a=>n(a))})}device(t){return new Promise((r,n)=>{let i=this.cache.getKey(t.href);if(i!=null)return r(i);this.connection.read(t.href).then(a=>{this.cache.setKey(t.href,a),this.cache.save(!0),r(a)}).catch(a=>n(a))})}buttons(t){return new Promise((r,n)=>{let i=this.cache.getKey(`${t.href}/buttongroup/expanded`);if(i!=null)return r(i);this.connection.read(`${t.href}/buttongroup/expanded`).then(a=>{this.cache.setKey(`${t.href}/buttongroup/expanded`,a),this.cache.save(!0),r(a)}).catch(a=>n(a))})}update(t,r,n){return this.connection.update(`${t.href}/${r}`,n)}command(t,r){return this.connection.command(`${t.href}/commandprocessor`,{Command:r})}subscribe(t,r){return this.connection.subscribe(t.href,r)}startHeartbeat(){this.stopHeartbeat(),this.ping().finally(()=>{this.heartbeatTimeout=setTimeout(()=>this.startHeartbeat(),MN)})}stopHeartbeat(){clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=void 0}};Hi.ProcessorController=Hh});var Kt=C($i=>{"use strict";var FN=$i&&$i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($i,"__esModule",{value:!0});$i.Common=void 0;var VN=Ia(),KN=Pe(),GN=FN(ji()),jN=an(),$h=class extends jN.EventEmitter{constructor(t,r,n,i,a){super(),this.initialized=!1,this.fields=new Map,this.processor=r,this.deviceAddress=i.href,this.deviceName=i.Name,this.deviceArea=n,this.deviceType=t,this.logger=(0,VN.get)(`Device ${GN.default.dim(this.id)}`),this.state=a}get manufacturer(){return"Lutron Electronics Co., Inc"}get id(){var t;return`LEAP-${this.processor.id}-${KN.DeviceType[this.deviceType].toUpperCase()}-${(t=this.deviceAddress)===null||t===void 0?void 0:t.split("/")[2]}`}get name(){return this.deviceName}get room(){return this.area.Name}get capabilities(){return Object.fromEntries(this.fields)}get log(){return this.logger}get address(){return{href:this.deviceAddress}}get type(){return this.deviceType}get area(){return this.deviceArea}get status(){return this.state}};$i.Common=$h});var ZE=C(zi=>{"use strict";var HN=zi&&zi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zi,"__esModule",{value:!0});zi.ContactController=void 0;var $N=HN(gr()),zN=Pe(),WN=Kt(),zh=class extends WN.Common{constructor(t,r,n){super(zN.DeviceType.Contact,t,r,n,{state:"Open"}),this.fields.set("state",{type:"String",values:["Open","Closed"]})}update(t){let r=Object.assign({},this.status);t.CCOLevel!=null&&(this.state.state=t.CCOLevel),this.initialized&&!(0,$N.default)(this.state,r)&&this.emit("Update",this,this.state),this.initialized=!0}set(t){return this.processor.command(this.address,{CommandType:"GoToCCOLevel",CCOLevelParameters:{CCOLevel:t.state}})}};zi.ContactController=zh});var eb=C(Wi=>{"use strict";var QN=Wi&&Wi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.DimmerController=void 0;var YN=QN(gr()),XN=Pe(),JN=Kt(),Wh=class extends JN.Common{constructor(t,r,n){super(XN.DeviceType.Dimmer,t,r,n,{state:"Off",level:0}),this.fields.set("state",{type:"String",values:["On","Off"]}),this.fields.set("level",{type:"Integer",min:0,max:100})}update(t){let r=Object.assign({},this.status);t.Level!=null&&(this.state.state=t.Level>0?"On":"Off",this.state.level=t.Level),this.initialized&&!(0,YN.default)(this.state,r)&&this.emit("Update",this,this.state),this.initialized=!0}set(t){return this.processor.command(this.address,{CommandType:"GoToLevel",Parameter:[{Type:"Level",Value:t.state==="Off"?0:t.level}]})}};Wi.DimmerController=Wh});var tb=C(Qi=>{"use strict";var ZN=Qi&&Qi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.FanController=void 0;var eD=ZN(gr()),tD=Pe(),rD=Kt(),Qh=class extends rD.Common{constructor(t,r,n){super(tD.DeviceType.Fan,t,r,n,{state:"Off",speed:0}),this.fields.set("state",{type:"String",values:["On","Off"]}),this.fields.set("speed",{type:"Integer",min:0,max:7})}update(t){let r=Object.assign({},this.status),n=this.parseFanSpeed(t.FanSpeed);this.state=Object.assign(Object.assign({},r),{state:n>0?"On":"Off",speed:n}),this.initialized&&!(0,eD.default)(this.state,r)&&this.emit("Update",this,this.state),this.initialized=!0}set(t){let r=t.state==="Off"?"Off":this.lookupFanSpeed(t.speed);return this.processor.command(this.address,{CommandType:"GoToFanSpeed",FanSpeedParameters:[{FanSpeed:r}]})}lookupFanSpeed(t){switch(t){case 1:return"Low";case 2:case 3:return"Medium";case 4:case 5:return"MediumHigh";case 6:case 7:return"High";default:return"Off"}}parseFanSpeed(t){switch(t){case"Low":return 1;case"Medium":return 3;case"MediumHigh":return 5;case"High":return 7;default:return 0}}};Qi.FanController=Qh});var nb=C(Yi=>{"use strict";var nD=Yi&&Yi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yi,"__esModule",{value:!0});Yi.KeypadController=void 0;var rb=nD(ji()),iD=Pe(),aD=Kt(),Yh=class extends aD.Common{constructor(t,r,n){super(iD.DeviceType.Keypad,t,r,n,{led:{href:"/unknown"},state:"Off"}),this.buttons=[],(n.DeviceType==="SunnataKeypad"||n.DeviceType==="SunnataHybridKeypad")&&this.processor.buttons(this.address).then(i=>{var a;for(let s=0;s<(i==null?void 0:i.length);s++)for(let o=0;o<((a=i[s].Buttons)===null||a===void 0?void 0:a.length);o++){let u=i[s].Buttons[o],l={id:`LEAP-${this.processor.id}-BUTTON-${u.href.split("/")[2]}`,index:u.ButtonNumber,name:(u.Engraving||{}).Text||u.Name,led:u.AssociatedLED};this.buttons.push(l),this.processor.subscribe({href:`${u.href}/status/event`},f=>{f.ButtonEvent.EventType==="Press"&&(this.emit("Action",this,l,"Press"),setTimeout(()=>this.emit("Action",this,l,"Release"),100))}).catch(f=>this.log.error(rb.default.red(f.message)))}}).catch(i=>this.log.error(rb.default.red(i.message)))}update(){this.initialized=!0}set(t){return this.processor.update(t.led,"status",{LEDStatus:{State:t.state==="On"?"On":"Off"}})}};Yi.KeypadController=Yh});var ib=C(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.ButtonMap=void 0;Tc.ButtonMap=new Map([["Pico2Button",new Map([[0,[1,!1]],[2,[2,!1]]])],["Pico2ButtonRaiseLower",new Map([[0,[1,!1]],[2,[4,!1]],[3,[2,!0]],[4,[3,!0]]])],["Pico3Button",new Map([[0,[1,!1]],[1,[2,!1]],[2,[3,!1]]])],["Pico3ButtonRaiseLower",new Map([[0,[1,!1]],[1,[3,!1]],[2,[5,!1]],[3,[2,!0]],[4,[4,!0]]])],["Pico4Button2Group",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])],["Pico4ButtonScene",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])],["Pico4ButtonZone",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])],["PaddleSwitchPico",new Map([[0,[1,!1]],[2,[2,!1]]])],["Pico4Button",new Map([[1,[1,!1]],[2,[2,!1]],[3,[3,!1]],[4,[4,!1]]])]])});var ab=C(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.TriggerController=void 0;var xn=Pe(),sD=an(),Xh=class extends sD.EventEmitter{constructor(t,r,n,i){super(),this.state=xn.TriggerState.Idle,this.index=n,this.processor=t,this.action=r,this.options=Object.assign({doubleClickSpeed:300,clickSpeed:450,raiseLower:!1},i),this.button={id:this.id,index:this.index,name:(this.action.Engraving||{}).Text||this.action.Name},this.options.raiseLower===!0&&(this.button.raiseLower=!0)}get id(){return`LEAP-${this.processor.id}-BUTTON-${this.action.href.split("/")[2]}`}get definition(){return this.button}reset(){this.state=xn.TriggerState.Idle,this.timer&&clearTimeout(this.timer),this.timer=void 0}update(t){let r=()=>{this.reset(),this.options.clickSpeed!==0&&this.emit("LongPress",this.button)},n=()=>{this.reset(),this.emit("Press",this.button)};switch(this.state){case xn.TriggerState.Idle:{if(t.ButtonEvent.EventType==="Press"&&this.options.clickSpeed>0){this.state=xn.TriggerState.Down,this.timer=setTimeout(r,this.options.clickSpeed);return}if(t.ButtonEvent.EventType==="Press"){this.state=xn.TriggerState.Down,n();return}break}case xn.TriggerState.Down:{if(t.ButtonEvent.EventType==="Release"){this.state=xn.TriggerState.Up,this.timer&&clearTimeout(this.timer),this.options.doubleClickSpeed>0&&(this.timer=setTimeout(n,this.options.doubleClickSpeed+(this.options.raiseLower?250:0)));return}this.reset();break}case xn.TriggerState.Up:{if(t.ButtonEvent.EventType==="Press"&&this.timer){if(this.reset(),this.options.doubleClickSpeed===0)return;this.emit("DoublePress",this.button);return}this.reset();break}}}};Ac.TriggerController=Xh});var ob=C(Xi=>{"use strict";var oD=Xi&&Xi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.RemoteController=void 0;var sb=oD(ji()),cD=Pe(),uD=ib(),lD=Kt(),fD=ab(),Jh=class extends lD.Common{constructor(t,r,n){super(cD.DeviceType.Remote,t,r,n,{state:"Unknown"}),this.buttons=[],this.triggers=new Map,this.set=()=>Promise.resolve(),this.processor.buttons(this.address).then(i=>{var a;for(let s=0;s<(i==null?void 0:i.length);s++)for(let o=0;o<((a=i[s].Buttons)===null||a===void 0?void 0:a.length);o++){let u=i[s].Buttons[o],c=uD.ButtonMap.get(n.DeviceType),l=c.get(u.ButtonNumber)[0],f=c.get(u.ButtonNumber)[1],h=new fD.TriggerController(this.processor,u,l,{raiseLower:f});h.on("Press",p=>{this.emit("Action",this,p,"Press"),setTimeout(()=>this.emit("Action",this,p,"Release"),100)}),h.on("DoublePress",p=>{this.emit("Action",this,p,"DoublePress"),setTimeout(()=>this.emit("Action",this,p,"Release"),100)}),h.on("LongPress",p=>{this.emit("Action",this,p,"LongPress"),setTimeout(()=>this.emit("Action",this,p,"Release"),100)}),this.triggers.set(u.href,h),this.buttons.push(h.definition),this.processor.subscribe({href:`${u.href}/status/event`},p=>this.triggers.get(u.href).update(p)).catch(p=>this.log.error(sb.default.red(p.message)))}}).catch(i=>this.log.error(sb.default.red(i.message)))}update(){this.initialized=!0}};Xi.RemoteController=Jh});var cb=C(Ji=>{"use strict";var hD=Ji&&Ji.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.OccupancyController=void 0;var dD=hD(gr()),pD=Pe(),vD=Kt(),Zh=class extends vD.Common{constructor(t,r,n){super(pD.DeviceType.Occupancy,t,r,n,{state:"Unoccupied"}),this.set=()=>Promise.resolve()}update(t){let r=Object.assign({},this.status);t.OccupancyStatus!=null&&(this.state.state=t.OccupancyStatus==="Occupied"?"Occupied":"Unoccupied"),(0,dD.default)(this.state,r)||this.emit("Update",this,this.state),this.initialized=!0}};Ji.OccupancyController=Zh});var ub=C(Zi=>{"use strict";var yD=Zi&&Zi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.ShadeController=void 0;var gD=yD(gr()),mD=Pe(),SD=Kt(),e0=class extends SD.Common{constructor(t,r,n){super(mD.DeviceType.Shade,t,r,n,{state:"Closed",level:0,tilt:0}),this.fields.set("state",{type:"String",values:["Open","Closed"]}),this.fields.set("level",{type:"Integer",min:0,max:100}),this.fields.set("tilt",{type:"Integer",min:0,max:100})}update(t){let r=Object.assign({},this.status);t.Level!=null&&(this.state.state=t.Level>0?"Open":"Closed",this.state.level=t.Level),t.Tilt!=null&&(this.state.tilt=t.Tilt),this.initialized&&!(0,gD.default)(this.state,r)&&this.emit("Update",this,this.state),this.initialized=!0}set(t){let r=[];return r.push(this.processor.command(this.address,{CommandType:"GoToLevel",Parameter:[{Type:"Level",Value:t.state==="Closed"?0:t.level}]})),(t.tilt!=null||t.state==="Closed")&&r.push(this.processor.command(this.address,{CommandType:"TiltParameters",TiltParameters:{Tilt:t.state==="Closed"?0:t.tilt}})),Promise.all(r)}};Zi.ShadeController=e0});var lb=C(ea=>{"use strict";var CD=ea&&ea.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ea,"__esModule",{value:!0});ea.StripController=void 0;var ED=CD(gr()),bD=Pe(),xD=Kt(),t0=class extends xD.Common{constructor(t,r,n){super(bD.DeviceType.Strip,t,r,n,{state:"Off",level:0,luminance:1800}),this.fields.set("state",{type:"String",values:["On","Off"]}),this.fields.set("level",{type:"Integer",min:0,max:100}),this.fields.set("luminance",{type:"Integer",min:1800,max:3e3})}update(t){let r=Object.assign({},this.status);t.Level!=null&&(this.state.state=t.Level>0?"On":"Off",this.state.level=t.Level),t.ColorTuningStatus!=null&&t.ColorTuningStatus.WhiteTuningLevel!=null&&t.ColorTuningStatus.WhiteTuningLevel.Kelvin!=null&&(this.state.luminance=t.ColorTuningStatus.WhiteTuningLevel.Kelvin),this.initialized&&!(0,ED.default)(this.state,r)&&this.emit("Update",this,this.state),this.initialized=!0}set(t){return t.state==="Off"?this.processor.command(this.address,{CommandType:"GoToWhiteTuningLevel",WhiteTuningLevelParameters:{Level:0}}):this.processor.command(this.address,{CommandType:"GoToWhiteTuningLevel",WhiteTuningLevelParameters:{Level:t.level,WhiteTuningLevel:{Kelvin:t.luminance}}})}};ea.StripController=t0});var fb=C(ta=>{"use strict";var TD=ta&&ta.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ta,"__esModule",{value:!0});ta.SwitchController=void 0;var AD=TD(gr()),_D=Pe(),ID=Kt(),r0=class extends ID.Common{constructor(t,r,n){super(_D.DeviceType.Switch,t,r,n,{state:"Off"}),this.fields.set("state",{type:"String",values:["On","Off"]})}update(t){let r=Object.assign({},this.status);this.state=Object.assign(Object.assign({},r),{state:t.SwitchedLevel||"Unknown"}),this.initialized&&!(0,AD.default)(this.state,r)&&this.emit("Update",this,this.state),this.initialized=!0}set(t){return this.processor.command(this.address,{CommandType:"GoToLevel",Parameter:[{Type:"Level",Value:t.state==="On"?100:0}]})}};ta.SwitchController=r0});var hb=C(ra=>{"use strict";var wD=ra&&ra.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ra,"__esModule",{value:!0});ra.TimeclockController=void 0;var BD=wD(gr()),RD=Pe(),OD=Kt(),n0=class extends OD.Common{constructor(t,r,n){super(RD.DeviceType.Timeclock,t,r,n,{state:"Off"}),this.set=()=>Promise.resolve(),this.fields.set("state",{type:"String",values:["On","Off"]})}update(t){let r=Object.assign({},this.status);this.state=Object.assign(Object.assign({},r),{state:t.EnabledState==="Enabled"?"On":"Off"}),this.initialized&&!(0,BD.default)(this.state,r)&&this.emit("Update",this,this.state),this.initialized=!0}};ra.TimeclockController=n0});var db=C(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.UnknownController=void 0;var ND=Pe(),DD=Kt(),i0=class extends DD.Common{constructor(t,r,n){super(ND.DeviceType.Unknown,t,r,n,{state:"Unknown"}),this.set=()=>Promise.resolve()}update(){}};_c.UnknownController=i0});var vb=C(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.isAddressable=Tn.parseDeviceType=Tn.createDevice=void 0;var Re=Pe(),PD=ZE(),LD=eb(),kD=tb(),UD=nb(),qD=ob(),MD=cb(),FD=ub(),VD=lb(),KD=fb(),GD=hb(),jD=db();function HD(e,t,r){var n;switch(pb(r.ControlType||r.DeviceType)){case Re.DeviceType.Contact:return new PD.ContactController(e,t,r);case Re.DeviceType.Dimmer:return new LD.DimmerController(e,t,r);case Re.DeviceType.Fan:return new kD.FanController(e,t,r);case Re.DeviceType.Keypad:return new UD.KeypadController(e,t,r);case Re.DeviceType.Occupancy:return new MD.OccupancyController(e,t,{href:`/occupancy/${(n=t.href)===null||n===void 0?void 0:n.split("/")[2]}`,Name:r.Name});case Re.DeviceType.Remote:return new qD.RemoteController(e,t,r);case Re.DeviceType.Shade:return new FD.ShadeController(e,t,r);case Re.DeviceType.Strip:return new VD.StripController(e,t,r);case Re.DeviceType.Switch:return new KD.SwitchController(e,t,r);case Re.DeviceType.Timeclock:return new GD.TimeclockController(e,t,r);default:return new jD.UnknownController(e,t,r)}}Tn.createDevice=HD;function pb(e){switch(e){case"Switched":case"PowPakSwitch":case"OutdoorPlugInSwitch":return Re.DeviceType.Switch;case"Dimmed":case"PlugInDimmer":return Re.DeviceType.Dimmer;case"Shade":return Re.DeviceType.Shade;case"Timeclock":return Re.DeviceType.Timeclock;case"WhiteTune":return Re.DeviceType.Strip;case"FanSpeed":return Re.DeviceType.Fan;case"Pico2Button":case"Pico3Button":case"Pico4Button":case"Pico3ButtonRaiseLower":case"PalladiomKeypad":return Re.DeviceType.Remote;case"SunnataDimmer":case"SunnataSwitch":case"SunnataKeypad":case"SunnataHybridKeypad":return Re.DeviceType.Keypad;case"RPSCeilingMountedOccupancySensor":return Re.DeviceType.Occupancy;case"CCO":return Re.DeviceType.Contact;default:return Re.DeviceType.Unknown}}Tn.parseDeviceType=pb;function $D(e){if(e.AddressedState!=="Addressed")return!1;switch(e.DeviceType){case"Pico2Button":case"Pico3Button":case"Pico4Button":case"Pico3ButtonRaiseLower":case"PalladiomKeypad":return!0;case"SunnataKeypad":case"SunnataHybridKeypad":return!0;case"RPSCeilingMountedOccupancySensor":return!0;default:return!1}}Tn.isAddressable=$D});var Sb=C(na=>{"use strict";var zD=na&&na.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(na,"__esModule",{value:!0});na.Client=void 0;var WD=Ia(),us=zD(ji()),yb=Pe(),QD=an(),YD=sl(),XD=fl(),JD=Kh(),ZD=JE(),ls=vb(),gb=(0,WD.get)("Client"),mb=5e3,a0=class extends QD.EventEmitter{constructor(t){super(1/0),this.discovered=new Map,this.onDiscovered=r=>{if(this.discovered.delete(r.id),!this.context.has(r.id))return;let n=r.addresses.find(a=>a.family===yb.HostAddressFamily.IPv4)||r.addresses[0],i=new ZD.ProcessorController(r.id,new YD.Connection(n.address,this.context.get(r.id)));this.discovered.set(r.id,i),i.log.info(`Processor ${us.default.green(n.address)}`),i.on("Disconnect",()=>{setTimeout(()=>this.onDiscovered(r),mb)}).on("Connect",()=>{this.refresh&&i.clear(),Promise.all([i.system(),i.project(),i.areas()]).then(([a,s,o])=>{let u=a==null?void 0:a.FirmwareImage.Firmware.DisplayName,c=a==null?void 0:a.DeviceType,l=[];i.log.info(`Firmware ${us.default.green(u||"Unknown")}`),i.log.info(s.ProductType),i.subscribe({href:"/zone/status"},f=>{for(let h of f){let p=i.devices.get(h.Zone.href);p!=null&&p.update(h)}}).catch(f=>this.onProcessorError(r,f)),i.subscribe({href:"/area/status"},f=>{var h;for(let p of f){let d=i.devices.get(`/occupancy/${(h=p.href)===null||h===void 0?void 0:h.split("/")[2]}`);d!=null&&p.OccupancyStatus!=null&&d.update(p)}}).catch(f=>this.onProcessorError(r,f)),c==="RadioRa3Processor"&&i.subscribe({href:"/timeclock/status"},f=>{for(let h of f){let p=i.devices.get(h.Timeclock.href);p!=null&&p.update(h)}}).catch(f=>this.onProcessorError(r,f));for(let f of o)l.push(new Promise(h=>{this.discoverZones(i,f).then(()=>h())})),l.push(new Promise(h=>{this.discoverControls(i,f).then(()=>h())}));c==="RadioRa3Processor"&&l.push(new Promise(f=>{this.discoverTimeclocks(i).then(()=>f())})),Promise.all(l).then(()=>{i.statuses(c).then(f=>{for(let h of f){let p=i.devices.get((h.Zone||{}).href||""),d=i.devices.get(`/occupancy/${(h.href||"").split("/")[2]}`);p!=null&&p.update(h),d!=null&&h.OccupancyStatus!=null&&d.update(h)}}),i.log.info(`discovered ${us.default.green([...i.devices.keys()].length.toString())} devices`),this.emit("Available",[...i.devices.values()])})}).catch(a=>this.onProcessorError(r,a))}).on("Error",a=>this.onProcessorError(r,a)),i.connect().catch(a=>this.onProcessorError(r,a))},this.onDeviceUpdate=(r,n)=>{this.emit("Update",r,n)},this.onDeviceAction=(r,n,i)=>{this.emit("Action",r,n,i)},this.onProcessorError=(r,n)=>{if(n.message==null){gb.error(us.default.red(String(n)));return}if(n.message.match(/ENOTFOUND|ENETUNREACH|EHOSTUNREACH|ECONNRESET|EPIPE|ECONNREFUSED|ETIMEDOUT/g)!=null){setTimeout(()=>this.onDiscovered(r),mb);return}gb.error(us.default.red(n.message))},this.context=new XD.Context,this.discovery=new JD.Discovery,this.refresh=t===!0,this.discovery.on("Discovered",this.onDiscovered).search()}get processors(){return[...this.discovered.keys()]}processor(t){return this.discovered.get(t)}close(){this.discovery.stop();for(let t of this.discovered.values())t.disconnect();this.discovered.clear()}discoverZones(t,r){return new Promise(n=>{if(!r.IsLeaf)return n();t.zones(r).then(i=>{for(let a of i){let s=(0,ls.createDevice)(t,r,a).on("Update",this.onDeviceUpdate).on("Action",this.onDeviceAction);t.devices.set(a.href,s)}n()}).catch(()=>n())})}discoverTimeclocks(t){return new Promise(r=>{t.timeclocks().then(n=>{for(let i of n){let a=(0,ls.createDevice)(t,{href:i.href,Name:i.Name,ControlType:"Timeclock",Parent:i.Parent,IsLeaf:!0,AssociatedZones:[],AssociatedControlStations:[],AssociatedOccupancyGroups:[]},Object.assign(Object.assign({},i),{ControlType:"Timeclock"})).on("Update",this.onDeviceUpdate);t.devices.set(i.href,a)}r()}).catch(()=>r())})}discoverControls(t,r){return new Promise(n=>{if(!r.IsLeaf)return n();t.controls(r).then(i=>{for(let a of i)this.discoverPositions(t,a).then(s=>{var o;for(let u of s){let l=(0,ls.parseDeviceType)(u.DeviceType)===yb.DeviceType.Occupancy?`/occupancy/${(o=r.href)===null||o===void 0?void 0:o.split("/")[2]}`:u.href,f=(0,ls.createDevice)(t,r,Object.assign(Object.assign({},u),{Name:`${r.Name} ${a.Name} ${u.Name}`})).on("Update",this.onDeviceUpdate).on("Action",this.onDeviceAction);t.devices.set(l,f)}n()})}).catch(()=>n())})}discoverPositions(t,r){return new Promise(n=>{if(r.AssociatedGangedDevices==null)return n([]);let i=[];for(let a of r.AssociatedGangedDevices)i.push(t.device(a.Device));Promise.all(i).then(a=>{n(a.filter(s=>(0,ls.isAddressable)(s)))}).catch(()=>n([]))})}};na.Client=a0});var Eb=C(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.Client=An.pair=An.connect=void 0;var eP=Cv(),tP=fl(),rP=Kh(),Cb=Sb();Object.defineProperty(An,"Client",{enumerable:!0,get:function(){return Cb.Client}});function nP(e){return new Cb.Client(e)}An.connect=nP;function iP(){return new Promise((e,t)=>{let r=new rP.Discovery,n=new tP.Context;r.on("Discovered",i=>{n.get(i.id)==null&&new eP.Association(i).authenticate().then(s=>{n.set(i,s),e()}).catch(s=>t(s)).finally(()=>r.stop())}),r.search()})}An.pair=iP});var xb=ei(Eb());var ir=ei(Pe());var De=class{constructor(t,r,n){this.log=n,this.homebridge=t,this.device=r,this.id=this.homebridge.hap.uuid.generate(this.device.id),this.accessory=Jn.get(this.id)||new this.homebridge.platformAccessory(r.name,this.id),this.accessory.getService(this.homebridge.hap.Service.AccessoryInformation).setCharacteristic(this.homebridge.hap.Characteristic.Manufacturer,this.device.manufacturer).setCharacteristic(this.homebridge.hap.Characteristic.Model,this.device.type).setCharacteristic(this.homebridge.hap.Characteristic.SerialNumber,this.device.id)}register(){Ic.set(this.id,this),!Jn.has(this.id)&&(this.log.debug(`Register accessory: ${this.device.name}`),Jn.set(this.id,this.accessory),this.homebridge.registerPlatformAccessories(aa,ia,[this.accessory]))}};var wc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>(this.log.debug(`Contact Get State: ${this.device.name} ${this.device.status.state}`),this.device.status.state==="Closed");this.onSetState=r=>ke(this,null,function*(){this.log.debug(`Contact Set State: ${this.device.name} ${r?"Closed":"Open"}`),yield this.device.set({state:r?"Closed":"Open"})});this.service=this.accessory.getService(this.homebridge.hap.Service.Switch)||this.accessory.addService(this.homebridge.hap.Service.Switch,this.device.name),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,this.device.name),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.On).onGet(this.onGetState).onSet(this.onSetState)}onUpdate(r){this.log.debug(`Contact: ${this.device.name} State: ${r.state}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.On,r.state==="Closed")}};var Bc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>(this.log.debug(`Dimmer Get State: ${this.device.name} ${this.device.status.state}`),this.device.status.state==="On");this.onSetState=r=>ke(this,null,function*(){let n=r?"On":"Off",i=r?100:0;(this.device.status.state!==n||this.device.status.level!==i)&&(this.log.debug(`Dimmer Set State: ${this.device.name} ${n}`),this.log.debug(`Dimmer Set Brightness: ${this.device.name} ${i}`),yield this.device.set({state:n,level:i}))});this.onGetBrightness=()=>(this.log.debug(`Dimmer Get Brightness: ${this.device.name} ${this.device.status.level||0}`),this.device.status.level||0);this.onSetBrightness=r=>ke(this,null,function*(){let n=r||0,i=n>0?"On":"Off";this.log.debug(`Dimmer Set State: ${this.device.name} ${i}`),this.log.debug(`Dimmer Set Brightness: ${this.device.name} ${n}`),yield this.device.set({state:i,level:n})});this.service=this.accessory.getService(this.homebridge.hap.Service.Lightbulb)||this.accessory.addService(this.homebridge.hap.Service.Lightbulb,this.device.name),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,this.device.name),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.On).onGet(this.onGetState).onSet(this.onSetState),this.service.getCharacteristic(this.homebridge.hap.Characteristic.Brightness).onGet(this.onGetBrightness).onSet(this.onSetBrightness)}onUpdate(r){this.log.debug(`Dimmer: ${this.device.name} State: ${r.state}`),this.log.debug(`Dimmer: ${this.device.name} Brightness: ${r.level||0}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.On,r.state==="On"),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.Brightness,r.level||0)}};var Rc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>(this.log.debug(`Fan Get State: ${this.device.name} ${this.device.status.state}`),this.device.status.state==="On");this.onSetState=r=>ke(this,null,function*(){let n=r?"On":"Off",i=r?7:0;(this.device.status.state!==n||this.device.status.speed!==i)&&(this.log.debug(`Fan Set State: ${this.device.name} ${n}`),this.log.debug(`Fan Set Speed: ${this.device.name} ${i}`),yield this.device.set({state:n,speed:i}))});this.onGetSpeed=()=>{let r=Math.round(this.device.status.speed/7*100);return this.log.debug(`Fan Get Speed: ${this.device.name} ${this.device.status.speed}`),r};this.onSetSpeed=r=>ke(this,null,function*(){let n=Math.round((r||0)/100*7),i=n>0?"On":"Off";(this.device.status.state!==i||this.device.status.speed!==n)&&(this.log.debug(`Fan Set State: ${this.device.name} ${i}`),this.log.debug(`Fan Set Speed: ${this.device.name} ${n}`),yield this.device.set({state:i,speed:n}))});this.service=this.accessory.getService(this.homebridge.hap.Service.Fan)||this.accessory.addService(this.homebridge.hap.Service.Fan,this.device.name),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,this.device.name),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.On).onGet(this.onGetState).onSet(this.onSetState),this.service.getCharacteristic(this.homebridge.hap.Characteristic.RotationSpeed).onGet(this.onGetSpeed).onSet(this.onSetSpeed)}onUpdate(r){let n=Math.round(r.speed/7*100);this.log.debug(`Fan: ${this.device.name} State: ${r.state}`),this.log.debug(`Fan: ${this.device.name} Speed: ${r.speed}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.On,r.state==="On"),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.RotationSpeed,n)}};var fs=class extends De{constructor(r,n,i){super(r,n,i);this.services=new Map;let a=this.accessory.getService(this.homebridge.hap.Service.ServiceLabel)||this.accessory.addService(this.homebridge.hap.Service.ServiceLabel);a.setCharacteristic(this.homebridge.hap.Characteristic.ServiceLabelNamespace,this.homebridge.hap.Characteristic.ServiceLabelNamespace.ARABIC_NUMERALS);for(let s of n.buttons){let o=this.accessory.getServiceById(this.homebridge.hap.Service.StatelessProgrammableSwitch,s.name)||this.accessory.addService(this.homebridge.hap.Service.StatelessProgrammableSwitch,s.name,s.name);o.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),o.addLinkedService(a),o.setCharacteristic(this.homebridge.hap.Characteristic.Name,s.name),o.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,s.name),o.setCharacteristic(this.homebridge.hap.Characteristic.ServiceLabelIndex,s.index);let u=s.supportsLongPress;o.getCharacteristic(this.homebridge.hap.Characteristic.ProgrammableSwitchEvent).setProps({maxValue:u===!1?this.homebridge.hap.Characteristic.ProgrammableSwitchEvent.DOUBLE_PRESS:this.homebridge.hap.Characteristic.ProgrammableSwitchEvent.LONG_PRESS}),this.services.set(s.id,o)}}onAction(r,n){console.log(`[KEYPAD ACTION] ${this.device.name} - ${r.name} - ${n}`),this.log.info(`Keypad: ${this.device.name} ${r.name} ${n}`);let i=this.services.get(r.id),a=i==null?void 0:i.getCharacteristic(this.homebridge.hap.Characteristic.ProgrammableSwitchEvent);if(i!=null&&a!=null)switch(n){case"Press":a.updateValue(this.homebridge.hap.Characteristic.ProgrammableSwitchEvent.SINGLE_PRESS);break;case"DoublePress":a.updateValue(this.homebridge.hap.Characteristic.ProgrammableSwitchEvent.DOUBLE_PRESS);break;case"LongPress":a.updateValue(this.homebridge.hap.Characteristic.ProgrammableSwitchEvent.LONG_PRESS);break}else console.log(`[KEYPAD ACTION ERROR] Service or characteristic not found for button ${r.id}`)}};var Oc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>(this.log.debug(`Occupancy Get State: ${this.device.name} ${this.device.status.state}`),this.device.status.state==="Occupied");this.service=this.accessory.getService(this.homebridge.hap.Service.OccupancySensor)||this.accessory.addService(this.homebridge.hap.Service.OccupancySensor,this.device.name),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,this.device.name),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.OccupancyDetected).onGet(this.onGetState)}onUpdate(r){this.log.debug(`Occupancy: ${this.device.name} State: ${r.state==="Occupied"?"Detected":"Not Detected"}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.OccupancyDetected,r.state==="Occupied")}};var Nc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>this.homebridge.hap.Characteristic.PositionState.STOPPED;this.onGetPosition=()=>(this.log.debug(`Shade Get Position: ${this.device.name} ${this.device.status.state}`),this.device.status.level||0);this.onSetPosition=r=>ke(this,null,function*(){let n=r||0,i=n>0?"Open":"Closed";this.log.debug(`Shade Set Position: ${this.device.name} ${n}`),yield this.device.set({state:i,level:n})});this.service=this.accessory.getService(this.homebridge.hap.Service.WindowCovering)||this.accessory.addService(this.homebridge.hap.Service.WindowCovering,this.device.name),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,this.device.name),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.CurrentPosition).onGet(this.onGetPosition),this.service.getCharacteristic(this.homebridge.hap.Characteristic.PositionState).onGet(this.onGetState),this.service.getCharacteristic(this.homebridge.hap.Characteristic.TargetPosition).onGet(this.onGetPosition).onSet(this.onSetPosition)}onUpdate(r){this.log.debug(`Shade: ${this.device.name} Position: ${r.level}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.TargetPosition,r.level||0)}};var Dc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>(this.log.debug(`Strip Get State: ${this.device.name} ${this.device.status.state}`),this.device.status.state==="On");this.onSetState=r=>ke(this,null,function*(){let n=r?"On":"Off",i=r?100:0;(this.device.status.state!==n||this.device.status.level!==i)&&(this.log.debug(`Strip Set State: ${this.device.name} ${n}`),this.log.debug(`Strip Set Brightness: ${this.device.name} ${i}`),yield this.device.set({state:n,level:i,luminance:this.device.status.luminance}))});this.onGetBrightness=()=>(this.log.debug(`Strip Get Brightness: ${this.device.name} ${this.device.status.level||0}`),this.device.status.level||0);this.onSetBrightness=r=>ke(this,null,function*(){let n=r||0,i=n>0?"On":"Off";this.log.debug(`Strip Set Brightness: ${this.device.name} ${r}`),yield this.device.set({state:i,level:n,luminance:this.device.status.luminance})});this.onGetTemperature=()=>{let r=this.transformRange(this.device.status.luminance,[1800,3e3],[140,500]);return this.log.debug(`Strip Get Luminance: ${this.device.name} ${this.device.status.luminance}`),this.log.debug(`Strip Get Temperature: ${this.device.name} ${r}`),r};this.onSetTemperature=r=>ke(this,null,function*(){let n=this.transformRange(r,[140,500],[1800,3e3]);this.log.debug(`Strip Set Luminance: ${this.device.name} ${n}`),this.log.debug(`Strip Set Temperature: ${this.device.name} ${r}`),yield this.device.set({state:this.device.status.state,level:this.device.status.level,luminance:n})});this.service=this.accessory.getService(this.homebridge.hap.Service.Lightbulb)||this.accessory.addService(this.homebridge.hap.Service.Lightbulb,this.device.name),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,this.device.name),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.On).onGet(this.onGetState).onSet(this.onSetState),this.service.getCharacteristic(this.homebridge.hap.Characteristic.Brightness).onGet(this.onGetBrightness).onSet(this.onSetBrightness),this.service.getCharacteristic(this.homebridge.hap.Characteristic.ColorTemperature).onGet(this.onGetTemperature).onSet(this.onSetTemperature)}onUpdate(r){let n=this.transformRange(r.luminance,[1800,3e3],[140,500]);this.log.debug(`Strip: ${this.device.name} State: ${r.state}`),this.log.debug(`Strip: ${this.device.name} Brightness: ${r.level}`),this.log.debug(`Strip: ${this.device.name} Luminance: ${r.luminance}`),this.log.debug(`Strip: ${this.device.name} Temperature: ${n}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.On,r.state==="On"),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.Brightness,r.level||0),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.ColorTemperature,n)}transformRange(r,n,i){let o=(100-(Math.min(Math.max(r,n[0]),n[1])-n[0])*100/(n[1]-n[0]))*(i[1]-i[0])/100,u=Math.floor(o+i[0]);return Math.min(Math.max(u,i[0]),i[1])}};var Pc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>(this.log.debug(`Switch Get State: ${this.device.name} ${this.device.status.state}`),this.device.status.state==="On");this.onSetState=r=>ke(this,null,function*(){let n=r?"On":"Off";this.device.status.state!==n&&(this.log.debug(`Switch Set State: ${this.device.name} ${n}`),yield this.device.set({state:n}))});this.service=this.accessory.getService(this.homebridge.hap.Service.Switch)||this.accessory.addService(this.homebridge.hap.Service.Switch,this.device.name),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,this.device.name),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.On).onGet(this.onGetState).onSet(this.onSetState)}onUpdate(r){this.log.debug(`Switch: ${this.device.name} state: ${r.state}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.On,r.state==="On")}};var Lc=class extends De{constructor(r,n,i){super(r,n,i);this.onGetState=()=>(this.log.debug(`Timeclock get state: ${this.device.name} ${this.device.status.state}`),this.device.status.state==="On");let a=`${this.device.name} (Timeclock)`;this.service=this.accessory.getService(this.homebridge.hap.Service.Switch)||this.accessory.addService(this.homebridge.hap.Service.Switch,a),this.service.addCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName),this.service.setCharacteristic(this.homebridge.hap.Characteristic.Name,a),this.service.setCharacteristic(this.homebridge.hap.Characteristic.ConfiguredName,this.device.name),this.service.getCharacteristic(this.homebridge.hap.Characteristic.On).onGet(this.onGetState)}onUpdate(r){this.log.debug(`Timeclock: ${this.device.name} state: ${r.state}`),this.service.updateCharacteristic(this.homebridge.hap.Characteristic.On,r.state==="On")}};var Zn=class{static create(t,r,n,i){switch(r.type){case ir.DeviceType.Contact:return n.cco===!1?void 0:new wc(t,r,i);case ir.DeviceType.Dimmer:return n.dimmers===!1?void 0:new Bc(t,r,i);case ir.DeviceType.Fan:return n.fans===!1?void 0:new Rc(t,r,i);case ir.DeviceType.Keypad:return n.keypads===!1?void 0:new fs(t,r,i);case ir.DeviceType.Occupancy:return n.sensors===!1?void 0:new Oc(t,r,i);case ir.DeviceType.Remote:return n.remotes===!1?void 0:new fs(t,r,i);case ir.DeviceType.Shade:return n.shades===!1?void 0:new Nc(t,r,i);case ir.DeviceType.Strip:return n.strips===!1?void 0:new Dc(t,r,i);case ir.DeviceType.Switch:return n.switches===!1?void 0:new Pc(t,r,i);case ir.DeviceType.Timeclock:return n.timeclocks===!1?void 0:new Lc(t,r,i)}}static get(t,r){let n=t.hap.uuid.generate(r.id);return Ic.get(n)}static remove(t,r){let n=t.hap.uuid.generate(r.id),i=Jn.get(n);i!=null&&t.unregisterPlatformAccessories(aa,ia,[i])}};var bb={cco:!1,dimmers:!1,fans:!1,keypads:!0,sensors:!0,remotes:!0,shades:!1,strips:!0,switches:!1,timeclocks:!0};var Jn=new Map,Ic=new Map,ia="Lutron",aa="@mkellsy/homebridge-lutron";var kc=class{constructor(t,r,n){this.onAvailable=t=>{for(let r of t){console.log(`[PLATFORM AVAILABLE] Device: ${r.name}, Type: ${r.type}, ID: ${r.id}`);let n=Zn.create(this.homebridge,r,this.config,this.log);n!=null?(console.log("[PLATFORM AVAILABLE] Created accessory, registering..."),n.register()):console.log("[PLATFORM AVAILABLE] No accessory created (disabled in config)"),this.log.debug(`${r.type} available ${r.name}`),n==null&&Zn.remove(this.homebridge,r)}};this.onAction=(t,r,n)=>{console.log(`[PLATFORM ACTION] Device: ${t.name}, Type: ${t.type}, ID: ${t.id}, Button: ${r.name}, Action: ${n}`);let i=Zn.get(this.homebridge,t);if(i==null){console.log(`[PLATFORM ACTION ERROR] Accessory not found for device ${t.name} (ID: ${t.id})`),console.log(`[PLATFORM ACTION ERROR] UUID would be: ${this.homebridge.hap.uuid.generate(t.id)}`);return}if(i.onAction==null){console.log(`[PLATFORM ACTION ERROR] Accessory found but no onAction handler for device ${t.name}`);return}i.onAction(r,n)};this.onUpdate=(t,r)=>{let n=Zn.get(this.homebridge,t);n==null||n.onUpdate==null||n.onUpdate(r)};this.log=t,this.config=_n(_n({},bb),r),this.homebridge=n,this.homebridge.on("didFinishLaunching",()=>{xb.connect().on("Available",this.onAvailable).on("Action",this.onAction).on("Update",this.onUpdate)})}configureAccessory(t){Jn.set(t.UUID,t)}};module.exports=e=>{e.registerPlatform(aa,ia,kc)};
//# sourceMappingURL=index.js.map
